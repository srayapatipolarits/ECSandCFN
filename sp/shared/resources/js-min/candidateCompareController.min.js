function candidateCompareController($scope,$element,$attrs,$http,$timeout,ajaxService,$rootScope,ProfileDataService,$localStorage){$scope.prismLabelContent=!1,$scope.prismLabelContent1=!1,$scope.label="",$scope.selectedCandidate={},$scope.memberMasterList={},$scope.validMemberList=[],$scope.candidateMasterList={},$scope.validCandidateList=[],$scope.selectedMemberDetails={},$scope.candidateProfileDetails={},$scope.memberProfileDetails={},$scope.showMemberListingWidget=!1,$scope.memberSelected=!1,$scope.returnBack=function(){window.history.back()},$scope.getSelectedCandidateDetails=function(){$scope.selectedCandidateEmailAddress=$localStorage.get("candidateEmail");var _o={url:"/sp/hiring/getProfileDetails",data:$.param({candidateEmail:$scope.selectedCandidateEmailAddress}).replace(/%40/g,"@")};ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&($scope.selectedCandidate=response.userProfileForm,$scope.selectedCandidate.hiringRoles=response.hiring.hiringRoles,$scope.selectedCandidate.profilePic=response.hiring.smallProfileImage,$scope.selectedCandidate.userInitials=response.hiring.userInitials,$scope.candidateSelected=!0)})},$scope.getAllMemberDetails=function(){var _o={url:"/sp/relationship/getMembers",data:$.param({candidateEmail:$localStorage.get("candidateEmail")}).replace(/%40/g,"@")};ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&($scope.memberMasterList=response.memberList,jQuery.each($scope.memberMasterList,function(i,j){var newList=jQuery.extend({},$scope.memberMasterList[i],{selectedMember:!1});$scope.validMemberList.push(newList)}))})},$scope.getAllCandidateDetails=function(){var _o={url:"/sp/hiring/getAllCandidates"};ajaxService.getAjaxResponse(_o).then(function(response){if("true"===response.Success){var counter=0;$scope.candidateMasterList=response.hiring,jQuery.each($scope.candidateMasterList,function(i,j){var newList;"VALID"===$scope.candidateMasterList[i].userStatus&&(null===$scope.candidateMasterList[i].spUserId?(newList=jQuery.extend({},$scope.candidateMasterList[i],{selectedCandidateFromList:!1}),$scope.validCandidateList.push(newList)):$scope.candidateMasterList[i].profileSettings.hiringAccessAllowed===!0&&(newList=jQuery.extend({},$scope.candidateMasterList[i],{selectedCandidateFromList:!1}),$scope.validCandidateList.push(newList))),counter++}),counter===$scope.candidateMasterList.length&&$.each($scope.validCandidateList,function(i){$scope.validCandidateList[i].email===$localStorage.get("candidateEmail")&&($scope.validCandidateList[i].selectedCandidateFromList=!0)})}})},$scope.showDropdownWidget=function(side){"right"===side?($scope.showMemberListingWidget=!$scope.showMemberListingWidget,$scope.showCandidateListingWidget=!1):($scope.showCandidateListingWidget=!$scope.showCandidateListingWidget,$scope.showMemberListingWidget=!1)},$scope.compareToolReset=function(){$scope.showContent=!1,$scope.showMemberListingWidget=!1,$scope.memberSelected=!1,$scope.showCandidateListingWidget=!1,$scope.candidateSelected=!1,$scope.selectedCandidateEmailAddress=null,$scope.selectedMemberEmailAddress=null,jQuery.each($scope.validMemberList,function(j){$scope.validMemberList[j].selectedMember=!1}),jQuery.each($scope.validCandidateList,function(j){$scope.validCandidateList[j].selectedCandidateFromList=!1})},$scope.updateCompareMember=function(i){$scope.showMemberListingWidget=!1,jQuery.each($scope.validMemberList,function(j){$scope.validMemberList[j].selectedMember=!1}),jQuery.each($scope.validMemberList,function(j){return $scope.validMemberList[j].email===i?($scope.validMemberList[j].selectedMember=!0,$scope.memberSelected=!0,$scope.selectedMemberDetails=$scope.validMemberList[parseInt(j)],$scope.selectedMemberEmailAddress=$scope.validMemberList[parseInt(j)].email,void $scope.compareCandidate($scope.selectedCandidateEmailAddress,$scope.selectedMemberEmailAddress)):void 0})},$scope.updateCompareCandidate=function(i){$scope.showCandidateListingWidget=!1,jQuery.each($scope.validCandidateList,function(j){$scope.validCandidateList[j].selectedCandidateFromList=!1}),jQuery.each($scope.validCandidateList,function(j){$scope.validCandidateList[j].email===i&&($scope.validCandidateList[parseInt(j)].selectedCandidateFromList=!0,$scope.candidateSelected=!0,$scope.selectedCandidate=$scope.validCandidateList[parseInt(j)],$scope.selectedCandidateEmailAddress=$scope.validCandidateList[parseInt(j)].email,$scope.compareCandidate($scope.selectedCandidateEmailAddress,$scope.selectedMemberEmailAddress))})},$scope.compareCandidate=function(c,m){if($scope.candidateSelected&&$scope.memberSelected){var _o={url:"/sp/hiring/compareProfile",data:$.param({candidateEmail:c,memberEmail:m}).replace(/%40/g,"@")};ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&($scope.compareProfileData=response,$scope.candidateProfileDetails=response.candidateAnalysis,$scope.memberProfileDetails=response.memberAnalysis,$scope.personalityFormatted={candidate:{primary:$rootScope.pullInterNationalization("profileKeys."+$scope.candidateProfileDetails.personality.Primary.personalityType.trim()),pressure:$rootScope.pullInterNationalization("profileKeys."+$scope.candidateProfileDetails.personality.UnderPressure.personalityType.trim())},member:{primary:$rootScope.pullInterNationalization("profileKeys."+$scope.memberProfileDetails.personality.Primary.personalityType.trim()),pressure:$rootScope.pullInterNationalization("profileKeys."+$scope.memberProfileDetails.personality.UnderPressure.personalityType.trim())}},ProfileDataService.saveCandidate(response),ProfileDataService.saveMember(response),$timeout(function(){$scope.dataAvailablity=!0},300))})}},$scope.initCandiateCompare=function(){$scope.getSelectedCandidateDetails(),$scope.getAllMemberDetails(),$scope.getAllCandidateDetails()},$scope.printPage=function(f){f===!0&&setTimeout(function(){window.print()},500)},$scope.initCandiateCompare()}angular.module("spApp").controller("candidateCompareController",candidateCompareController),candidateCompareController.$inject=["$scope","$element","$attrs","$http","$timeout","ajaxService","$rootScope","ProfileDataService","$localStorage"];