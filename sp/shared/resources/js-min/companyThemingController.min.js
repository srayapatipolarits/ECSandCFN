function companyThemingController($scope,ajaxService,$localStorage,ngDialog,sharedProperties,filterFilter,$filter,$rootScope,$timeout){function themeNavDDChange(id){var $contentArea=$(".main-support-content, .theme-content");$contentArea.find(".theme-section").addClass("hide"),$contentArea.find(".theme-section[data-tab='"+id+"']").removeClass("hide")}function switchThemeView(view){"preview"===view?(self.themeViewMode="preview",jQuery(".theme-normal").fadeOut(),jQuery(".theme-preview").fadeIn()):(self.themeViewMode="normal",jQuery(".theme-preview").fadeOut(),jQuery(".theme-normal").fadeIn())}function cloneOrCreateNewSettings(obj){"new"===obj.mode?window.location.href="/sp/sysAdmin/company/theming/update?id="+obj.id:(self.selectedCompanyId=obj.id,self.selectedCompanyName=obj.name,self.selectedCompanyAdminAccess=obj.hasThemeAccess,self.selectedCompanyLogo=obj.logo),ngDialog.close()}function filterResults(){var resp=$filter("companyThemingFilter")(self.masterCompanyList,self.filterType,self.searchText,filterFilter);self.dataSorted&&(resp=$filter("orderBy")(resp,self.lastPredicate,self.lastReverse)),self.companyList=[],self.companyList=resp}function clearSearch(){""!==self.searchText&&(self.searchText=""),self.filterResults()}function getAllCustomizedCompanies(){ajaxService.getAjaxResponse({url:self.serviceApis.getAllCustomizedCompanies,method:"POST"}).then(function(response){"true"===response.Success?(self.responseAvailable=!0,self.masterCompanyList=response.companyList,self.companyList=angular.copy(self.masterCompanyList)):null!==response.error&&sharedProperties.ajaxError(response.error)})}function getAllNonCustomizedCompanies(type){ajaxService.getAjaxResponse({url:self.serviceApis.getAllNonCustomizedCompanies,method:"POST"}).then(function(response){"true"===response.Success?(self.masterCompanyNonCustomizedList=response.companyList,self.companyNonCustomizedList=angular.copy(self.masterCompanyNonCustomizedList),self.responseAvailableForModal=!0,openSelectCompanyModal(type)):null!==response.error&&sharedProperties.ajaxError(response.error)})}function updateThemeAccess(status){ajaxService.getAjaxResponse({url:!0===status?self.serviceApis.activateThemeAccess:self.serviceApis.deactivateThemeAccess,data:$.param({companyId:self.selectedCompanyId})}).then(function(response){"true"===response.Success?sharedProperties.growlMessage($rootScope.pullInterNationalization("manageAccountContent.statusUpdated")):null!==response.error&&sharedProperties.ajaxError(response.error)})}function updateThemeData(type){prepareColorMap();var companyThemeForm={companyId:"superAdmin"===type?self.selectedCompanyId:"",stylesMap:self.themeFormMap};ajaxService.getAjaxResponse({url:"superAdmin"===type?self.serviceApis.updateThemeData:self.serviceApis.updateThemeDataForAccountAdmin,data:companyThemeForm,headers:{"Content-Type":"application/json"}}).then(function(response){"true"===response.Success?(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.themeSaved")),"superAdmin"!==type&&sharedProperties.fireAnalyticsEvent("Manage Account | Theme Updated","N/A"),$timeout(function(){jQuery(".theme-preview").fadeOut(),jQuery(".theme-normal").fadeIn()},500)):null!==response.error&&sharedProperties.ajaxError(response.error)})}function resetThemeModal(type,id){$scope.resetThemeRequest=type,$scope.resetCompanyId=id,ngDialog.open({template:"/sp/resources/html/sysAdmin/theming/reset-theme-modal.html",scope:$scope})}function resetToOriginalTheme(){ajaxService.getAjaxResponse({url:self.serviceApis.resetToOriginalTheme,data:$.param({companyId:"default"})}).then(function(response){ngDialog.close(),"true"===response.Success?(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.themeReset")),$timeout(function(){window.location.reload()},500)):null!==response.error&&sharedProperties.ajaxError(response.error)})}function resetToDefaultTheme(type,id){ajaxService.getAjaxResponse({url:"superAdmin"===type?self.serviceApis.resetToDefaults:self.serviceApis.resetToDefaultsForAccountAdmin,data:"superAdmin"===type?$.param({companyId:id}):""}).then(function(response){ngDialog.close(),"true"===response.Success?(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.themeResetDefault")),"superAdmin"!==type&&sharedProperties.fireAnalyticsEvent("Manage Account | Company theme reset to defaults","N/A"),$timeout(function(){window.location.reload()},500)):null!==response.error&&sharedProperties.ajaxError(response.error)})}function openSelectCompanyModal(type){self.createMode=type,ngDialog.open({template:self.serviceApis.openCompanyModal,scope:$scope}).closePromise.then(function(data){self.companySearchText=""})}function selectCompany(type){self.masterCompanyNonCustomizedList.length?openSelectCompanyModal(type):getAllNonCustomizedCompanies(type)}function resetResults(){self.searchText="",self.dataSorted=!1,self.filterType="all",self.companyList=[],self.companyList=angular.copy(self.masterCompanyList)}function active(event,setting){self.lastPredicate=setting.predicate,self.lastReverse=setting.reverse,sharedProperties.toggleFilterClick(event,self.lastPredicate),self.sortResults(self.lastPredicate,self.lastReverse)}function sortResults(predicate,reverse){self.lastPredicate=predicate,self.lastReverse=reverse;var resp=$filter("orderBy")(self.masterCompanyList,predicate,reverse);resp=$filter("companyThemingFilter")(resp,self.filterType,self.searchText,filterFilter),self.companyList=[],self.companyList=resp,self.dataSorted=!0}function getThemeData(type){var param=getParameter("id");null===param&&(param="default"),self.selectedCompanyId=param,ajaxService.getAjaxResponse({url:"superAdmin"===type?self.serviceApis.getDetails:self.serviceApis.getDetailsForAccountAdmin,data:"superAdmin"===type?$.param({companyId:param}):"",method:"POST"}).then(function(response){"true"===response.Success?(self.themeData=response.compThemeDetail,self.selectedCompanyName=self.themeData.name,self.selectedCompanyAdminAccess=self.themeData.hasThemeAccess,self.selectedCompanyLogo=self.themeData.logoURL,void 0===self.themeData.companyTheme.stylesMap.spSubNavBackgroundColor&&(self.themeData.companyTheme.stylesMap.spSubNavBackgroundColor="#f9b858"),$("#showMainNavBgColor").spectrum("set",self.themeData.companyTheme.stylesMap.spMainNavBackgroundColor),$("#showMainNavHoverColor").spectrum("set",self.themeData.companyTheme.stylesMap.spMainNavColor),$("#showSubNavBgColor").spectrum("set",self.themeData.companyTheme.stylesMap.spSubNavBackgroundColor),$("#showSubNavLinkColor").spectrum("set",self.themeData.companyTheme.stylesMap.spSubNavLinkColor),$("#showButtonColor").spectrum("set",self.themeData.companyTheme.stylesMap.spButtonColor),$("#showIconColor").spectrum("set",self.themeData.companyTheme.stylesMap.spIconColor),$("#showLinkColor").spectrum("set",self.themeData.companyTheme.stylesMap.spLinkColor),$("#showLinkHoverColor").spectrum("set",self.themeData.companyTheme.stylesMap.spLinkHoverColor),self.buttonHoverColor=self.themeData.companyTheme.stylesMap.spButtonHoverColor,$("#showPanelAccent").spectrum("set",self.themeData.companyTheme.stylesMap.spPanelAccentbarColor),$("#showHeaderAccent").spectrum("set",self.themeData.companyTheme.stylesMap.spHeaderAccentbarColor),$("#showSignInAccent").spectrum("set",self.themeData.companyTheme.stylesMap.spSigninAccentbarColor),$("#showHeaderTitleColor").spectrum("set",self.themeData.companyTheme.stylesMap.spHeaderTitleColor),$("#showFooterBackgroundColor").spectrum("set",self.themeData.companyTheme.stylesMap.spFooterBackgroundColor),$("#showFooterNavTextColor").spectrum("set",self.themeData.companyTheme.stylesMap.spFooterNavigationTextColor),$("#showFooterNavHoverColor").spectrum("set",self.themeData.companyTheme.stylesMap.spFooterNavigationHoverColor),$(".section-preview-content .nav-main-app, .theme-mock-nav .mock-top-nav").css("background-color",$("#showMainNavBgColor").val()),$(".section-preview-content .nav-dashboard h2 span, .theme-mock-nav .mock-top-nav li").css("color","#fff"),$(".section-preview-content .nav-dashboard h2.active span, .theme-mock-nav .mock-top-nav li.active").css("color",$("#showMainNavHoverColor").val()),$(".section-preview-content .nav-dashboard h2 span, .theme-mock-nav .mock-top-nav li").mouseover(function(){$(this).css("color",$("#showMainNavHoverColor").val())}).mouseout(function(){$(this).css("color","#fff")}),$(".section-preview-content .share-update .share-update-theme").css({"background-color":$("#showSubNavBgColor").val()}),$(".section-preview-content .share-update .file-stack-dashboard-pos").css({color:$("#showSubNavBgColor").val()}),$(".section-preview-content .share-update .icon-tab-member").css({color:$("#showSubNavBgColor").val()}),$(".section-preview-content .share-update .icon-mini-poll").css({color:$("#showSubNavBgColor").val()}),$(".section-preview-content .nav-main-app-toc li.active a span, .theme-mock-nav .mock-bot-nav li.active").css({color:$("#showSubNavLinkColor").val(),"border-color":$("#showSubNavLinkColor").val()}),$(".section-preview-content .nav-main-app-toc li a, .section-preview-content .nav-main-app-toc li.active a").mouseover(function(){$(this).find("span").css({color:$("#showSubNavLinkColor").val(),"border-color":$("#showSubNavLinkColor").val()})}).mouseout(function(){$(this).find("span").css({color:"#fff","border-color":"none"})}),$(".theme-mock-nav .mock-bot-nav li").mouseover(function(){$(this).css({color:$("#showSubNavLinkColor").val(),"border-color":$("#showSubNavLinkColor").val()})}).mouseout(function(){$(this).css({color:"#fff","border-color":"transparent"})}),$(".theme-mock-nav .mock-bot-nav li.active").mouseover(function(){$(this).css({color:$("#showSubNavLinkColor").val(),"border-color":$("#showSubNavLinkColor").val()})}).mouseout(function(){$(this).css({color:$("#showSubNavLinkColor").val(),"border-color":$("#showSubNavLinkColor").val()})}),$(".section-preview-content .sp-btn-color").css({"border-bottom":"none",background:$("#showButtonColor").val(),"box-shadow":"0px 4px 0px -2px "+self.buttonHoverColor}),$(".section-preview-content .sp-btn-color").hover(function(){$(this).css("background-color",self.buttonHoverColor)}).mouseout(function(){$(this).css("background-color",$("#showButtonColor").val())}),$(".section-preview-content .sp-background-color").css("background-color",$("#showButtonColor").val()),$(".section-preview-content .sp-icon-color").css("color",$("#showIconColor").val()),$(".section-preview-content a").css("color",$("#showLinkColor").val()),$(".section-preview-content .sp-link-color").css("color",$("#showLinkColor").val()),$(".section-preview-content a").mouseover(function(){$(this).css("color",$("#showLinkHoverColor").val())}).mouseout(function(){$(this).css("color",$("#showLinkColor").val())}),$(".section-preview-content .sp-panel-accent").css("border-top","4px solid "+$("#showPanelAccent").val()),$(".section-preview-content .sp-header-accent").css("background-color",$("#showHeaderAccent").val()),$(".section-preview-content .new-app-header-wrap").css("border-bottom","4px solid "+$("#showSignInAccent").val()),$(".section-preview-content .sp-header-title-color").css("color",$("#showHeaderTitleColor").val()),$(".section-preview-content .footer-wrapper").css("background",$("#showFooterBackgroundColor").val()),$(".section-preview-content .sp-footer-text-color").css("color",$("#showFooterNavTextColor").val()),$(".section-preview-content footer a").mouseover(function(){$(this).css("color",$("#showFooterNavHoverColor").val())}).mouseout(function(){$(this).css("color",$("#showFooterNavTextColor").val())})):null!==response.error&&sharedProperties.ajaxError(response.error)})}function uploadCompanyLogo(userType){self.imageEditBox=!1,$scope.themeCompanyId=self.selectedCompanyId,$scope.uploadUserType=userType,ngDialog.open({template:"/sp/resources/html/admin/account/upload-company-pic.html",scope:$scope})}function deleteImageModal(){self.imageEditBox=!1,$scope.imageType="company",ngDialog.open({template:"/sp/resources/html/admin/account/delete-image-modal.html",scope:$scope})}function showImageEdit(){self.imageEditBox=!self.imageEditBox,null===self.selectedCompanyLogo&&(self.uploadCompanyLogo(),self.imageEditBox=!1)}var self=this;self.serviceApis={updateTheme:"/sp/sysAdmin/company/theming/createTheme",getDetails:"/sp/sysAdmin/company/theming/getThemeDetail",getAllCustomizedCompanies:"/sp/sysAdmin/company/theming/getAllCustomizedCompany",getAllNonCustomizedCompanies:"/sp/sysAdmin/company/theming/getAllNotCustomizedCompany",openCompanyModal:"/sp/sysAdmin/company/theming/selectCompany",resetToDefaults:"/sp/sysAdmin/company/theming/removeThemeSettings",activateThemeAccess:"/sp/sysAdmin/company/theming/activate",deactivateThemeAccess:"/sp/sysAdmin/company/theming/deactivate",updateThemeData:"/sp/sysAdmin/company/theming/createTheme",getDetailsForAccountAdmin:"/sp/admin/company/getThemeDetail",updateThemeDataForAccountAdmin:"/sp/admin/company/saveTheme",resetToDefaultsForAccountAdmin:"/sp/admin/company/resetTheme",resetToOriginalTheme:"/sp/sysAdmin/company/theming/resetTheme"},self.responseAvailable=!1,self.responseAvailableForModal=!1,self.companySearchText="",self.searchText="",self.masterCompanyList=[],self.companyList=[],self.masterCompanyNonCustomizedList=[],self.companyNonCustomizedList=[],self.themeData={},self.selectedCompanyId="default",self.selectedCompanyName="default",self.selectedCompanyAdminAccess=!1,self.selectedCompanyLogo="",self.lastPredicate="name",self.lastReverse=!1,self.companyInfo={},self.filterType="all",self.themeFormMap={},self.dataSorted=!1,self.imageEditBox=!1,self.createMode="",self.buttonHoverColor="",self.themeViewMode="normal",self.selectCompany=selectCompany,self.getAllCustomizedCompanies=getAllCustomizedCompanies,self.active=active,self.sortResults=sortResults,self.resetResults=resetResults,self.getThemeData=getThemeData,self.updateThemeAccess=updateThemeAccess,self.resetToDefaultTheme=resetToDefaultTheme,self.resetThemeModal=resetThemeModal,self.updateThemeData=updateThemeData,self.cloneOrCreateNewSettings=cloneOrCreateNewSettings,self.filterResults=filterResults,self.clearSearch=clearSearch,self.uploadCompanyLogo=uploadCompanyLogo,self.deleteImageModal=deleteImageModal,self.showImageEdit=showImageEdit,self.getAllNonCustomizedCompanies=getAllNonCustomizedCompanies,self.switchThemeView=switchThemeView,self.resetToOriginalTheme=resetToOriginalTheme,self.themeNavDD=1,self.themeNavDDChange=themeNavDDChange;var prepareColorMap=function(){self.themeFormMap.spMainNavBackgroundColor=$("#showMainNavBgColor").val(),self.themeFormMap.spMainNavColor=$("#showMainNavHoverColor").val(),self.themeFormMap.spSubNavBackgroundColor=$("#showSubNavBgColor").val(),self.themeFormMap.spSubNavLinkColor=$("#showSubNavLinkColor").val(),self.themeFormMap.spButtonColor=$("#showButtonColor").val(),self.themeFormMap.spButtonHoverColor=self.buttonHoverColor,self.themeFormMap.spIconColor=$("#showIconColor").val(),self.themeFormMap.spLinkColor=$("#showLinkColor").val(),self.themeFormMap.spLinkHoverColor=$("#showLinkHoverColor").val(),self.themeFormMap.spPanelAccentbarColor=$("#showPanelAccent").val(),self.themeFormMap.spHeaderAccentbarColor=$("#showHeaderAccent").val(),self.themeFormMap.spSigninAccentbarColor=$("#showSignInAccent").val(),self.themeFormMap.spHeaderTitleColor=$("#showHeaderTitleColor").val(),self.themeFormMap.spFooterBackgroundColor=$("#showFooterBackgroundColor").val(),self.themeFormMap.spFooterNavigationTextColor=$("#showFooterNavTextColor").val(),self.themeFormMap.spFooterNavigationHoverColor=$("#showFooterNavHoverColor").val()},getParameter=function(val){for(var query=window.location.search.substring(1),vars=query.split("&"),pair=[],i=0;i<vars.length;i++)return pair=vars[i].split("="),pair[0]===val?pair[1]:null},darkerButtonColor=function(buttonColor){function hex(x){return("0"+parseInt(x).toString(16)).slice(-2)}var splitRGB=buttonColor.substring(buttonColor.indexOf("(")+1,buttonColor.lastIndexOf(")")).split(/,\s*/),red=parseInt(splitRGB[0])-51,green=parseInt(splitRGB[1])-51,blue=parseInt(splitRGB[2])-51;return red=red>0?red:0,green=green>0?green:0,blue=blue>0?blue:0,"#"+hex(red)+hex(green)+hex(blue)};jQuery(function($){if(jQuery(".theme-preview").hide(),$(".admin-theming-section").length||$(".tm-wrapper").length){var $list=$(".nav-support-link-list, .theme-nav"),$contentArea=$(".main-support-content, .theme-content");$list.find("li a").on("click",function(){var _this=$(this),listId=_this.attr("data-list");_this.text();toggleHideShow(listId,_this),$("html,body").animate({scrollTop:$(".admin-theming-section").offset().top},500)});var toggleHideShow=function(listId,_this){$list.find("li a").removeClass("active"),_this.addClass("active"),$contentArea.find(".support-customer").removeClass("local-show"),$contentArea.find(".support-customer[data-tab='"+listId+"']").addClass("local-show"),$contentArea.find(".theme-section").addClass("hide"),$contentArea.find(".theme-section[data-tab='"+listId+"']").removeClass("hide")};$("#showMainNavBgColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showMainNavHoverColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showSubNavBgColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showSubNavLinkColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showButtonColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showIconColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showLinkColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showLinkHoverColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showPanelAccent").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showHeaderAccent").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showSignInAccent").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showHeaderTitleColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showFooterBackgroundColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showFooterNavTextColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showFooterNavHoverColor").spectrum({showPalette:!0,showSelectionPalette:!0,palette:[],maxSelectionSize:21,preferredFormat:"hex3",showInput:!0,localStorageKey:"sp.colors"}),$("#showMainNavBgColor").on("change.spectrum",function(e,color){$(".section-preview-content .nav-main-app, .theme-mock-nav .mock-top-nav").css("background-color",color.toHexString())}),$("#showMainNavHoverColor").on("change.spectrum",function(e,color){$(".section-preview-content .nav-dashboard h2 span, .theme-mock-nav .mock-top-nav li").css("color","#fff"),$(".section-preview-content .nav-dashboard h2.active span, .theme-mock-nav .mock-top-nav li.active").css("color",color.toHexString()),$(".section-preview-content .nav-dashboard h2 span, .theme-mock-nav .mock-top-nav li").mouseover(function(){$(this).css("color",color.toHexString())}).mouseout(function(){$(this).not(".active").css("color","#fff")})}),$("#showSubNavBgColor").on("change.spectrum",function(e,color){$(".section-preview-content .share-update .share-update-theme").css({"background-color":color.toHexString()}),$(".section-preview-content .share-update .file-stack-dashboard-pos").css({color:color.toHexString()}),$(".section-preview-content .share-update .icon-tab-member").css({color:color.toHexString()}),$(".section-preview-content .share-update .icon-mini-poll").css({color:color.toHexString()})}),$("#showSubNavLinkColor").on("change.spectrum",function(e,color){$(".section-preview-content .nav-main-app-toc li.active a span, .theme-mock-nav .mock-bot-nav li.active").css({color:color.toHexString(),"border-color":color.toHexString()}),$(".section-preview-content .nav-main-app-toc li a, .section-preview-content .nav-main-app-toc li.active a").mouseover(function(){$(this).find("span").css({color:color.toHexString(),"border-color":color.toHexString()}),$(".theme-mock-nav .mock-bot-nav li.active").css({color:color.toHexString(),"border-color":color.toHexString()})}).mouseout(function(){$(this).find("span").css({color:"#fff","border-color":"none"})}),$(".theme-mock-nav .mock-bot-nav li").mouseover(function(){$(this).css({color:color.toHexString(),"border-color":color.toHexString()})}).mouseout(function(){$(this).css({color:"#fff","border-color":"transparent"})}),$(".theme-mock-nav .mock-bot-nav li.active").mouseover(function(){$(this).css({color:color.toHexString(),"border-color":color.toHexString()})}).mouseout(function(){$(this).css({color:color.toHexString(),"border-color":color.toHexString()})})}),$("#showButtonColor").on("change.spectrum",function(e,color){self.buttonHoverColor=darkerButtonColor(color.toRgbString()),$(".section-preview-content .sp-btn-color").css({"border-bottom":"none",background:color.toHexString(),"box-shadow":"0px 4px 0px -2px "+self.buttonHoverColor}),$(".section-preview-content .sp-btn-color").hover(function(){$(this).css("background-color",self.buttonHoverColor)}).mouseout(function(){$(this).css("background-color",color.toHexString())}),$(".section-preview-content .sp-background-color").css("background-color",color.toHexString())}),$("#showIconColor").on("change.spectrum",function(e,color){$(".section-preview-content .sp-icon-color").css("color",color.toHexString())}),$("#showLinkColor").on("change.spectrum",function(e,color){$(".section-preview-content a").css("color",color.toHexString()),$(".section-preview-content .sp-link-color").css("color",color.toHexString())}),$("#showLinkHoverColor").on("change.spectrum",function(e,color){$(".section-preview-content a").mouseover(function(){$(this).css("color",color.toHexString())}).mouseout(function(){$(this).css("color",$("#showLinkColor").val())})}),$("#showPanelAccent").on("change.spectrum",function(e,color){$(".section-preview-content .sp-panel-accent, .section-preview-content .box-preview").css("border-top","4px solid "+color.toHexString())}),$("#showHeaderAccent").on("change.spectrum",function(e,color){$(".section-preview-content .sp-header-accent").css("background-color",color.toHexString())}),$("#showSignInAccent").on("change.spectrum",function(e,color){$(".section-preview-content .new-app-header-wrap").css("border-bottom","solid 4px "+color.toHexString())}),$("#showHeaderTitleColor").on("change.spectrum",function(e,color){$(".section-preview-content .sp-header-title-color").css("color",color.toHexString())}),$("#showFooterBackgroundColor").on("change.spectrum",function(e,color){$(".section-preview-content .footer-wrapper").css("background",color.toHexString())}),$("#showFooterNavTextColor").on("change.spectrum",function(e,color){$(".section-preview-content .sp-footer-text-color").css("color",color.toHexString())}),$("#showFooterNavHoverColor").on("change.spectrum",function(e,color){$(".section-preview-content footer a").mouseover(function(){$(this).css("color",color.toHexString())}).mouseout(function(){$(this).css("color",$("#showFooterNavTextColor").val())})})}}),$scope.deleteImage=function(){ajaxService.getAjaxResponse({url:"/sp/media/company/deleteImage",data:$.param({companyId:self.selectedCompanyId})}).then(function(response){"true"===response.Success?(ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.imageDeleted")),sharedProperties.fireAnalyticsEvent("Manage Account | Company Logo deleted","N/A"),self.selectedCompanyLogo=null,$localStorage.remove("loggegdInProfile")):sharedProperties.growlMessage("Image delete process failed.","<strong> Alert </strong>","glyphicon glyphicon-ban-circle")})},$(document).on("imageSaved",function(e,data){$scope.$apply(function(){self.selectedCompanyLogo=data.imageData})}),$("body").click(function(e){$(".image-edit-box").is(e.target)||0!==$(".image-edit-box").has(e.target).length||$(".upload-icon").is(e.target)||self.imageEditBox&&$scope.$apply(function(){self.imageEditBox=!1})})}angular.module("spApp").controller("companyThemingController",companyThemingController),angular.module("spApp").filter("companyThemingFilter",function(){return function(items,filterType,searchText,filterFilter){var filtered=[];return angular.forEach(items,function(item){"all"===filterType?filtered.push(item):"adminAccess"===filterType&&item.hasThemeAccess?filtered.push(item):"customization"===filterType&&item.companyThemeActive&&filtered.push(item),""!==searchText&&(filtered=filterFilter(filtered,searchText))}),filtered}}),companyThemingController.$inject=["$scope","ajaxService","$localStorage","ngDialog","sharedProperties","filterFilter","$filter","$rootScope","$timeout"];