function profileMainController($scope,$timeout,ajaxService,$rootScope,sharedProperties,$localStorage,ngDialog,$sce,spConfig){function isObjectEmpty(prismObj){return 0===Object.keys(prismObj).length}function customInfoBox(action,id){if(1===action){var h=parseInt($("#pBox").outerHeight()+$("#mHead").outerHeight()+40,10);$("#"+id).css({height:h+"px"}).removeClass("hide")}else $("#"+id).addClass("hide")}function getGoals(id){ajaxService.getAjaxResponse({url:"/sp/goals/getGoalInfo",data:$.param({goalId:id})}).then(function(response){"true"===response.Success?viewDevelopmentStartegy(response):null!==response.error&&sharedProperties.ajaxError(response.error)})}function viewDevelopmentStartegy(goalResponse){_this.viewGoalsObj={},_this.viewStrategy=[],_this.winWidth=$(window).width(),_this.winHeight=$(window).height()+100+"px",_this.viewGoalsObj=goalResponse.goal,_this.viewStrategy=goalResponse.goal.developmentStrategyList;ngDialog.open({template:_this.winWidth>767?"/sp/resources/html/profile/viewDevelopmentStartegy.html":"/sp/resources/html/profile/viewDevelopmentStartegyResponsive.html",scope:$scope,className:_this.winWidth>767?"ngdialog-theme-default":"ngdialog-lnd-theme"})}function viewLensReport(id){var param={id:id};ajaxService.getAjaxResponse({url:spConfig.talentAnalytics.memberService.viewLensReportExt,data:$.param(param)}).then(function(response){if("true"===response.Success){_this.getInviteMemberDetail=response.hiringLens.lensResponse,_this.swotanalysis=response.hiringLens.lensResponse.swotanalysis,_this.lensDialog=!0;ngDialog.open({template:spConfig.talentAnalytics.memberService.dialog.viewLensReportExt,scope:$scope}).closePromise.then(function(data){_this.lensDialog=!1})}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function typeSelect(number){_this.activeProfileContent=number,_this.activeProfileSummary=number,$timeout(function(){_this.togglePrimaryGraph(number)},100)}function setContentReference(obj,type){var tempObj={data:obj,type:type};sharedProperties.setContentReference(tempObj),tempObj=null}function togglePrimaryGraph(id){sharedProperties.fireAnalyticsEvent("Prism Portrait | Change Primary Personality Tabs",0===_this.activeProfileSummary?"Viewed Primary Personality Tab":"Viewed Personality Under Pressure Tab");var g0=$("#personalityChart").find(".prismG0"),g1=$("#personalityChart").find(".prismG1"),g2=$("#personalityChart").find(".prismG2"),c0=$("#personalityChart").find(".crossLines0"),c1=$("#personalityChart").find(".crossLines1");_this.label="",_this.prismLabelContent=!1,jQuery(".outer-labels").find("p").removeClass("active"),1===id?(g0.attr({"fill-opacity":0,"stroke-width":0}),g1.attr({"fill-opacity":.6,"stroke-width":3,"stroke-opacity":.6,"stroke-dasharray":0}),c1.attr({"stroke-width":1}),c0.attr({"stroke-width":0}),g2.attr({"fill-opacity":.3,"stroke-opacity":.3,"stroke-dasharray":"3,6"})):(g0.attr({"fill-opacity":.3,"stroke-width":3,"stroke-opacity":.3,"stroke-dasharray":"3,6"}),g1.attr({"fill-opacity":0,"stroke-width":0,"stroke-opacity":0}),g2.attr({"fill-opacity":.6,"stroke-opacity":.6,"stroke-dasharray":0}),c1.attr({"stroke-width":0}),c0.attr({"stroke-width":1}))}function updateTab(tab,text,profile){var _profile=void 0!==profile&&null!==profile&&""!==profile?profile:0;_this.selectedTab=tab,_this.selectedTabText=text,_this.activeProfileSummary=_profile,_this.activeProfileContent=_profile,_this.mobileMenuShow=!1,_this.label="",_this.prismLabelContent=!1,jQuery(".outer-labels").find("p").removeClass("active"),$scope.selectedProfileTab=text,$timeout(function(){_this.typeSelect("9"===tab||9===tab?1:_profile),("7"===tab||7===tab)&&$(window).width()>767&&($(window).resize(),_this.activeProfileSummary=0,_this.activeProfileContent=0,_this.typeSelect(0))},200),_this.setContentReference({mainModule:"Prism",subModule:formatSubmoduleName(tab)},"prism"),sharedProperties.fireAnalyticsEvent("Prism Portrait | Click Personality Module Tab",formatSubmoduleName(tab))}function getCurrentUserEmail(){var getProfileDetails,getEmail=!1;return!0===$rootScope.profileReady&&(getProfileDetails=$localStorage.get("loggegdInProfile"),getEmail=getProfileDetails.member.email),getEmail}function getTokenDetails(){var _location=window.location.href,_getToken=_location.split("/"),_token=_getToken[_getToken.length-1];return _this.publicToken=_token,_token}function setOptions(o){var memberEmail=sharedProperties.getParam("email"),candidateEmail=void 0!==sharedProperties.getParam("cemail")&&null!==sharedProperties.getParam("cemail")&&""!==sharedProperties.getParam("cemail")?sharedProperties.getParam("cemail").replace(/%2B/g,"+").split("+")[0]:null,defaultEmail=getCurrentUserEmail(),_options={},hashUsed=""!==window.location.hash&&null!==window.location.hash&&void 0!==window.location.hash;if(_this.publicToken=!1,null===memberEmail&&null!==_this.activeUser&&(memberEmail=_this.activeUser.email),"publicProfile"===o||"spCertificate"===o){var token=getTokenDetails(),updatedUrl="publicProfile"===o?_this.prismServices.publicProfile:_this.prismServices.spCertificate;void 0!==token&&null!==token&&(_this.winWidth<768?(_this.selectedTab=0,_this.mobileHelpLink=!0):_this.selectedTab=8,_options={url:updatedUrl+token},cachedPrismCheck(_options,token))}else if(void 0!==memberEmail&&null!==memberEmail)_options={url:_this.prismServices.member,data:$.param({email:memberEmail})},cachedPrismCheck(_options,memberEmail);else if(void 0!==candidateEmail&&null!==candidateEmail)_options={url:_this.prismServices.candidate,data:$.param({userId:sharedProperties.getParam("cemail").replace(/%2B/g,"+").split("+")[1]})},cachedPrismCheck(_options,sharedProperties.getParam("cemail").replace(/%2B/g,"+").split("+")[1]);else if("sharePortrait"===o)_options={url:window.location.pathname},_this.externalLink=!0,getPrismAnalysis(_options);else if("sharePortraitUser"===o)_options={url:_this.prismServices.sharePortraitUser},_this.sharePortrait=!0,_this.externalLink=!0,getPrismAnalysis(_options);else if("publicAnalysis"===o){var publicToken=getTokenDetails();void 0!==publicToken&&null!==publicToken&&(_options={url:_this.prismServices.publicAnalysis+publicToken},cachedPrismCheck(_options,publicToken))}else"partnerAnalysis"===o?(_options={url:_this.prismServices.partnerAnalysis},getPrismAnalysis(_options)):(_options={url:_this.prismServices.member,data:$.param({email:defaultEmail})},cachedPrismCheck(_options,defaultEmail),!hashUsed&&_this.urlTab>-1&&(_this.selectedTab=_this.urlTab,$timeout(function(){window.location.href=window.location.href+"#noRef"},200)));$timeout(function(){_this.setContentReference({mainModule:"Prism",subModule:"Personality"},"prism")},1e3),$rootScope.showStickyTutorial=!0}function cachedPrismCheck(options,id){var storedProfile=$localStorage.get(id);_this.isAnalysisLoaded=!1,_this.prismData=null,_this.prismContent=null,void 0!==storedProfile&&null!==storedProfile?(_this.prismData=storedProfile.Analysis,_this.prismContent=storedProfile,_this.prismPrimaryGoals=void 0!==storedProfile.primaryGoals&&null!==storedProfile.primaryGoals?storedProfile.primaryGoals:null,_this.prismSecondaryGoals=void 0!==storedProfile.underPressureGoals&&null!==storedProfile.underPressureGoals?storedProfile.underPressureGoals:null,_this.showSpProfile=void 0!==storedProfile.Analysis,_this.personalityVideo1=$rootScope.pullInterNationalization("profile.video."+_this.prismData.personality.Primary.personalityType),_this.personalityVideo2=$rootScope.pullInterNationalization("profile.video."+_this.prismData.personality.UnderPressure.personalityType),void 0!==storedProfile.user&&null!==storedProfile.user&&(_this.userDetails=storedProfile.user),void 0!==storedProfile.hiringUser&&null!==storedProfile.hiringUser&&(_this.hiringUserDetails=storedProfile.hiringUser,_this.hiringUserFeedBack=storedProfile.feedbackFlow),$timeout(function(){_this.isAnalysisLoaded=!0},100),_this.winWidth<768&&_this.updateTab(0,$rootScope.pullInterNationalization("prismTab1"),0),$scope.selectedProfileTab=$rootScope.pullInterNationalization("prismTab1"),$timeout(function(){docRapFinishedFlag=!0},3e3)):getPrismAnalysis(options)}function getPrismAnalysis(options){ajaxService.getAjaxResponse(options).then(function(response){if("true"===response.Success)_this.analysisError=!1,!1!==_this.publicToken?_this.showSpProfile=void 0!==response.Analysis:void 0!==options.data&&$localStorage.set(options.data.split("=")[1].replace(/%40/g,"@"),response),void 0!==response.user&&null!==response.user&&(_this.userDetails=response.user),void 0!==response.hiringUser&&null!==response.hiringUser&&(_this.hiringUserDetails=response.hiringUser,_this.hiringUserFeedBack=response.feedbackFlow),_this.prismData=response.Analysis,_this.prismContent=response,_this.prismPrimaryGoals=void 0!==response.primaryGoals&&null!==response.primaryGoals?response.primaryGoals:null,_this.prismSecondaryGoals=void 0!==response.underPressureGoals&&null!==response.underPressureGoals?response.underPressureGoals:null,_this.personalityVideo1=$rootScope.pullInterNationalization("profile.video."+_this.prismData.personality.Primary.personalityType),_this.personalityVideo2=$rootScope.pullInterNationalization("profile.video."+_this.prismData.personality.UnderPressure.personalityType),_this.sharePortrait&&(_this.rolesList=response.rolesAndMatch),$timeout(function(){_this.isAnalysisLoaded=!0},100),_this.winWidth<768&&_this.updateTab(0,$rootScope.pullInterNationalization("prismTab1"),0,!1,!0,!0),$scope.selectedProfileTab="Personality Profile",$timeout(function(){docRapFinishedFlag=!0},3e3);else if(null!==response.error)if(docRapFinishedFlag=!1,sharedProperties.ajaxError(response.error),_this.isAnalysisLoaded=!1,!1!==_this.publicToken)window.location.href="/?status=404";else if(_this.externalLink)window.location.href="/?status=profileExpired";else{_this.analysisError=!0;for(var key in response.error)_this.analysisErrorContent=response.error[key]}})}function videoPopUp(url,type){void 0!==type&&"personalityVideo"===type?sharedProperties.fireAnalyticsEvent(0===_this.activeProfileSummary?"Prism Portrait | Click Primary Personality Video":"Prism Portrait | Click Personality under Pressure Video","N/A"):sharedProperties.fireAnalyticsEvent("Prism Portrait | Click Personality Module Info Video",$scope.selectedProfileTab),sharedProperties.videoPopUp(url)}function showInfoBoxMobile(t,v){$scope.winScreenHeight=jQuery(window).height()+"px",$scope.infoBoxTab=t,sharedProperties.fireAnalyticsEvent("Prism Portrait | Click Personality Module Info icon",$scope.selectedProfileTab);var videoSrc=v;$scope.vWidth=$(document).width()-40,$scope.vHeight=.56428571428571*$scope.vWidth;var infoTab=$scope.infoBoxTab;$scope.prepareVideo=function(){if(/youtube/g.test(videoSrc)){$scope.videoType="youtube";var youtubeId=parseYouTube(videoSrc);$scope.videoUrl=$sce.trustAsResourceUrl("https://www.youtube.com/embed/"+youtubeId+"?autoplay=0&rel=0&autohide=1&showinfo=0&wmode=transparent&modestbranding=1&iv_load_policy=3&vq=large")}else if(/vimeo/g.test(videoSrc)){$scope.videoType="vimeo";var vimeoId=parseVimeo(videoSrc),userLocale=sharedProperties.provideVendorSpecificLocale("vimeo"),options={id:vimeoId,width:parseInt($scope.vWidth),height:parseInt($scope.vHeight)};$timeout(function(){new Vimeo.Player("vimeoPlayer_"+infoTab,options).enableTextTrack(userLocale).then(function(track){track.language=userLocale,track.kind="captions"})},500)}else $scope.videoType="html5",$scope.videoUrl=$sce.trustAsResourceUrl(videoSrc)};var parseYouTube=function(url){var p=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!url.match(p)&&RegExp.$1},parseVimeo=function(url){var m=url.match(/^.+vimeo.com\/(.*\/)?([^#\?]*)/);return m?m[2]||m[1]:null};ngDialog.open({template:"/sp/resources/html/profile/mobile-info-box.html",scope:$scope,className:"ngdialog-theme-default no-padding-top"})}docRapFinishedFlag=!1;var _this=this;$rootScope.renderedGraphsInfo={count:0,list:[]},_this.printEmail=$localStorage.get("printEmail"),null!==_this.printEmail&&void 0!==_this.printEmail?_this.printName=$localStorage.get("printName"):$localStorage.remove("printName"),_this.isAnalysisLoaded=!1,_this.analysisError=!1,_this.publicToken=!1,_this.selectedTab=0,_this.mobileMenuHide=!0,_this.activeProfileSummary=0,_this.activeProfileContent=0,_this.showHelpLink=!1,_this.mobileHelpLink=!1,_this.showSpProfile=!1,_this.prismLabelContent=!1,_this.externalLink=!1,_this.label="",_this.setOptions=setOptions,_this.showInfoBoxMobile=showInfoBoxMobile,_this.videoPopUp=videoPopUp,_this.updateTab=updateTab,_this.prismData={},_this.prismContent={},_this.personalityVideo1,_this.personalityVideo2,_this.globalNav=$localStorage.get("userSelectedNav"),_this.prismServices={publicProfile:"/sp/profilePublic/",spCertificate:"/sp/spCertificate/",member:"/sp/signedIn/getAnalysisFull",candidate:"/sp/hiring/getAnalysisFull",sharePortrait:"/sp/profilePublic/",sharePortraitUser:"/sp/hiring/ext/portrait/get",getLensInfoPortraitUser:"/sp/hiring/ext/portrait/lens/get",publicAnalysis:"/sp/profilePublic/analysis/",partnerAnalysis:"/sp/profile/hiring/getHiringPersonalityAnalysis"},_this.videos={scientist:"https://vimeo.com/175366653",ambassador:"https://vimeo.com/175366495",pioneer:"https://vimeo.com/175366597",peacemaker:"https://vimeo.com/175366575",influencer:"https://vimeo.com/175366553",strategist:"https://vimeo.com/175366659",instructor:"https://vimeo.com/175366560",catalyst:"https://vimeo.com/175366531",navigator:"https://vimeo.com/175366569",pragmatist:"https://vimeo.com/175366598",connector:"https://vimeo.com/175366541",architect:"https://vimeo.com/175366503",ally:"https://vimeo.com/175366485",researcher:"https://vimeo.com/175366613",toughtender:"https://vimeo.com/175366685",visionary:"https://vimeo.com/175366704"},_this.winWidth=jQuery(window).width(),_this.mobileMenuShow=!1,_this.togglePrimaryGraph=togglePrimaryGraph,_this.refreshFlag=!1,_this.storedName=$localStorage.get("mName")?$localStorage.get("mName"):null,$scope.videoReady=!1,moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker")),$scope.currDate=moment().format("MMMM DD, YYYY"),_this.viewLensReport=viewLensReport,_this.getInviteMemberDetail={},_this.swotanalysis={},_this.lensDialog=!1,_this.sharePortrait=!1,_this.rolesList=[],_this.viewPortraitFlag=!1,$scope.selectedPortrait={},$scope.selectedUserPortrait={},_this.setContentReference=setContentReference,_this.typeSelect=typeSelect,_this.tabNames=["Personality","ProcessingBlueprint","Motivation","ConflictManagement","FundamentalNeeds","DecisionMaking","LearningStyle"],_this.urlTab=null!==sharedProperties.getParam("refId")&&""!==sharedProperties.getParam("refId")&&void 0!==sharedProperties.getParam("refId")?_this.tabNames.indexOf(sharedProperties.getParam("refId")):-1,_this.getGoals=getGoals,_this.customInfoBox=customInfoBox,_this.activeUser=$localStorage.get("activeEmp"),_this.isObjectEmpty=isObjectEmpty;var formatSubmoduleName=function(name){switch(name){case 0:name="Personality";break;case 1:name="ProcessingBlueprint";break;case 2:name="Motivation";break;case 3:name="ConflictManagement";break;case 4:name="FundamentalNeeds";break;case 5:name="DecisionMaking";break;case 6:name="LearningStyle"}return name};$scope.viewMatchReport=function(role){$scope.selectedPortrait=role.portrait,$scope.selectedUserPortrait.matchResult=role.matchResult,$scope.selectedUserPortrait.firstName=_this.hiringUserDetails.firstName,$scope.selectedUserPortrait.lastName=_this.hiringUserDetails.lastName,_this.viewPortraitFlag=!0},$scope.closeReportView=function(){_this.viewPortraitFlag=!1,$scope.selectedPortrait={},$scope.selectedUserPortrait={}},$rootScope.switchPrismView=function(type){"standard"===type?sharedProperties.fireAnalyticsEvent("Prism Portrait | Click Standard View","N/A"):"charts"===type&&sharedProperties.fireAnalyticsEvent("Prism Portrait | Click Charts View","N/A")},$rootScope.openPdfView=function(url,_this,profileName){sharedProperties.fireAnalyticsEvent("Prism Portrait | Print to PDF","N/A"),$scope.clickedItem=_this,$scope.sp_profileName=profileName,ngDialog.open({template:url,scope:$scope,className:"ngdialog-theme-default ngdialog-clearBg"})};var isIE=!!jQuery("html").hasClass("ie"),ieTimer=isIE?2500:1e3;$scope.$on("ngDialog.opened",function(e,$dialog){_this.lensDialog||($scope.nameofUser=$localStorage.get("loggegdInProfile"),$scope.sp_name=void 0===$scope.sp_profileName||null==$scope.sp_profileName?$scope.nameofUser.member.name:$scope.sp_profileName,$timeout(function(){sharedProperties.printPdfProfile({holder:".printVersion",cssName:"sp-profile-pdf.css",url:"/sp/pdf/generatePdf",extraParam:"Prism-Portrait-"+$scope.sp_name.replace(" ","-"),obj:$scope.clickedItem})},ieTimer))}),$rootScope.$on("pdfGenerated",function(e,opt){if("object"!=typeof opt.obj)return!1;opt.obj.generatingPdf=!1,$scope.urlRedirect=opt.url,$scope.sp_profileName=null,$(".ngdialog").removeClass("ngdialog-clearBg")});var destroyRoot=$scope.$on("personalityGraph",function(e){destroyRoot(),null!==sharedProperties.getParam("type")&&_this.typeSelect("PP"===sharedProperties.getParam("type")?0:1)}),updateGraphCount=$scope.$on("updateGraphCounter",function(e,data){if(null===data)return!0;$scope.$apply(function(){-1===$rootScope.renderedGraphsInfo.list.indexOf(data.graphName)&&($rootScope.renderedGraphsInfo.list.push(data.graphName),$rootScope.renderedGraphsInfo.count=$rootScope.renderedGraphsInfo.count+1),25===$rootScope.renderedGraphsInfo.count&&(updateGraphCount(),$rootScope.$broadcast("graphsLoaded"))})});$scope.updatePrintDetails=function(profileName){null!==sharedProperties.getParam("email")&&void 0!==sharedProperties.getParam("email")?null!==$localStorage.get("printName")&&void 0!==$localStorage.get("printName")?$scope.sp_profileName=profileName:$scope.sp_profileName=sharedProperties.getParam("fullName").replace(/%20/g," "):null!==sharedProperties.getParam("hiringName")&&void 0!==sharedProperties.getParam("hiringName")?$scope.sp_profileName=sharedProperties.getParam("hiringName").replace(/%20/g," "):$localStorage.remove("printEmail","printName"),$scope.nameofUser=$localStorage.get("loggegdInProfile"),$scope.sp_name=(void 0===$scope.sp_profileName||null==$scope.sp_profileName)&&null!==$scope.nameofUser&&void 0!==$scope.nameofUser?$scope.nameofUser.member.name:$scope.sp_profileName},$rootScope.openPrintWin=function(url,_this,profileName){window.open(url,"_blank"),window.focus()};$scope.$on("graphsLoaded",function(e){var isPrintMode="print"===sharedProperties.getParam("mode");$timeout(function(){isPrintMode&&angular.element(document).ready(function(){window.print(),window.close()})},0)})}function showInfoBox($timeout,$rootScope,ngDialog,sharedProperties){return{restrict:"A",link:function($scope,$element,$attrs){var _this=jQuery($element[0]),id=_this.attr("data-boxid"),infoBox=jQuery('div[data-box="'+id+'"]'),extraHeight=void 0!==infoBox.attr("data-extraheight"),autoWidth=void 0!==infoBox.attr("data-width"),colSide=void 0!==infoBox.attr("data-cols")?parseInt(infoBox.attr("data-cols"),10):1,infoBoxP=infoBox.parent();_this.off("click").on("click",function(e){e.preventDefault();var personalityType="";switch(id){case"listptp":case"chartptp":personalityType="Personality Profile";break;case"listpbp":case"chartpbp":personalityType="Processing Blueprint";break;case"listmot":case"chartmot":personalityType="Motivation";break;case"listcm":case"chartcm":personalityType="Conflict Management";break;case"listfm":case"chartfm":personalityType="Fundamental Needs";break;case"listdms":case"chartdms":personalityType="Decision Making";break;case"listls":case"chartls":personalityType="Learning Style"}sharedProperties.fireAnalyticsEvent("Prism Portrait | Click Personality Module Info icon",personalityType);var iHeight=jQuery(infoBoxP).outerHeight(),iWidth=jQuery(infoBoxP).outerWidth(),colHeight=jQuery("body").find(".chart-box-cols:first-child").outerHeight(),boxHeights=parseInt(jQuery("body").find(".chart-box-cols.right .motivation-wrapper").outerHeight()+jQuery("body").find(".chart-box-cols.right .fundamental-needs-wrapper").outerHeight()),boxHeights1=parseInt(jQuery("body").find(".chart-box-cols.left .processing-blueprint-wrapper").outerHeight()+jQuery("body").find(".chart-box-cols.left .conflict-management-wrapper").outerHeight()+jQuery("body").find(".chart-box-cols.left .decision-making-wrapper").outerHeight());1===colSide?infoBox.css({height:jQuery(window).width()>767&&extraHeight?iHeight+parseInt(colHeight-boxHeights):iHeight,width:autoWidth?"auto":iWidth}).addClass("active-info-box").removeClass("hide"):infoBox.css({height:jQuery(window).width()>767&&extraHeight?iHeight+parseInt(colHeight-boxHeights1):iHeight,width:autoWidth?"auto":iWidth}).addClass("active-info-box").removeClass("hide")}),jQuery(".ibClose").off("click").on("click",function(e){e.preventDefault();var id=jQuery(this).attr("data-boxid");jQuery('div[data-box="'+id+'"]').addClass("hide").removeClass("active-info-box")}),jQuery(window).resize(function(){if(jQuery(window).width()>767){if(jQuery("body").find(".mobile-infoBox-modal").length){var id1=jQuery("body").find(".mobile-infoBox-modal").parent().parent().attr("id");jQuery("#"+id1).length&&ngDialog.closeAll()}if(jQuery(".active-info-box").length>0){var iHeight=jQuery(infoBoxP).outerHeight(),iWidth=jQuery(infoBoxP).outerWidth(),colHeight=jQuery("body").find(".chart-box-cols:first-child").outerHeight(),boxHeights=parseInt(jQuery("body").find(".chart-box-cols.right .motivation-wrapper").outerHeight()+jQuery("body").find(".chart-box-cols.right .decision-making-wrapper").outerHeight());jQuery(".active-info-box").css({height:jQuery(window).width()>767&&extraHeight?iHeight+parseInt(colHeight-boxHeights):iHeight,width:autoWidth?"auto":iWidth}),$timeout(function(){$.each(jQuery(".active-info-box"),function(i,j){$(this).css({width:$(this).parent().outerWidth(),height:$(this).parent().outerHeight()})})},100)}}else if(jQuery(".active-info-box").length>0&&jQuery(".active-info-box").addClass("hide").removeClass("active-info-box"),jQuery("body").find(".videoPopDialog").length){var id=jQuery("body").find(".videoPopDialog").parent().parent().attr("id");jQuery("#"+id).length&&ngDialog.closeAll()}})}}}function resizeInfoBoxes($timeout,$rootScope){return{restrict:"A",link:function($scope,$element,$attrs){function init(){jQuery(window).width()>767?setTimeout(function(){$rootScope.setBoxSizes(".charbox-wrapper",".chart-box-cols")},50):jQuery("body").find(".chart-box-cols").removeAttr("style"),jQuery(window).resize(function(){jQuery(window).width()>767?setTimeout(function(){$rootScope.setBoxSizes(".charbox-wrapper",".chart-box-cols")},50):jQuery("body").find(".chart-box-cols").removeAttr("style")})}init(),$scope.$watch("width",function(oldVal,newVal){init()})}}}function mobileDropdown(){return{restrict:"A",link:function($scope,$element,$attrs){$element.bind("click",function(){!1===$scope.$parent.ctrl.mobileMenuShow?$scope.$apply(function(){$scope.$parent.ctrl.mobileMenuShow=!0}):$scope.$apply(function(){$scope.$parent.ctrl.mobileMenuShow=!1})})}}}var docRapFinishedFlag=!1,docraptorJavaScriptFinished=function(){return docRapFinishedFlag};angular.module("spApp").controller("profileMainController",profileMainController),profileMainController.$inject=["$scope","$timeout","ajaxService","$rootScope","sharedProperties","$localStorage","ngDialog","$sce","spConfig"],angular.module("spApp").directive("showInfoBox",showInfoBox),showInfoBox.$inject=["$timeout","$rootScope","ngDialog","sharedProperties"],angular.module("spApp").directive("resizeInfoBoxes",resizeInfoBoxes),resizeInfoBoxes.$inject=["$timeout","$rootScope"],angular.module("spApp").directive("mobileDropdown",mobileDropdown);