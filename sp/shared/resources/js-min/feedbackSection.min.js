function feedbackController($scope,ajaxService,$filter,ngDialog,sharedProperties,$rootScope,$timeout,$q){$scope.feedbackTeam=!1,$scope.feedbackGrowth=[],$scope.current=5,$scope.allowAdd=!0,$scope.responseRecieved=!1,$scope.getAllMembersToInvite=[],$scope.masterGetAllMembersToInvite=[],$scope.viewMember=!1,$scope.oldView="",$scope.textSearching="",$scope.listCreaator=[],$scope.getInviteMemberDetail=[],$scope.errorMessage="",$scope.showError=!1,$scope.initSet=!1,$scope.goalUser="",$scope.goals={selected:[]},$scope.inviteError=!1,$scope.dateError=!1,$scope.inviteMemNonMember=!0,$scope.inviteMember=!0,$scope.inviteNonMember=!1,$scope.howDoYouKnow=["Friend","Family","Work Colleague"],$scope.goalUserNon="",$scope.growthName="",$scope.growthTitle="",$scope.hideIt=!0,$scope.id="";var d=new Date;$scope.maxDate=d.setMonth(d.getMonth()+3),$scope.feedback={user:[]},$scope.viewDrop=!1,$scope.nootherequest=!1,$scope.showTheme=!1,$scope.matchCase=[],$scope.showRequestFeedbackForm=!1,$scope.searchTag=[],$scope.selectedUser=null,$scope.formErrors={dateCheck:!1,emailCheck:!1,firstName:!1,lastName:!1},$scope.showNames=!1,$scope.nameDataForm={},$scope.adminFeedRequestData={},$scope.sendGrowthdetail=function(name,description){$scope.growthName=name,$scope.growthTitle=description,ngDialog.open({template:"/sp/growth/growthPop",scope:$scope})},$scope.redirectTo=function(change){"default"!==change&&(""===$rootScope.noSelf?window.location.href=change:$rootScope.callSwitchChange("feedArchiveDetail"))},$scope.pageSetup=function(page){$scope.getfeedbackTeam(),$scope.viewPage=page||"default"},$scope.getfeedbackTeam=function(){$scope.getAllMembersToInvitefn(),ajaxService.getAjaxResponse({url:"/sp/feedback/getFeedbackTeam?accountDashboardRequest=true&groupMemberEmail="+$rootScope.noSelf,method:"get"}).then(function(response){"true"===response.Success?($scope.getfeedbackTeam=response,void 0!==response.feedbackTeam?(angular.forEach(response.feedbackTeam,function(value,index){null!=value.email&&$rootScope.add($scope.feedback.user,value.email)}),$scope.showTheme=response.themesPresent,$scope.feedbackGrowth=response.feedbackTeam,$scope.listCreaator=angular.copy($scope.feedbackGrowth),$scope.currentActive=$scope.feedbackGrowth.length,$scope.viewDrop=!0,"default"===$scope.viewPage&&$scope.formatList("active")):($scope.currentActive=$scope.feedbackGrowth.length,"default"===$scope.viewPage&&$scope.formatList("active"),$scope.feedbackTeam=!0)):null!=response.error&&(window.location.href="/sp")})},$scope.nonMemberGrowthCall=function(){ajaxService.getAjaxResponse({url:"/sp/getUserGrowthAreas",data:$.param({groupMemberEmail:$rootScope.noSelf})}).then(function(response){if("true"===response.Success)$scope.goalUserNon=response.goals;else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:$rootScope.pullInterNationalization("service.growl.alert"),message:$scope.errorMessage})}})},$scope.formatList=function(newAdd){if($scope.currentActive<$scope.current)for(var push=$scope.current-$scope.listCreaator.length,i=0;i<push;i++)$scope.incrementList();else if($scope.feedbackTeam=!1,$scope.viewMember=!0,$scope.inviteMemberView=!1,void 0!==newAdd&&"first"===newAdd){var _this=$("ul.listSection").find("li:eq(0)");$scope.invitedMemberView(_this,_this.find("div").attr("data-email")),$scope.addUserFull=!1,$("ul.listSection").find("div").removeClass("selected"),$("ul.listSection").find("li:eq(0)").find("div").addClass("selected")}if(void 0!==newAdd&&"first"!==newAdd){$scope.oldView="";var len=$scope.feedbackGrowth.length;$("ul.listSection").find("div").removeClass("selected"),$("ul.listSection").find("li:eq("+len+")").find("div").addClass("selected")}},$scope.callSendArchivePopup=function(getInviteMemberDetail){$scope.archiveMember=getInviteMemberDetail,ngDialog.open({template:"/sp/feedback/archiveMemberScreen",scope:$scope})},$scope.sendToArchive=function(id,email,grouplead){$scope.showError=!1,ajaxService.getAjaxResponse({url:"/sp/feedback/archiveFeedback",data:$.param({feedbackUserId:id})}).then(function(response){if("true"===response.Success)sharedProperties.spliceIndex($scope.listCreaator,"id",id),sharedProperties.spliceIndex($scope.feedbackGrowth,"id",id),$rootScope.remove($scope.feedback.user,email),$scope.currentActive=$scope.feedbackGrowth.length,$scope.formatList("active"),$scope.getAllMembersToInvitefn(),$scope.inviteMemberView=!1,void 0!==$scope.getAllMembersToInvite.userType?($scope.viewMember=!0,$scope.inviteNonMember=$scope.inviteMember=$scope.hideIt=!1):$scope.viewMember=$scope.inviteNonMember=$scope.inviteMember=!0,ngDialog.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member</strong>",message:" archived successfully"}),sharedProperties.fireAnalyticsEvent("Prism Lens | Feedback Archived","N/A");else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:$rootScope.pullInterNationalization("service.growl.alert"),message:$scope.errorMessage}),ngDialog.close("ngdialog1")}})},$scope.incrementList=function(){$scope.listCreaator.push({email:"invite"})},$scope.isActive=function(index){return index===$scope.currentActive},$scope.filteredFeedback=function(id){return!!$rootScope.contains($scope.feedback.user,id)},$scope.invitationSended=function(form,email){$scope.inviteError=!1,$scope.dateError=!1,form.$valid?$scope.invitationDirtyCheckClear(email,!1):$scope.inviteError=!0},$scope.invitationDirtyCheckClear=function(email,isAdminSubmit){if(!$scope.allowAdd)return!0;$scope.allowAdd=!1;var form=isAdminSubmit?$.param($scope.adminFeedRequestData):$("form.imonly").serialize()+"&groupMemberEmail="+$rootScope.noSelf;ajaxService.getAjaxResponse({url:"/sp/feedback/submitFeedbackRequest",data:form}).then(function(response){if("true"===response.Success)$scope.feedbackGrowth.push(response.inviteCreated),$scope.listCreaator=angular.copy($scope.feedbackGrowth),$scope.currentActive=$scope.feedbackGrowth.length,sharedProperties.spliceIndex($scope.getAllMembersToInvite.feedbackUsers,"email",email),sharedProperties.spliceIndex($scope.masterGetAllMembersToInvite.feedbackUsers,"email",email),$scope.currentActive>=$scope.current?$scope.formatList("first"):$scope.formatList("active"),window.scrollTo($(".listSection").offset().top,0),$scope.goals.selected=[],ngDialog.close("ngdialog1"),$timeout(function(){$scope.allowAdd=!0},500),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member </strong> ",message:"invited successfully"}),sharedProperties.fireAnalyticsEvent("Prism Lens | Send Feedback Request to member","N/A");else if(null!=response.error){$scope.allowAdd=!0;for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.getAllMembersToInvitefn=function(){ajaxService.getAjaxResponse({url:"/sp/feedback/getAllFeedbackMembers",data:$.param({groupMemberEmail:$rootScope.noSelf})}).then(function(response){if("true"===response.Success)$scope.getAllMembersToInvite=response,$scope.responseRecieved=!0,$scope.masterGetAllMembersToInvite=angular.copy($scope.getAllMembersToInvite);else if(null!=response.error)for(var key in response.error)$scope.errorMessage=response.error[key]})},$scope.callInitMember=function(id,event,email){var _this="";if(!$scope.initSet){_this=$("ul.listSection").find("li:eq("+id+")");var catchEmailed=sharedProperties.getParam("feeddbackMemberId");$scope.matchCase.length||($scope.matchCase=$scope.listCreaator.filter(function(entry){return entry.id===catchEmailed}),null===catchEmailed||$scope.matchCase.length||$.growl({icon:"glyphicon glyphicon-ban-circle",message:$rootScope.pullInterNationalization("feedback.feedbackListing.noUserFound")})),null!==catchEmailed&&$scope.matchCase.length?catchEmailed===email&&($scope.invitedMemberView(_this,email),$scope.initSet=!0,_this.find("div").addClass("selected")):($scope.invitedMemberView(_this,email),$scope.initSet=!0,_this.find("div").addClass("selected"))}},$scope.callViewMember=function(id,event,email){var _this=$(event.currentTarget);if(_this.find("a").data("invite")){if(sharedProperties.fireAnalyticsEvent("Prism Lens | Request Prism Lens","N/A"),id!==$scope.currentActive&&!_this.hasClass("active"))return!1;$scope.id="",$scope.feedbackTeam=$scope.inviteMemberView=!1,$scope.viewMember=!0,void 0!==$scope.getAllMembersToInvite.userType?$scope.inviteNonMember=$scope.inviteMember=$scope.hideIt=!1:$scope.inviteNonMember=$scope.inviteMember=!0,$scope.inviteMemNonMember&&(_this.hasClass("selected")||(_this.closest(".listSection").find("div").removeClass("selected"),_this.addClass("selected")),$scope.getAllMembersToInvite=angular.copy($scope.masterGetAllMembersToInvite),$scope.searchText="",$scope.oldView=id),$scope.viewDrop=!0}else sharedProperties.fireAnalyticsEvent("Prism Lens | View Lens Summary","N/A"),$scope.invitedMemberView(_this,email)},$scope.invitedMemberView=function(eve,email){if(eve.hasClass("selected")||(eve.closest(".listSection").find("div").removeClass("selected"),eve.addClass("selected")),email=void 0===eve.data("email")?email:eve.attr("data-email"),""!==$scope.id&&$scope.id===email)return!1;$scope.id=email,$scope.viewDrop=!0,$scope.feedbackTeam=$scope.inviteMemberView=$scope.viewMember=!1,$scope.oldView="",ajaxService.getAjaxResponse({url:"/sp/feedback/getFeedbackDetails",data:$.param({feadbackUserId:email,groupMemberEmail:$rootScope.noSelf})}).then(function(response){if("true"===response.Success)$scope.getInviteMemberDetail=response,$scope.feedbackEnable=!1,$scope.sendreminderEnable=!1,$scope.swotMemId=email,$scope.swotanalysis=response.swotanalysis,void 0!==response.swotanalysis?$scope.feedbackEnable=!0:$scope.sendreminderEnable=!0,$scope.inviteMemberView=!0;else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.searchTextFilter=function(search){$scope.textSearching=search,$scope.getAllMembersToInvite.feedbackUsers=sharedProperties.searchModule($scope.textSearching,$scope.masterGetAllMembersToInvite.feedbackUsers,2)},$scope.clearSearch=function(){$scope.textSearching.length&&($scope.textSearching="",$scope.searchText="",$scope.getAllMembersToInvite.feedbackUsers=angular.copy($scope.masterGetAllMembersToInvite.feedbackUsers))},$scope.enableCancel=function(search){return void 0!==search&&search.length>1},$scope.order=function(predicate,reverse){$scope.getAllMembersToInvite.feedbackUsers=$filter("orderBy")($scope.getAllMembersToInvite.feedbackUsers,predicate,reverse)},$scope.callSelect=function(profile,event){if($scope.inviteError=!1,$(event.currentTarget).hasClass("notActive"))return!1;$scope.addProfile=profile,ngDialog.open({template:"/sp/feedback/submitRequest",scope:$scope})},$scope.invitationSendedNon=function(form){$scope.inviteNonMemberErr=!1,form.$valid?$scope.invitationDirtyCheckClearNon():$scope.inviteNonMemberErr=!0},$scope.invitationDirtyCheckClearNon=function(){var form=$(".inviteNonMember").find("form").serialize()+"&groupMemberEmail="+$rootScope.noSelf;if($scope.nootherequest)return!1;$scope.nootherequest=!0,ajaxService.getAjaxResponse({url:"/sp/feedback/submitFeedbackRequest",data:form}).then(function(response){if("true"===response.Success)$scope.nootherequest=!1,$scope.feedbackGrowth.push(response.inviteCreated),$scope.listCreaator=angular.copy($scope.feedbackGrowth),$scope.currentActive=$scope.feedbackGrowth.length,$scope.nonMemFirstName=$scope.nonMemLastName=$scope.nonMemMemberEmail=$scope.selectedDateAsNumber="",$scope.hdu="Friend",$scope.currentActive>=$scope.current?$scope.formatList("first"):$scope.formatList("active"),$(".externalText").val($rootScope.pullInterNationalization("feedback.feedbackListing.growth.comment")),window.scrollTo($(".listSection").offset().top,0),$scope.getAllMembersToInvitefn(),$(".inviteNonMember").find(".squareBox").removeClass("active"),$scope.goals.selected=[],ngDialog.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member </strong> ",message:"invited successfully"}),sharedProperties.fireAnalyticsEvent("Prism Lens | Send Feedback Request to non member","N/A");else if(null!=response.error){$scope.nootherequest=!1;for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.clearStuff=function(){$scope.nonMemFirstName=$scope.nonMemLastName=$scope.nonMemMemberEmail=$scope.selectedDateAsNumber="",$scope.hdu="Friend",$scope.inviteNonMemberErr=!1,$scope.dateNonError=!1,$scope.goals.selected=[]},$scope.disableCheck=function(value){var curr=this.$index;$(".growthAreas").find(".style:eq("+curr+")").find("input").attr("disabled",!0)},$scope.active=function(event){sharedProperties.toggleFilterClick(event,$scope.currentPredicate)},$scope.sendReminder=function(member){$scope.reminderDetails=member,ngDialog.open({template:"/sp/feedback/reminder/feedsendReminder",scope:$scope})},$scope.sendReminderMailed=function(fulldetail){var form=$("form.sendReminder").serialize()+"&memberList="+fulldetail.email+"&feedbackUserId="+fulldetail.id+"&memberFirstName="+fulldetail.firstName+"&memberLastName="+fulldetail.lastName+"&type=FeedbackReminder";ajaxService.getAjaxResponse({url:"/sp/notifications/sendNotificationWithParams",data:form}).then(function(response){if("true"===response.Success)ngDialog.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Reminder sent successfully "});else if(null!=response.error){ngDialog.close("ngdialog1");for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.goalRemove=function(id,index){ajaxService.getAjaxResponse({url:"/sp/goals/removeUserGoals",data:$.param({goalId:id})}).then(function(response){if("true"===response.Success)$scope.getInviteMemberDetail.feedbackGoals.GrowthAreas[index].goal.alreadyInvited=!1,$.growl({icon:"glyphicon glyphicon-ok",message:" Goal removed successfully "});else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.goalAdd=function(id,index){ajaxService.getAjaxResponse({url:"/sp/goals/addToUserGoals",data:$.param({goalId:id})}).then(function(response){if("true"===response.Success)$scope.getInviteMemberDetail.feedbackGoals.GrowthAreas[index].selected=!0,$.growl({icon:"glyphicon glyphicon-ok",message:" Goal added successfully "});else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.showHideRequestFeedbackForm=function(){$scope.showRequestFeedbackForm=!$scope.showRequestFeedbackForm,$scope.formErrors={dateCheck:!1,emailCheck:!1,firstName:!1,lastName:!1}},$scope.loadTags=function(query){$scope.showNames=!1,$scope.formErrors={dateCheck:!1,emailCheck:!1,firstName:!1,lastName:!1};var deferred=$q.defer(),result=$scope.getAllMembersToInvite.feedbackUsers.filter(function(e){return-1!==e.name.toLowerCase().indexOf(query.toLowerCase())||-1!==e.email.toLowerCase().indexOf(query.toLowerCase())});return deferred.resolve(result),deferred.promise},$scope.tagAdded=function(tag){$scope.showNames=!1,$scope.searchTag.push(tag.email),$scope.selectedUser=tag,void 0!==tag.id&&null!==tag.id&&""!==tag.id||($scope.showNames=!0)},$scope.tagRemoved=function(tag){$scope.formErrors={dateCheck:!1,emailCheck:!1,firstName:!1,lastName:!1},$scope.showNames=!1,$scope.selectedUser=null,$scope.searchTag.splice($scope.searchTag.indexOf(tag.email),1)},$scope.sendRequestFeedbackAdmin=function(date,fName,lName){if($scope.formErrors={dateCheck:!1,emailCheck:!1,firstName:!1,lastName:!1},void 0!==date&&null!==date&&""!==date||($scope.formErrors.dateCheck=!0),void 0===$scope.selectedUser||null===$scope.selectedUser||""===$scope.selectedUser?$scope.formErrors.emailCheck=!0:(void 0!==$scope.selectedUser.email&&null!==$scope.selectedUser.email&&""!==$scope.selectedUser.email||($scope.formErrors.emailCheck=!0),void 0!==$scope.selectedUser.id&&null!==$scope.selectedUser.id&&""!==$scope.selectedUser.id||(void 0===fName||null===fName||""===fName?$scope.formErrors.firstName=!0:($scope.formErrors.firstName=!1,$scope.selectedUser.firstName=fName),void 0===lName||null===lName||""===lName?$scope.formErrors.lastName=!0:($scope.formErrors.lastName=!1,$scope.selectedUser.lastName=lName))),!1===$scope.formErrors.dateCheck&&!1===$scope.formErrors.emailCheck&&!1===$scope.formErrors.firstName&&!1===$scope.formErrors.lastName){var _date=(date.getMonth()+1<10?"0":"")+(date.getMonth()+1)+"/"+(date.getDate()<10?"0":"")+date.getDate()+"/"+date.getFullYear(),param={firstName:$scope.selectedUser.firstName,lastName:$scope.selectedUser.lastName,email:$scope.selectedUser.email,requestType:void 0===$scope.selectedUser.id||null===$scope.selectedUser.id||""===$scope.selectedUser.id?"EXTERNAL":"INTERNAL",referenceType:"Colleague",comment:"",endDate:_date,groupMemberEmail:$rootScope.noSelf};$scope.adminFeedRequestData=param,$scope.invitationDirtyCheckClear($scope.selectedUser.email,!0),$scope.showHideRequestFeedbackForm()}}}function feedBackarchiveController($scope,ajaxService,$filter,ngDialog,sharedProperties,$rootScope,$localStorage){$scope.archiveMembers=[],$scope.masterarchiveMembers=[],$scope.pageSize=10,$scope.initPageSize=10,$scope.viewArchive=!1,$scope.currentPredicate="name",$scope.lastReverse=!1,$scope.textSearching="",$scope.responseRecieved=!1,$scope.getAllArchiveRequests=function(){ajaxService.getAjaxResponse({url:"/sp/feedback/getAllArchiveFeedbacks",method:"get"}).then(function(response){if("true"===response.Success)$scope.masterarchiveMembers=response.feedbackRequest,$scope.archiveFilter=response.feedbackRequestFilter,$scope.loadMore($scope.pageSize),$scope.viewArchive=!0,$scope.responseRecieved=!0;else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.loadMore=function(pageSize){$scope.order($scope.currentPredicate,$scope.lastReverse),$scope.pageSize=pageSize,pageSize>=$scope.masterarchiveMembers.length&&($scope.disabledInfinite=!0,$scope.pageSize=$scope.masterarchiveMembers.length),""!==$scope.textSearching?$scope.searchTextFilter($scope.textSearching):$scope.archiveMembers=angular.copy($scope.masterarchiveMembers)},$scope.clearSearch=function(){$scope.textSearching.length&&($scope.textSearching="",this.searchText="",$scope.pageSize=$scope.pageStateSearch,$scope.archiveMembers=angular.copy($scope.masterarchiveMembers))},$scope.searchTextFilter=function(search){$scope.textSearching=search,$scope.pageStateSearch=$scope.pageSize,$scope.archiveMembers=sharedProperties.searchModule($scope.textSearching,$scope.masterarchiveMembers,2,"feedbackUser")},$scope.order=function(predicate,reverse){$scope.currentPredicate=predicate,$scope.lastReverse=reverse,$scope.archiveMembers=$filter("orderBy")($scope.archiveMembers,predicate,reverse)},$scope.active=function(event){sharedProperties.toggleFilterClick(event,$scope.currentPredicate)},$scope.enableCancel=function(search){return void 0!==search&&search.length>1},$scope.viewDetail=function(id,self){$localStorage.set("feedbackarchiveId",id),""===$rootScope.noSelf?(sharedProperties.fireAnalyticsEvent("Prism Lens | View Archived Feedback","N/A"),window.location.href="/sp/feedback/archiveDetail"):$rootScope.callSwitchChange("feedArchiveDetail")}}function feedbackArchiveDetailController($scope,ajaxService,sharedProperties,$rootScope,$timeout,$localStorage){$scope.memberList=[],$scope.scopeName=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),$scope.myGoals={},$scope.myGoals.addToGoalsFlag=[],$scope.cancelBtnHide=!0,$scope.requestDetailsLoaded=!1,$scope.getArchivedMemberDetail=function(){var ur="",obj="",archiveId="",method="post";if("/sp/feedback/themeView"===window.location.pathname||"/sp/goals/themeView"===window.location.pathname||"feedThemeView"===$rootScope.switchType||"goalThemeView"===$rootScope.switchType){$scope.viewArchive=!1;var optional="false";ur="/sp/goals/getAllGoals",method="get","/sp/feedback/themeView"!==window.location.pathname&&"feedThemeView"!==$rootScope.switchType||(optional="true",ur="/sp/feedback/getThemeView?goalTool="+optional+"&groupMemberEmail="+$rootScope.noSelf)}else{if($scope.viewArchive=!0,ur="/sp/feedback/feedbackArchive/getRequestDetails",null===(archiveId=$localStorage.get("feedbackarchiveId")))return window.location.href="/sp/feedback/archive",!0;obj=$.param({feedbackUserArchiveId:archiveId,groupMemberEmail:$rootScope.noSelf})}ajaxService.getAjaxResponse({url:ur,data:obj,method:method}).then(function(response){if("true"===response.Success)$scope.memberList=response,$scope.swotanalysis=$scope.memberList.swotanalysis,$timeout(function(){jQuery("body").find(".equalsSize").find(".squareBox.active").length>0?($scope.cancelBtnHide=!1,$scope.btnText=$rootScope.pullInterNationalization("goals.themeView.update")):($scope.cancelBtnHide=!0,$scope.btnText=$rootScope.pullInterNationalization("goals.themeView.create")),$scope.requestDetailsLoaded=!0},200);else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.validateAndAddToMyGoals=function(){$scope.goalsCountError=!1;var checkBoxes=jQuery("body").find(".equalsSize").find(".squareBox.active"),goalsList=[];checkBoxes.length>=3?($scope.goalsCountError=!1,$.each(checkBoxes,function(i){goalsList.push(jQuery(checkBoxes[i]).attr("data-id"))}),ajaxService.getAjaxResponse({url:"/sp/goals/updateUserGoalsSelection",data:$.param({goalId:goalsList.toString()})}).then(function(response){if("true"===response.Success)$localStorage.set("goalsNotify","goalsReview"),$timeout(function(){window.location.href="/sp/goals"},200);else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})):$scope.goalsCountError=!0},$scope.goBack=function(){""===$rootScope.noSelf?window.location.href="/sp/feedback/archive":$rootScope.callSwitchChange("feedArchive")},$scope.goBackGoal=function(){""===$rootScope.noSelf?window.location.href="/sp/goals":$rootScope.callSwitchChange("spGoals")},$scope.goalRemove=function(id,index,area){ajaxService.getAjaxResponse({url:"/sp/goals/removeUserGoals",data:$.param({goalId:id})}).then(function(response){if("true"===response.Success)void 0===area?$scope.getInviteMemberDetail.feedbackGoals.GrowthAreas[index].goal.alreadyInvited=!1:$scope.memberList.userGoal.splice(index,1),$.growl({icon:"glyphicon glyphicon-ok",message:" Goal removed successfully "});else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.goalAdd=function(id,index,area){ajaxService.getAjaxResponse({url:"/sp/goals/addToUserGoals",data:$.param({goalId:id})}).then(function(response){if("true"===response.Success)void 0===area?$scope.getInviteMemberDetail.feedbackGoals.GrowthAreas[index].selected=!0:$scope.memberList.userGoal[index].selected=!0,$.growl({icon:"glyphicon glyphicon-ok",message:" Goal added successfully "});else if(null!=response.error){for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:$scope.errorMessage})}})},$scope.redirectTo=function(change){"default"!==change&&(""===$rootScope.noSelf?window.location.href=change:$rootScope.callSwitchChange(change))},$scope.allUnhide=function(_this){var toggle=$(_this.currentTarget).siblings("div.hideUnhide");toggle.is(":visible")?toggle.hide(500):($(".hideUnhide").each(function(index,value){$(this).hide(500)}),toggle.show(500))},$scope.closeIt=function(_this){$(_this.currentTarget).closest("div.hideUnhide").hide(500)}}function labelAdjust($timeout){return{restrict:"A",scope:{sid:"@swotMid"},link:function($scope,$element,$attrs){var tdHeight,tdClass=(jQuery($element[0]),jQuery($element[0]).parent().hasClass("swot-left-label")),isArchive=jQuery($element[0]).parent().hasClass("in-archives"),winWidth=jQuery(window).width(),updatePos=function(h){tdHeight=h,tdClass?jQuery($element[0]).css({top:isArchive&&winWidth>769?parseInt(tdHeight/2+35):parseInt(tdHeight/2-5)}):jQuery($element[0]).css({top:winWidth>769?parseInt(tdHeight/2-100):parseInt(tdHeight/2-5)})};jQuery($element[0]).hasClass("arc")&&$timeout(function(){updatePos(parseInt(jQuery(".swot-data").height()))},600),$scope.$watch("sid",function(newValue,oldValue){$timeout(function(){updatePos(parseInt(jQuery(".swot-data").height()))},300)})}}}angular.module("spApp").controller("feedbackController",feedbackController),angular.module("spApp").controller("feedBackarchiveController",feedBackarchiveController),angular.module("spApp").controller("feedbackArchiveDetailController",feedbackArchiveDetailController),feedbackController.$inject=["$scope","ajaxService","$filter","ngDialog","sharedProperties","$rootScope","$timeout","$q"],feedBackarchiveController.$inject=["$scope","ajaxService","$filter","ngDialog","sharedProperties","$rootScope","$localStorage"],feedbackArchiveDetailController.$inject=["$scope","ajaxService","sharedProperties","$rootScope","$timeout","$localStorage"],angular.module("spApp").directive("labelAdjust",labelAdjust),labelAdjust.$inject=["$timeout"];