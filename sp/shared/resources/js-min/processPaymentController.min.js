function processPaymentController($scope,$element,$attrs,$http,ngDialog,ajaxService,$localStorage){$scope.updateCC={},$scope.dialogStatus={},$scope.accountType=$localStorage.get("account_type"),$scope.getAccountInfo=function(){ajaxService.getAjaxResponse({url:"/sp/admin/account/businessAccountDetails"}).then(function(response){if("true"===response.Success)$scope.accountInfo=response.account;else{$scope.serverError=!0;for(var key in response.error)$scope.errorMessage=response.error[key]}})},$scope.getIndividualAccountInfo=function(){ajaxService.getAjaxResponse({url:"/sp/admin/account/individualAccountDetails"}).then(function(response){if("true"===response.Success)$scope.accountInfo=response.account;else{$scope.serverError=!0;for(var key in response.error)$scope.errorMessage=response.error[key]}})},$scope.processPayment=function(fData){$scope.updateCC.submitted=!1,$scope.updateCC.$valid?ajaxService.getAjaxResponse({url:"/sp/admin/account/processPayment",data:$.param(fData)}).then(function(response){if("true"===response.Success)$scope.dialogStatus.title="Process payment",$scope.dialogStatus.content="Payment processed successfully.",ngDialog.open({template:"/sp/resources/html/admin/account/success-dialog.html",scope:$scope});else{$scope.serverError=!0;for(var key in response.error)$scope.errorMessage=response.error[key]}}):$scope.updateCC.submitted=!0},"company"===$scope.accountType?$scope.getAccountInfo():$scope.getIndividualAccountInfo(),$scope.cancelRedirect=function(){window.location="/sp/admin/account/business"}}angular.module("spApp").controller("processPaymentController",processPaymentController),processPaymentController.$inject=["$scope","$element","$attrs","$http","ngDialog","ajaxService","$localStorage"];