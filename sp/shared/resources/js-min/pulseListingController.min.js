function pulseListingController($scope,$q,$element,$attrs,ajaxService,$location,$http,$state,$filter,ngDialog,sharedProperties,$timeout,$rootScope,$localStorage){$scope.pulseMasterList=[],$scope.getAllError=!1,$scope.searchTag=[],$scope.pageSize=10,$scope.statusInclude=[],$scope.textSearching="",$scope.intialPageSize=10,$scope.load=!0,$scope.formatMonth=function(d){if(null!==d&&void 0!==d){var splitDate=d.split(" ");return splitDate[0].substr(0,3).toUpperCase()+" "+splitDate[1]+" "+splitDate[2]}},$scope.getNewPulseList=function(){ajaxService.getAjaxResponse({url:"/sp/sysAdmin/pulse/getAll"}).then(function(response){if("true"===response.Success)$scope.getAllError=!1,$scope.pulseMasterList=response.pulseQuestion,$scope.returnMemberList($scope.pageSize);else{$scope.getAllError=!0;for(var key in response.error)$scope.getAllErrorMsg=response.error[key]}})},$scope.searchTextFilter=function(search){$scope.textSearching=search,$scope.returnMemberList($scope.pageSize)},$scope.clearSearch=function(){$scope.textSearching.length&&($scope.textSearching="",$scope.searchText="",$scope.returnMemberList($scope.pageSize))},$scope.enableCancel=function(search){return void 0!==search&&search.length>1},$scope.returnMemberList=function(pageSize){if(!$scope.pulseMasterList.length)return!0;if($scope.searchTag.length&&!$scope.statusInclude.length&&($scope.pulseList=angular.copy($scope.newArr)),$scope.searchTag.length&&$scope.statusInclude.length){$scope.combineArray=[];for(var i=0;i<$scope.newArr.length;i++)for(var j=0;j<$scope.checkBox.length;j++)$scope.newArr[i].email===$scope.checkBox[j].email&&$scope.combineArray.push($scope.newArr[i]);$scope.pulseList=angular.copy($scope.combineArray)}!$scope.searchTag.length&&$scope.statusInclude.length&&($scope.pulseList=angular.copy($scope.checkBox)),$scope.searchTag.length||$scope.statusInclude.length||($scope.pulseList=angular.copy($scope.pulseMasterList)),$scope.pageSize=pageSize,pageSize>=$scope.pulseMasterList.length&&($scope.disabledInfinite=!0,$scope.pageSize=$scope.pulseMasterList.length),$scope.load&&($scope.lastPredicate="name",$scope.lastReverse=!1,$scope.loadBtnCLicked=!1,$scope.load=!1),$scope.loadBtnCLicked&&($scope.loadBtnCLicked=!1),$scope.order($scope.lastPredicate,$scope.lastReverse),$scope.pulseList=$scope.pulseList},$scope.active=function(event){var currentElem=$(event.currentTarget);currentElem.find("h4").hasClass("on")?currentElem.find("h4").hasClass("reverseon")?currentElem.find("h4").removeClass("reverseon"):currentElem.find("h4").addClass("reverseon"):(currentElem.parent().find(".tog h4").removeClass("on"),currentElem.find("h4").addClass("on"))},$scope.order=function(predicate,reverse){$scope.lastPredicate=predicate,$scope.lastReverse=reverse,$scope.pulseList=$filter("orderBy")($scope.pulseList,predicate,reverse)},$scope.resetfilter=function(allmembers){$scope.pageSize=$scope.intialPageSize,$scope.newArr=[],$scope.searchTag=[],$scope.tags=[],$scope.filter={},$scope.statusInclude=[],$scope.adminc=!1,$scope.leadC=!1,$scope.textSearching="",$scope.searchText="",void 0!==this.selectedSearch&&(this.selectedSearch.userStatusFormatted="",this.selectedSearch.hiringRoles=""),$scope.pulseList=angular.copy($scope.pulseMasterList),void 0!==allmembers&&($scope.pageSize=$scope.pulseMasterList.length),angular.element($(".tags").find("input")).scope().newTag.text="",$scope.load=!0,$scope.disabledInfinite=!1,$rootScope.$broadcast("$scrollStart"),$scope.returnMemberList($scope.pageSize);var curr=$(".memberHolder");curr.find(".heading h4").removeClass("reverseon").removeClass("on"),curr.find(".heading h4:eq(0)").addClass("on")},$scope.updateStatusError=!1,$scope.updatePulseStatus=function(status,pid){ajaxService.getAjaxResponse({url:"/sp/sysAdmin/pulse/updateStatus",data:$.param({pulseQuestionSetId:pid,status:status})}).then(function(response){"true"===response.Success?($scope.updateStatusError=!1,ngDialog.close("ngdialog1"),$scope.getNewPulseList(),sharedProperties.growlMessage("Status updated successfully")):(ngDialog.close("ngdialog1"),sharedProperties.ajaxError(response.error))})},$scope.deleteConfirm=function(d){$scope.afid=d,ngDialog.open({template:"/sp/resources/html/sysAdmin/pulse/deleteConfirmation.html",scope:$scope})},function(){var growlNotification=$localStorage.get("gNotify");null!==growlNotification&&void 0!==growlNotification&&("AddPulse"===growlNotification&&sharedProperties.growlMessage("Pulse created successfully"),setTimeout(function(){$localStorage.remove("gNotify")},1e3)),$scope.getNewPulseList()}()}angular.module("spApp").controller("pulseListingController",pulseListingController),pulseListingController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];