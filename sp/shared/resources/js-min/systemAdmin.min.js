function sysAdminPanel($scope,$element,$attrs,ajaxService,$state,ngDialog,$filter,sharedProperties,$rootScope,$localStorage){var self=this;self.responseAvailable=!1,self.responseAvailableForModal=!1,$scope.memberList=[],$scope.masterMemberList=[],$scope.pageSize=10,$scope.intialPageSize=10,$scope.lastPredicate="name",$scope.lastReverse=!1,$scope.userEmail={email:[]},$scope.textSearching="",$scope.checkedAll=!1,self.serviceApis={getAllCompanies:"/sp/sysAdmin/hk/getCompanies",openCompanyModal:"/sp/sysAdmin/hk/selectCompany"},self.companyList=[],self.email="",$scope.getLoggedInUserList=function(){var options={url:"/sp/sysAdmin/hk/getLoggedInUsers",method:"get"};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&($scope.masterMemberList=response.loggedInUsers.length?response.loggedInUsers:[],$scope.memberList=angular.copy($scope.masterMemberList),$scope.returnMemberList($scope.pageSize),$scope.change="email")})},$scope.getUserList=function(){var options={url:"/sp/sysAdmin/hk/getUserList",method:"get"};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&($scope.masterMemberList=response.users.length?response.users:[],$scope.memberList=angular.copy($scope.masterMemberList),$scope.returnMemberList($scope.pageSize),$scope.change="email")})},$scope.getCompanyList=function(){var options={url:"/sp/sysAdmin/hk/getCompanyList",method:"get"};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&($scope.masterMemberList=response.companies.length?response.companies:[],$scope.memberList=angular.copy($scope.masterMemberList),$scope.returnMemberList($scope.pageSize),$scope.change="email",self.companyList=angular.copy($scope.masterMemberList))})},$scope.goToToneAnalyzer=function(obj){$localStorage.set("cname",obj.name),window.location.href="/sp/sysAdmin/toneAnalyze/detail?id="+obj.id},$scope.order=function(predicate,reverse){$scope.lastPredicate=predicate,$scope.lastReverse=reverse,$scope.memberList=$filter("orderBy")($scope.memberList,predicate,reverse)},$scope.searchTextFilter=function(search){$scope.textSearching=search,$scope.returnMemberList($scope.pageSize)},$scope.enableCancel=function(search){return void 0!==search&&search.length>1},$scope.clearSearch=function(){$scope.textSearching.length&&($scope.textSearching="",$scope.searchText="",$scope.returnMemberList($scope.pageSize))},$scope.active=function(event){sharedProperties.toggleFilterClick(event,$scope.currentPredicate)},$scope.infinteScroll=function(arg){$scope.returnMemberList(arg)},$scope.returnMemberList=function(pageSize){if(!$scope.masterMemberList.length)return!0;$scope.memberList=sharedProperties.searchModuleName($scope.textSearching,$scope.masterMemberList,2,$scope.change),$scope.pageSize=pageSize,pageSize>=$scope.masterMemberList.length&&($scope.disabledInfinite=!0,$scope.pageSize=$scope.masterMemberList.length),$scope.order($scope.lastPredicate,$scope.lastReverse),$scope.memberList=$scope.memberList},$scope.checkUncheck=function(){$scope.alltoggle=!1,$scope.checkedAll&&($scope.negative=!$scope.negative,$scope.checkedAll=!$scope.checkedAll)},$scope.checkAll=function(){$scope.checkedAll=!$scope.checkedAll,$scope.negative?$scope.userEmail.email=$scope.masterMemberList.map(function(item){return{email:item.email,name:item.name,title:item.title}}):$scope.userEmail.email=[]},$scope.selectAdminUserCompany=function(email){self.email=email,self.companyList.length?$scope.openSelectCompanyModal(email):$scope.getAllCompanies(email)},$scope.openSelectCompanyModal=function(email){ngDialog.open({template:self.serviceApis.openCompanyModal,scope:$scope}).closePromise.then(function(data){self.companySearchText=""})},$scope.getAllCompanies=function(email){ajaxService.getAjaxResponse({url:self.serviceApis.getAllCompanies,method:"POST"}).then(function(response){"true"===response.Success?(self.companyList=response.companies,$scope.openSelectCompanyModal(),self.responseAvailableForModal=!0,self.email=email):null!==response.error&&sharedProperties.ajaxError(response.error)})},$scope.selectUser=function(id,email){ajaxService.getAjaxResponse({url:"/sp/sysAdmin/hk/userMigration",method:"POST",data:$.param({newCompanyId:id,email:email})}).then(function(response){"true"===response.Success?(ngDialog.closeAll(),sharedProperties.growlMessage("User migrated successfully")):null!==response.error&&(ngDialog.closeAll(),sharedProperties.ajaxError(response.error))})}}angular.module("spApp").controller("sysAdminPanel",sysAdminPanel),sysAdminPanel.$inject=["$scope","$element","$attrs","ajaxService","$state","ngDialog","$filter","sharedProperties","$rootScope","$localStorage"];