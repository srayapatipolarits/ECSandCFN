function orgAdminListingController(sharedProperties,ajaxService,$localStorage,basicService,ngDialog,$scope,$rootScope,$state,$filter){function getAll(type){if(vm.type===type)return!0;vm.actionPlan.length&&vm.actionPlanAP.length?typeSet(type):ajaxService.getAjaxResponse({url:vm.serviceApis.getAll,data:$.param({type:type})}).then(function(response){"true"===response.Success?actionOperation(response,type):null!==response.error&&sharedProperties.ajaxError(response.error)})}function actionOperation(response,type){"SurePeople"===type?(vm.masterActionPlan=response.actionPlan||[],vm.actionPlan=angular.copy(vm.masterActionPlan)):(vm.masterActionPlanAP=response.actionPlan||[],vm.actionPlanAP=angular.copy(vm.masterActionPlanAP)),typeSet(type)}function typeSet(type){if(vm.type=type,vm.pageSetting={pageSize:20,textSearching:"",companyText:"",accountSearching:"",accountFilter:"",addFromSurePeople:""},null!==vm.accountSectionEnable){for(var i=0;i<vm.masterActionPlanAP.length;i++)if(vm.masterActionPlanAP[i].company.id===vm.accountSectionEnable.accountProgram.company.id){vm.accountProgramFn(vm.masterActionPlanAP[i],vm.accountSectionEnable.filter);break}}else vm.accountProgram=!1,order("name",!1)}function deleteOrgPlanModal(options){vm.orgPlanDeleteOptions=options,ngDialog.open({template:"/sp/resources/html/admin/organization/delete-plan-modal.html",scope:$scope})}function deleteActionPlanOrStep(){var deleteApi="AccountAdmin"===vm.orgPlanDeleteOptions.mode?vm.serviceApis.deleteActionPlanOrStepAccountAdmin:vm.serviceApis.deleteActionPlanOrStepSuperAdmin;ajaxService.getAjaxResponse({url:deleteApi,data:$.param({actionPlanId:vm.orgPlanDeleteOptions.actionPlanId,practiceAreaId:vm.orgPlanDeleteOptions.practiceAreaId})}).then(function(response){if("true"===response.Success){if(ngDialog.close(),"SurePeople"===vm.orgPlanDeleteOptions.type)for(var i=0;i<vm.actionPlan.length;i++)vm.actionPlan[i].id===vm.orgPlanDeleteOptions.actionPlanId&&vm.actionPlan.splice(i,1);else for(var j=0;j<vm.accountProgramDetail.actionPlanList.length;j++)vm.accountProgramDetail.actionPlanList[j].id===vm.orgPlanDeleteOptions.actionPlanId&&vm.accountProgramDetail.actionPlanList.splice(j,1);""===vm.orgPlanDeleteOptions.practiceAreaId?(sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.deleteplan.success")),"AccountAdmin"===vm.orgPlanDeleteOptions.mode&&sharedProperties.fireAnalyticsEvent("Manage Account | Learning Program Deleted","N/A")):(sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.deletestep.success")),"AccountAdmin"===vm.orgPlanDeleteOptions.mode&&sharedProperties.fireAnalyticsEvent("Manage Account | Learning Program step Deleted","N/A"))}else null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})}function publish(learningProgram){ajaxService.getAjaxResponse({url:vm.serviceApis.publish,data:$.param({allCompanies:learningProgram.company,allMembers:learningProgram.member,actionPlanId:learningProgram.id})}).then(function(response){if("true"===response.Success){if("SurePeople"===learningProgram.type){for(var i=0;i<vm.actionPlan.length;i++)if(vm.actionPlan[i].id===learningProgram.id){vm.actionPlan[i].active=!0,vm.actionPlan[i].allMembers=learningProgram.member,vm.actionPlan[i].allCompanies=learningProgram.company;break}sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.publishMessageSurePeople"))}else{for(var j=0;j<vm.accountProgramDetail.actionPlanList.length;j++)if(vm.accountProgramDetail.actionPlanList[j].id===learningProgram.id){vm.accountProgramDetail.actionPlanList[j].active=!0,vm.accountProgramDetail.actionPlanList[j].companyAllMembers=learningProgram.member;break}sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.publishMessageCompany"))}ngDialog.close()}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function allCompanies(options){ajaxService.getAjaxResponse({url:vm.serviceApis.allCompanies,data:$.param({actionPlanId:options.id,enable:options.active})}).then(function(response){if("true"===response.Success){for(var i=0;i<vm.actionPlan.length;i++)if(vm.actionPlan[i].id===options.id){vm.actionPlan[i].allCompanies=options.active;break}vm.actionPlanAP=[],sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.permissionMessage"))}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function allMembers(options){ajaxService.getAjaxResponse({url:vm.serviceApis.allMembers,data:$.param({actionPlanId:options.id,enable:options.active,companyId:options.companyId})}).then(function(response){"true"===response.Success?(null===options.companyId?options.learningProgram.allMembers=options.active:options.learningProgram.companyAllMembers=options.active,vm.actionPlanAP=[],sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.permissionMessage"))):null!==response.error&&sharedProperties.ajaxError(response.error)})}function getDetail(actionplanid){ajaxService.getAjaxResponse({url:vm.serviceApis.getDetail,data:$.param({actionPlanId:actionplanid,isEdit:!1,accountDashboard:!1})}).then(function(response){"true"===response.Success?(vm.actionPlanPreviewDetail=response.actionPlan,vm.currentActionPlan=0,vm.viewMode.preview=!0,$("html,body").animate({scrollTop:$(".admin-action-plan").offset().top-80},300)):null!==response.error&&sharedProperties.ajaxError(response.error)})}function adminPlanEnable(obj){obj.company.actionPlanAdminEnabled=!obj.company.actionPlanAdminEnabled,ajaxService.getAjaxResponse({url:vm.serviceApis.adminPlanEnable,data:$.param({companyId:obj.company.id,enableAdminAccess:obj.company.actionPlanAdminEnabled})}).then(function(response){"true"===response.Success?sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.permissionMessage")):null!==response.error&&(obj.company.actionPlanAdminEnabled=!obj.company.actionPlanAdminEnabled,sharedProperties.ajaxError(response.error))})}function addToCompany(obj){obj.actionPlanIds=obj.actionPlanIds.toString(),ajaxService.getAjaxResponse({url:vm.serviceApis.addToCompany,data:$.param(obj)}).then(function(response){if("true"===response.Success){for(var i=0;i<response.actionPlanListing.length;i++)vm.accountProgramDetail.actionPlanList.push(response.actionPlanListing[i]);vm.pageSetting.accountFilter="SurePeople",ngDialog.close()}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function removeFromCompany(){ajaxService.getAjaxResponse({url:vm.serviceApis.removeFromCompany,data:$.param({actionPlanId:vm.removeCompany.actionId,companyId:vm.removeCompany.companyId})}).then(function(response){if("true"===response.Success){for(var i=0;i<vm.accountProgramDetail.actionPlanList.length;i++)if(vm.accountProgramDetail.actionPlanList[i].id===vm.removeCompany.actionId){vm.accountProgramDetail.actionPlanList.splice(i,1);break}ngDialog.close()}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function activateDeactivate(learningProgram,companyId){ajaxService.getAjaxResponse({url:vm.serviceApis.activateDeactivate,data:$.param({actionPlanId:learningProgram.id,onHold:!learningProgram.onHold,companyId:companyId})}).then(function(response){"true"===response.Success?learningProgram.onHold=!learningProgram.onHold:null!==response.error&&sharedProperties.ajaxError(response.error)})}function actionListSearch(searchOperation){switch(vm.type){case"Company":return vm.accountProgram?searchOperation.list.filter(function(e){return-1!==angular.lowercase(e.name).indexOf(angular.lowercase(searchOperation.search))&&(null!==vm.pageSetting.accountFilter&&vm.pageSetting.accountFilter.length?e.type===vm.pageSetting.accountFilter:e)}):searchOperation.list.filter(function(e){return-1!==angular.lowercase(e.company.name).indexOf(angular.lowercase(searchOperation.search))});case"SurePeople":return searchOperation.list.filter(function(e){return-1!==angular.lowercase(e.name).indexOf(angular.lowercase(searchOperation.search))})}vm.pageSetting.pageSize=20}function startPoint(type){vm.accountSectionEnable=$localStorage.get("learningProgramAP"),null!==vm.accountSectionEnable?$state.go("Company"):$state.go(type)}function changeType(type){$localStorage.remove("learningProgramAP"),vm.accountProgram=!1,vm.accountSectionEnable=null,vm.actionProgramDetailId=null,$state.go(type)}function removeCompanyMortal(actionId,companyId,name){vm.removeCompany={actionId:actionId,companyId:companyId,name:name};ngDialog.open({template:vm.mortalUrl.removeCompany,scope:$scope})}function publishMortal(learningProgram){vm.publishId=learningProgram;ngDialog.open({template:vm.mortalUrl.publishPlan,scope:$scope})}function publishAccountMortal(learningProgram){vm.publishId=learningProgram;ngDialog.open({template:vm.mortalUrl.publishPlanAccount,scope:$scope})}function infinteScroll(pageSize){if("SurePeople"===vm.type){if(!vm.actionPlan.length)return!0;vm.pageSetting.disabledInfinite||(vm.pageSetting.pageSize=pageSize,pageSize>=vm.actionPlan.length&&(vm.pageSetting.pageSize=vm.actionPlan.length))}else{var plan=vm.accountProgram?vm.accountProgramDetail.actionPlanList:vm.actionPlanAP;if(!plan.length)return!0;vm.pageSetting.disabledInfinite||(vm.pageSetting.pageSize=pageSize,pageSize>=plan.length&&(vm.pageSetting.pageSize=plan.length))}}function createProgram(obj){$localStorage.set("companyId",obj),"AccountAdmin"===obj.mode?window.location.href="/sp/admin/account/actionPlan/createPage":window.location.href="/sp/sysAdmin/actionPlan/createOrgPlan"}function updateProgram(obj,clone){void 0!==clone&&$localStorage.set("clone",obj.modal),$localStorage.set("companyId",obj),"AccountAdmin"===obj.mode?""!==vm.selectedActionPlan&&(window.location.href="/sp/admin/account/actionPlan/updatePage"):window.location.href="/sp/sysAdmin/actionPlan/updateOrgPlan"}function accountProgramFn(accountProgram,filter){vm.pageSetting={pageSize:20,textSearching:"",companyText:"",accountSearching:"",accountFilter:filter,addFromSurePeople:""},vm.pageSetting.lastReverse=!1,vm.actionProgramDetailId=accountProgram.company.id,vm.masterProgramDetail=accountProgram,vm.accountProgramDetail=angular.copy(vm.masterProgramDetail),vm.accountProgram=!0,order("name",!1),$localStorage.set("learningProgramAP",{accountProgram:accountProgram,filter:filter})}function editEnable(obj){obj.editAllowed=!obj.editAllowed,ajaxService.getAjaxResponse({url:vm.serviceApis.modifyEditAccess,data:$.param({actionPlanId:obj.id,enable:obj.editAllowed})}).then(function(response){"true"===response.Success?sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.permissionMessage")):null!==response.error&&(obj.editAllowed=!obj.editAllowed,sharedProperties.ajaxError(response.error))})}function addFromSurePeopleMortal(companyId){vm.pageSetting.addFromSurePeople="",ajaxService.getAjaxResponse({url:vm.serviceApis.globalProgram,data:$.param({companyId:companyId})}).then(function(response){if("true"===response.Success){vm.actionplanid={actionPlanIds:[],companyId:""},vm.globalSPProgramList=response.actionPlanList;ngDialog.open({template:vm.mortalUrl.addFromSurePeople,scope:$scope})}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function addToList(actionId,companyId){vm.actionplanid.companyId=companyId,vm.actionplanid.actionPlanIds.push(actionId)}function getPlanCount(actionList){var count={sp:0,account:0};if(actionList)for(var i=0;i<actionList.length;i++)"SurePeople"===actionList[i].type?count.sp++:count.account++;return count}function active(event,setting){vm.pageSetting.lastPredicate=setting.predicate,vm.pageSetting.lastReverse=setting.reverse,sharedProperties.toggleFilterClick(event,vm.pageSetting.lastPredicate),order(vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse)}function order(predicate,reverse){vm.pageSetting.lastPredicate=predicate,vm.pageSetting.lastReverse=reverse,"SurePeople"===vm.type?vm.actionPlan=$filter("orderBy")(vm.actionPlan,vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse):vm.accountProgram?vm.accountProgramDetail.actionPlanList=$filter("orderBy")(vm.accountProgramDetail.actionPlanList,vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse):vm.actionPlanAP=$filter("orderBy")(vm.actionPlanAP,vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse)}function returnToAccountAP(){vm.accountProgram=!1,vm.pageSetting.pageSize=20,$localStorage.remove("learningProgramAP");for(var i=0;i<vm.actionPlanAP.length;i++)if(vm.actionPlanAP[i].company.id===vm.actionProgramDetailId){vm.actionPlanAP[i].actionPlanList=vm.accountProgramDetail.actionPlanList,vm.actionProgramDetailId=null;break}}function stepNo(i){return parseInt(i,10)+1}function previewVideo(mode,url){if("Video"===mode)sharedProperties.videoPopUp(url);else if("WebInternal"===mode)window.location.href=url;else if("ActionPlan"===mode)$rootScope.displayActionPanel();else{var win=window.open(url,"_blank");win.focus()}}var vm=this;vm.serviceApis={getAll:"/sp/sysAdmin/actionPlan/getAll",deleteActionPlanOrStepSuperAdmin:"/sp/sysAdmin/actionPlan/delete",deleteActionPlanOrStepAccountAdmin:"/sp/admin/account/actionPlan/delete",fetchCompanies:"/sp/sysAdmin/actionPlan/getCompanies",publish:"/sp/sysAdmin/actionPlan/publish",allCompanies:"/sp/sysAdmin/actionPlan/modify/allCompanies",allMembers:"/sp/sysAdmin/actionPlan/modify/allMembers",getDetail:"/sp/sysAdmin/actionPlan/getDetails",adminPlanEnable:"/sp/sysAdmin/actionPlan/adminEnable",modifyEditAccess:"/sp/sysAdmin/actionPlan/modify/editAccess",globalProgram:"/sp/sysAdmin/actionPlan/getGlobalPrograms",addToCompany:"/sp/sysAdmin/actionPlan/addCompany",removeFromCompany:"/sp/sysAdmin/actionPlan/removeCompany",activateDeactivate:"/sp/admin/account/actionPlan/activateDeactivate"},vm.mortalUrl={publishPlan:"/sp/sysAdmin/actionPlan/publishPlan",publishPlanAccount:"/sp/sysAdmin/actionPlan/publishPlanAccount",addFromSurePeople:"/sp/sysAdmin/actionPlan/addFromSurePeople",removeCompany:"/sp/resources/html/sysAdmin/organization/remove-plan.html"},vm.masterActionPlan=[],vm.actionPlan=[],vm.clonePlanName=null,vm.actionplanid=[],vm.actionPlanAP=[],vm.actionProgramDetailId=null,vm.accountSectionEnable=null,vm.pageSetting={pageSize:20,textSearching:"",companyText:"",accountSearching:"",accountFilter:"",addFromSurePeople:"",lastPredicate:"name",lastReverse:!1},vm.originalPageSetting=angular.copy(vm.pageSetting),vm.getUserInfo=basicService.getUserInfo(),vm.viewMode={preview:!1},vm.accountProgram=!1,vm.globalSPProgramList=[],vm.masterProgramDetail=[],vm.masterActionPlan=[],vm.masterActionPlanAP=[],vm.count={sp:0,account:0},vm.getAll=getAll,vm.deleteActionPlanOrStep=deleteActionPlanOrStep,vm.publish=publish,vm.getDetail=getDetail,vm.addToCompany=addToCompany,vm.removeFromCompany=removeFromCompany,vm.activateDeactivate=activateDeactivate,vm.infinteScroll=infinteScroll,vm.createProgram=createProgram,vm.updateProgram=updateProgram,vm.deleteOrgPlanModal=deleteOrgPlanModal,vm.publishMortal=publishMortal,vm.publishAccountMortal=publishAccountMortal,vm.allCompanies=allCompanies,vm.allMembers=allMembers,vm.adminPlanEnable=adminPlanEnable,vm.accountProgramFn=accountProgramFn,vm.editEnable=editEnable,vm.addFromSurePeopleMortal=addFromSurePeopleMortal,vm.addToList=addToList,vm.getPlanCount=getPlanCount,vm.removeCompanyMortal=removeCompanyMortal,vm.changeType=changeType,vm.startPoint=startPoint,vm.active=active,vm.actionListSearch=actionListSearch,vm.returnToAccountAP=returnToAccountAP,vm.stepNo=stepNo,vm.previewVideo=previewVideo}function orgAdminCreatePlanController($scope,ajaxService,$localStorage,ngDialog,spJsonFetchAdmin,$rootScope,$timeout,sharedProperties,$state){function calculateDuration(Section){if(angular.isArray(Section)){for(var i=0,count=0;i<Section.length;i++)count+=Section[i].durationDays;return count||0}return 0}function deleteOrgPlanModal(options){if(vm.orgPlanDeleteOptions=options,void 0===vm.orgPlanDeleteOptions.practiceAreaId||null===vm.orgPlanDeleteOptions.practiceAreaId){vm.errorCat=!1,vm.actionPlanForm.submitted=!1;$(".category").each(function(){$(this).removeClass("error-category")}),vm.actionPlan.practiceAreaList.splice(vm.currentPracticeListIndex,1),moveIndexToFirstItem(0)}else ngDialog.open({template:"/sp/resources/html/admin/organization/delete-plan-modal.html",scope:$scope})}function deleteActionPlanOrStep(){var deleteApi="AccountAdmin"===$localStorage.get("companyId").mode?vm.config.deleteActionPlanOrStepAccountAdmin:vm.config.deleteActionPlanOrStepSuperAdmin;ajaxService.getAjaxResponse({url:deleteApi,data:$.param({actionPlanId:vm.orgPlanDeleteOptions.actionPlanId,practiceAreaId:vm.orgPlanDeleteOptions.practiceAreaId})}).then(function(response){if("true"===response.Success)if(ngDialog.close(),""===vm.orgPlanDeleteOptions.practiceAreaId)sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.deleteplan.success")),$timeout(function(){"AccountAdmin"===$localStorage.get("companyId").mode?window.location.href="/sp/admin/account/actionPlan/home":window.location.href="/sp/sysAdmin/adminActionPlan"},500);else{sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.deletestep.success")),vm.errorCat=!1,vm.actionPlanForm.submitted=!1;var $category=$(".category");$category.each(function(){$(this).removeClass("error-category")}),vm.actionPlan.practiceAreaList.splice(vm.currentPracticeListIndex,1),moveIndexToFirstItem(0)}else null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})}function stepTypeChange(){vm.actionPlan.practiceAreaList.filter(function(e){return"All"===vm.actionPlan.stepType?e.status="ACTIVE":(e.status="ACTIVE",e.durationDays=0)})}function clearOption(options){options.url="",options.linkText="",options.imageLink="",options.altText=""}function leftSectionHeight(){var practiceArea=$(".introduction-area").width(),left=$(".introduction-area").find(".image_intro img").outerWidth(),total=left/practiceArea*100;vm.adjustedWidth=96-total+"%",vm.imageSize=total+"%"}function introVideoSetup(){void 0===vm.actionPlan.practiceAreaList[vm.currentActionPlan].introVideo.type&&(vm.actionPlan.practiceAreaList[vm.currentActionPlan].introVideo.type="VIDEO")}function companyLogoStep(url){url?vm.imageEditBox=!vm.imageEditBox:vm.uploadCompanyLogo()}function uploadCompanyLogo(){vm.imageEditBox=!1,vm.imageType="company",ngDialog.open({template:"/sp/resources/html/admin/account/upload-company-org-pic.html",scope:$scope})}function deleteImageModal(imageType){vm.imageEditBox=!1,vm.imageType=imageType,ngDialog.open({template:"/sp/resources/html/admin/account/delete-image-org-modal.html",scope:$scope})}function practiceAreaSort(length){if(!vm.actionBool&&length>1){new Sortable121(document.getElementById("sort-practice-area"),{group:"name",animation:150,ghostClass:"ghost",handle:".practiceHandle",yAxisOnly:!0,onEnd:function(evt){vm.actionPlan.practiceAreaList.move(evt.oldIndex,evt.newIndex),vm.currentActionPlan=evt.newIndex}});vm.actionBool=!0}}function initialize(){if(!vm.initializeBool){new Sortable121(document.getElementById("sort-me"),{group:"iname",animation:150,ghostClass:"ghost",handle:".dHandle",yAxisOnly:!0,onEnd:function(evt){vm.copYactionPlan.move(evt.oldIndex,evt.newIndex)}});vm.initializeBool=!0}}function childInit(id){idi[id]=new Sortable121(document.getElementById("child_"+id),{group:"cname",animation:150,ghostClass:"ghost",handle:".dHandle",yAxisOnly:!0,onEnd:function(evt){vm.endindex=$(evt.item).index();var id=$(this.el).attr("id").split("_")[1];vm.copYactionPlan[id].actionList.move(vm.startIndex,vm.endindex)},onStart:function(evt){vm.startIndex=$(evt.item).index()}})}function startPoint(param){null===$localStorage.get("companyId")?redirectToListing():vm.company=$localStorage.get("companyId"),"update"===param?(vm.mode=param,getDetail("onLoad")):(vm.mode=param,vm.actionPlan=spJsonFetchAdmin.spOrgJson(),vm.actionPlan.type=vm.company.type,vm.actionPlan.createdByCompanyId=vm.company.id),$state.go("admin"),"create"===param&&(vm.currentPracticeAreaId=void 0,vm.currentPracticeListIndex=0),$(document).on("imageSaved",function(e,data){$scope.$apply(function(){vm.actionPlan.imageUrl=data.imageData})})}function getDetail(type){ajaxService.getAjaxResponse({url:"AccountAdmin"===$localStorage.get("companyId").mode?vm.config.getDetailForAccountAdmin:vm.config.getDetail,data:$.param({actionPlanId:vm.company.actionPlan,isEdit:"preview"!==type,accountDashboard:!1})}).then(function(response){"true"===response.Success?(vm.actionPlan=response.actionPlan,vm.currentPracticeAreaId=void 0,vm.currentPracticeListIndex=0,vm.cloneEnable=!1,null!==$localStorage.get("clone")&&(vm.actionPlan.type=vm.company.type,vm.clonePlan($localStorage.get("clone")),$localStorage.remove("clone"),vm.cloneEnable=!0),scrollPosition()):null!==response.error&&sharedProperties.ajaxError(response.error)})}function fetchGroup(){!vm.groupList.length&&groupCall()}function converTime(list,hour,min){list.timeInMins=parseInt(void 0===hour?0:60*hour,10)+parseInt(void 0===min?0:min,10)}function converTimePreview(totalMin,hour,min){return{min:totalMin%60,hour:Math.floor(totalMin/60)}}function clonePlan(type){vm.clonecompanies.length||"SurePeople"!==type?openCompanyModal(type):getCompanies(type)}function getCompanies(type){ajaxService.getAjaxResponse({url:vm.config.fetchCompanies,method:"get"}).then(function(response){if("true"===response.Success){vm.clonecompanies=[],openCompanyModal(type),vm.companiesAjax=!0;var clonedCompany={};response.companies.filter(function(obj){obj.id===vm.company.id?clonedCompany=obj:vm.clonecompanies.push(obj)});vm.clonecompanies.sort(function(a,b){var nameA=a.name.toLowerCase(),nameB=b.name.toLowerCase();return nameA<nameB?-1:nameA>nameB?1:0}),vm.clonecompanies.unshift(clonedCompany)}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function openCompanyModal(type){vm.clonePlanName=vm.actionPlan.name;var template="SurePeople"===type?vm.config.closePlan:vm.config.closePlanSP;ngDialog.open({template:template,scope:$scope}).closePromise.then(function(data){vm.pageSetting.companyText=""})}function groupCall(){void 0===vm.pageSetting.groupNameHolder&&(vm.pageSetting.groupNameHolder=[]),ajaxService.getAjaxResponse({url:"AccountAdmin"===$localStorage.get("companyId").mode?vm.config.fetchGroupForAccountAdmin:vm.config.fetchGroup,data:$.param({companyId:vm.company.id})}).then(function(response){if("true"===response.Success){if(vm.companies=response.groupList,vm.companiesAjax=!0,vm.pageSetting.groupNameHolder.length)for(var i=vm.companies.length-1;i>=0;i--)-1!==vm.actionPlan.groupIdList.indexOf(vm.companies[i].id)&&vm.companies.splice(i,1)}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function openCloseSiblingContent(event,mode){var $this=$(event.target);if($this.hasClass("filterCheckBox-label"))return!0;var toggleClass=void 0===mode?"show":"noshow",$html=$this.closest(".category"),$upTarget=$html.find(".header-style-content:eq(0)"),$upTargetHeight=$upTarget.outerHeight();$html.find(".border-faq-content:eq(0)").outerHeight();$upTargetHeight>1?$upTarget.css("height",0):$upTarget.css("height","auto"),$html.toggleClass(toggleClass)}function addInputBox(param){for(var i=0;i<param;i++)vm.singleBox.push(vm.singleBox.length)}function removeInputBox(index){vm.singleBox.splice(index,1),vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList.splice(index,1)}function addLink(actionData,parent){var bool=void 0!==parent&&!parent.permissions.Completion;actionData.push({type:null,linkText:null,url:null,imageLink:null,altText:null,permissions:{Completion:bool}})}function singleAction(actionList){actionList.push({title:$rootScope.pullInterNationalization("sysadmin.organization.newAction"),description:null,timeInMins:0,type:"Single",active:!0,actionData:[],permissions:{Completion:!0}}),vm.pageSetting.actions=!0,vm.trueCheck()}function groupAction(actionList){actionList.push({title:null,description:null,timeInMins:0,type:"Group",active:!0,actionData:[{title:null,description:null,type:null,linkText:null,url:null,imageLink:null,altText:null,permissions:{Completion:!0}}],permissions:{}}),vm.pageSetting.actions=!0,vm.trueCheck()}function deleteActionList(list,index){vm.deleteActionListInfo={list:list,index:index},ngDialog.open({template:"/sp/resources/html/sysAdmin/organization/delete-action-list.html",scope:$scope})}function deleteActionListConfirm(){vm.deleteActionListInfo.list.splice(vm.deleteActionListInfo.index,1),ngDialog.close()}function addCategory(param){vm.actionPlan.practiceAreaList[vm.currentActionPlan].devStrategyActionCategoryList.push({title:$rootScope.pullInterNationalization("sysadmin.organization.newCategory"),helpText:null,status:"ACTIVE",actionList:[{title:$rootScope.pullInterNationalization("sysadmin.organization.newAction"),description:null,timeInMins:0,type:"Single",active:!0,actionData:[],permissions:{Completion:!0}}]}),vm.pageSetting.addedCategory=!0,vm.errorCat&&vm.trueCheck()}function scrollPosition(){$(".parent-cat").each(function(){$(this).removeClass("show").find(".header-style-content:eq(0)").css("height",0)}),$("html,body").animate({scrollTop:$(".lnd-right-sec").offset().top-80},300)}function changeActionPlan(index){!0===vm.viewMode.setting?vm.actionPlanSetting.$valid?(vm.errorSetting.setting=!1,index>=0?changeSteps(index):vm.viewMode={preview:!1,editCreate:!1,setting:!1,step:!0}):(vm.submitted=!0,vm.errorSetting.setting=!0):!0===vm.viewMode.step?vm.stepSettingForm.$valid?(vm.errorSetting.stepSetting=!1,index>=0?changeSteps(index):vm.viewMode={preview:!1,editCreate:!1,setting:!0,step:!1}):(vm.submitted=!0,vm.errorSetting.stepSetting=!0):vm.actionPlanForm.$valid&&trueCheck()?(vm.errorSetting.step=!1,-1===index?vm.viewMode={preview:!1,editCreate:!1,setting:!0,step:!1}:-2===index?vm.viewMode={preview:!1,editCreate:!1,setting:!1,step:!0}:changeSteps(index)):(vm.submitted=!0,errorHighlighter(),vm.errorSetting.step=!0)}function changeSteps(index){clearError(),vm.currentActionPlan=index,vm.currentPracticeAreaId=vm.actionPlan.practiceAreaList[index].id,vm.currentPracticeListIndex=index,vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList=vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList.filter(function(e){return""!==e}),void 0===vm.actionPlan.practiceAreaList[vm.currentActionPlan].introVideo.type&&(vm.actionPlan.practiceAreaList[vm.currentActionPlan].introVideo.type="VIDEO"),vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList.length?vm.singleBox=angular.copy(vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList):vm.singleBox=[0],vm.copYactionPlan=vm.actionPlan.practiceAreaList[vm.currentActionPlan].devStrategyActionCategoryList,vm.viewMode={preview:!1,editCreate:!0,setting:!1,step:!1},scrollPosition(),vm.errorSetting.step=!1}function startCloning(companyDetail){if(void 0!==companyDetail?(vm.list.id=companyDetail.id,vm.list.name=companyDetail.name):$localStorage.set("learningProgramAP",{accountProgram:{company:{id:vm.list.id}},filter:"Company"}),null===vm.list.id||null===vm.list.name)return!1;ngDialog.close(),vm.actionPlan.name=$rootScope.pullInterNationalization("sysadmin.organization.copyof")+" "+vm.actionPlan.name,vm.actionPlan.id=null,vm.actionPlan.groupList=null,vm.actionPlan.active=!1,vm.company.id=vm.list.id,vm.company.name=vm.list.name,vm.pageSetting.groupNameHolder=[],vm.mode="create",vm.actionPlan.practiceAreaList.filter(function(e){e.id=null,e.devStrategyActionCategoryList.filter(function(e1){e1.uid=null,e1.actionList.filter(function(e2){e2.uid=null,e2.actionData.filter(function(e3){e3.uid=null})})})}),sharedProperties.growlMessage($rootScope.pullInterNationalization("sysadmin.organization.cloneSuccess")),"AccountAdmin"===$localStorage.get("companyId").mode&&sharedProperties.fireAnalyticsEvent("Manage Account | Org Plan Cloned","N/A")}function cloneSelection(searchMode){switch(searchMode){case"AP":vm.list.name=null,vm.list.id=null,vm.actionPlan.type="Company";break;case"SP":vm.list.id=vm.company.idAdmin,vm.list.name=vm.company.nameAdmin,vm.actionPlan.type="SurePeople"}}function selectCompanyForClone(name,id){vm.list.name=name,vm.list.id=id}function createNewSection(index){vm.submitted=!1,vm.currentPracticeAreaId=void 0,!0===vm.viewMode.setting?vm.actionPlanSetting.$valid?newStep(vm.actionPlan.practiceAreaList.length):vm.submitted=!0:!0===vm.viewMode.step?vm.stepSettingForm.$valid?newStep(vm.actionPlan.practiceAreaList.length):vm.submitted=!0:vm.actionPlanForm.$valid&&trueCheck()?newStep(vm.actionPlan.practiceAreaList.length):(vm.submitted=!0,errorHighlighter())}function cloneStep(index){vm.submitted=!1,vm.currentPracticeAreaId=void 0,vm.actionPlanForm.$valid&&trueCheck()?copyStepInformation(vm.actionPlan.practiceAreaList.length):(vm.submitted=!0,errorHighlighter())}function copyStepInformation(index){var copied=angular.copy(vm.actionPlan.practiceAreaList[vm.currentActionPlan]);copied.name=$rootScope.pullInterNationalization("sysadmin.organization.copyof")+" "+copied.name,copied.id=null,copied.devStrategyActionCategoryList.filter(function(e1){e1.uid=null,e1.actionList.filter(function(e2){e2.uid=null,e2.actionData.filter(function(e3){e3.uid=null})})}),vm.actionPlan.practiceAreaList.push(copied),vm.currentActionPlan=index,vm.currentPracticeListIndex=index,vm.singleBox=[0],vm.viewMode={preview:!1,editCreate:!0,setting:!1,step:!1},vm.copYactionPlan=vm.actionPlan.practiceAreaList[vm.currentActionPlan].devStrategyActionCategoryList,scrollPosition()}function newStep(index){vm.actionPlan.practiceAreaList.push({name:null,description:null,status:"All"===vm.actionPlan.stepType?"INACTIVE":"ACTIVE",durationDays:0,introVideo:{status:"INACTIVE",type:"VIDEO"},keyOutcomes:{active:!1,outcomesList:[]},devStrategyActionCategoryList:[]}),vm.currentActionPlan=index,vm.currentPracticeListIndex=index,vm.singleBox=[0],vm.viewMode={preview:!1,editCreate:!0,setting:!1,step:!1},vm.copYactionPlan=vm.actionPlan.practiceAreaList[vm.currentActionPlan].devStrategyActionCategoryList,scrollPosition()}function errorHighlighter(){trueCheck(),!!vm.emptyCheck&&(vm.errorCat=!0),vm.result.length||(vm.errorCat=!0),!vm.errorCat||vm.result.length&&!vm.emptyCheck||(vm.submitted=!0)}function errorClass(area){if(!vm.submitted)return!1;var $category=$(".category"),count=0;$category.each(function(){$(this).find(".ng-invalid-required,.ng-invalid-pattern").length?($(this).addClass("error-category"),count++):$(this).removeClass("error-category")}),!0===vm.viewMode.setting?vm.actionPlanSetting.$valid&&(vm.errorSetting.setting=!1):!0===vm.viewMode.step?vm.stepSettingForm.$valid&&(vm.errorSetting.stepSetting=!1):vm.actionPlanForm.$valid&&trueCheck()&&(vm.errorSetting.step=!1),count?vm.submitted=!0:vm.actionPlanSetting.$valid&&vm.stepSettingForm.$valid&&vm.actionPlanForm.$valid&&(vm.submitted=!1)}function clearError(){vm.submitted=!1,vm.errorCat=!1,$(".category").each(function(){$(this).removeClass("error-category")})}function redirectToListing(){var localObj=$localStorage.get("companyId");null!==localObj?"AccountAdmin"===localObj.mode?($localStorage.set("redirectedOrg",vm.company.actionPlan),window.location.href="/sp/admin/manageAccount#/accountOrganization"):window.location.href="/sp/sysAdmin/actionPlan/adminActionPlan":$timeout(function(){$localStorage.get("loggegdInProfile").member.roles.indexOf("SuperAdministrator")>-1?window.location.href="/sp/sysAdmin/actionPlan/adminActionPlan":window.location.href="/sp/admin/manageAccount#/accountOrganization"},500)}function trueCheck(){return!(vm.currentActionPlan>=0)||(vm.result=[],vm.emptyCheck=0,vm.actionPlan.practiceAreaList[vm.currentActionPlan].devStrategyActionCategoryList.filter(function(e,i){"ACTIVE"===e.status&&(vm.result.push(e),e.actionList.length||vm.emptyCheck++)}),vm.result.length&&!vm.emptyCheck)}function activeCheck(){return vm.atleastOneCheck=["Pass"],
"All"!==vm.actionPlan.stepType||(vm.atleastOneCheck=vm.actionPlan.practiceAreaList.filter(function(e){return"ACTIVE"===e.status}),vm.atleastOneCheck.length)}function verifyJson(){return vm.errorSetting={setting:!1,step:!1,stepSetting:!1},vm.actionPlanForm.$valid&&trueCheck()?vm.errorSetting.step=!1:vm.errorSetting.step=!0,vm.actionPlanSetting.$valid?vm.errorSetting.setting=!1:vm.errorSetting.setting=!0,vm.stepSettingForm.$valid&&vm.activeCheck()?vm.errorSetting.stepSetting=!1:vm.errorSetting.stepSetting=!0,allFalsy(vm.errorSetting)}function allFalsy(obj){var send=!0;for(var i in obj)!0===obj[i]&&(send=!1);return send}function submitObject(){if(vm.disabled)return!0;if(vm.submitted=!1,vm.errorCat=!1,vm.disabled=!0,verifyJson()){var createServiceAPI="AccountAdmin"===$localStorage.get("companyId").mode?vm.config.accountAdminCreatePlan:vm.config.create,updateServiceAPI="AccountAdmin"===$localStorage.get("companyId").mode?vm.config.accountAdminUpdatePlan:vm.config.editGroup,userMode=$localStorage.get("companyId").mode;vm.actionPlan.createdByCompanyId=vm.company.id,ajaxService.getAjaxResponse({url:"update"===vm.mode?updateServiceAPI:createServiceAPI,data:vm.actionPlan,headers:{"Content-Type":"application/json"}}).then(function(response){if("true"===response.Success){var redirectUrl="AccountAdmin"===userMode?"/sp/admin/account/actionPlan/updatePage":"/sp/sysAdmin/actionPlan/updateOrgPlan",message="update"===vm.mode?$rootScope.pullInterNationalization("sysAdmin.organization.planUpdated"):$rootScope.pullInterNationalization("sysAdmin.organization.planCreated");$localStorage.set("planStatus",message),"AccountAdmin"===userMode&&sharedProperties.fireAnalyticsEvent("Manage Account | "+vm.mode=="update"?"Org Plan Updated":"Org Plan Created","N/A"),"update"!==vm.mode?($localStorage.set("companyId",{id:vm.company.id,name:vm.company.name,actionPlan:response.actionPlanId,mode:userMode,type:vm.company.type}),window.location.href=redirectUrl):getDetail("onSave"),planStatus(),vm.disabled=!1,clearError()}else null!==response.error&&(clearError(),vm.disabled=!1,sharedProperties.ajaxError(response.error))})}else vm.disabled=!1,vm.submitted=!0,errorHighlighter()}function addGroup(){ngDialog.open({template:vm.config.groupDialog,scope:$scope}).closePromise.then(function(data){vm.pageSetting.groupText=""})}function addedGroup(list){void 0===vm.actionPlan.groupIdList&&(vm.actionPlan.groupIdList=[]),vm.actionPlan.groupIdList.push(list.id),vm.pageSetting.groupNameHolder.push(list);for(var i=0;i<vm.companies.length;i++)if(list.id===vm.companies[i].id){vm.companies.splice(i,1);break}}function removeGroup(list,index){vm.actionPlan.groupIdList.splice(index,1),vm.pageSetting.groupNameHolder.splice(index,1),vm.companies.splice(index,0,list)}function requiredCompletion(list,actionList){if("Group"===actionList.type){if("ACTIVE"===list.status&&actionList.active){return!actionList.actionData.filter(function(e){return e.permissions.Completion}).length}return!1}return!1}function countList(list,total){var result=0;return list.filter(function(e){void 0!==e.permissions&&null!==e.permissions&&void 0!==e.permissions.Completion&&!0===e.permissions.Completion&&result++,void 0!==total&&void 0!==e.actionData&&e.actionData.filter(function(e1){void 0!==e1.permissions&&null!==e1.permissions&&void 0!==e1.permissions.Completion&&!0===e1.permissions.Completion&&result++})}),result}function changeCompletion(list,actionList){"Group"===actionList.type&&"ACTIVE"===list.status&&actionList.active&&actionList.actionData.filter(function(e){e.permissions.Completion=!1})}function timeAdjust(convert,type){return convert?"h"===type?Math.floor(convert/60):convert%60:""}function previewVideo(mode,url){if("Video"===mode)sharedProperties.videoPopUp(url);else if("WebInternal"===mode)window.location.href=url;else if("ActionPlan"===mode)$rootScope.displayActionPanel();else{var win=window.open(url,"_blank");win.focus()}}function previewIntroVideo(url){sharedProperties.videoPopUp(url)}function planStatus(){null!==$localStorage.get("planStatus")&&(sharedProperties.growlMessage($localStorage.get("planStatus")),$localStorage.remove("planStatus"))}var vm=this,idi=[];vm.config={fetchGroup:"/sp/sysAdmin/actionPlan/group/getGroupList",fetchGroupForAccountAdmin:"/sp/admin/group/getGroupList",create:"/sp/sysAdmin/actionPlan/create",groupDialog:"/sp/admin/selectGroup",editGroup:"/sp/sysAdmin/actionPlan/update",getDetail:"/sp/sysAdmin/actionPlan/getDetails",getDetailForAccountAdmin:"/sp/admin/account/actionPlan/getDetails",videoPopUpDialog:"/sp/admin/videoPop",fetchCompanies:"/sp/sysAdmin/actionPlan/getCompanies",accountAdminCreatePlan:"/sp/admin/account/actionPlan/create",accountAdminUpdatePlan:"/sp/admin/account/actionPlan/update",closePlan:"/sp/sysAdmin/actionPlan/clonePlan",closePlanSP:"/sp/sysAdmin/actionPlan/clonePlanSP",deleteActionPlanOrStepSuperAdmin:"/sp/sysAdmin/actionPlan/delete",deleteActionPlanOrStepAccountAdmin:"/sp/admin/account/actionPlan/delete"},vm.pageSetting={groupText:"",groupNameHolder:[]},vm.currentActionPlan=0,vm.companiesAjax=!1,vm.singleBox=[0],vm.linkType=[{name:"VIDEO IN DIALOG",value:"Video"},{name:"VIDEO IN NEW TAB",value:"VideoTab"},{name:"PPT",value:"PPT"},{name:"PDF",value:"PDF"},{name:"WEB",value:"Web"},{name:"Schedule a meeting",value:"Schedule"},{name:"Surepeople Internal Link",value:"WebInternal"},{name:"Action Plan",value:"ActionPlan"}],vm.linkType2=[{name:"VIDEO IN DIALOG",value:"Video"},{name:"VIDEO IN NEW TAB",value:"VideoTab"},{name:"PPT",value:"PPT"},{name:"PDF",value:"PDF"},{name:"WEB",value:"Web"},{name:"Surepeople Internal Link",value:"WebInternal"},{name:"Action Plan",value:"ActionPlan"}],vm.linkTypeSmall=[{name:"PPT",value:"PPT"},{name:"PDF",value:"PDF"},{name:"WEB",value:"Web"},{name:"Surepeople Internal Link",value:"WebInternal"},{name:"Action Plan",value:"ActionPlan"}],vm.groupList=[],vm.result=[],vm.emptyCheck=0,vm.clonecompanies=[],vm.pageSetting={disabledInfinite:!1,lastPredicate:"name",lastReverse:!1,companyText:"",addedCategory:!1,actions:!1,searchMode:"AP"},vm.submitted=!1,vm.originalPageSetting=angular.copy(vm.pageSetting),vm.initializeBool=!1,vm.actionBool=!1,vm.disabled=!1,vm.pool=[],vm.viewMode={preview:!1,editCreate:!1,setting:!0,step:!1},vm.errorSetting={setting:!1,step:!1,stepSetting:!1},vm.orgPlanDeleteOptions={},vm.currentPracticeAreaId=void 0,vm.currentPracticeListIndex=0,vm.cloneEnable=!1,vm.atleastOneCheck=["Pass"],vm.list={name:null,id:null},vm.openCloseSiblingContent=openCloseSiblingContent,vm.addInputBox=addInputBox,vm.removeInputBox=removeInputBox,vm.addCategory=addCategory,vm.addLink=addLink,vm.singleAction=singleAction,vm.groupAction=groupAction,vm.deleteActionList=deleteActionList,vm.changeActionPlan=changeActionPlan,vm.createNewSection=createNewSection,vm.fetchGroup=fetchGroup,vm.redirectToListing=redirectToListing,vm.submitObject=submitObject,vm.addGroup=addGroup,vm.addedGroup=addedGroup,vm.removeGroup=removeGroup,vm.trueCheck=trueCheck,vm.converTime=converTime,vm.startPoint=startPoint,vm.requiredCompletion=requiredCompletion,vm.changeCompletion=changeCompletion,vm.timeAdjust=timeAdjust,vm.initialize=initialize,vm.childInit=childInit,vm.practiceAreaSort=practiceAreaSort,vm.previewVideo=previewVideo,vm.previewIntroVideo=previewIntroVideo,vm.converTimePreview=converTimePreview,vm.introVideoSetup=introVideoSetup,vm.leftSectionHeight=leftSectionHeight,vm.initSize=$(".introduction-area").find(".image_intro img").outerWidth()/$(".introduction-area").width()*100,vm.adjustedWidth=96-vm.initSize+"%",vm.imageSize=vm.initSize+"%",vm.uploadCompanyLogo=uploadCompanyLogo,vm.deleteImageModal=deleteImageModal,vm.companyLogoStep=companyLogoStep,vm.countList=countList,vm.clearOption=clearOption,vm.stepTypeChange=stepTypeChange,vm.clonePlan=clonePlan,vm.startCloning=startCloning,vm.activeCheck=activeCheck,vm.deleteOrgPlanModal=deleteOrgPlanModal,vm.deleteActionPlanOrStep=deleteActionPlanOrStep,vm.calculateDuration=calculateDuration,vm.deleteActionListConfirm=deleteActionListConfirm,vm.selectCompanyForClone=selectCompanyForClone,vm.cloneSelection=cloneSelection,vm.cloneStep=cloneStep,vm.errorClass=errorClass;var moveIndexToFirstItem=function(index){vm.currentActionPlan=index,vm.currentPracticeAreaId=vm.actionPlan.practiceAreaList[index].id,vm.currentPracticeListIndex=index,vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList=vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList.filter(function(e){return""!==e}),void 0===vm.actionPlan.practiceAreaList[vm.currentActionPlan].introVideo.type&&(vm.actionPlan.practiceAreaList[vm.currentActionPlan].introVideo.type="VIDEO"),vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList.length?vm.singleBox=angular.copy(vm.actionPlan.practiceAreaList[vm.currentActionPlan].keyOutcomes.outcomesList):vm.singleBox=[0]};vm.selectThumbImage=function(videoObj,type){$rootScope.showMediaManager=!0;var destroyRoot=$scope.$on("mediaData",function(e,data){if(destroyRoot(),null===data)return!0;switch(type){case"introImage":videoObj.imageUrl=data.url,videoObj.imageAltText=videoObj.imageAltText||data.altText;break;case"imageLink":videoObj.linkurl=data.url,videoObj.linkText=videoObj.linkText||data.name;break;case"imageUrl":videoObj.thumbnailURL=data.url,videoObj.title=videoObj.title||data.name;break;case"groupLink":videoObj.mediaUrl=data.url;break;case"groupImage":videoObj.mediaImageLink=data.url,videoObj.mediaAltText=videoObj.mediaAltText||data.altText;break;case"thumbnailURL":videoObj.imageLink=data.url,videoObj.altText=videoObj.altText||data.altText,"Video"!==videoObj.type&&"VideoTab"!==videoObj.type||(videoObj.linkText=videoObj.linkText||data.name);break;case"linkAction":"Video"===videoObj.type||"VideoTab"===videoObj.type?(videoObj.imageLink=data.url,videoObj.altText=videoObj.altText||data.altText,videoObj.linkText=videoObj.linkText||data.name):(videoObj.url=data.url,videoObj.linkText=videoObj.linkText||data.name);break;default:videoObj.thumbnailURL=data.url}})},$("body").click(function(e){$(".image-edit-box").is(e.target)||0!==$(".image-edit-box").has(e.target).length||$(".upload-icon").is(e.target)||vm.imageEditBox&&$scope.$apply(function(){vm.imageEditBox=!1})})}function spJsonFetchAdmin($rootScope){function spOrgJson(){return{name:$rootScope.pullInterNationalization("sysadmin.organization.actionPlanTitle"),description:$rootScope.pullInterNationalization("sysadmin.organization.actionPlanEditDescription"),imageUrl:null,type:null,stepType:"All",createdByCompanyId:null,practiceAreaList:[{name:$rootScope.pullInterNationalization("sysadmin.organization.actionPlanName"),description:$rootScope.pullInterNationalization("sysadmin.organization.description"),status:"ACTIVE",durationDays:0,introVideo:{status:"INACTIVE",type:"VIDEO"},keyOutcomes:{active:!1,outcomesList:[]},devStrategyActionCategoryList:[{title:$rootScope.pullInterNationalization("sysadmin.organization.newCategory"),helpText:null,status:"ACTIVE",actionList:[{title:$rootScope.pullInterNationalization("sysadmin.organization.newAction"),description:null,timeInMins:0,type:"Single",active:!0,actionData:[],permissions:{Completion:!0}}]}]}]}}return{spOrgJson:spOrgJson}}angular.module("spApp").controller("orgAdminListingController",orgAdminListingController),angular.module("spApp").controller("orgAdminCreatePlanController",orgAdminCreatePlanController),angular.module("spApp").service("spJsonFetchAdmin",spJsonFetchAdmin),orgAdminListingController.$inject=["sharedProperties","ajaxService","$localStorage","basicService","ngDialog","$scope","$rootScope","$state","$filter"],orgAdminCreatePlanController.$inject=["$scope","ajaxService","$localStorage","ngDialog","spJsonFetchAdmin","$rootScope","$timeout","sharedProperties","$state"],spJsonFetchAdmin.$inject=["$rootScope"];