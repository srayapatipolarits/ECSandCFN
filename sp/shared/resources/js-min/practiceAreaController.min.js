function practiceAreasController($scope,ajaxService,$localStorage,$state,$q,sharedProperties,$filter,$rootScope,ngDialog,$timeout,$sce,newsFeedService){function infinteScroll(arg){vm.returnArticleListings(arg)}function setContentReference(obj,type){"devStrategy"===type&&(obj.paName=vm.currentActive.name,obj.paId=vm.currentActive.goalId),obj.overviewText=vm.goalsDetail.description;var tempObj={data:obj,type:type};sharedProperties.setContentReference(tempObj),tempObj=null}function openFeedbackPanel(){var tempObj={id:vm.currentActive.goalId,name:vm.currentActive.name,parentId:null,parentName:"ERT-i",feature:"Erti"};sharedProperties.setFeedbackObjectForPanel(tempObj),tempObj=null}function goToKnowledgeCenter(){sharedProperties.fireAnalyticsEvent("ERT-i | Click Knowledge Center Link","N/A"),window.location.href="/sp/trainingLibrary"}function returnArticleListings(pageSize){if(!vm.allArticlesListingsMaster.length)return!0;var result=vm.masterCopy?vm.allArticlesListingsMaster:vm.allArticlesListings;vm.allArticlesListings=result,vm.pageSetting.pageSize=pageSize,pageSize>=vm.allArticlesListingsMaster.length&&(vm.pageSetting.disabledInfinite=!0,vm.pageSetting.pageSize=vm.allArticlesListingsMaster.length),vm.masterCopy=!0}function articleBookmark(id,flag){var _flag=!flag,options={url:"/sp/tracking/bookMarkArticle",data:$.param({articleId:id,trackingType:"ARTICLES",isBookMarked:_flag})};ajaxService.getAjaxResponse(options).then(function(response){if("true"===response.Success){!0===_flag?(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.articleBookmarked")),sharedProperties.fireAnalyticsEvent("ERT-i | Article Bookmarked",id)):(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.removeBookmarked")),sharedProperties.fireAnalyticsEvent("ERT-i | Article Bookmark removed",id));var tempList=angular.copy(vm.allArticlesListings);$.each(tempList,function(i,j){if(tempList[i].articleLinkUrl===id)return tempList[i].articleBookmarked=!tempList[i].articleBookmarked,!1}),vm.allArticlesListings=angular.copy(tempList)}else null!==response.error&&sharedProperties.ajaxError(response)})}function articleShare(articleId,articleDetails,type){$scope.shareType=type,vm.inputRequired=!1,$scope.shareEnable=!0,$scope.shareArticleId=articleId,vm.searchTag=$scope.searchTag=[],!vm.emailMemberList.length&&vm.getMemberList(articleId),$scope.articlePageDetails=articleDetails,$scope.placeholderMessage="share"===$scope.shareType?$rootScope.pullInterNationalization("trainingLibrary.share.comment"):$rootScope.pullInterNationalization("dashboard.whatonmind"),$scope.tagPlaceholder=$scope.winWidth>767?$rootScope.pullInterNationalization("dashboard.addTagmember"):$rootScope.pullInterNationalization("dashboard.tagmembername"),null===$scope.shortDescription||void 0===$scope.shortDescription?ajaxService.getAjaxResponse({url:"/sp/trainingLibrary/getShortDescription",data:$.param({articleId:articleId})}).then(function(response){"true"===response.Success&&(vm.winHeight=$(window).height()+100+"px",$scope.shortDescription=response.shortDescription,ngDialog.open({template:"/sp/resources/html/goals/shareArticle.html",scope:$scope,className:vm.winWidth>767?"ngdialog-theme-default":"new-mobile-theme"}))}):(vm.winHeight=$(window).height()+100+"px",ngDialog.open({template:"/sp/resources/html/goals/shareArticle.html",scope:$scope,className:vm.winWidth>767?"ngdialog-theme-default":"new-mobile-theme"})),"newsfeed"===$scope.shareType&&null===$scope.contentRef&&ajaxService.getAjaxResponse({url:"/sp/utility/og",data:$.param({url:window.location.protocol+"//"+window.location.host+"/sp/trainingLibrary/article?"+$scope.shareArticleId})}).then(function(response){void 0!==response.contentRef&&($scope.contentRef=response.contentRef)})}function articleLike(id,flag){var _flag=!flag,options={url:"/sp/trainingLibrary/recommendArticle",data:$.param({articleId:id,doReccomend:_flag})};ajaxService.getAjaxResponse(options).then(function(response){if("true"===response.Success){!0===_flag?(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.articleRecommended")),sharedProperties.fireAnalyticsEvent("ERT-i | Article Recommended",id)):(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.articleRecommendedRemoved")),sharedProperties.fireAnalyticsEvent("ERT-i | Article Recommend removed",id));var tempList=angular.copy(vm.allArticlesListings);$.each(tempList,function(i,j){if(tempList[i].articleLinkUrl===id)return tempList[i].articleRecommendedByUser=!tempList[i].articleRecommendedByUser,tempList[i].recommendationCount=response.recommendationCount,!1}),vm.allArticlesListings=angular.copy(tempList)}else null!==response.error&&sharedProperties.ajaxError(response)})}function applyArticleFilterMobile(v){switch(vm.articlesFilterStatus=!1,vm.articleMediaFilters="ALL",v){case"all":vm.applyArticleFilter("","",0,"auto",!1);break;case"mandatoryArticle":vm.applyArticleFilter("mandatoryArticle",!0,3,"click",!1);break;case"articleRecommendedByUser":vm.applyArticleFilter("articleRecommendedByUser",!0,4,"click",!1);break;case"articleBookmarked":vm.applyArticleFilter("articleBookmarked",!0,5,"click",!1);break;case"userArticleStatus":vm.applyArticleFilter("userArticleStatus","COMPLETED",6,"click",!1)}}function applyArticleFilterMedia(v){switch(vm.articlesFilterStatus=!1,vm.articlesFilter="",v){case"ALL":vm.applyArticleFilter("","",0,"auto",!0);break;case"TEXT":vm.applyArticleFilter("articleType","TEXT",7,"click",!0);break;case"VIDEO":vm.applyArticleFilter("articleType","VIDEO",8,"click",!0);break;case"PODCAST":vm.applyArticleFilter("articleType","PODCAST",9,"click",!0);break;case"SLIDESHARE":vm.applyArticleFilter("articleType","SLIDESHARE",10,"click",!0)}}function applyArticleFilter(k,v,i,action,mediaType){if(vm.showMoreLink&&"click"===action)ajaxService.getAjaxResponse({url:vm.config.loadAllArticles,data:$.param({goalId:vm.currentActive.goalId,memberEmail:$rootScope.noSelf})}).then(function(response){if("true"===response.Success){vm.showMoreLink=!1,vm.allArticlesListings=[],vm.allArticlesListingsMaster=[],vm.allArticlesListingsMaster=response.userArticles,vm.allArticlesListings=angular.copy($scope.allArticlesListingsMaster),vm.infinteScroll(response.userArticles.length),vm.articlesFilterStatus=!1;var _params=[];vm.articlesFilterSelected=i,0!==i?(_params[k]=v,vm.articlesFilter=$filter("filter")(_params),vm.articlesFilterStatus=!0,!1===mediaType&&(vm.articleMediaFilters="ALL")):(vm.articlesFilter="",vm.articlesFilterStatus=!1,vm.articleMediaFilters="ALL")}else null!==response.error&&sharedProperties.ajaxError(response)});else{vm.articlesFilterStatus=!1;var _params=[];vm.articlesFilterSelected=i,0!==i?(_params[k]=v,vm.articlesFilter=$filter("filter")(_params),vm.articlesFilterStatus=!0,!1===mediaType&&(vm.articleMediaFilters="ALL")):(vm.articlesFilter="",vm.articlesFilterStatus=!1,vm.articleMediaFilters="ALL")}"userArticleStatus"===k?sharedProperties.fireAnalyticsEvent("ERT-i | Click Article Filters","ArticleCompleted"):"articleType"===k?sharedProperties.fireAnalyticsEvent("ERT-i | Click Article Filters",k+"- "+v):""!==k&&sharedProperties.fireAnalyticsEvent("ERT-i | Click Article Filters",k)}function showMobileHomePage(){vm.showRightCol=!1,vm.showMobileDD=!1}function openNgOverlay(page,data){void 0!==data&&(vm.devStrategy={id:data.devStrategyId,desc:data.desc}),"manageStratagies"===page&&vm.manageDevelopmentStartegies(),vm.winHeight=$(window).height()+100+"px";ngDialog.open({template:vm.pageTempaltes[page],className:"ngdialog-lnd-theme",scope:$scope})}function changeGroup(){vm.viewDetails(vm.selectedGroup)}function openState(number,text){vm.winWidth>767?(vm.devStrategy.id="",vm.state(number)):(vm.devStrategy.id="",vm.openNgOverlay(text))}function getPracticeGoal(){var goalIdParam=sharedProperties.getParam("refId");ajaxService.getAjaxResponse({url:""===$rootScope.noSelf?vm.config.goals:vm.config.memberGoals,method:"get"}).then(function(response){if("true"===response.Success)if(response.userGoal.length){vm.goalsLength=!0,vm.goalAvailable=response.userGoal,vm.autoLearning=response.autoLearning;var goalIdFound=!1;if(goalIdParam){for(var kk=0;kk<vm.goalAvailable.length;kk++)if(goalIdParam===vm.goalAvailable[kk].id){goalIdFound=!0;break}if(goalIdFound)vm.getDetailFromParam(goalIdParam);else{sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.practiceNotActivated"),$rootScope.pullInterNationalization("service.growl.alert"),"glyphicon glyphicon-ban-circle"),vm.goalsDetail=response.goalDetail,vm.allArticlesListings=[],vm.viewDetailsList=null,vm.changeManageStrategy=!0,vm.feedRequired=!0,vm.goalsCompleted=[],vm.allArticlesListingsMaster=vm.goalsDetail.userGoalsDto.userArticlesProgress.length?vm.goalsDetail.userGoalsDto.userArticlesProgress:[],vm.allArticlesListings=angular.copy(vm.allArticlesListingsMaster);for(var jj=0;jj<vm.goalAvailable.length;jj++)if(vm.goalsDetail.userGoalsDto.activeGoalId===vm.goalAvailable[jj].id){vm.ddSelectedText=vm.goalAvailable[jj].name,vm.currentActive.goalId=vm.goalAvailable[jj].id,vm.currentActive.name=vm.goalAvailable[jj].name;break}}}else{vm.goalsDetail=response.goalDetail,vm.allArticlesListings=[],vm.viewDetailsList=null,vm.changeManageStrategy=!0,vm.feedRequired=!0,vm.goalsCompleted=[],vm.allArticlesListingsMaster=vm.goalsDetail.userGoalsDto.userArticlesProgress.length?vm.goalsDetail.userGoalsDto.userArticlesProgress:[],vm.allArticlesListings=angular.copy(vm.allArticlesListingsMaster);for(var j=0;j<vm.goalAvailable.length;j++)if(vm.goalsDetail.userGoalsDto.activeGoalId===vm.goalAvailable[j].id){vm.ddSelectedText=vm.goalAvailable[j].name,vm.currentActive.goalId=vm.goalAvailable[j].id,vm.currentActive.name=vm.goalAvailable[j].name;break}}vm.state();for(var zz=0;zz<vm.goalAvailable.length;zz++)vm.progressMap[vm.goalAvailable[zz].id]=vm.goalAvailable[zz];vm.isAutoTurnOff&&$timeout(function(){vm.updateAutoLearning(!0)},200)}else vm.goalsLength=!1,window.location.href="/sp/managePracticeAreas";else null!==response.error&&sharedProperties.ajaxError(response)})}function loadAllArticles(){ajaxService.getAjaxResponse({url:vm.config.loadAllArticles,data:$.param({goalId:vm.currentActive.goalId,memberEmail:$rootScope.noSelf})}).then(function(response){"true"===response.Success?(vm.showMoreLink=!1,vm.allArticlesListings=[],vm.allArticlesListingsMaster=[],vm.applyArticleFilter("","",0,"auto"),vm.mArticleFilters="all",vm.applyArticleFilterMobile("all"),vm.allArticlesListingsMaster=response.userArticles,vm.allArticlesListings=angular.copy($scope.allArticlesListingsMaster),vm.infinteScroll(response.userArticles.length),sharedProperties.fireAnalyticsEvent("ERT-i | Click article load more link","N/A")):null!==response.error&&sharedProperties.ajaxError(response)})}function manageDevelopmentStartegies(){ajaxService.getAjaxResponse({url:vm.config.manageDevelopmentStartegies,data:$.param({goalId:vm.currentActive.goalId})}).then(function(response){"true"===response.Success?(vm.manageDevelopmentStartegiesArray=response.mds,vm.changeManageStrategy=!1,vm.originalManageDevelopmentStartegiesArray=angular.copy(vm.manageDevelopmentStartegiesArray)):null!==response.error&&sharedProperties.ajaxError(response)})}function updateAutoLearning(autoTurnOffCheck){if(!vm.btnEnable)return!0;vm.btnEnable=!1,ajaxService.getAjaxResponse({url:vm.config.updateAutoLearning,data:$.param({autoLearning:!autoTurnOffCheck&&!vm.autoLearning})}).then(function(response){if("true"===response.Success){vm.autoLearning=!autoTurnOffCheck&&!vm.autoLearning;var messages=vm.autoLearning?$rootScope.pullInterNationalization("practiceArea.autoLearningSettingOn"):$rootScope.pullInterNationalization("practiceArea.autoLearningSettingOff");sharedProperties.growlMessage(messages),vm.btnEnable=!0,sharedProperties.fireAnalyticsEvent("ERT-i | Auto Learning",vm.autoLearning?"ON":"OFF")}else null!==response.error&&sharedProperties.ajaxError(response)})}function updateMDS(options){var list=[],lengthTrue=vm.trues.length;if(lengthTrue<3)return!0;for(var i=0;i<lengthTrue;i++)list.push(vm.trues[i].id);ajaxService.getAjaxResponse({url:vm.config.updateMDS,data:$.param({goalId:vm.currentActive.goalId,activeDsIds:list.toString()})}).then(function(response){"true"===response.Success?(vm.goalsDetail.userGoalsDto.activeDevelopmentStrategyList=angular.copy(vm.trues),vm.originalManageDevelopmentStartegiesArray=angular.copy(vm.manageDevelopmentStartegiesArray),vm.state(),ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("practiceArea.mdsUpdated")),sharedProperties.fireAnalyticsEvent("ERT-i | Save Dev Strategy",vm.currentActive.name)):null!==response.error&&sharedProperties.ajaxError(response)})}function submitDisabled(){return vm.trues=$filter("filter")(vm.manageDevelopmentStartegiesArray,{selectedByUser:!0}),vm.trues.length>2}function getPracticeGoalDetail(options){if(vm.winWidth>768&&vm.currentActive.goalId===options.goalId)return vm.state(),!0;ajaxService.getAjaxResponse({url:vm.config.goalDetail,data:$.param({goalId:options.goalId})}).then(function(response){"true"===response.Success?(vm.showMoreLink=!0,vm.currentActive=options,vm.goalsDetail=response.goalDetail,vm.allArticlesListings=[],vm.viewDetailsList=null,vm.changeManageStrategy=!0,vm.feedRequired=!0,vm.goalsCompleted=[],vm.articleBookmarks=[],vm.articleLikes=[],vm.articleLikesCount=[],vm.applyArticleFilter("","",0,"auto"),vm.mArticleFilters="all",vm.applyArticleFilterMobile("all"),vm.allArticlesListingsMaster=vm.goalsDetail.userGoalsDto.userArticlesProgress.length?vm.goalsDetail.userGoalsDto.userArticlesProgress:[],vm.allArticlesListings=angular.copy(vm.allArticlesListingsMaster),vm.ddSelectedText=vm.currentActive.name,vm.state(),vm.winWidth<768&&(vm.showRightCol=!0),vm.setContentReference(vm.goalsDetail,"pa"),sharedProperties.fireAnalyticsEvent("ERT-i | Click Practice Area",vm.currentActive.name)):null!==response.error&&sharedProperties.ajaxError(response)})}function getDetailFromParam(goalId){if(vm.winWidth>768&&vm.currentActive.goalId===goalId)return vm.state(),!0;ajaxService.getAjaxResponse({url:vm.config.goalDetail,data:$.param({goalId:goalId})}).then(function(response){"true"===response.Success?(vm.showMoreLink=!0,vm.goalsDetail=response.goalDetail,vm.currentActive.goalId=goalId,vm.currentActive.name=vm.goalsDetail.name,vm.allArticlesListings=[],vm.viewDetailsList=null,vm.changeManageStrategy=!0,vm.feedRequired=!0,vm.goalsCompleted=[],vm.articleBookmarks=[],vm.articleLikes=[],vm.articleLikesCount=[],vm.applyArticleFilter("","",0,"auto"),vm.mArticleFilters="all",vm.applyArticleFilterMobile("all"),vm.allArticlesListingsMaster=vm.goalsDetail.userGoalsDto.userArticlesProgress.length?vm.goalsDetail.userGoalsDto.userArticlesProgress:[],vm.allArticlesListings=angular.copy(vm.allArticlesListingsMaster),vm.ddSelectedText=vm.currentActive.name,vm.state(),vm.winWidth<768&&(vm.showRightCol=!0),sharedProperties.fireAnalyticsEvent("ERT-i | Click Practice Area",vm.currentActive.name)):null!==response.error&&sharedProperties.ajaxError(response)})}function deleteActivate(options){ngDialog.closeAll()}function deletePop(options){vm.saveDeleteOptions=options,ngDialog.open({template:vm.config.deleteDialog,scope:$scope}).closePromise.then(function(data){vm.saveDeleteOptions=null})}function state(count){switch(count){case 4:$state.go("completedArticle"),$("html,body").animate({scrollTop:$(".lnd-right-sec").offset().top-40},300);break;case 5:vm.changeManageStrategy&&(vm.manageDevelopmentStartegiesArray=[],vm.manageDevelopmentStartegies()),vm.manageDevelopmentStartegiesArray=angular.copy(vm.originalManageDevelopmentStartegiesArray),$state.go("manageArticle"),$("html,body").animate({scrollTop:$(".lnd-right-sec").offset().top-40},300),sharedProperties.fireAnalyticsEvent("ERT-i | Click Manage Dev Strategy",vm.currentActive.name);break;default:vm.devStrategy={id:"",desc:null},$state.go("practice")}}function getMemberList(){ajaxService.getAjaxResponse({url:"/sp/allUsers"}).then(function(response){if("true"===response.Success){if(vm.emailMemberList=response.allMembers,null!==$localStorage.get("loggegdInProfile"))for(var i=0;i<vm.emailMemberList.length;i++)if(vm.emailMemberList[i].email===$localStorage.get("loggegdInProfile").member.email){vm.emailMemberList.splice(i,1);break}}else sharedProperties.ajaxError(response)})}function loadTags(query){var deferred=$q.defer(),result=vm.emailMemberList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(query.toLowerCase())||-1!==e.email.toLowerCase().indexOf(query.toLowerCase())});return deferred.resolve(result),deferred.promise}function tagAdded(tag){void 0!==tag.email&&(vm.searchTag.push(tag.email),vm.inputRequired=!1)}function tagRemoved(tag){vm.searchTag.splice(vm.searchTag.indexOf(tag.email),1)}function developmentRedirect(options){vm.devStrategy={id:options.devStrategyId,desc:options.desc},vm.state(options.state)}function viewDetails(group){vm.viewDetailsListIndex=group,vm.viewDetailsList=group in vm.allNotesFeedbackData?vm.allNotesFeedbackData[group]:null;var $enableSCroll=$(".overflow-enable");$enableSCroll.length&&$enableSCroll.scrollTop(0)}function viewDetailsIndexChange(i){i===vm.openTabId?vm.openTabId=-1:vm.openTabId=i}function updateModel(content,model){vm.updateNoteObj.submitted=!1,vm.tempModel=content}function learningCenter(){window.location.href="/sp/trainingLibrary"}function videoPopUp(url){sharedProperties.fireAnalyticsEvent("ERT-i | View Dev Strategy Video",vm.currentActive.name),sharedProperties.videoPopUp(url)}function toggleToolTipMobile(i){vm.winWidth<768&&vm.activeToolTipId!==i?vm.activeToolTipId=i:vm.activeToolTipId=-1}var vm=this,randomValue=(new Date).getTime(),pageUrl=window.location.href;vm.isAutoTurnOff=function(){var splitPageUrl=pageUrl.split("/");return"autoTurnOff"===splitPageUrl[splitPageUrl.length-1]}(),vm.config={goals:"/sp/goals/getUserGoals?rand="+randomValue,memberGoals:"/sp/for/goals/getUserGoals?memberEmail="+$rootScope.noSelf,goalDetail:"/sp/goals/getGoalDetail?memberEmail="+$rootScope.noSelf,manageDevelopmentStartegies:"/sp/goals/getMds",updateMDS:"/sp/goals/updateMds",updateAutoLearning:"/sp/updateAutoLearning",deleteDialog:"/sp/resources/html/goals/deleteNoteDialog.html",videoPopUpDialog:"/sp/support/videoPopUp",deleteAll:"/sp/goals/notesFeedback/deleteAll",loadAllArticles:"/sp/goals/getGoalArticles"},vm.goalAvailable=[],vm.pageType="individual",vm.goalsDetail=[],vm.emailMemberList=[],vm.searchTag=$scope.searchTag=[],vm.allNotesFeedbackData=[],vm.masterAllNotesFeedbackData={},vm.manageDevelopmentStartegiesArray=[],vm.originalManageDevelopmentStartegiesArray=[],vm.openState=openState,vm.devStrategy={id:"",desc:null},vm.currentActive={name:"",goalId:-1},vm.postANote={submitted:!1},vm.inputRequired=$scope.inputRequired=!1,vm.requestFeedback={submitted:!1},vm.updateNoteObj={submitted:!1},vm.btnEnable=!0,vm.feedRequired=!0,vm.viewDetailsList=null,vm.saveDeleteOptions=null,vm.trues=[],vm.getPracticeGoal=getPracticeGoal,vm.getPracticeGoalDetail=getPracticeGoalDetail,vm.getDetailFromParam=getDetailFromParam,vm.getMemberList=getMemberList,vm.tagRemoved=$scope.tagRemoved=tagRemoved,vm.loadTags=$scope.loadTags=loadTags,vm.tagAdded=$scope.tagAdded=tagAdded,vm.developmentRedirect=developmentRedirect,vm.viewDetails=viewDetails,vm.viewDetailsIndexChange=viewDetailsIndexChange,vm.state=state,vm.deleteActivate=deleteActivate,vm.updateModel=updateModel,vm.manageDevelopmentStartegies=manageDevelopmentStartegies,vm.updateMDS=updateMDS,vm.submitDisabled=submitDisabled,vm.updateAutoLearning=updateAutoLearning,vm.learningCenter=learningCenter,vm.deletePop=deletePop,vm.videoPopUp=videoPopUp,vm.showMobileDD=!1,vm.ddSelectedText,vm.winWidth=$(window).width(),vm.winHeight=$(window).height()+100+"px",vm.showRightCol=!1,vm.changeManageStrategy=!0,vm.showMoreLink=!0,vm.loadAllArticles=loadAllArticles,vm.setContentReference=setContentReference,vm.openFeedbackPanel=openFeedbackPanel,$scope.taggedMemberIds=[],$scope.contentRef=null,$scope.shareType=null,$scope.shareComment="",vm.progressMap={},vm.openNgOverlay=openNgOverlay,vm.changeGroup=changeGroup,vm.openTabId,vm.activeToolTipId=-1,vm.toggleToolTipMobile=toggleToolTipMobile,vm.showMobileHomePage=showMobileHomePage,vm.pageTempaltes={note:"/sp/resources/html/goals/addNoteResponsive.html",feedback:"/sp/resources/html/goals/requestFeedbackResponsive.html",notification:"/sp/resources/html/goals/notesFeedbackOverlayResponsive.html",articlecomplete:"/sp/resources/html/goals/completedArticleResponsive.html",manageStratagies:"/sp/resources/html/goals/manageStratagiesResponsive.html"},vm.allArticlesListings=[],vm.allArticlesListingsMaster=[],vm.pageSetting={pageSize:10,intialPageSize:10,disabledInfinite:!1},vm.infinteScroll=infinteScroll,vm.returnArticleListings=returnArticleListings,vm.masterCopy=!0,vm.articleBookmarks=[],vm.articleLikes=[],vm.articleLikesCount=[],vm.articleBookmark=articleBookmark,vm.articleShare=articleShare,vm.articleLike=articleLike,vm.articlesFilterSelected=0,vm.mArticleFilters="all",vm.articlesFilter="",vm.applyArticleFilterMobile=applyArticleFilterMobile,vm.applyArticleFilter=applyArticleFilter,vm.applyArticleFilterMedia=applyArticleFilterMedia,vm.articleMediaFilters="ALL",vm.goToKnowledgeCenter=goToKnowledgeCenter,vm.goalsLength=!1,$scope.articleShared=function(obj){if(!obj.email.length)return vm.inputRequired=!0,!0;ajaxService.getAjaxResponse({url:"/sp/trainingLibrary/shareArticle",data:$.param({articleId:obj.articleId,comment:obj.comment,toList:obj.email.toString()})}).then(function(response){if("true"===response.Success)ngDialog.close("ngdialog1"),$scope.shareEnable=!1,sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.articleShared")),sharedProperties.fireAnalyticsEvent("ERT-i | Article Shared",obj.articleId);else{ngDialog.close("ngdialog1"),$scope.shareEnable=!1;for(var key in response.error)$scope.errorMessage=response.error[key];sharedProperties.growlMessage($scope.errorMessage)}})},$scope.postToNewsFeed=function(comment){var obj=newsFeedService.postMessageObject();obj.taggedMemberIds=$scope.taggedMemberIds,obj.comment=comment,obj.comment.contentReference=$scope.contentRef,newsFeedService.postMessage(obj).then(function(response){if(null===response)return!0;ngDialog.close("ngdialog1"),$scope.shareEnable=!1,sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.articleShared")),sharedProperties.fireAnalyticsEvent("ERT-i | Article Shared in Newsfeed",$scope.shareArticleId)})},$scope.tagAddedFeed=function(tag){$scope.taggedMemberIds.push(tag.id)},$scope.tagRemovedFeed=function(tag){$scope.taggedMemberIds.splice($scope.taggedMemberIds.indexOf(tag.id),1)};$scope.$on("modalClosed",function(){vm.setContentReference(vm.goalsDetail,"pa")});!function(){null!==$localStorage.get("mdsUpdated")&&(sharedProperties.growlMessage($rootScope.pullInterNationalization("practiceArea.mdsUpdated")),$localStorage.remove("mdsUpdated")),vm.getPracticeGoal(),$rootScope.showStickyTutorial=!0,$timeout(function(){vm.setContentReference(vm.goalsDetail,"pa")},1e3)}(),$(window).on("hashchange",function(){-1!==window.location.href.indexOf("refId")&&vm.getPracticeGoal()}),jQuery(function($){$("body").on("click",".event-practice-article a",function(event){event.preventDefault();var redirectUrl=$(this).attr("href");sharedProperties.fireAnalyticsEvent("ERT-i | Viewed Article",redirectUrl),window.location.href=redirectUrl})})}function managePracticeArea($scope,ajaxService,$filter,sharedProperties,ngDialog,$rootScope,$localStorage){function clickInfoBox(){sharedProperties.fireAnalyticsEvent("ERT-i | Manage - click info icon","N/A")}function getPracticeGoal(){ajaxService.getAjaxResponse({url:vm.config.practiceAreasGoals,method:"get"}).then(function(response){if("true"===response.Success){if(vm.prismLensExists=response.prismLensExist,vm.masterlistGoals=response.userAllGoal,vm.selectedGoals=response.userSelectedGoal,vm.copYselectedGoals=response.userSelectedGoal,vm.selectedGoals.length<6)for(var i=6-vm.selectedGoals.length;i>0;i--)vm.emptyCounter.push(1);vm.sortList(),vm.selectedGoals.length>=6&&(vm.disableAddButton=!0)}else null!==response.error&&sharedProperties.ajaxError(response)})}function applyFilter(val,flag){var check=$.inArray(val,vm.applyFilterOptions);-1===check?vm.applyFilterOptions.push(val):vm.applyFilterOptions.splice(check,1),sortList()}function filterList(fOpts,srcList){return srcList.unique().some(function(v){return-1!==fOpts.indexOf(v.toLowerCase())})}function sortList(){vm.listGoals=vm.masterlistGoals.filter(function(e){return(vm.applyFilterOptions.length&&null!==e.sourceList&&filterList(vm.applyFilterOptions,Object.keys(e.sourceList))||!vm.applyFilterOptions.length&&e)&&(""===vm.pageOptions.optionList&&e||null!==e.sourceList&&-1!==Object.keys(e.sourceList).indexOf(vm.pageOptions.optionList)&&e)&&(vm.pageOptions.searchText.length?-1!==angular.lowercase(e.goal.name).indexOf(angular.lowercase(vm.pageOptions.searchText))&&e:e)}),vm.applyFilterOptions.length?vm.listGoals=$filter("orderBy")(vm.listGoals,[vm.pageOptions.weightOrder],!0):vm.listGoals=$filter("orderBy")(vm.listGoals,["-goal.name"],!0),vm.pageOptions.searchText.length&&sharedProperties.fireAnalyticsEvent("ERT-i | Manage - search",vm.pageOptions.searchText)}function cancelIt(){window.onbeforeunload=null,sharedProperties.fireAnalyticsEvent("ERT-i | Manage - Cancel","N/A"),window.location.href="/sp/goals#/practice"}function changeGoalStatus(goals){vm.removeGoal(goals,"leftRail"),sharedProperties.fireAnalyticsEvent("ERT-i | Manage - Remove Practice Area from left rail",goals.goal.name);for(var i=0;i<vm.masterlistGoals.length;i++)if(vm.masterlistGoals[i].goal.id===goals.goal.id){vm.masterlistGoals[i].selected=!vm.masterlistGoals[i].selected;break}}function updatePracticeAreasGoals(){vm.exceededError=!1,vm.noSelectedGoalsError=!1,window.onbeforeunload=null,vm.unloadFunctionCall=!1,vm.selectedGoals=angular.copy(vm.copYselectedGoals),vm.goalList=[],$(vm.sortable.el).find("li").each(function(value,index){vm.goalList.push($(this).attr("data-id"))}),vm.goalList.length>0&&vm.goalList.length<=6?ajaxService.getAjaxResponse({url:vm.config.updatePracticeAreasGoals,data:$.param({goalId:vm.goalList.toString()})}).then(function(response){"true"===response.Success?($localStorage.set("mdsUpdated",$rootScope.pullInterNationalization("practiceArea.mdsUpdated")),sharedProperties.fireAnalyticsEvent("ERT-i | Manage Practice areas - Updated","N/A"),window.location.href="/sp/goals#/practice"):null!==response.error&&sharedProperties.ajaxError(response)}):(vm.goalList.length>6&&(vm.exceededError=!0),0===vm.goalList.length&&(vm.noSelectedGoalsError=!0))}function addGoal(goals,closeDialog){vm.exceededError=!1,vm.copYselectedGoals.push(goals),vm.selectedGoals=angular.copy(vm.copYselectedGoals),closeDialog&&ngDialog.closeAll(),6===vm.selectedGoals.length?sharedProperties.growlMessage($rootScope.pullInterNationalization("practiceArea.maxAdded")):sharedProperties.growlMessage($rootScope.pullInterNationalization("practiceArea.addedGoal")),6===vm.selectedGoals.length?vm.disableAddButton=!0:vm.disableAddButton=!1,vm.emptyCounter.length&&vm.emptyCounter.splice(-1,1),sharedProperties.fireAnalyticsEvent("ERT-i | Manage - Add Practice Area",goals.goal.name),confirmWhetherToExit()}function removeGoal(goals,type,closeDialog){vm.exceededError=!1;for(var i=0;i<vm.copYselectedGoals.length;i++)if(vm.copYselectedGoals[i].goal.id===goals.goal.id){vm.copYselectedGoals.splice(i,1),vm.copYselectedGoals.length<6&&vm.emptyCounter.push(1);break}vm.selectedGoals=angular.copy(vm.copYselectedGoals),closeDialog&&ngDialog.closeAll(),sharedProperties.growlMessage($rootScope.pullInterNationalization("practiceArea.removeGoal")),6===vm.selectedGoals.length?vm.disableAddButton=!0:vm.disableAddButton=!1,"rightRail"===type&&sharedProperties.fireAnalyticsEvent("ERT-i | Manage - Remove Practice Area",goals.goal.name),confirmWhetherToExit()}function paListResponsive(){vm.winHeight=$(window).height()+100+"px";ngDialog.open({template:"/sp/resources/html/goals/managerPaResponsive.html",className:"ngdialog-lnd-theme",scope:$scope})}function initialize(){vm.initializeBool||(vm.el=document.getElementById("sort-me"),vm.winWidth>767?vm.sortable=new Sortable(vm.el,{group:"name",animation:150,ghostClass:"ghost",onEnd:function(evt){vm.copYselectedGoals.move(evt.oldIndex,evt.newIndex),sharedProperties.fireAnalyticsEvent("ERT-i | Manage Practice Areas - Sort","N/A"),confirmWhetherToExit()}}):vm.sortable=new Sortable(vm.el,{group:"name",animation:150,ghostClass:"ghost",handle:".dHandle",yAxisOnly:!0,onEnd:function(evt){vm.copYselectedGoals.move(evt.oldIndex,evt.newIndex),sharedProperties.fireAnalyticsEvent("ERT-i | Manage Practice Areas - Sort","N/A"),confirmWhetherToExit()}}),vm.initializeBool=!0)}function changeFilter(value){switch(value){case"all":vm.pageOptions={weightOrder:"allGoalWeight",optionList:"",searchText:""};break;case"prism":vm.pageOptions={weightOrder:"prismWeight",optionList:"Prism",searchText:""};break;case"prismLens":vm.pageOptions={weightOrder:"prismLensWeight",optionList:"PrismLens",searchText:""}}vm.sortList()}function viewDevelopmentStartegy(list,name,goalsObj,srclist,selectedGoalsObj){vm.viewStrategy=list,vm.viewStrategyName=name,vm.viewGoalsObj=goalsObj,vm.sourceList=srclist,vm.winHeight=$(window).height()+100+"px",vm.selectedGoalsObj=selectedGoalsObj,vm.prismList=null!==vm.sourceList&&0!==Object.keys(vm.sourceList).length&&void 0!==vm.sourceList&&null!==vm.sourceList.Prism&&void 0!==vm.sourceList.Prism?vm.generateList(vm.sourceList.Prism,!0):null,vm.nameList=null!==vm.sourceList&&0!==Object.keys(vm.sourceList).length&&void 0!==vm.sourceList&&null!==vm.sourceList.PrismLens&&void 0!==vm.sourceList.PrismLens?vm.generateList(vm.sourceList.PrismLens,!1):null;ngDialog.open({template:vm.winWidth>767?"/sp/viewDevelopmentStrategy":"/sp/resources/html/goals/viewDevelopmentStartegyResponsive.html",scope:$scope,className:vm.winWidth>767?"ngdialog-theme-default":"ngdialog-lnd-theme"})}function generateList(list,flag){var temp=[];if(list){for(var i=0;i<list.length;i++)flag?temp.push($rootScope.pullInterNationalization("practiceArea."+list[i].value)):temp.push(list[i].value);return temp.join(", ")}}var vm=this;vm.config={practiceAreasGoals:"/sp/goals/getAllGoals",updatePracticeAreasGoals:"/sp/goals/updateUserGoalsSelection"},vm.selectedGoals=[],vm.listGoals=[],vm.masterlistGoals=[],vm.goalList=[],vm.selPracticeArea="all",vm.pageOptions={weightOrder:"allGoalWeight",optionList:"",searchText:""},vm.showIt=!1,vm.viewStrategyName="",vm.prismLensExists=!0,vm.initializeBool=!1,vm.unloadFunctionCall=!1,vm.disableAddButton=!1,vm.winWidth=$(window).width(),vm.winHeight=$(window).height()+100+"px",vm.getPracticeGoal=getPracticeGoal,vm.updatePracticeAreasGoals=updatePracticeAreasGoals,vm.addGoal=addGoal,vm.removeGoal=removeGoal,vm.initialize=initialize,vm.changeFilter=changeFilter,vm.cancelIt=cancelIt,vm.viewDevelopmentStartegy=viewDevelopmentStartegy,vm.sortList=sortList,vm.changeGoalStatus=changeGoalStatus,vm.paListResponsive=paListResponsive,vm.clickInfoBox=clickInfoBox,vm.emptyCounter=[],vm.optPrism=!1,vm.optPrismLens=!1,vm.applyFilter=applyFilter,vm.applyFilterOptions=[],vm.exceededError=!1,vm.noSelectedGoalsError=!1,vm.generateList=generateList,vm.isTouch="ontouchstart"in window||navigator.msMaxTouchPoints>0;var confirmWhetherToExit=function(){vm.unloadFunctionCall||(vm.unloadFunctionCall=!0,window.onbeforeunload=function(e){return $rootScope.pullInterNationalization("practiceArea.unsavedChanges.message")})};!function(){vm.getPracticeGoal()}()}function recommendedToolTip($timeout){return{restrict:"A",link:function($scope,$element,$attrs){new Drop({target:$element[0],content:$attrs.desc,position:"bottom center",openOn:"click",remove:!0,classes:$attrs.eclass})}}}angular.module("spApp").controller("practiceAreasController",practiceAreasController),angular.module("spApp").controller("managePracticeArea",managePracticeArea),
practiceAreasController.$inject=["$scope","ajaxService","$localStorage","$state","$q","sharedProperties","$filter","$rootScope","ngDialog","$timeout","$sce","newsFeedService"],managePracticeArea.$inject=["$scope","ajaxService","$filter","sharedProperties","ngDialog","$rootScope","$localStorage"],angular.module("spApp").directive("recommendedToolTip",recommendedToolTip),recommendedToolTip.$inject=["$timeout"];