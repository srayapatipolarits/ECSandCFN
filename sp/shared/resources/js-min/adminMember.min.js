!function(){function adminMemberController($filter,$localStorage,sharedProperties,ajaxService,$rootScope,ngDialog,$scope,$timeout,$q,memberEmailCheck){function getMembersData(){sharedProperties.getMember().length?(memberOperation(sharedProperties.getMember()),$scope.$parent.ctrl.activeView="members"):ajaxService.getAjaxResponse({url:vm.serviceApis.getMembersData}).then(function(response){"true"===response.Success?(sharedProperties.setMember(response.memberList),memberOperation(response.memberList),$scope.$parent.ctrl.activeView="members"):null!=response.error&&(vm.responseRecieved=!0,sharedProperties.ajaxError(response.error))})}function loadCompetencyDetails(){null===sharedProperties.getCompetency()?ajaxService.getAjaxResponse({url:vm.serviceApis.getCompetencyListing}).then(function(response){"true"===response.Success?(sharedProperties.setCompetency(response),comptencyOperation(response)):null!=response.error&&sharedProperties.ajaxError(response.error)}):comptencyOperation(sharedProperties.getCompetency())}function getActionPlans(){null===sharedProperties.getOrganization()?ajaxService.getAjaxResponse({url:vm.serviceApis.getCompanyActionPlans,data:$.param({includeUserId:!0})}).then(function(response){"true"===response.Success?(sharedProperties.setOrganization(response),actionPlanOperation(response)):null!=response.error&&sharedProperties.ajaxError(response.error)}):actionPlanOperation(sharedProperties.getOrganization())}function getUserActionPlans(email){vm.selectedActionPlans=[],vm.selectedActionPlanIds=[],ajaxService.getAjaxResponse({url:vm.serviceApis.selectedActionPlanList,data:$.param({memberEmail:email})}).then(function(response){if("true"===response.Success){if(vm.userActionPlansList=response.memberLndCompDetails.actionPlans,vm.userActionPlansList)for(var i=0;i<vm.userActionPlansList.length;i++)vm.selectedActionPlans.push(vm.userActionPlansList[i]),vm.selectedActionPlanIds.push(vm.userActionPlansList[i].id)}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function editActionPlan(memberObj,action,isSingle){var tempList=angular.copy(vm.actionPlansList);vm.activeOrgPlanIds=[],vm.inactiveOrgPlanIds=[],vm.actionPlansListCopy=[];for(var j=0;j<tempList.length;j++)tempList[j].active?vm.activeOrgPlanIds.push(tempList[j].id):vm.inactiveOrgPlanIds.push(tempList[j].id);if(vm.actionPlansListCopy=angular.copy(vm.actionPlansList),vm.actionPlanSettings={member:memberObj,action:action,isSingle:isSingle},vm.actionPlanUserList=[],vm.actionPlanUserIds=[],vm.selectedActionPlans=[],vm.selectedActionPlanIds=[],vm.currentSelectedActionPlans=[],vm.currentSelectedActionPlanIds=[],vm.noPlansSubmit=!1,vm.orgPlansSearch="",vm.removeActionPlan="REMOVE"===vm.actionPlanSettings.action,isSingle)getUserActionPlans(memberObj.email),vm.actionPlanUserList.push(memberObj),vm.actionPlanUserIds.push(memberObj.id);else for(var i=0;i<vm.pageSetting.user.length;i++)vm.actionPlanUserList.push(vm.pageSetting.user[i]),vm.actionPlanUserIds.push(vm.pageSetting.user[i].userId);ngDialog.open({template:vm.modalUrl.assignRemoveOrgPlanModal,scope:$scope})}function trackactionActionPlans(data){vm.noPlansSubmit=!1;var existingId=$.inArray(data.id,vm.currentSelectedActionPlanIds);-1===existingId?(vm.currentSelectedActionPlans.push(data),vm.currentSelectedActionPlanIds.push(data.id)):(vm.currentSelectedActionPlans.splice(existingId,1),vm.currentSelectedActionPlanIds.splice(existingId,1))}function processActionPlan(){var service="REMOVE"===vm.actionPlanSettings.action?vm.serviceApis.removeActionPlan:vm.serviceApis.assignActionPlan;if("REMOVE"===vm.actionPlanSettings.action){vm.selectedActionPlanIds=[];for(var i=0;i<vm.actionPlansList.length;i++)vm.selectedActionPlanIds.push(vm.actionPlansList[i].id)}vm.currentSelectedActionPlanIds.length?(vm.noPlansSubmit=!1,ajaxService.getAjaxResponse({url:service,data:{actionPlanIdList:vm.currentSelectedActionPlanIds,userIdList:vm.actionPlanUserIds,groupPermissionsList:[]},headers:{"Content-Type":"application/json"}}).then(function(response){"true"===response.Success?(sharedProperties.setOrganization(null),vm.getActionPlans(),ngDialog.close(),sharedProperties.growlMessage("REMOVE"===vm.actionPlanSettings.action?$rootScope.pullInterNationalization("manageAccountContent.removeMember"):$rootScope.pullInterNationalization("manageAccountContent.addMemberMsg")),"REMOVE"===vm.actionPlanSettings.action?sharedProperties.fireAnalyticsEvent("Manage Account | Remove Org Plan","N/A"):sharedProperties.fireAnalyticsEvent("Manage Account | Assign Org Plan","N/A")):null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})):vm.noPlansSubmit=!0}function getGroupsList(fn,param,param2){!sharedProperties.getGroup().length||vm.newGroupCreated?ajaxService.getAjaxResponse({url:vm.serviceApis.getGroupsList}).then(function(response){"true"===response.Success?(sharedProperties.setGroup(response.groupInfoList),vm.allGroupsListingMaster=response.groupInfoList,vm.allGroupsListing=angular.copy(vm.allGroupsListingMaster),"function"==typeof fn&&fn(param,param2),vm.newGroupCreated=!1):null!=response.error&&sharedProperties.ajaxError(response.error)}):(vm.allGroupsListingMaster=sharedProperties.getGroup(),vm.allGroupsListing=angular.copy(vm.allGroupsListingMaster),"function"==typeof fn&&fn(param,param2))}function addMemberToGroup(emailList,groupList){if(vm.addGroupSubmit=!1,groupList.length!==vm.updatedGroupListTracker.length)vm.addGroupSubmit=!0;else{vm.addGroupSubmit=!1;for(var selectedUsersEmails=[],selectedGroupNames=[],i=0;i<vm.pageSetting.user.length;i++)selectedUsersEmails.push(vm.pageSetting.user[i].email);for(var j=0;j<vm.showSelectedGroupList.length;j++)selectedGroupNames.push(vm.showSelectedGroupList[j].name);ajaxService.getAjaxResponse({url:vm.serviceApis.addMemberToGroup,data:$.param({memberEmailList:selectedUsersEmails.join(),groupNameList:selectedGroupNames.join()})}).then(function(response){"true"===response.Success?(ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("manageAccountContent.addMember"))):null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})}}function createNewGroup(groupName,isEdit){vm.newGroupCreated=!1,vm.emptyGroupName=!1,vm.existingGroupName=!1,null!==groupName&&""!==groupName&&void 0!==groupName?ajaxService.getAjaxResponse({url:vm.serviceApis.createNewGroup,data:$.param({name:groupName})}).then(function(response){"true"===response.Success?(vm.showCreateGroupSection=!1,vm.addGroupSubmitDisabled=!1,vm.newGroupCreated=!0,$timeout(function(){isEdit?(vm.addGroupToModule(groupName,!1),sharedProperties.setGroup([]),vm.getGroupsList()):(sharedProperties.setGroup([]),vm.getGroupsList(groupOperation,groupName))},100),vm.allGroupsFilter.push(groupName),sharedProperties.fireAnalyticsEvent("Manage Account | New Group Added","N/A")):null!==response.error&&(vm.existingGroupName=!0)}):(vm.emptyGroupName=!0,vm.newGroupCreated=!1)}function assignCompetency(value){vm.assignClick=!0,vm.selectedCompetencyDrop&&ajaxService.getAjaxResponse({url:vm.serviceApis.assignCompetency,data:{competencyProfileId:value,userIdList:vm.selectedUsersList},headers:{"Content-Type":"application/json"}}).then(function(response){"true"===response.Success?(ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("competency.ajaxSuccess.evaluationAssigned")),sharedProperties.fireAnalyticsEvent("Manage Account | Assign Competency","N/A"),switchView("reload")):null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error),switchView("reload"))})}function removeCompetency(){ajaxService.getAjaxResponse({url:vm.serviceApis.removeCompetency,data:{competencyProfileId:vm.selectedCompetency,userIdList:vm.selectedUsersList},headers:{"Content-Type":"application/json"}}).then(function(response){"true"===response.Success?(ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("competency.ajaxSuccess.evaluationRemoved")),sharedProperties.fireAnalyticsEvent("Manage Account | Remove Competency","N/A"),switchView("reload")):null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error),switchView("reload"))})}function blockMembers(email,single,flag){var selectedUsersEmails=[];if(single)selectedUsersEmails.push(email);else for(var i=0;i<vm.pageSetting.user.length;i++)selectedUsersEmails.push(vm.pageSetting.user[i].email);ajaxService.getAjaxResponse({url:vm.serviceApis.blockMembers,data:$.param({userList:selectedUsersEmails.join(),blockUser:!single||flag})}).then(function(response){if("true"===response.Success){var templList=angular.copy(vm.masterMemberList);$.each(templList,function(i,j){$.inArray(templList[i].email,selectedUsersEmails)>-1&&(templList[i].deactivated=!single||!templList[i].deactivated)}),vm.masterMemberList=angular.copy(templList),sharedProperties.setMember(vm.masterMemberList),vm.returnMemberList(vm.pageSetting.pageSize),ngDialog.close(),sharedProperties.growlMessage(single?flag?$rootScope.pullInterNationalization("manageAccountContent.memberBlocked"):$rootScope.pullInterNationalization("manageAccountContent.memberUnblocked"):$rootScope.pullInterNationalization("manageAccountContent.memberBlocked")),single?sharedProperties.fireAnalyticsEvent("Manage Account | Block Single Member",flag?"Yes":"No"):sharedProperties.fireAnalyticsEvent("Manage Account | Block Multiple Members",flag?"Yes":"No")}else null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})}function deleteMultiMembers(){for(var selectedUsersEmails=[],i=0;i<vm.pageSetting.user.length;i++)selectedUsersEmails.push(vm.pageSetting.user[i].email);ajaxService.getAjaxResponse({url:vm.serviceApis.deleteMultiMembers,data:$.param({memberEmails:selectedUsersEmails.join()})}).then(function(response){if("true"===response.Success){var templList=angular.copy(vm.masterMemberList),tempList0=[];$.each(templList,function(i,j){-1===$.inArray(templList[i].email,selectedUsersEmails)&&tempList0.push(templList[i])}),vm.masterMemberList=angular.copy(tempList0),vm.negative=!1,vm.pageSetting.user=[],sharedProperties.setMember(vm.masterMemberList),vm.returnMemberList(vm.pageSetting.pageSize),ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("manageAccountContent.memberDeleted"))}else null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})}function saveGroupToModule(groupName){for(var newArr="",i=0;i<vm.groupEditSection.groupAssociationList.length;i++)if(newArr.length)newArr=newArr+","+vm.groupEditSection.groupAssociationList[i].name+":"+vm.groupEditSection.groupAssociationList[i].groupLead;else{if(""===vm.groupEditSection.groupAssociationList[i].name)return ngDialog.close("ngdialog1"),!1;newArr=vm.groupEditSection.groupAssociationList[i].name+":"+vm.groupEditSection.groupAssociationList[i].groupLead}var options={url:vm.serviceApis.saveGroupToModule,data:$.param({groupAssociationList:newArr,memberEmail:vm.groupEditSection.email})};ajaxService.getAjaxResponse(options).then(function(response){if("true"===response.Success){vm.groupEditSection.groupAssociationList.length?vm.memberList[vm.indexToChange]=vm.groupEditSection:(vm.groupEditSection.groupAssociationList.push({name:"",groupLead:!1}),vm.memberList[vm.indexToChange]=vm.groupEditSection);for(var i=0;i<vm.masterMemberList.length;i++)vm.masterMemberList[i].email===vm.memberList[vm.indexToChange].email&&(vm.masterMemberList[i]=vm.groupEditSection);sharedProperties.setGroup([]),vm.getGroupsList(),ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("admin.member.confirmationmessage")),sharedProperties.fireAnalyticsEvent("Manage Account | Member group status updated","N/A")}else null!=response.error&&(ngDialog.close("ngdialog1"),sharedProperties.ajaxError(response.error))})}function confirmDelete(event,email){var options={url:vm.serviceApis.confirmDelete,data:$.param({memberEmail:email})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?(sharedProperties.spilceIndexWithBreak(vm.masterMemberList,"email",email),sharedProperties.spilceIndexWithBreak(vm.memberList,"email",email),vm.negative=!1,vm.pageSetting.user=[],ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("admin.member.deleteMessage")),sharedProperties.fireAnalyticsEvent("Manage Account | Member Deleted","N/A")):null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))})}function getHiringCandidateList(fn){ajaxService.getAjaxResponse({url:vm.serviceApis.getHiringCandidateList}).then(function(response){"true"===response.Success&&(vm.newHiresList=response.hiring,"function"==typeof fn&&fn())})}function initAddMembers(){var userRoles=null!==$localStorage.get("loggegdInProfile")?$localStorage.get("loggegdInProfile").member.roles:[];vm.isAccountAdmin=-1!==userRoles.indexOf("AccountAdministrator"),vm.selectedGroupsList=null,vm.candidateEmails=null,vm.memberTags=null,vm.subscriptionCount=null,vm.existingUserEmailError=[],vm.newTagsList=[],vm.emailErrors={isExisting:!1,required:!1,countExceed:!1},vm.newMember.selectedEmailsList=[],vm.newMember.tagsList=[],vm.newEmailsList=[],vm.overlayDim={width:$(".new-cols.content-col").width(),height:$(".new-cols.content-col").height()},ajaxService.getAjaxResponse({url:vm.serviceApis.getSubcription,data:$.param({spPlanType:"Primary"})}).then(function(response){"true"===response.Success?vm.subscriptionCount=response.availalbeMemberSubscriptions:null!==response.error&&sharedProperties.ajaxError(response.error)})}function requestForAccounts(requestType){var storedUser=$localStorage.get("loggegdInProfile");vm.requestAccounts=0,vm.requestType=requestType,vm.companyEmail=storedUser.member.email,ngDialog.open({template:vm.modalUrl.addNewAccounts,scope:$scope})}function processAccountRequest(e){vm.addAccountsForm.submitted=!1,vm.addAccountsForm.$valid&&vm.requestAccounts>0?(vm.addAccountsForm.submitted=!1,$localStorage.set("accountRequest1","manageAccountContent.requestSubmit"),$localStorage.remove("memberDetailsNav","settingsNav"),sharedProperties.fireAnalyticsEvent("Manage Account | Request additional accounts","N/A")):(e.preventDefault(),vm.addAccountsForm.submitted=!0)}function loadGroups(query){var deferred=$q.defer(),result=vm.allGroupsListing.filter(function(e){return-1!==e.name.toLowerCase().indexOf(query.toLowerCase())});return deferred.resolve(result),deferred.promise}function groupSelect(tag){vm.trackGroups.push(tag.name)}function groupRemove(tag){vm.trackGroups.splice(vm.trackGroups.indexOf(tag.name),1)}function addNewMembers(){vm.emailErrors.required=!1,vm.csvFile?uploadInvite():tagsUploadMember()}function closeAddMemberScreen(){document.getElementById("mediaFormUpload").removeEventListener("change",vm.uploadCSV,!1),vm.csvFile=null,vm.addMembersView=!1}function filterEnableUpload(){vm.validUserFilter=!1}function filterEnabledRecord(){vm.validUserFilter=""}function uploadInvite(){if(vm.blockRemoval=!0,!vm.csvFile.users.length)return vm.emailErrors.required=!0,!0;var filterUser=vm.csvFile.users.map(function(e){return{firstName:e.firstName,lastName:e.lastName,title:e.title,email:e.email}});vm.newMember.tagsList=angular.copy(vm.newTagsList);var tagList=vm.newMember.tagsList.length?vm.newMember.tagsList.join():"",groupAssociationList=vm.trackGroups.length?vm.trackGroups.join():"";vm.successUpload=[],ajaxService.getAjaxResponse({url:vm.serviceApis.uploadCSVInvite+"?tagList="+tagList+"&groupAssociationList="+groupAssociationList,data:filterUser,headers:{"Content-Type":"application/json"}}).then(function(response){if("true"===response.Success){var successUpload=[],successUploadIndex=[];void 0!==response.users&&(vm.csvFile.users=response.users.filter(function(e,index){return e.id=index,!1===e.validUser&&(successUpload.push(e),successUploadIndex.push(index)),e})),vm.blockRemoval=!1,vm.successUpload=successUpload,vm.successUploadIndex=successUploadIndex,vm.emailErrors.required=!1,vm.successUpload.length?uploadInviteError(response):uploadInviteSuccess()}else null!==response.error&&(vm.blockRemoval=!1,vm.emailErrors.required=!1,sharedProperties.ajaxError(response.error))})}function uploadInviteSuccess(){sharedProperties.setMember([]),vm.getMembersData(),document.getElementById("mediaFormUpload").removeEventListener("change",vm.uploadCSV,!1),vm.csvFile=null,vm.filterEnabledRecord(),vm.addMembersView=!1,vm.showAddHireList=!1,sharedProperties.growlMessage($rootScope.pullInterNationalization("admin.group.profile.updateAddGroup")),sharedProperties.fireAnalyticsEvent("Manage Account | Add Members","N/A")}function uploadInviteError(users){vm.csvFile=angular.copy(users),$("html,body").animate({scrollTop:$(".subscriptions-information").offset().top-80},300)}function tagsUploadMember(){var list=$(".tagsTextarea").find(".tag-list");return list.find(".tag-item").removeClass("invalid-tag"),vm.existingUserEmailError=[],vm.emailErrors={isExisting:!1,required:!1,countExceed:!1},vm.newEmailsList.length?vm.newEmailsList.length>vm.subscriptionCount?(vm.emailErrors.countExceed=!0,!1):void memberEmailCheck.isMemberPresent(vm.newEmailsList).then(function(response){if(null!==response.Success&&void 0!==response.Success)if(vm.existingUserEmailError=response.failureList?response.failureList:[],vm.existingUserEmailError.length){vm.emailErrors.isExisting=!0;for(var i=0;i<vm.existingUserEmailError.length;i++){var index=vm.newEmailsList.indexOf(vm.existingUserEmailError[i]);-1!==index&&list.find('.tag-item:eq("'+index+'")').addClass("invalid-tag")}$("html,body").animate({scrollTop:$(".tagsTextarea").offset().top-20},1e3)}else vm.newMember.selectedEmailsList=angular.copy(vm.newEmailsList),vm.newMember.tagsList=angular.copy(vm.newTagsList),ajaxService.getAjaxResponse({url:vm.serviceApis.addMultileMember,data:$.param({memberList:vm.newMember.selectedEmailsList.join(),tagList:vm.newMember.tagsList.length?vm.newMember.tagsList.join():"",groupAssociationList:vm.trackGroups.length?vm.trackGroups.join():""})}).then(function(response){"true"===response.Success?(sharedProperties.setMember([]),vm.getMembersData(),document.getElementById("mediaFormUpload").removeEventListener("change",vm.uploadCSV,!1),vm.csvFile=null,vm.addMembersView=!1,vm.showAddHireList=!1,sharedProperties.growlMessage($rootScope.pullInterNationalization("admin.group.profile.updateAddGroup")),sharedProperties.fireAnalyticsEvent("Manage Account | Add Members","N/A")):null!==response.error&&sharedProperties.ajaxError(response.error)});else sharedProperties.ajaxError(response.error)}):(vm.emailErrors.required=!0,!1)}function groupOperation(groupName){$.each(vm.allGroupsListing,function(i,j){if(vm.allGroupsListing[i].name===groupName)return vm.groupListTrackerMultiple(vm.allGroupsListing[i].id,!0),!1})}function viewMemberDetails(email,flag){$localStorage.remove("memberDetailsNav"),$localStorage.set("previousView",$scope.$parent.ctrl.activeView),$scope.$parent.ctrl.switchViews("memberDetails",!1,email),flag&&$localStorage.set("memberDetailsNav","groupsTags")}function comptencyOperation(response){vm.competencyList=response.competencyProfile,vm.competencyEvaluationInProgress=response.evaluationInProgress;for(var competencyUserMap={},competencyNameMap={},i=0;i<response.memberList.length;i++)competencyUserMap[response.memberList[i].userId]=response.memberList[i].competencyProfileId;for(var k=0;k<vm.competencyList.length;k++)competencyNameMap[vm.competencyList[k].id]=vm.competencyList[k].name;for(var j=0;j<vm.masterMemberList.length;j++)vm.masterMemberList[j].competencyProfileId=competencyUserMap[vm.masterMemberList[j].id],vm.masterMemberList[j].competencyProfileName=competencyNameMap[vm.masterMemberList[j].competencyProfileId]}function actionPlanOperation(response){vm.actionPlansList=response.actionPlanListing,vm.actionPlansList.map(function(e,index){return e.organizationId=index,e})}function memberOperation(response){vm.masterMemberList=response,vm.loadCompetencyDetails(),vm.getActionPlans(),vm.returnMemberList(vm.pageSetting.pageSize),vm.responseRecieved=!0,getFilterValue(),$timeout(function(){prepareDatePicker()},200)}function infinteScroll(pageSize){vm.pageSetting.disabledInfinite||(vm.pageSetting.pageSize=pageSize,pageSize>=vm.masterMemberList.length&&(vm.pageSetting.disabledInfinite=!0,vm.pageSetting.pageSize=vm.masterMemberList.length))}function returnMemberList(pageSize){if(!vm.masterMemberList.length)return!0;vm.pageSetting.pageSize=vm.originalpageSetting.pageSize,vm.pageSetting.disabledInfinite=!1;var result=vm.masterCopy?vm.masterMemberList:vm.memberList;vm.memberList=result.filter(function(e){return("false"!==vm.pageSetting.competencySelected&&e.competencyProfileId===vm.pageSetting.competencySelected||"false"===vm.pageSetting.competencySelected&&e)&&(!1!==vm.pageSetting.dateRangeSelected&&filterWithDateRange(e.createdOn)||!1===vm.pageSetting.dateRangeSelected&&e)&&(vm.pageSetting.userGroupSelected.length&&filterByGroups(e.groupAssociationList)||!vm.pageSetting.userGroupSelected.length&&e)&&(vm.pageSetting.selectedTitles.length&&-1!==vm.pageSetting.selectedTitles.indexOf(e.title)||!vm.pageSetting.selectedTitles.length&&e)&&(vm.pageSetting.userStatusSelected.length&&-1!==vm.pageSetting.userStatusSelected.indexOf(e.userStatus)||!vm.pageSetting.userStatusSelected.length&&e)&&filterBlockActive(e)&&(vm.pageSetting.statusInclude.length&&filterInArray(vm.pageSetting.statusInclude,null===e.roles?[]:e.roles)||!vm.pageSetting.statusInclude.length&&e)&&(vm.pageSetting.searchTag.length&&filterInArray(vm.pageSetting.searchTag,null===e.tagList?[]:e.tagList)||!vm.pageSetting.searchTag.length&&e)&&(vm.pageSetting.organizationTag.length&&filterByOrg(e.id)||!vm.pageSetting.organizationTag.length&&e)&&sharedProperties.singleElementSearch(vm.pageSetting.textSearching,e,2)}),order(vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse),vm.pageSetting.user.length!==vm.memberList.length&&(vm.negative=!1),vm.masterCopy=!0}function filterBlockActive(e){var result=0;return vm.pageSetting.userBlocked&&e.deactivated===vm.pageSetting.userBlocked&&result++,vm.pageSetting.userActive&&e.deactivated!==vm.pageSetting.userActive&&result++,(vm.pageSetting.userBlocked&&vm.pageSetting.userActive||!vm.pageSetting.userBlocked&&!vm.pageSetting.userActive)&&result++,!!result}function filterWithDateRange(createdDate){if(null===createdDate)return!1;var createDt=moment(createdDate,"MMMM D, YYYY").toDate();return moment(createDt,"MM/DD/YYYY").isBetween(moment(vm.filterFromDate,"MM/DD/YYYY"),moment(vm.filterToDate,"MM/DD/YYYY"),"days","[]")}function active(event,setting){vm.pageSetting.lastPredicate=setting.predicate,vm.pageSetting.lastReverse=setting.reverse,sharedProperties.toggleFilterClick(event,vm.pageSetting.lastPredicate),order(vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse)}function order(predicate,reverse){vm.pageSetting.lastPredicate=predicate,vm.pageSetting.lastReverse=reverse;var orderedList=$filter("orderBy")(vm.memberList,vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse);vm.memberList=function(array,key){if("name"===key){for(var list=[],empty=[],i=0;i<array.length;i++)null!==array[i][key]&&""!==array[i][key]&&void 0!==array[i][key]?list.push(array[i]):empty.push(array[i]);return $.merge(list,empty)}return orderedList}(orderedList,vm.pageSetting.lastPredicate)}function callAddMembers(){addMemberViewEnable()}function addMemberViewEnable(argument){vm.allGroupsListing.length?addMemberViewReady():vm.getGroupsList(addMemberViewReady)}function addMemberViewReady(){vm.uploadWidth=$(".content-col").width(),vm.addMembersView=!0,vm.showAddHireList=!0}function attachEvent(){document.getElementById("mediaFormUpload").addEventListener("change",vm.uploadCSV,!1)}function uploadCSV(evt){var multiPartRequest=(evt.target.files[0],null);vm.csvFile=null;var formObj=new FormData,currentFile=evt.target.files[0];formObj.append("userFile",currentFile,currentFile.name),multiPartRequest=$.ajax({url:vm.serviceApis.uploadCSVFile,type:"POST",data:formObj,processData:!1,contentType:!1,beforeSend:function(){$rootScope.$broadcast("httpLoaderStart")}}),multiPartRequest.done(function(response){null!==response.success&&"true"===response.success.Success?(sharedProperties.growlMessage($rootScope.pullInterNationalization("mediaManager.growlMessage.success")),document.getElementById("mediaFormUpload").value="",vm.successUpload=[],vm.successUploadIndex=[],$scope.$apply(function(){vm.csvFile=response.success,vm.csvFile.users=response.success.users.filter(function(e,index){return e.id=index,!1===e.validUser&&(vm.successUpload.push(e),vm.successUploadIndex.push(index)),e})}),$rootScope.$broadcast("httpLoaderEnd")):(sharedProperties.ajaxError(response.error),document.getElementById("mediaFormUpload").value="",$rootScope.$broadcast("httpLoaderEnd"))}),multiPartRequest.fail(function(jqXHR,textStatus){if(sharedProperties.growlMessage($rootScope.pullInterNationalization("mediaManager.growlMessage.fail"),"<strong> Alert </strong>","glyphicon glyphicon-ban-circle"),document.getElementById("mediaFormUpload").value="",$rootScope.$broadcast("httpLoaderEnd"),408===jqXHR.status||0===jqXHR.status||-1===jqXHR.status)return window.location.reload(),!1})}function removeName(index,succIndex){if(vm.blockRemoval)return!0;var totalDup=[],indexToDelete=vm.successUploadIndex.indexOf(index);-1!==indexToDelete&&(vm.successUpload.splice(indexToDelete,1),vm.successUploadIndex.splice(indexToDelete,1)),vm.csvFile.users.splice(index,1);for(var successUpload=[],successUploadIndex=[],i=0;i<vm.csvFile.users.length;i++)vm.csvFile.users[i].id=i,!1===vm.csvFile.users[i].validUser&&(successUpload.push(vm.csvFile.users[i]),successUploadIndex.push(i)),"Duplicate"===vm.csvFile.users[i].message&&totalDup.push(i);if(vm.successUpload=successUpload,vm.successUploadIndex=successUploadIndex,1===totalDup.length){vm.csvFile.users[totalDup[0]].validUser=!0;var indexToDeleted=vm.successUploadIndex.indexOf(totalDup[0]);-1!==indexToDeleted&&(vm.successUpload.splice(indexToDeleted,1),vm.successUploadIndex.splice(indexToDeleted,1))}}function resetMediaForm(){vm.csvFile=null,vm.emailErrors.required=!1,vm.filterEnabledRecord()}function addToGroup(){vm.allGroupsListing.length?addToGroupModal():vm.getGroupsList(addToGroupModal)}function editAddToGroup(param,param2){vm.allGroupsListing.length?editGroupSection(param,param2):vm.getGroupsList(editGroupSection,param,param2)}function removeGroupDialog(event,groupName){for(var _this=event.target,current=($(_this).closest(".blockGroup").remove(),""),tempId="",copyGroupsList=angular.copy(vm.allGroupsListing),copyListNew=angular.copy(vm.updatedGroupsListForMember),i=0;i<vm.groupEditSection.groupAssociationList.length;i++)vm.groupEditSection.groupAssociationList[i].name===groupName.name&&(tempId=vm.groupEditSection.groupAssociationList[i].name,vm.groupEditSection.groupAssociationList.splice(i,1),current=i);vm.groupSelectOption.splice(current,1);for(var j=0;j<copyGroupsList.length;j++)if(copyGroupsList[j].name===tempId){copyListNew.push(copyGroupsList[j]);break}vm.updatedGroupsListForMember=angular.copy(copyListNew)}function switchView(type){"status"===type?vm.listingView="ASSESSMENT":"reload"!==type&&"COMPETENCY"===vm.listingView||(sharedProperties.setCompetency(null),vm.loadCompetencyDetails(),vm.listingView="COMPETENCY")}function assignRemoveCompetencyModalSingle(obj,action,competencyId){if("ASSIGN"===action){if(!vm.competencyList.length||vm.competencyEvaluationInProgress||null!==competencyId&&vm.competencyList.length<1)return!0;vm.selectedCompetencyDrop=null!==typeof competencyId?competencyId:null,vm.selectedCompetency=[]}else{if(!vm.competencyList.length||vm.competencyEvaluationInProgress||null===competencyId)return!0;vm.selectedCompetency=[competencyId]}vm.singleMemberCompetency=!0,vm.competencyRemoveAction=!1,vm.assignClick=!1,vm.competencyAssignRemoveOptions=[],vm.selectedUsersList=[],vm.competencyActionType=action,vm.competencyAssignRemoveOptions.push(obj),vm.selectedUsersList.push(obj.id),ngDialog.open({template:vm.modalUrl.assignRemoveCompetencyModal,scope:$scope}).closePromise.then(function(data){vm.competencyActionType="MORE"})}function assignRemoveCompetencyModalMultiple(action){if(!vm.competencyList.length||vm.competencyEvaluationInProgress)return!0;if(vm.singleMemberCompetency=!1,vm.competencyActionType=action,"MORE"!==vm.competencyActionType){vm.selectedCompetency=[],vm.assignClick=!1,vm.competencyAssignRemoveOptions=[],vm.selectedUsersList=[],vm.selectedCompetencyDrop=null;for(var i=0;i<vm.pageSetting.user.length;i++)vm.competencyAssignRemoveOptions.push(vm.pageSetting.user[i]),vm.selectedUsersList.push(vm.pageSetting.user[i].userId),vm.selectedCompetency.push(vm.pageSetting.user[i].profileId);ngDialog.open({template:vm.modalUrl.assignRemoveCompetencyModal,scope:$scope}).closePromise.then(function(data){vm.competencyActionType="MORE"})}}function editGroupSection(email,index){vm.setEditMode=!0,vm.EditGroupEmail=email,vm.indexToChange=index,vm.groupEditSection=angular.copy(vm.memberList[index]),vm.groupSelectOption=[],vm.updatedGroupsListForMember=[];for(var copyList=angular.copy(vm.allGroupsListing),tempIds=[],tempList=[],j=0;j<vm.groupEditSection.groupAssociationList.length;j++)vm.groupSelectOption.push(vm.groupEditSection.groupAssociationList[j].name),tempIds.push(vm.groupEditSection.groupAssociationList[j].name);for(var k=0;k<copyList.length;k++){-1===$.inArray(copyList[k].name,tempIds)&&tempList.push(copyList[k])}vm.updatedGroupsListForMember=tempList,vm.emptyGroupName=!1,vm.existingGroupName=!1,vm.showCreateGroupSection=!1,vm.addGroupSubmitDisabled=!1,vm.newGroupName="",ngDialog.open({template:vm.modalUrl.editGroupSection,scope:$scope})}function addToGroupModal(){vm.addGroupSubmit=!1,vm.showCreateGroupSection=!1,vm.addGroupSubmitDisabled=!1,vm.newGroupName=null,vm.emptyGroupName=!1,vm.existingGroupName=!1,vm.updatedGroupListTracker=[],vm.showSelectedGroupList=[],vm.emptyGroupName=!1,vm.existingGroupName=!1,vm.showCreateGroupSection=!1,vm.addGroupSubmitDisabled=!1,vm.newGroupName="",ngDialog.open({template:vm.modalUrl.addToGroup,scope:$scope})}function groupListTrackerMultiple(groupData,isRemove){var groupId=isRemove?groupData:groupData.originalObject.id,i=$.inArray(groupId,vm.updatedGroupListTracker);i>-1?vm.updatedGroupListTracker.splice(i,1):vm.updatedGroupListTracker.push(groupId);var copyList=angular.copy(vm.allGroupsListingMaster),tempList=[],tempList1=[];vm.showSelectedGroupList=[],$.each(copyList,function(i,j){$.inArray(copyList[i].id,vm.updatedGroupListTracker)>-1?tempList1.push(copyList[i]):tempList.push(copyList[i])}),vm.allGroupsListing=angular.copy(tempList),vm.showSelectedGroupList=angular.copy(tempList1)}function addGroupToModule(groupName,lead){vm.selectedGroup=groupName,vm.groupEditSection.groupAssociationList.length&&""===vm.groupEditSection.groupAssociationList[0].name&&vm.groupEditSection.groupAssociationList.splice(0,1),vm.groupEditSection.groupAssociationList.push({name:groupName,groupLead:!1}),vm.groupSelectOption.push(groupName);for(var copyList=angular.copy(vm.updatedGroupsListForMember),i=0;i<copyList.length;i++)if(copyList[i].name===groupName){copyList.splice(i,1);break}vm.updatedGroupsListForMember=angular.copy(copyList)}function isItEnabled(groupName,id){vm.classActivate=[];for(var i=0;i<vm.allGroupsListingMaster.length;i++)if(groupName===vm.allGroupsListingMaster[i].name&&null!==vm.allGroupsListingMaster[i].groupLead&&vm.allGroupsListingMaster[i].groupLead.email!==vm.EditGroupEmail)return!0}function enableLeadDialog(leadValue,index,groupName){for(var i=0;i<vm.allGroupsListingMaster.length;i++)if(groupName===vm.allGroupsListingMaster[i].name){if(null!==vm.allGroupsListingMaster[i].groupLead&&vm.allGroupsListingMaster[i].groupLead.email!==vm.EditGroupEmail)return!1;vm.groupEditSection.groupAssociationList[index].groupLead=!leadValue}}function blockMembersModal(){vm.addGroupSubmit=!1,ngDialog.open({template:vm.modalUrl.blockMembersModal,
scope:$scope})}function deleteMultiModal(){ngDialog.open({template:vm.modalUrl.deleteMultiModal,scope:$scope})}function deleteSingleModal(member){vm.deleteMemberInfo=member,ngDialog.open({template:vm.modalUrl.deleteSingleModal,scope:$scope})}function blockSingleModal(member,flag){vm.blockMemberInfo=member,vm.blockFlag=flag,ngDialog.open({template:vm.modalUrl.blockSingle,scope:$scope})}function getFilterValue(){var userStatus=[],tagListArray=[],titleFilters=[],groups=[],arr=[];vm.allMembersEmailId=[];for(var i=0;i<vm.masterMemberList.length;i++){vm.allMembersEmailId.push({email:vm.masterMemberList[i].email}),null!==vm.masterMemberList[i].tagList&&(tagListArray=vm.masterMemberList[i].tagList.concat(tagListArray)),null!==vm.masterMemberList[i].title&&titleFilters.push(vm.masterMemberList[i].title),null!==vm.masterMemberList[i].userStatus&&userStatus.push({userStatus:vm.masterMemberList[i].userStatus,userFormatted:vm.masterMemberList[i].userStatusFormatted});for(var g=0;g<vm.masterMemberList[i].groupAssociationList.length;g++)""!==vm.masterMemberList[i].groupAssociationList[g].name&&groups.push(vm.masterMemberList[i].groupAssociationList[g].name)}vm.userStatus=userStatus.filter(function(e){if(-1===arr.indexOf(e.userStatus))return arr.push(e.userStatus),e}),vm.tagListArray=tagListArray.unique(),vm.titleFilters=titleFilters.unique(),vm.allGroupsFilter=groups.unique()}function includeDateCheck(fromDt,toDt,flag){vm.dateErrorFrom=!1,vm.dateErrorTo=!1,!flag||vm.dateErrorFrom||vm.dateErrorTo?(vm.pageSetting.dateRangeSelected=!1,vm.manageFilterDisplayList("dateRangeSelected")):(vm.pageSetting.dateRangeSelected=!0,vm.manageFilterDisplayList("dateRangeSelected")),vm.returnMemberList(vm.pageSetting.pageSize)}function filterInArray(tags,array){return array.some(function(v){return-1!==tags.indexOf(v)})}function filterByOrg(userId){for(var i=0;i<vm.pageSetting.organizationTag.length;i++)if(-1!==vm.actionPlansList[vm.pageSetting.organizationTag[i]].userIdList.indexOf(userId))return!0}function filterByGroups(groupObj){return groupObj.some(function(obj){return-1!==vm.pageSetting.userGroupSelected.indexOf(obj.name)})}function clear(classS,property,search){vm.pageSetting[property]=[],vm.manageFilterDisplayList(property),void 0!==search&&(vm.pageSetting[search]=""),"userStatusSelected"===property&&(vm.pageSetting.userActive=!1,vm.pageSetting.userBlocked=!1),$(classS).each(function(v,i){$(this).prop("checked",!1)}),vm.returnMemberList()}function calculateHeight(event){var obj=$("#"+event);obj.height()>vm.pageSetting.heightParam&&obj.addClass("scroller")}function closeRest(index,noScroll){var val=void 0===noScroll?0:1;$(".accordian-checkbox").each(function(i){i!==$(index.currentTarget.parentNode).index()-val&&$(this).prop("checked",!0)})}function includeCheck(param,setting,cache){var i=$.inArray(param,vm.pageSetting[setting]);i>-1?vm.pageSetting[setting].splice(i,1):(vm.pageSetting[setting].push(param),vm.masterCopy=!cache),vm.manageFilterDisplayList(setting),vm.returnMemberList(vm.pageSetting.pageSize)}function includeCompetencyCheck(id){vm.pageSetting.competencySelected=id,vm.returnMemberList(vm.pageSetting.pageSize),vm.manageFilterDisplayList("competencySelected")}function manageFilterDisplayList(filterSetting){var existing=$.inArray(filterSetting,vm.selectedFilterList),isArray=$.isArray(vm.pageSetting[filterSetting]),settingLength=vm.pageSetting[filterSetting]?vm.pageSetting[filterSetting].length:0,settingFlag=vm.pageSetting[filterSetting];isArray&&settingLength>0?-1===existing&&vm.selectedFilterList.push(filterSetting):isArray&&0===settingLength?-1!==existing&&vm.selectedFilterList.splice(existing,1):isArray||!1===settingFlag||/false/.test(settingFlag)?isArray||!1!==settingFlag&&!/false/.test(settingFlag)||-1!==existing&&vm.selectedFilterList.splice(existing,1):-1===existing&&vm.selectedFilterList.push(filterSetting)}function displayRole(userObj){vm.winWidth=$(window).width();var userRoles=userObj.roles,complete=[];return-1!==userRoles.indexOf("GroupLead")&&complete.push('<span class="thin">'+$rootScope.pullInterNationalization("manageAccountContent.l")+"</span>"),-1!==userRoles.indexOf("AccountAdministrator")&&complete.push('<span class="thin">'+$rootScope.pullInterNationalization("manageAccountContent.admin")+"</span>"),userObj.deactivated&&complete.push('<span class="thin blocked">'+$rootScope.pullInterNationalization("manageAccountContent.blocked")+"</span>"),complete.join("")}function checkAll(){vm.negative?vm.pageSetting.user=[]:vm.pageSetting.user=vm.memberList.map(function(item){return{userId:item.id,email:item.email,name:item.name,title:item.title,userStatus:item.userStatus}})}function checkCount(checked){var userLength=vm.pageSetting.user.length;checked?userLength+1===vm.memberList.length?vm.negative=!0:vm.negative=!1:userLength-1===vm.memberList.length?vm.negative=!0:vm.negative=!1}function resetfilter(allmembers){vm.pageSetting=angular.copy(vm.originalpageSetting),vm.pageSetting.disabledInfinite=!0,vm.returnMemberList(vm.pageSetting.pageSize);var curr=$(".row-header");$(".filters-col");curr.find(".tog h4").removeClass("reverseon").removeClass("on"),curr.find(".tog h4:eq(0)").addClass("on"),vm.selectedFilterList=[]}function sendEmailReminders(status,email){ajaxService.getAjaxResponse({url:vm.serviceApis.sendReminders,data:$.param({brandHeader:"",ctaLabel:"",ctaUrl:"",logType:"PROFILE_INCOMPLETE"===status?"ProfileIncomplete":"Profile",type:"PROFILE_INCOMPLETE"===status?"ProfileIncompleteReminder":"AssessmentPendingReminder",memberList:email})}).then(function(response){"true"===response.Success?(sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.notificationSent")),sharedProperties.fireAnalyticsEvent("Manage Account | Send Reminder",status)):null!=response.error&&sharedProperties.ajaxError(response.error)})}var vm=this;vm.serviceApis={getMembersData:"/sp/admin/member",getCompetencyListing:"/sp/admin/competency/getUserCompetency",assignCompetency:"/sp/admin/competency/assignCompetency",removeCompetency:"/sp/admin/competency/removeCompetency",getGroupsList:"/sp/admin/group/all",addMemberToGroup:"/sp/admin/group/addMember",createNewGroup:"/sp/admin/group/create",blockMembers:"/sp/admin/blockUser",deleteMultiMembers:"/sp/admin/member/deleteMulti",saveGroupToModule:"/sp/admin/group/memberGroupUpdate",confirmDelete:"/sp/admin/member/delete",getHiringCandidateList:"/sp/admin/membersWithHired",addMultileMember:"/sp/admin/member/addMultiple",getSubcription:"/sp/admin/member/availalbeMemberSubscriptions",getCompanyDetails:"/sp/admin/account/getCompanyDetails",getCompanyActionPlans:"/sp/admin/account/actionPlan/getCompanyActionPlans",assignActionPlan:"/sp/admin/account/actionPlan/assignActionPlan",removeActionPlan:"/sp/admin/account/actionPlan/removeActionPlan",selectedActionPlanList:"/sp/goals/groupView/getMemberLndCompDetails",sendReminders:"/sp/notifications/sendNotificationWithParams",uploadCSVInvite:"/sp/admin/member/multiInvite",uploadCSVFile:"/sp/admin/member/multiInviteAddFile"},vm.modalUrl={assignRemoveCompetencyModal:"/sp/resources/html/admin/manage-account/members-assignRemoveCompetency.html",assignRemoveOrgPlanModal:"/sp/resources/html/admin/manage-account/members-assignRemoveOrgPlans.html",addToGroup:"/sp/resources/html/admin/manage-account/members-addToGroup.html",blockMembersModal:"/sp/resources/html/admin/manage-account/members-blockMultiple.html",deleteMultiModal:"/sp/resources/html/admin/manage-account/members-deleteMultiple.html",editGroupSection:"/sp/resources/html/admin/manage-account/members-editGroupStatus.html",deleteSingleModal:"/sp/resources/html/admin/manage-account/members-deleteSingle.html",addNewAccounts:"/sp/resources/html/admin/manage-account/settings-addAccounts.html",blockSingle:"/sp/resources/html/admin/manage-account/members-blockSingle.html"},vm.masterMemberList=[],vm.memberList=[],vm.responseRecieved=!1,vm.pageSetting={pageSize:10,lastPredicate:"name",lastReverse:!1,disabledInfinite:!1,competencySelected:"false",dateRangeSelected:!1,userGroupSelected:[],selectedTitles:[],userStatusSelected:[],userBlocked:!1,userActive:!1,statusInclude:[],searchTag:[],organizationTag:[],textSearching:"",heightParam:800,searchGroupsFilters:"",searchTitlesFilter:"",user:[]},vm.vmEmail="",vm.originalpageSetting=angular.copy(vm.pageSetting),vm.userStatus=[],vm.tagListArray=[],vm.titleFilters=[],vm.allGroupsFilter=[],vm.allMembersEmailId=[],vm.alltoggle=!1,vm.negative=!1,vm.checkedAll=!1,vm.allUsersMenu=!1,vm.masterCopy=!0,vm.isGroupsDelete=!1,vm.newHiresList=[],vm.showAddHireList=!1,vm.addMultipleMembers={},vm.addMultipleMembers.formSubmitted=!1,vm.newMember={},vm.memberTags=null,vm.emailErrors={isExisting:!1,required:!1,countExceed:!1},vm.candidateEmails=null,vm.selectedGroupsList=null,vm.subscriptionCount=0,vm.addMembersView=!1,vm.csvFile=null,vm.validUserFilter="",vm.successUpload=[],vm.newEmailsList=[],vm.newTagsList=[],vm.newMember.selectedEmailsList=[],vm.newMember.tagsList=[],vm.trackGroups=[],vm.addAccountsForm={},vm.addAccountsForm.submitted=!1,vm.requestAccounts=0,vm.requestType="members",vm.companyEmail="",vm.currentPageUrl=window.location.href.replace(window.location.hash,""),vm.loadGroups=loadGroups,vm.groupSelect=groupSelect,vm.groupRemove=groupRemove,vm.processAccountRequest=processAccountRequest,vm.requestForAccounts=requestForAccounts,vm.closeAddMemberScreen=closeAddMemberScreen,vm.newDt=new Date,vm.filterToDate=null,vm.filterFromDate=null,vm.dateFilterCheck=!1,vm.dateErrorFrom=!1,vm.dateErrorTo=!1,vm.dateRangeFilter=null,vm.competencyList=[],vm.competencyEvaluationInProgress=!1,vm.competencyActionType="MORE",vm.selectedCompetency=[],vm.assignClick=!1,vm.competencyAssignRemoveOptions=[],vm.selectedUsersList=[],vm.responseAvailableForCompetency=!1,vm.singleMemberCompetency=!1,vm.actionPlansList=[],vm.actionPlansListCopy=[],vm.selectedActionPlan="",vm.actionPlanSettings={},vm.getActionPlans=getActionPlans,vm.editActionPlan=editActionPlan,vm.actionPlanUserList=[],vm.actionPlanUserIds=[],vm.removeActionPlan=!1,vm.processActionPlan=processActionPlan,vm.trackactionActionPlans=trackactionActionPlans,vm.noPlansSubmit=!1,vm.selectedActionPlans=[],vm.selectedActionPlanIds=[],vm.userActionPlansList=[],vm.activeOrgPlanIds=[],vm.inactiveOrgPlanIds=[],vm.allGroupsListingMaster=[],vm.allGroupsListing=[],vm.addGroupSubmit=!1,vm.showCreateGroupSection=!1,vm.addGroupSubmitDisabled=!1,vm.newGroupName=null,vm.emptyGroupName=!1,vm.existingGroupName=!1,vm.newGroupCreated=!1,vm.updatedGroupListTracker=[],vm.showSelectedGroupList=[],vm.updatedGroupsListForMember=[],vm.blockRemoval=!1,vm.getMembersData=getMembersData,vm.loadCompetencyDetails=loadCompetencyDetails,vm.getGroupsList=getGroupsList,vm.addMemberToGroup=addMemberToGroup,vm.createNewGroup=createNewGroup,vm.confirmDelete=confirmDelete,vm.saveGroupToModule=saveGroupToModule,vm.assignCompetency=assignCompetency,vm.removeCompetency=removeCompetency,vm.blockMembers=blockMembers,vm.deleteMultiMembers=deleteMultiMembers,vm.getHiringCandidateList=getHiringCandidateList,vm.addNewMembers=addNewMembers,vm.initAddMembers=initAddMembers,vm.blockSingleModal=blockSingleModal,vm.returnMemberList=returnMemberList,vm.infinteScroll=infinteScroll,vm.active=active,vm.displayRole=displayRole,vm.resetfilter=resetfilter,vm.addToGroup=addToGroup,vm.groupListTrackerMultiple=groupListTrackerMultiple,vm.addGroupToModule=addGroupToModule,vm.editAddToGroup=editAddToGroup,vm.isItEnabled=isItEnabled,vm.enableLeadDialog=enableLeadDialog,vm.removeGroupDialog=removeGroupDialog,vm.checkCount=checkCount,vm.viewMemberDetails=viewMemberDetails,vm.assignRemoveCompetencyModalMultiple=assignRemoveCompetencyModalMultiple,vm.assignRemoveCompetencyModalSingle=assignRemoveCompetencyModalSingle,vm.blockMembersModal=blockMembersModal,vm.deleteMultiModal=deleteMultiModal,vm.deleteSingleModal=deleteSingleModal,vm.callAddMembers=callAddMembers,vm.sendEmailReminders=sendEmailReminders,vm.uploadCSV=uploadCSV,vm.attachEvent=attachEvent,vm.removeName=removeName,vm.resetMediaForm=resetMediaForm,vm.filterEnableUpload=filterEnableUpload,vm.filterEnabledRecord=filterEnabledRecord,vm.clear=clear,vm.calculateHeight=calculateHeight,vm.closeRest=closeRest,vm.includeCheck=includeCheck,vm.includeDateCheck=includeDateCheck,vm.includeCompetencyCheck=includeCompetencyCheck,vm.selectedFilterList=[],vm.manageFilterDisplayList=manageFilterDisplayList,vm.checkAll=checkAll,vm.viewCompare=function(groupId,groupType,groupName){$scope.groupType=groupType,$scope.groupId=groupId,$scope.groupName=groupName,$scope.groupUsers=vm.pageSetting.user,sharedProperties.fireAnalyticsEvent("ERTi | Members compare Portraits","N/A"),ngDialog.open({template:"/sp/resources/html/common/team-advisor.html",scope:$scope,className:"roles-compare-full-view"})},vm.tagAdded=function(tag,type){"email"===type&&-1===vm.newEmailsList.indexOf(tag.email.trim())&&vm.newEmailsList.push(tag.email.trim()),"tag"===type&&-1===vm.newTagsList.indexOf(tag.text.trim())&&vm.newTagsList.push(tag.text.trim())},vm.tagRemoved=function(tag,type){"email"===type&&-1!==vm.newEmailsList.indexOf(tag.email.trim())&&vm.newEmailsList.splice(vm.newEmailsList.indexOf(tag.email.trim()),1),"tag"===type&&-1===vm.newTagsList.indexOf(tag.text.trim())&&vm.newTagsList.push(tag.text.trim())},function(){vm.permissionLevel=sharedProperties.checkPermission(),$localStorage.remove("newHireDetails","newHireCheck","gNotify","spProfileTab");var storedUser=$localStorage.get("loggegdInProfile");vm.vmEmail=storedUser.member.email}();var prepareDatePicker=function(){moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker")),vm.filterFromDate=moment().subtract(30,"days").format("MM/DD/YYYY"),vm.filterToDate=moment().format("MM/DD/YYYY");var ipadView=$(window).width()>767&&$(window).width()<1025;$('input[name="dateRangeFilter"]').daterangepicker({showDropdowns:!1,maxDate:moment(),startDate:moment().subtract(30,"days").toDate(),endDate:moment(),locale:{format:ipadView?"MM/DD/YY":"MMM DD, YYYY"},alwaysShowCalendars:!0,autoApply:!0,opens:"right"},function(start,end,label){$scope.$apply(function(){vm.filterFromDate=start.format("MM/DD/YYYY"),vm.filterToDate=end.format("MM/DD/YYYY")})})}}angular.module("spApp").controller("adminMemberController",adminMemberController),adminMemberController.$inject=["$filter","$localStorage","sharedProperties","ajaxService","$rootScope","ngDialog","$scope","$timeout","$q","memberEmailCheck"]}();