function createThemeController($scope,$element,$attrs,ngDialog,$timeout,sharedProperties,ajaxService,$rootScope,$localStorage,$filter){$scope.accountsListException=!1,$scope.updatedAccountListing=[],$scope.selectedAccountsCount=0,$scope.updatedListingIndex=0,$scope.accountList={},$scope.selectedCompanyIdList=[],$scope.allAccountsIdList=[],$scope.accountList.search=null,$scope.filteredAccountListing={},$scope.newTheme={},$scope.newTheme.validationErrors=!1,$scope.newThemeDetails={},$scope.newThemeDetails.category="Business",$scope.newThemeDetails.isMandatory="true",$scope.newThemeDetails.status="ACTIVE",$scope.newThemeDetails.assignAccounts="All",$scope.createNewThemeException=!1,$scope.getAccountList=function(){ajaxService.getAjaxResponse({url:"/sp/sysAdmin/hk/getCompanyList",method:"GET"}).then(function(response){if("true"===response.Success)$scope.accountsListException=!1,$scope.accountListing=response.companies,jQuery.each($scope.accountListing,function(i,j){$scope.updatedAccountListing.push(jQuery.extend({},$scope.accountListing[i],{accountSelectedStatus:!1})),$scope.allAccountsIdList.push($scope.accountListing[i].id)});else{$scope.accountsListException=!0;for(var key in response.error)$scope.accountsListExceptionMsg=response.error[key]}})},$scope.addtoSelectedAccounts=function(id){jQuery.each($scope.updatedAccountListing,function(i){if($scope.updatedAccountListing[i].id===id)return $scope.updatedAccountListing[i].accountSelectedStatus=!0,$scope.selectedAccountsCount+=1,$scope.selectedCompanyIdList.push($scope.updatedAccountListing[i].id),$scope.updatedAccountListing[i].updatedListingIndex=$scope.updatedListingIndex++,!1})},$scope.removeFromSelectedAccounts=function(id){jQuery.each($scope.updatedAccountListing,function(i){if($scope.updatedAccountListing[i].id===id)return $scope.updatedAccountListing[i].accountSelectedStatus=!1,$scope.selectedAccountsCount-=1,$scope.selectedCompanyIdList.splice($scope.selectedCompanyIdList.indexOf(id),1),!1})},$scope.removeAllSelectedAccounts=function(){jQuery.each($scope.updatedAccountListing,function(i){$scope.updatedAccountListing[i].accountSelectedStatus=!1,$scope.updatedAccountListing[i].updatedListingIndex=null}),$scope.selectedAccountsCount=0,$scope.selectedCompanyIdList=[]},$scope.addFilteredAccounts=function(){var selectedList=$filter("filter")($scope.updatedAccountListing,$scope.accountList.search);jQuery.each(selectedList,function(i){jQuery.each($scope.updatedAccountListing,function(j){selectedList[i].id===$scope.updatedAccountListing[j].id&&($scope.updatedAccountListing[j].accountSelectedStatus=!0,$scope.selectedAccountsCount+=1,$scope.selectedCompanyIdList.push($scope.updatedAccountListing[j].id),$scope.updatedAccountListing[j].updatedListingIndex=$scope.updatedListingIndex++)})}),$scope.accountList.search=null},$scope.cancelRedirect=function(){setTimeout(function(){window.location="/sp/sysAdmin/goals/themeListings"},100)},$scope.createNewTheme=function(fData){var _params;$scope.newTheme.validationErrors=!1,$scope.createNewThemeException=!1,"All"===fData.assignAccounts?($scope.accList=$scope.allAccountsIdList,_params={name:fData.name,description:fData.description,status:fData.status,category:fData.category,isMandatory:fData.isMandatory,allAccounts:!0}):($scope.accList=$scope.selectedCompanyIdList,_params={name:fData.name,description:fData.description,status:fData.status,category:fData.category,isMandatory:fData.isMandatory,accounts:$scope.accList.join(),allAccounts:!1}),this.newTheme.$valid&&$scope.accList.length>0?($scope.newTheme.validationErrors=!1,ajaxService.getAjaxResponse({url:"/sp/sysAdmin/goals/createGoal",data:$.param(_params)}).then(function(response){if("true"===response.Success)$scope.createNewThemeException=!1,$localStorage.set("gNotify","AddTheme"),setTimeout(function(){window.location="/sp/sysAdmin/goals/themeListings"},100);else{$scope.createNewThemeException=!0;for(var key in response.error)$scope.createNewThemeExceptionMsg=response.error[key]}})):$scope.newTheme.validationErrors=!0},function(){$scope.getAccountList()}()}angular.module("spApp").controller("createThemeController",createThemeController),createThemeController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage","$filter"];