function candidateProfileDetails($scope,$element,$attrs,$http,ngDialog,$timeout,sharedProperties,ajaxService,$rootScope,$localStorage){$scope.formStatus={},$scope.profile={},$scope.linkedinUpdate={},$scope.profileCommentswithFlags=[],$scope.commentBoxes={},$scope.newDate={},$scope.loggedInUser={},$scope.disableLinkedinEditing=!0,$scope.disableUserProfileEditing=!0,$scope.linkeDInFormStatus=!1,$scope.commentEditEnabled=!1,$scope.loggedInUser.first="",$scope.loggedInUser.last="",$scope.url={},$scope.userProfile={},$scope.comments={},$scope.stateCheck={},$scope.member={},$scope.dataWithFlags=[],$scope.memCountCheck=!1,$scope.newOrderFlag=0,$scope.addNewMember={},$scope.addNewMember.submitted=!1,$scope.emailFromParam=sharedProperties.getParam("cemail"),$scope.commentSection={};var storedProfile=$localStorage.get("loggegdInProfile"),userRoles=storedProfile.member.roles.sort();$scope.isAccountAdmin=0===jQuery.inArray("AccountAdministrator",userRoles),$scope.isAdmin=0===jQuery.inArray("Administrator",userRoles),$scope.emptyPTPlist=!1,$scope.recentList={},$scope.spMatch={},$scope.spMatch.isAvailable=!1;var t=$localStorage.get("showProfileTab");void 0!==t&&null!==t?($scope.defaultTab=!1,$timeout(function(){$rootScope.callSwitchChange("spProfile1")},100)):$scope.defaultTab=!0,$scope.newDate.currentDay=new Date,null!==$localStorage.get("isCandidateArchived")&&!1!==$localStorage.get("isCandidateArchived")&&($scope.isCandidateArchived=!0,ajaxService.getAjaxResponse({url:"/sp/hiring/getArchivedUserProfileDetails",data:$.param({candidateId:$localStorage.get("archiveCandidateId")})}).then(function(response){if("true"===response.Success){$scope.profile=response.hiring,$scope.hiringInfo=response.hiring,"VALID"===$scope.hiringInfo.userStatus?null===$scope.hiringInfo.spUserId?$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}}):!0===$scope.hiringInfo.profileSettings.hiringAccessAllowed?$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}}):$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!0,deleteBtn:!0,moveBtn:!0}}):"INVITATION_SENT"===$scope.hiringInfo.userStatus||"ASSESSMENT_PROGRESS"===$scope.hiringInfo.userStatus||"ASSESSMENT_PENDING"===$scope.hiringInfo.userStatus||"ADD_REFERENCES"===$scope.hiringInfo.userStatus?$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}}):"INVITATION_NOT_SENT"!==$scope.hiringInfo.userStatus&&"INVITATION_EXPIRED"!==$scope.hiringInfo.userStatus||($scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}})),null!==response.address?($scope.profile.address1=response.address.addressLine1,$scope.profile.address2=response.address.addressLine2,$scope.profile.city=response.address.city,$scope.profile.state=response.address.state,$scope.profile.country=response.address.country,$scope.profile.zip=response.address.zipCode):($scope.profile.address1=null,$scope.profile.address2=null,$scope.profile.city=null,$scope.profile.state="default",$scope.profile.country="default",$scope.profile.zip=null),null===$scope.profile.gender&&($scope.profile.gender="default"),0===$scope.profile.dob.monthValue?$scope.profile.month="default":$scope.profile.month=$scope.profile.dob.monthValue,0===$scope.profile.dob.dayOfMonth?$scope.profile.day="default":$scope.profile.day=$scope.profile.dob.dayOfMonth,0===$scope.profile.dob.year?$scope.profile.year="default":$scope.profile.year=$scope.profile.dob.year,$scope.profile.phone=$scope.profile.phoneNumber,$scope.profilePic=response.hiring.smallProfileImage,$scope.userInitials=response.hiring.userInitials,$scope.profilePicSmall=response.hiring.smallProfileImage,void 0!==response.hiring.tagList&&null!==response.hiring.tagList?$scope.existingCandidateTags=response.hiring.tagList.join():$scope.existingCandidateTags="",void 0!==response.hiring.hiringRoles||null!==response.hiring.hiringRoles?$scope.existingCandidateRoles=response.hiring.hiringRoles.join(", "):$scope.existingCandidateRoles="",$scope.totalComments=response.hiring.comments.length,$scope.userStatus=response.hiring.userStatusFormatted,$scope.assessmentStatus=response.hiring.userStatus,$scope.profileCommentswithFlags=[];var getComments=response.hiring.comments;jQuery.each(getComments,function(i,j){var updatedComment=jQuery.extend({},getComments[i],{mName:"commentBox_"+i,showOptions:!1});$scope.profileCommentswithFlags.push(updatedComment)}),$scope.referencesDetails=response.hiring.referencesDetails,null!==$scope.hiringInfo.linkedInUrl&&void 0!==$scope.hiringInfo.linkedInUrl?$scope.url.linkedInUrl=$scope.hiringInfo.linkedInUrl:null!==$scope.hiringInfo.url&&void 0!==$scope.hiringInfo.url&&($scope.url.linkedInUrl=$scope.hiringInfo.url)}})),$scope.newDate={year:$scope.newDate.currentDay.getFullYear(),month:$scope.newDate.currentDay.getMonth()+1,day:$scope.newDate.currentDay.getDate()},$scope.addressFormReset=function(t){$scope.profile.address1=null,$scope.profile.address2=null,$scope.profile.city=null,$scope.profile.zip=null,"United States"===$scope.stateCheck.forSelectedCountry?$scope.profile.state="default":$scope.profile.state=null},$scope.enableEdit=function(f){"linkedin"===f&&($scope.disableLinkedinEditing=!1),"userProfile"===f&&($scope.disableUserProfileEditing=!1)},$scope.disableEdit=function(f){"linkedin"===f&&($scope.disableLinkedinEditing=!0),"userProfile"===f&&($scope.disableUserProfileEditing=!0,$scope.getProfileDetails()),$scope.formStatus.sumbit=!1,$scope.linkeDInFormStatus=!1},$scope.formatDate=function(d){if(null!==d&&void 0!==d){var splitDate=d.split("-");return{"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"}[(parseInt(splitDate[1])<9?"0"+splitDate[1]:splitDate[1]).toString()]+" "+parseInt(splitDate[2])+", "+parseInt(splitDate[0])}},$scope.today=$scope.formatDate($scope.newDate.year+"-"+$scope.newDate.month+"-"+$scope.newDate.day),$scope.getProfileDetails=function(){var _o={url:"/sp/hiring/getProfileDetails",data:$.param({candidateEmail:$scope.emailFromParam}).replace(/%40/g,"@")};ajaxService.getAjaxResponse(_o).then(function(response){if("true"===response.Success){$scope.profile=response.userProfileForm,$scope.hiringInfo=response.hiring,$localStorage.set("candidateEmail",$scope.emailFromParam).set("candidateID",response.hiring.id),"VALID"===$scope.hiringInfo.userStatus?null===$scope.hiringInfo.spUserId?$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!0,viewCompare:!0,viewAdvisor:!0,requestAccess:!1,archiveBtn:!0}}):!0===$scope.hiringInfo.profileSettings.hiringAccessAllowed?$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!0,viewCompare:!0,viewAdvisor:!0,requestAccess:!1,archiveBtn:!0}}):$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!0,archiveBtn:!0}}):"INVITATION_SENT"===$scope.hiringInfo.userStatus||"ASSESSMENT_PROGRESS"===$scope.hiringInfo.userStatus||"ASSESSMENT_PENDING"===$scope.hiringInfo.userStatus||"ADD_REFERENCES"===$scope.hiringInfo.userStatus?$scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,archiveBtn:!1}}):"INVITATION_NOT_SENT"!==$scope.hiringInfo.userStatus&&"INVITATION_EXPIRED"!==$scope.hiringInfo.userStatus||($scope.hiringInfo=$.extend({},$scope.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,archiveBtn:!1}})),null!==response.address?($scope.profile.address1=response.address.addressLine1,$scope.profile.address2=response.address.addressLine2,$scope.profile.city=response.address.city,$scope.profile.state=response.address.state,$scope.profile.country=response.address.country,$scope.profile.zip=response.address.zipCode):($scope.profile.address1=null,$scope.profile.address2=null,$scope.profile.city=null,$scope.profile.state="default",$scope.profile.country="default",$scope.profile.zip=null),null===$scope.profile.gender&&($scope.profile.gender="default"),0===$scope.profile.month&&($scope.profile.month="default"),0===$scope.profile.day&&($scope.profile.day="default"),0===$scope.profile.year&&($scope.profile.year="default"),$scope.profilePic=response.hiring.smallProfileImage,$scope.userInitials=response.hiring.userInitials,$scope.profilePicSmall=response.hiring.smallProfileImage,void 0!==response.hiring.tagList&&null!==response.hiring.tagList?$scope.existingCandidateTags=response.hiring.tagList.join():$scope.existingCandidateTags="",void 0!==response.hiring.hiringRoles||null!==response.hiring.hiringRoles?$scope.existingCandidateRoles=response.hiring.hiringRoles.join(", "):$scope.existingCandidateRoles="",$scope.totalComments=response.hiring.comments.length,$scope.userStatus=response.hiring.userStatusFormatted,$scope.assessmentStatus=response.hiring.userStatus,$scope.profileCommentswithFlags=[];var getComments=response.hiring.comments;jQuery.each(getComments,function(i,j){var updatedComment=jQuery.extend({},getComments[i],{mName:"commentBox_"+i,showOptions:getComments[i].by.email===$scope.loggedInUser.email});$scope.profileCommentswithFlags.push(updatedComment)}),$scope.referencesDetails=response.hiring.referencesDetails,null!==$scope.hiringInfo.linkedInUrl&&void 0!==$scope.hiringInfo.linkedInUrl?($scope.url.linkedInUrl=$scope.hiringInfo.linkedInUrl,$scope.disableLinkedinEditing=!0,$scope.linkedinIcon=!0):null!==$scope.hiringInfo.url&&void 0!==$scope.hiringInfo.url?($scope.hiringInfo.linkedInUrl=$scope.hiringInfo.url,$scope.url.linkedInUrl=$scope.hiringInfo.url,$scope.disableLinkedinEditing=!0,$scope.linkedinIcon=!1):$scope.disableLinkedinEditing=!1,"VALID"===$scope.hiringInfo.userStatus?($scope.getPTPs(),$scope.spMatch.isAvailable=!0):$scope.spMatch.isAvailable=!1}else{$localStorage.remove("candidateEmail","candidateID");for(var key in response.error)$scope.errorMessage=response.error[key];$localStorage.set("gNotify","profileError"),$localStorage.set("profileError",$scope.errorMessage),setTimeout(function(){window.location="/sp/tools/hiring/"},100)}})},null===$localStorage.get("loggegdInProfile")?$timeout(function(){$scope.loggedInUser=$localStorage.get("loggegdInProfile"),$scope.loggedInUser.first=$scope.loggedInUser.member.firstName,$scope.loggedInUser.last=$scope.loggedInUser.member.lastName,$scope.loggedInUser.email=$scope.loggedInUser.member.email},500):($scope.loggedInUser=$localStorage.get("loggegdInProfile"),$scope.loggedInUser.first=$scope.loggedInUser.member.firstName,$scope.loggedInUser.last=$scope.loggedInUser.member.lastName,$scope.loggedInUser.email=$scope.loggedInUser.member.email),$scope.saveAndUpdate=function(formData,formName){var _o={url:"/sp/hiring/updateProfile",data:$.param({firstName:formData.firstName,lastName:formData.lastName,title:formData.title,email:formData.email,gender:formData.gender,day:formData.day,month:formData.month,year:formData.year,phone:formData.phone,address1:formData.address1,address2:formData.address2,city:formData.city,state:formData.state,country:formData.country,zip:formData.zip}).replace(/%2C/g,",").replace(/%40/g,"@")},vCount=0;$scope.formStatus.sumbit=!1;for(var k in formData)"default"!==formData[k]&&"default1"!==formData[k]||vCount++;this.userProfile.$valid&&0===vCount?($scope.disableUserProfileEditing=!0,ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&$scope.getProfileDetails()})):$scope.formStatus.sumbit=!0},$scope.comments={add:function(c,fName){if($scope.commentSection.submitted=!1,""!==c&&null!==c&&void 0!==c){var _o={url:"/sp/hiring/addComment",data:$.param({candidateEmail:$scope.emailFromParam,comment:c}).replace(/%40/g,"@").replace(/%2C/g,",")};ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&($scope.commentSection.comment=null,jQuery('textarea[name="comment"]').val(null),$scope.getProfileDetails())})}else $scope.commentSection.submitted=!0},update:function(i){var commentNgModel="commentBox_"+i,errorBox=jQuery("body").find("span.error_msg_"+i);if($scope.commentEditEnabled=!1,jQuery(errorBox).hasClass("hide")||jQuery(errorBox).addClass("hide"),void 0!==$scope.commentBoxes[commentNgModel]){var _o={url:"/sp/hiring/updateComment",data:$.param({candidateEmail:$scope.emailFromParam,comment:$scope.commentBoxes[commentNgModel],index:i}).replace(/%40/g,"@").replace(/%2C/g,",")};ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&($scope.comment=null,$scope.getProfileDetails())})}else jQuery(errorBox).removeClass("hide")},delete:function(i){var _o={url:"/sp/hiring/removeComment",data:$.param({candidateEmail:$scope.emailFromParam,index:i}).replace(/%40/g,"@").replace(/%2C/g,",")};ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&($scope.comment=null,$scope.getProfileDetails())})},edit:function(i){var commentTextbox=jQuery("body").find("form[name=commentBoxForm_"+i+"]"),commentbox=jQuery("body").find("p.user-comment[data-comment=cBox_"+i+"]"),commentNgModel="commentBox_"+i,textBoxComment=jQuery(commentTextbox).find("textarea").attr("data-comments"),editBtns=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+i+"]"),cancelBtns=jQuery("body").find("a[data-cancel=cancelBtn_"+i+"]");jQuery(editBtns).addClass("hide"),jQuery(cancelBtns).addClass("show"),jQuery(commentTextbox).removeClass("hide"),jQuery(commentbox).addClass("hide"),$scope.commentBoxes[commentNgModel]=textBoxComment,$scope.commentEditEnabled=!0},cancel:function(i){var commentTextbox=jQuery("body").find("form[name=commentBoxForm_"+i+"]"),commentbox=jQuery("body").find("p.user-comment[data-comment=cBox_"+i+"]"),editBtns=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+i+"]"),cancelBtns=jQuery("body").find("a[data-cancel=cancelBtn_"+i+"]");jQuery(editBtns).removeClass("hide"),jQuery(cancelBtns).removeClass("show").addClass("hide"),jQuery(commentTextbox).addClass("hide"),jQuery(commentbox).removeClass("hide"),$scope.commentEditEnabled=!1}},$scope.archiveDialog=function(e,n,r){$scope.archiveCandidate={name:n,email:e,roles:r},ngDialog.open({template:"/sp/resources/html/tools/hiring/archive-candidate.html",scope:$scope})},$scope.archiveAllCandidate=function(cEmail,isHired,single){var emailList=[];!0!==single?jQuery.each(cEmail,function(i,j){emailList.push(cEmail[i].email)}):emailList=cEmail;var options={url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:emailList.toString(),isHired:isHired})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&(ngDialog.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" archived successfully"}),$scope.getProfileDetails(),$scope.negative=!$scope.negative,setTimeout(function(){window.location.href="/sp/tools/hiring"},1e3))})},$scope.moveToCandidateList=function(email){var options={url:"/sp/hiring/moveToCandidate",data:$.param({candidateEmail:email})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&($localStorage.set("gNotify","moved"),setTimeout(function(){window.location="/sp/tools/hiring/"},100))})},$scope.confirmDelete=function(email){var options={url:"/sp/hiring/deleteArchiveCandidate",data:$.param({candidateEmail:email})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?($localStorage.set("gNotify","deleted"),setTimeout(function(){window.location="/sp/tools/hiring/"},100)):$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"Server Error"})})},$scope.updateLinkedURL=function(l){if($scope.linkeDInFormStatus=!1,this.linkedinUpdate.$valid){var _o={url:"/sp/hiring/updateWebUrl",data:$.param({candidateEmail:$scope.emailFromParam,webUrl:l.linkedInUrl}).replace(/%40/g,"@").replace(/%2C/g,",")};$scope.disableLinkedinEditing=!0,ajaxService.getAjaxResponse(_o).then(function(response){"true"===response.Success&&$scope.getProfileDetails()})}else $scope.linkeDInFormStatus=!0},$scope.hireCandidate=function(e,n,r){$scope.hireCandidateDetails={name:n,email:e,roles:r},$scope.member.firstName=$scope.hireCandidateDetails.name.split(" ")[0],$scope.member.lastName=$scope.hireCandidateDetails.name.split(" ")[1],$scope.isAdmin||$scope.isAccountAdmin?ajaxService.getAjaxResponse({url:"/sp/admin/member/availalbeMemberSubscriptions"}).then(function(response){"true"===response.Success&&($scope.memberAccountsCount=response.availalbeMemberSubscriptions,$scope.memberAccountsCount>0?($scope.getGroupList(),ngDialog.open({template:"/sp/resources/html/tools/hiring/hire-candidate.html",scope:$scope})):ngDialog.open({template:"/sp/resources/html/tools/hiring/hire-candidate-no-members.html",scope:$scope}))}):ngDialog.open({template:"/sp/resources/html/tools/hiring/hire-candidate-not-admin.html",scope:$scope}),$scope.hireCandidateArchive=function(){ajaxService.getAjaxResponse({url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:$scope.hireCandidateDetails.email,isHired:!0})}).then(function(response){if("true"===response.Success)ngDialog.close("ngdialog1"),$localStorage.set("gNotify","AddHire"),setTimeout(function(){window.location="/sp/tools/hiring/"},500);else{for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:$scope.errorMessage})}})},$scope.addMember=function(fData){this.addNewMember.submitted=!1,this.addNewMember.$valid?ajaxService.getAjaxResponse({url:"/sp/admin/member/addSingle",data:$.param(fData).replace(/%2C/g,",")}).then(function(response){if("true"===response.Success)ajaxService.getAjaxResponse({url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:$scope.hireCandidateDetails.email,isHired:!0})}).then(function(response){if("true"===response.Success)ngDialog.close("ngdialog1"),$localStorage.set("gNotify","AddHire"),setTimeout(function(){window.location="/sp/tools/hiring/"},500);else{ngDialog.close("ngdialog1");for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:$scope.errorMessage})}});else{ngDialog.close("ngdialog1");for(var key in response.error)$scope.errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:$scope.errorMessage})}}):this.addNewMember.submitted=!0}},$scope.getGroupList=function(){ajaxService.getAjaxResponse({url:"/sp/admin/group/all"}).then(function(response){if("true"===response.Success)$scope.groupDataSet=response.groupInfoList,$scope.groupDataSetBackup=response.groupInfoList,jQuery.each($scope.groupDataSet,function(i,j){$scope.dataWithFlags.push(jQuery.extend({},$scope.groupDataSet[i],{selectedFlag:!1,isGroupLead:!1}))}),$scope.flagCounter=$scope.dataWithFlags.length;else{$scope.serverError=!0;for(var key in response.error)$scope.errorMessage=response.error[key]}})},$scope.updateTagList=function(single,multiple){$scope.member.groupAssociationList=null,$scope.tagList=[],jQuery.each($scope.dataWithFlags,function(i,j){!0===$scope.dataWithFlags[i].selectedFlag&&!0===multiple?$scope.tagList.push($scope.dataWithFlags[i].name):!0===$scope.dataWithFlags[i].selectedFlag&&!0===single&&(!0===$scope.dataWithFlags[i].isGroupLead?$scope.tagList.push($scope.dataWithFlags[i].name+":true"):$scope.tagList.push($scope.dataWithFlags[i].name+":false")),$scope.member.groupAssociationList=$scope.tagList.join()})},$scope.updateGroupLeadStatus=function(i,email,single,multiple,j){var _a=jQuery("body").find("a#gl_"+j);void 0!==$scope.dataWithFlags[i]&&null===email&&(!0===$scope.dataWithFlags[i].isGroupLead?($scope.dataWithFlags[i].isGroupLead=!1,_a.removeClass("on")):($scope.dataWithFlags[i].isGroupLead=!0,_a.addClass("on")),$scope.updateTagList(single,multiple))},$scope.changeGroup=function(flag,single,multiple){"default"!==flag&&("createGroupCall_custom"===flag?($scope.params={p1:single,p2:multiple},ngDialog.open({template:"/sp/admin/group/createGroup",scope:$scope})):($scope.dataWithFlags[flag].selectedFlag=!0,$scope.flagCounter-=1,$scope.updateTagList(single,multiple),$scope.member.gList="default",$scope.dataWithFlags[flag].newOrder=$scope.newOrderFlag++,$scope.dataWithFlags[flag].originalIndex=flag))},$scope.removeGroup=function(flag,single,multiple){"default"!==flag&&($scope.dataWithFlags[flag].selectedFlag=!1,$scope.dataWithFlags[flag].isGroupLead=!1,$scope.flagCounter+=1,$scope.updateTagList(single,multiple))},$scope.saveNewGroup=function(groupname,groupLeadEmailId){if(""===groupname||void 0===groupname)return!1;var obj={name:groupname},options={url:"/sp/admin/group/create",data:$.param(obj)};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&(ngDialog.close("ngdialog1"),$scope.dataWithFlags.push({name:groupname,groupLead:null,numOfMembers:0,memberSummaryList:null,selectedFlag:!0,originalIndex:$scope.dataWithFlags.length,newOrder:$scope.newOrderFlag}),$scope.flagCounter-=1,$scope.member.gList="default",$scope.newOrderFlag+=1,$scope.updateTagList($scope.params.p1,$scope.params.p2))})},$scope.getPTPs=function(){ajaxService.getAjaxResponse({url:"/sp/hiring/spmatch/getAllPtps"}).then(function(response){if("true"===response.Success)$scope.emptyPTPlist=!1,$scope.spMatch.recentList=response.spMatchPTPs;else if(null!==response.error){$scope.emptyPTPlist=!0;var errorMessage="";for(var key in response.error)errorMessage=response.error[key];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:errorMessage}),$scope.emptyList=errorMessage}})},$scope.processSPMatch=function(traitId,roles){console.log(traitId),$localStorage.set("runPtP",{candidateId:$localStorage.get("candidateID"),ptpId:traitId.id,mode:0,roleName:roles}),window.location.href="/sp/spmatch/spMatchCandidate"},$scope.initCandidateProfile=function(){!0!==$scope.isCandidateArchived&&$scope.getProfileDetails()},$scope.initCandidateProfile()}angular.module("spApp").controller("candidateProfileDetails",candidateProfileDetails),candidateProfileDetails.$inject=["$scope","$element","$attrs","$http","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage"];