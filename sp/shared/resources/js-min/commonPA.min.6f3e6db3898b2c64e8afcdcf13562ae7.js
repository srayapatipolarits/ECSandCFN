angular.module("spApp",["ui.router","ngSanitize","ngTagsInput","checklist-model","ngDialog","angucomplete","ngAnimate","infinite-scroll","ui.tinymce","angularLazyImg","ui.mention"]).config(["lazyImgConfigProvider",function(lazyImgConfigProvider){lazyImgConfigProvider.setOptions({offset:500})}]);
angular.module("spApp").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$stateProvider.state("individual",{url:"/individual",templateUrl:"/sp/resources/html/register/register_step2_individual.html"}).state("business",{url:"/business",templateUrl:"/sp/resources/html/register/register_step2_business.html"}).state("hiring",{url:"/hiring",templateUrl:"subscribe-enterprise-page.html"}).state("login",{url:"/login",templateUrl:"login-page.html"}).state("signup_individual",{url:"/signup_individual",templateUrl:"/sp/resources/html/register/register.html"}).state("thankYou",{url:"/thankYou",templateUrl:"/sp/resources/html/register/thankyou.html"}).state("resetConfirmation",{url:"/resetConfirmation",templateUrl:"/sp/resources/html/reset/reset-confirm.html"}).state("reset",{url:"/reset",templateUrl:"/sp/resources/html/reset/reset.html"}).state("browser",{url:"/browser",templateUrl:"/sp/resources/html/browser/browser.html"}).state("group",{url:"/group",templateUrl:"/sp/resources/html/admin/member/groupHome.html"}).state("member",{url:"/member",templateUrl:"/sp/resources/html/admin/member/membersHome.html"}).state("profile",{url:"/profile",templateUrl:"/sp/resources/html/admin/member/profile.html"}).state("signup_business",{url:"/signup_business",templateUrl:"/sp/resources/html/register/register_business.html"}).state("single",{url:"/add/single",templateUrl:"/sp/resources/html/admin/member/add-single.html"}).state("member-multiple",{url:"/add/multiple",templateUrl:"/sp/resources/html/admin/member/add-multiple.html"}).state("dashboardModule",{url:"/groups",templateUrl:"/sp/resources/html/dashboard/dashboardListingView.html"})}]);
!function(){function footerController($scope,sharedProperties,ngDialog){function getAppropiateTemplate(){return-1!==vm.urlPattern.indexOf(vm.pathName)?null:vm.footerUrl.footerA}function footerLinks(type,e){e.preventDefault();var userLocale=sharedProperties.getUserLocale(),templateUrl="",winWidth=$(window).width();switch(vm.mobile=winWidth<768,vm.winHeight=$(window).height()+"px",type){case"privacy":"en-US"===userLocale?templateUrl="/sp/resources/html/footer/privacy.html":"es-LA"===userLocale&&(templateUrl="/sp/resources/html/footer/privacy_es.html");break;case"agreement":"en-US"===userLocale?templateUrl="/sp/resources/html/footer/agreement.html":"es-LA"===userLocale&&(templateUrl="/sp/resources/html/footer/agreement_es.html");break;case"cookies":templateUrl="/sp/resources/html/footer/cookies.html"}ngDialog.open({template:templateUrl,scope:$scope,className:vm.mobile?"ngdialog-lnd-theme":"ngdialog-theme-default"})}var vm=this;vm.urlPattern=["/sp/dashboard","/sp/dashboard/profile","/sp/dashboard/message"],vm.footerUrl={footerA:"/sp/resources/html/common/footer-a.html",footerB:"/sp/resources/html/common/footer-b.html"},vm.pathName=window.location.pathname,vm.getAppropiateTemplate=getAppropiateTemplate,vm.footerLinks=footerLinks,jQuery("body").on("click","a.footer_agreement",function(e){e.preventDefault(),ngDialog.open({template:"/sp/resources/html/footer/agreement.html"})}),jQuery("body").on("click","a.footer_privacy",function(e){e.preventDefault(),ngDialog.open({template:"/sp/resources/html/footer/privacy.html"})}),jQuery("body").on("click","a.footer_cookies",function(e){e.preventDefault(),ngDialog.open({template:"/sp/resources/html/footer/cookies.html"})})}footerController.$inject=["$scope","sharedProperties","ngDialog"],angular.module("spApp").controller("footerController",footerController)}();
jQuery(function(){function PointerEventsPolyfill(t){if(this.options={selector:"*",mouseEvents:["click","dblclick","mousedown","mouseup"],usePolyfillIf:function(){if("Microsoft Internet Explorer"===navigator.appName){if(null!==navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)){if(11>parseFloat(RegExp.$1))return!0}}return!1}},t){var e=this;$.each(t,function(t,n){e.options[t]=n})}this.options.usePolyfillIf()&&this.register_mouse_events()}PointerEventsPolyfill.initialize=function(t){return null===PointerEventsPolyfill.singleton&&(PointerEventsPolyfill.singleton=new PointerEventsPolyfill(t)),PointerEventsPolyfill.singleton},PointerEventsPolyfill.prototype.register_mouse_events=function(){$(document).on(this.options.mouseEvents.join(" "),this.options.selector,function(t){if("none"===$(this).css("pointer-events")){var e=$(this).css("display");$(this).css("display","none");var n=document.elementFromPoint(t.clientX,t.clientY);return e?$(this).css("display",e):$(this).css("display",""),t.target=n,$(n).trigger(t),!1}return!0})},(jQuery("html").hasClass("ie9")||jQuery("html").hasClass("ie10"))&&setTimeout(function(){PointerEventsPolyfill.initialize({})},500)});
Array.prototype.filter||(Array.prototype.filter=function(fun){if(void 0===this||null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var res=[],thisArg=arguments.length>=2?arguments[1]:void 0,i=0;i<len;i++)if(i in t){var val=t[i];fun.call(thisArg,val,i,t)&&res.push(val)}return res}),Array.prototype.move=function(old_index,new_index){if(new_index>=this.length)for(var k=new_index-this.length;1+k--;)this.push(void 0);return this.splice(new_index,0,this.splice(old_index,1)[0]),this},Array.prototype.unique=function(){for(var a=this.concat(),i=0;i<a.length;++i)for(var j=i+1;j<a.length;++j)a[i]===a[j]&&a.splice(j--,1);return a},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(predicate){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),len=o.length>>>0;if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var thisArg=arguments[1],k=0;k<len;){var kValue=o[k];if(predicate.call(thisArg,kValue,k,o))return kValue;k++}}});
function scheduleController(ajaxService,sharedProperties,ngDialog,$localStorage,$rootScope,$timeout,$q,basicService){function getMemberList(){var deferred=$q.defer();return promise||(basicService.getAllValidMember().then(function(response){if(self.emailMemberList=response,null!==$localStorage.get("loggegdInProfile"))for(var i=0;i<self.emailMemberList.length;i++)if(self.emailMemberList[i].email===$localStorage.get("loggegdInProfile").member.email){self.emailMemberList.splice(i,1);break}}),promise=deferred.promise)}function loadTags(query){var deferred=$q.defer(),result=self.emailMemberList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(query.toLowerCase())||-1!==e.email.toLowerCase().indexOf(query.toLowerCase())});return deferred.resolve(result),deferred.promise}function meetingAdded(tag){void 0!==tag.email&&(self.schedule.meetingTag.push(tag.email),self.schedule.meetingRequired=!1)}function meetingRemoved(tag){self.schedule.meetingTag.splice(self.schedule.meetingTag.indexOf(tag.email),1)}function schedulePop(){self.schedule=angular.copy(self.originalSch),self.schMeeting.actionTitle=null,self.scheduleObj=sharedProperties.getScheduleData(),self.winHeight=$(window).height()+100+"px",!self.emailMemberList.length&&self.getMemberList(),self.schMeeting.submitted=!1,self.schMeeting.actionTitle=self.scheduleObj.title,self.scheduleUID=self.scheduleObj.uid,$timeout(function(){prepareDatePicker()},200)}function scheduleMeeting(){self.schMeeting.submitted=!1,self.schedule.meetingTag.length||(self.schedule.meetingRequired=!0),self.schMeetingForm.$valid&&self.schedule.meetingTag.length?ajaxService.getAjaxResponse({url:self.serviceApis.schedule+"?subject="+self.schedule.subject+"&agenda="+self.schedule.agenda+"&location="+self.schedule.location+"&actionPlanId="+self.scheduleObj.actionPlanId+"&to="+self.schedule.meetingTag.toString()+"&startDate="+new Date(self.schedule.fromDate).toISOString()+"&endDate="+new Date(self.schedule.endDate).toISOString()+"&memberName="+$rootScope.noSelf+"&uid="+self.scheduleUID,method:"get"}).then(function(response){"true"===response.Success?(ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("admin.organization.schduled")),sharedProperties.fireAnalyticsEvent("OrgPlans | Schedule a meeting","ActionPlan - "+self.scheduleObj.actionPlanName)):null!==response.error&&(ngDialog.close(),sharedProperties.ajaxError(response.error))}):self.schMeeting.submitted=!0}var promise,self=this;self.serviceApis={scheduleDialog:"/sp/schedulePop",schedule:"/sp/actionPlan/sendCalInvite"},self.schMeeting={},self.schMeeting.submitted=!1,self.schedule={subject:"",location:"",agenda:"",startDate:"",endDate:"",meetingTag:[],meetingRequired:!1,invalidTime:!1},self.schedule.fromDate=null,self.schedule.endDate=null,self.originalSch=angular.copy(self.schedule),self.scheduleUID="",self.scheduleObj={},self.emailMemberList=[],self.winWidth=$(window).width(),self.winHeight=$(window).height()+100+"px",self.getMemberList=getMemberList,self.schedulePop=schedulePop,self.meetingRemoved=meetingRemoved,self.meetingAdded=meetingAdded,self.loadTags=loadTags,self.scheduleMeeting=scheduleMeeting;var prepareDatePicker=function(){moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker")),self.schedule.fromDate=moment().format("MM/DD/YYYY"),self.schedule.endDate=moment().format("MM/DD/YYYY"),$('input[name="dateRange"]').daterangepicker({showDropdowns:!1,minDate:moment(),startDate:moment().add(1,"h").toDate(),endDate:moment().add(2,"h").toDate(),locale:{format:"MMM DD, YYYY HH:mm"},alwaysShowCalendars:!0,timePicker:!0,drops:"down",opens:"right",timePicker24Hour:!0},function(start,end,label){self.schedule.fromDate=moment.utc(start.format("MM/DD/YYYY HH:mm"),"MM/DD/YYYY HH:mm").format(),self.schedule.endDate=moment.utc(end.format("MM/DD/YYYY HH:mm"),"MM/DD/YYYY HH:mm").format()})}}angular.module("spApp").controller("scheduleController",scheduleController),scheduleController.$inject=["ajaxService","sharedProperties","ngDialog","$localStorage","$rootScope","$timeout","$q","basicService"];
angular.module("spApp").run(["$rootScope","$location","ajaxService","sharedProperties","ngDialog","$localStorage","$timeout","localeLang","spConfig",function($rootScope,$location,ajaxService,sharedProperties,ngDialog,$localStorage,$timeout,localeLang,spConfig){"use strict";function hideElement(){loaderObject.removeClass(loaderClass)}$rootScope.Internationalization=[],$rootScope.inviteReady=!1,$rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,$rootScope.fileStackAPIKey="ArRPmifJMQ56HiIYoIf4zz",$rootScope.defaultImage=spConfig.image.default,$rootScope.fireFox=!1,$rootScope.emailRegex=/^[A-Za-z0-9._-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i;var loaderObject=$("#loader").find(".spinner"),loaderClass="selected";if(/firefox/i.test(navigator.userAgent)){var enURL=localeLang.setGetParameter("lang","en_US",!0),esURL=localeLang.setGetParameter("lang","es_LA",!0);$rootScope.enLangURL=localeLang.parameterLogic("clearCache",!0,enURL),$rootScope.esLangURL=localeLang.parameterLogic("clearCache",!0,esURL),sharedProperties.getParam("clearCache")&&($localStorage.flush(),localeLang.override(sharedProperties.getParam("lang"),!1)),$rootScope.fireFox=!0}$rootScope.$watch(function(){return $location.url()},function(a){var newEmail=sharedProperties.getParam("email",a);if($rootScope.noSelf=null===newEmail?"":newEmail,$localStorage.isAvailable()&&null!=$localStorage.get("interNationalization"))$rootScope.Internationalization=$localStorage.get("interNationalization"),$rootScope.inviteReady=!0;else{var options={url:"/sp/messages",data:$.param({url:window.location.pathname,localStorage:$localStorage.isAvailable()})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&$localStorage.set("interNationalization",response,function(){$rootScope.Internationalization=response,$rootScope.inviteReady=!0})})}},!0),$rootScope.pullInterNationalization=function(key,single,mem){return void 0!==single&&"custom"===single?mem+"."+key in $rootScope.Internationalization?$rootScope.Internationalization[mem+"."+key]:key:key in $rootScope.Internationalization?$rootScope.Internationalization[key]:key},$rootScope.callSwitchChange=function(param){sharedProperties.setSwitch(param)},$rootScope.notificationEmailPoP=function(args,type,defaults,params){angular.isArray(args)||(args=args.split(",")),"ASSESSMENT_PENDING"===type||"ASSESSMENT_PROGRESS"===type?type="AssessmentPendingReminder":"PROFILE_INCOMPLETE"===type?(type="ProfileIncompleteReminder",defaults="ProfileIncomplete"):"HiringCandidateReminder"===type?type="HiringCandidateReminder":"HiringCandidateProfileAccess"===type&&(type="HiringCandidateProfileAccess"),$rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,sharedProperties.notification(args,type,defaults,params)},$rootScope.notificatationListName=function(notifyMessage,extra){var headerName;if($rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,$rootScope.selectedNotification=notifyMessage,"ProfileIncomplete"!==notifyMessage){if("learningProgram"===notifyMessage){var comment2=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.text").replace("[Name]",extra.lpName);$("#commentBlock").val(comment2),headerName=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.brandCopy").replace("[Name]",extra.lpName)}else{var comment1=$("<div/>").html($.parseHTML($rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.text").replace("$companyName",$localStorage.get("loggegdInProfile").company.name)));$("#commentBlock").val($(comment1).html()),headerName=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.brandCopy")}$("#headerName").val(headerName);var ctaLabel=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.ctaLabel");ctaLabel==="admin.group."+notifyMessage+".notification.ctaLabel"?$("#ctaLabel").remove():$("#ctaLabel").val(ctaLabel);var ctaUrl=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.ctaUrl");ctaUrl==="admin.group."+notifyMessage+".notification.ctaUrl"?$("#ctaUrl").remove():$("#ctaUrl").val(ctaUrl)}var subBlock="learningProgram"===notifyMessage?$.parseHTML($rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.nosubject").replace("[Name]",extra.lpName))[0]:$.parseHTML($rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.nosubject"))[0],subBlock1=$(subBlock).text();subBlock==="admin.group."+notifyMessage+".notification.nosubject"?$("#subBlock").remove():$("#subBlock").val(subBlock1)},window.addEventListener("popstate",function(e){$("body").hasClass("ngdialog-open")&&ngDialog.close()}),$rootScope.$on("ngDialog.opened",function(e){history.pushState({action:"modal"},"",window.location.href),$("body .sticky-bottom").hide()}),$rootScope.$on("ngDialog.closed",function(e){$("body .sticky-bottom").show()}),$rootScope.$on("httpLoaderStart",function(e,loader){loaderObject=void 0!==loader?loader.obj:$("#loader").find(".spinner"),loaderClass=void 0!==loader?"loading-bar":loaderClass,loaderObject.addClass(loaderClass)}),$rootScope.$on("httpLoaderEnd",hideElement),$rootScope.setBoxSizes=function(c1,c2,h){$(c1).each(function(){var boxes=$(this).find(c2),maxHeight=0;boxes.attr("style",""),maxHeight=Math.max.apply(Math,boxes.map(function(){return $(this).outerHeight()}).get()),"full"===h?boxes.attr("style","").css({height:maxHeight}):boxes.attr("style","").css({"min-height":maxHeight})})},$rootScope.sendNotification=function(form,list,type,mode){function extractEmails(e){var _list=e,emailList=[],counter=0;if($.each(_list,function(i){emailList.push(_list[i].email),counter++}),counter===_list.length)return emailList.toString()}if($rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,void 0!==mode&&($("#subBlock").val($rootScope.subBlockNotification),$("#commentBlock").val($rootScope.commentNotification)),"default"===$rootScope.selectedNotification)return $rootScope.formSendNotificationError=!0,!0;if($("#commentBlock").is(":visible")&&""===$("#commentBlock").val())return $rootScope.messageAreaEmpty=!0,!0;if(form.$valid){var notifyForm=$(".getNotificationForm").serialize(),mList=extractEmails(list),param="";param=angular.isObject($rootScope.extra)?notifyForm+"&type="+type+"&memberList="+mList+"&"+$rootScope.extra.key+"="+$rootScope.extra.id:notifyForm+"&type="+type+"&memberList="+mList;var options={url:"/sp/notifications/sendNotificationWithParams",data:param};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?(ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.notificationSent")),"FeedbackReminder"===type&&sharedProperties.fireAnalyticsEvent("Prism Lens | Send Feedback Reminder","N/A"),"ProfileIncompleteReminder"===type&&"yes"===mode&&sharedProperties.fireAnalyticsEvent("Manage Account | Send Reminder","Profile Incomplete"),"GenericMessage"===type&&void 0===mode&&void 0!==list&&1===list.length&&sharedProperties.fireAnalyticsEvent("Manage Account | Send Message to single Member","N/A"),"GenericMessage"===type&&void 0===mode&&void 0!==list&&list.length>1&&sharedProperties.fireAnalyticsEvent("Manage Account | Send Message to entire group members","N/A")):null!==response.error&&(ngDialog.close("ngdialog1"),sharedProperties.ajaxError(response.error))})}else $rootScope.formSendNotificationError=!0,$rootScope.messageAreaEmpty=!0},Array.prototype.swapItems=function(a,b){return this[a]=this.splice(b,1,this[a])[0],this},$rootScope.handleStickyTabs=function(type,isFadeInTutorial){$rootScope.$broadcast("stickyOpen"),$(".sticky-tutorial").hide(),void 0!==isFadeInTutorial&&($rootScope.fadeInTutorial=!0),type===$rootScope.selectedNotesTab&&$rootScope.showNotesPanel?($rootScope.selectedNotesTab="",$rootScope.showNotesPanel=!1,$("#notesModal").modal("hide"),$rootScope.$broadcast("modalClosed"),$("body").css("overflow-y","visible"),sharedProperties.is_touch_supported()&&sharedProperties.is_iOS_device()&&($("body").css("position",""),$("body").animate({scrollTop:$("body").scrollTop()},0))):(sharedProperties.setSelectedNotesTab(type),sharedProperties.fireAnalyticsEvent("Sticky Footer | Open Module",type))},$rootScope.displayNotifications=function(){$rootScope.showNotifications=!0},$rootScope.setTutorialObject=function(){$rootScope.$broadcast("stickyOpen"),$(".sticky-tutorial").hide(),$rootScope.showNotesPanel&&($rootScope.showNotesPanel=!1,$("#notesModal").modal("hide"),$rootScope.selectedNotesTab="",$("body").css("overflow-y","visible"),sharedProperties.is_touch_supported()&&sharedProperties.is_iOS_device()&&($("body").css("position",""),$("body").animate({scrollTop:$("body").scrollTop()},0))),null===$localStorage.get("tutorialObj")?ajaxService.getAjaxResponse({url:"/sp/tutorial/get"}).then(function(response){if("true"===response.Success&&void 0!==response.tutorial){$rootScope.tutorialAvailable=!0;var completedPercent=Math.round(parseInt(response.tutorial.completedCount)/parseInt(response.tutorial.actionCount)*100);response.tutorial.completed=completedPercent,$localStorage.set("tutorialObj",response.tutorial),$rootScope.tutorialObj=$localStorage.get("tutorialObj")}else $rootScope.tutorialAvailable=!1}):($rootScope.tutorialObj=$localStorage.get("tutorialObj"),$rootScope.tutorialAvailable=!0)},$rootScope.setContentReferenceForModule=function(obj,type){var tempObj={data:obj,type:type};sharedProperties.setContentReference(tempObj),tempObj=null},$rootScope.redirectReferenceUrl=function(url){null!==url&&(sharedProperties.fireAnalyticsEvent("Notes Module | Reference URL Click",url),window.location.href=url)},$rootScope.handleFileStack=function(flag,supportFlag){if(flag){$("body .sticky-bottom").hide(),filepicker.setKey($rootScope.fileStackAPIKey);var serviceList=["COMPUTER","BOX","DROPBOX","GOOGLE_DRIVE","SKYDRIVE"];supportFlag&&(serviceList=["COMPUTER"]),filepicker.pick({mimetypes:"*/*",container:"modal",services:serviceList,maxSize:10485760,language:sharedProperties.provideVendorSpecificLocale("fileStack")},function(Blob){$("body .sticky-bottom").show();var fileStackObj={fileData:Blob};$rootScope.$broadcast("fileStackSuccessNotes",fileStackObj)},function(FPError){$("body .sticky-bottom").show(),$("body").hasClass("ngdialog-open")&&$(".ngdialog").show()})}},$rootScope.openProfileModal=function(){ngDialog.open({template:spConfig.talentAnalytics.memberService.dialog.openProfileModal})},$rootScope.viewTraitDesc=function(prismSection,id,trait){var aliasPersonalities=["Examiner","Designer","Promoter","Encourager","Innovator","Actuary","Motivator","Supporter","Refiner"],mappedPersonalities={Examiner:"Influencer",Designer:"Pioneer",Promoter:"Connector",Encourager:"Peacemaker",Innovator:"Strategist",Actuary:"Scientist",Motivator:"Catalyst",Supporter:"Ally",Refiner:"Architect"},_trait=-1!==aliasPersonalities.indexOf(trait.trim())?mappedPersonalities[trait.trim()]:trait.trim();$rootScope.traitDesc={section:prismSection,traitName:trait.trim(),trait:_trait.replace(" & ","").replace("_N_",""),id:id},ngDialog.open({template:spConfig.talentAnalytics.idealPortrait.dialog.traitDesc,scope:$rootScope})},jQuery(function($){var gdParam=window.location.hash.substr(2);"/sp/dashboard"!==window.location.pathname&&"/sp/signin"!==window.location.pathname||""===gdParam||$localStorage.set("gdParam",gdParam),null!==sharedProperties.getParam("support_status")&&"Success"===sharedProperties.getParam("support_status")&&(sharedProperties.growlMessage($rootScope.pullInterNationalization("support.alertMsg")),sharedProperties.fireAnalyticsEvent("Sticky Footer | Submit Support Request","N/A"))})}]);
function videoController($rootScope,ngDialog,sharedProperties,$sce,$timeout,$localStorage){function videoCall(){var videoSrc=sharedProperties.getVideoUrl();if(parseYouTube(videoSrc)){vm.videoType="youtube";var youtubeId=parseYouTube(videoSrc);vm.videoUrl=$sce.trustAsResourceUrl("https://www.youtube.com/embed/"+youtubeId+"?autoplay=1&rel=0&autohide=1&showinfo=0&wmode=transparent&modestbranding=1&iv_load_policy=3&vq=large")}else if(parseVimeo(videoSrc)){vm.videoType="vimeo";var vimeoId=parseVimeo(videoSrc),userLocale=sharedProperties.provideVendorSpecificLocale("vimeo"),options={id:vimeoId,width:630,height:354};$timeout(function(){var vimeoPlayer=new Vimeo.Player("vimeoPlayer",options);$(window).width()>1024&&vimeoPlayer.play(),vimeoPlayer.enableTextTrack(userLocale).then(function(track){track.language=userLocale,track.kind="captions"}),vimeoPlayer.on("ended",function(data){sharedProperties.fireAnalyticsEvent("Video | Watched Vimeo till the End",vimeoId)})},500)}else vm.videoType="html5",vm.videoUrl=$sce.trustAsResourceUrl(videoSrc);sharedProperties.fireAnalyticsEvent("Video | Viewed",vm.videoType)}var vm=this;vm.videoCall=videoCall,vm.videoType="",vm.videoUrl="";var parseYouTube=function(url){var p=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!url.match(p)&&RegExp.$1},parseVimeo=function(url){var m=url.match(/^.+vimeo.com\/(.*\/)?([^#\?]*)/);return m?m[2]||m[1]:null}}angular.module("spApp").controller("videoController",videoController),videoController.$inject=["$rootScope","ngDialog","sharedProperties","$sce","$timeout","$localStorage"];
angular.module("spApp").constant("assessmentConfig",{services:{default:{start:"/sp/assessment/start",next:"/sp/assessment/process",previous:"/sp/assessment/previous",redirect:"/sp/assessment/completed"},prismLens:{start:"/sp/assessment360/start/",next:"/sp/assessment360/process/",previous:"/sp/assessment360/previous/",redirect:"/sp/external/thankyou"},candidatesEmployees:{start:"/sp/assessment/start",next:"/sp/assessment/process",previous:"/sp/assessment/previous",redirect:"/sp/thankYou"}},templates:{rank:"/sp/resources/html/assessment/rank.html",whoRu:"/sp/resources/html/assessment/who-ru.html",choose:"/sp/resources/html/assessment/choose.html",mostLeast:"/sp/resources/html/assessment/most-least.html"}}),angular.module("spApp").constant("spConfig",{image:{candidateDefault:"/resources/images/candidateDefault.png",default:"/resources/images/default.png"},nav:{htmlSrc:"/sp/resources/html/common/nav-module.html",fetchNavApi:"/sp/navigation/get",checkErti:"/sp/hiring/companyHasErti"},talentAnalytics:{home:"/sp",images:{relationShip:"/resources/images/bg-4.png",spectrum:"/resources/images/bg-5.jpg",idealPortrait:"/resources/images/bg-5.jpg"},commonService:{sendReminders:"/sp/notifications/sendNotificationWithParams"},groupService:{allGroups:"/sp/hiring/group/getAll",groupDetail:"/sp/hiring/group/get",createGroup:"/sp/hiring/group/create",renameGroup:"/sp/hiring/group/update",deleteGroup:"/sp/hiring/group/delete",getAllMembers:"/sp/hiring/getAllMembers",addUser:"/sp/hiring/group/addUsers",removeUsers:"/sp/hiring/group/removeUsers",getGroupCompare:"/sp/hiring/group/getPortraits",dialog:{deleteGroup:"/sp/resources/html/people-analytics/dialog/groups-delete.html",addMemberModalGroup:"/sp/resources/html/people-analytics/dialog/groups-addMembers.html",removeSingle:"/sp/resources/html/people-analytics/dialog/groups-removeSingle.html",removeMulti:"/sp/resources/html/people-analytics/dialog/groups-removeMultiple.html",deleteSingle:"/sp/resources/html/people-analytics/dialog/members-deleteSingle.html",teamAdvisor:"/sp/resources/html/common/team-advisor.html"}},memberService:{getAll:"/sp/hiring/getAll",add:"/sp/hiring/add",subscriptions:"/sp/hiring/getAvailableSubscriptions",rolesAndTag:"/sp/hiring/getRolesAndTags",isMemberPresent:"/sp/hiring/checkCandidate",delete:"/sp/hiring/delete",getProfileInfo:"/sp/hiring/getProfileDetails",getUserGroups:"/sp/hiring/group/userGroups",archiveUser:"/sp/hiring/archiveUser",addNote:"/sp/hiring/addComment",updateNote:"/sp/hiring/updateComment",removeNote:"/sp/hiring/removeComment",updateProfile:"/sp/hiring/updateProfile",hireCandidate:"/sp/hiring/hireCandidate",profileShareId:"/sp/hiring/getProfileShareId",userShareList:"/sp/hiring/getSharePortraitList",getAllPrismLensRequests:"/sp/hiring/lens/getAllRequests",getPrismLensDetails:"/sp/hiring/lens/get",submitPrismLensFeedbackRequest:"/sp/hiring/lens/create",updateLensProfile:"/sp/hiring/lens/update",deletePrismLensRequest:"/sp/hiring/lens/delete",shareUserProfile:"/sp/hiring/getSharePortraitDetails",deleteShareUser:"/sp/hiring/deleteSharePortrait",archiveProfileDetails:"/sp/hiring/getArchivedUserProfileDetails",referenceSendRequest:"/sp/hiring/lens/sendRequest",addToErti:"/sp/hiring/addToErti",updateUserTags:"/sp/hiring/updateTags",viewLensReportExt:"/sp/hiring/ext/portrait/lens/get",getAllMembers:"/sp/hiring/getAllMembers",addUpdateUrl:"/sp/hiring/addUpdateUrl",removeUrl:"/sp/hiring/removeUrl",getUserRoles:"/sp/hiring/getUserRoles",dialog:{referenceCheck:"/sp/resources/html/people-analytics/dialog/reference-check.html",deleteEmployeeSingle:"/sp/resources/html/people-analytics/dialog/employee-deleteSingle.html",deleteEmployeeMultiple:"/sp/resources/html/people-analytics/dialog/employee-deleteMultiple.html",archiveEmployeeSingle:"/sp/resources/html/people-analytics/dialog/employee-archiveSingle.html",archiveEmployeeMultiple:"/sp/resources/html/people-analytics/dialog/employee-archiveMultiple.html",addRole:"/sp/resources/html/people-analytics/dialog/addRole.html",removeRole:"/sp/resources/html/people-analytics/dialog/removeRole.html",addNote:"/sp/resources/html/people-analytics/dialog/addNote.html",removeUserFromGroup:"/sp/resources/html/people-analytics/dialog/employee-groupRemove.html",hire:"/sp/resources/html/people-analytics/dialog/hire.html",noMember:"/sp/resources/html/people-analytics/dialog/no-members.html",deleteNote:"/sp/resources/html/people-analytics/dialog/delete-note.html",shareUserId:"/sp/resources/html/people-analytics/dialog/share-profile-id.html",shareProfileId:"/sp/resources/html/people-analytics/dialog/share-profile.html",prismLensDelete:"/sp/resources/html/people-analytics/dialog/delete-feedback.html",sendRequestReference:"/sp/resources/html/people-analytics/dialog/invite-reference.html",removePortraitShare:"/sp/resources/html/people-analytics/dialog/removePortraitShare.html",addToErti:"/sp/resources/html/people-analytics/dialog/addToErti.html",updateRefListDialog:"/sp/resources/html/people-analytics/dialog/reference-lens-update.html",requestLens:"/sp/resources/html/people-analytics/dialog/request-lens.html",viewLensReportExt:"/sp/resources/html/people-analytics/dialog/lens-extDetail.html",addRolePortrait:"/sp/resources/html/people-analytics/dialog/addRole-Portrait.html",openProfileModal:"/sp/resources/html/people-analytics/dialog/profile-modal.html",accountsRequest:"/sp/resources/html/people-analytics/dialog/accounts-request.html"}},roles:{getAll:"/sp/hiring/role/getAll",get:"/sp/hiring/role/get",create:"/sp/hiring/role/create",update:"/sp/hiring/role/update",delete:"/sp/hiring/role/delete",assignPortrait:"/sp/hiring/role/assignPortrait",removePortrait:"/sp/hiring/role/removePortrait",add:"/sp/hiring/addRole",remove:"/sp/hiring/removeRole",getUserRolesAndMatch:"/sp/hiring/role/getUserRolesAndMatch",getRolesWithoutPortrait:"/sp/hiring/role/getRolesWithoutPortrait",addUserToRole:"/sp/hiring/role/addToRole",dialog:{delete:"/sp/resources/html/people-analytics/dialog/role-delete.html",removeRole:"/sp/resources/html/people-analytics/dialog/role-remove.html",createRole:"/sp/resources/html/people-analytics/dialog/create-new-role.html",assignPortrait:"/sp/resources/html/people-analytics/dialog/assign-portrait.html",removePortrait:"/sp/resources/html/people-analytics/dialog/remove-portrait.html",rolesCompareOverlay:"/sp/resources/html/people-analytics/roles-compare-overlay.html",addMemberModalGroup:"/sp/resources/html/people-analytics/dialog/roles-addMembers.html"}},archiveService:{getAll:"/sp/hiring/archiveGetAll",delete:"/sp/hiring/deleteArchiveUser",putBack:"/sp/hiring/archivePutBack",dialog:{putBack:"/sp/resources/html/people-analytics/dialog/putBack.html"}},settings:{getCompanyInfo:"/sp/admin/account/getCompanyDetails",getAccountInfo:"/sp/admin/account/businessAccountDetails",updateCompanyInfo:"/sp/admin/account/updateCompany",restrictRA:"/sp/admin/account/restrictRelationshipAdvisor",blockMembers:"/sp/admin/account/blockAllMembers",removeAdmin:"/sp/hiring/removeAdministrator",getAdminMembers:"/sp/hiring/getMembersForAdmin",addAdmin:"/sp/hiring/addAdministrator",transactions:"/sp/admin/account/paymentHistory",deactivateRenewal:"/sp/admin/account/cancel",activateRenewal:"/sp/admin/account/reActivate",enableShare:"/sp/admin/account/enableSharePortrait",getAdminSubscriptions:"/sp/hiring/getAvailableAdminSubscriptions"},idealPortrait:{homePage:"/sp/pa/ideal-portrait#/home",getAll:"/sp/hiring/match/getAll",get:"/sp/hiring/match/get",matchPortrait:"/sp/hiring/match/matchPortrait",dialog:{rolePreview:"/sp/resources/html/people-analytics/dialog/role-info.html",portraitsList:"/sp/resources/html/people-analytics/dialog/portraits-modal.html",requestNewPortrait:"/sp/resources/html/people-analytics/dialog/request-portrait.html",removeRole:"/sp/resources/html/people-analytics/dialog/remove-role-portrait.html",traitDesc:"/sp/resources/html/people-analytics/dialog/trait-descriptions.html"}},dashboard:{getEmployeeCandidateStats:"/sp/hiring/dashboard/getEmployeeCandidateStats",getDashboardSettingsDetail:"/sp/hiring/dashboard/getDashboardSettingsDetail",visitedDashboard:"/sp/hiring/dashboard/visitedDashboard",knowledge:"/sp/trainingLibrary/getArticleDetail/",search:"/sp/resources/html/people-analytics/view/dashboard-search.html",dialog:{knowledge:"/sp/resources/html/people-analytics/dialog/knowledge.html"}}},admin:{talentAnalytics:{idealPortrait:{getAll:"/sp/hiring/admin/match/getAll",get:"/sp/hiring/admin/match/get",create:"/sp/hiring/admin/match/create",update:"/sp/hiring/admin/match/update",delete:"/sp/hiring/admin/match/delete",getCompanies:"/sp/hiring/admin/match/getCompanies",assignPortrait:"/sp/hiring/admin/match/assignPortrait",removePortrait:"/sp/hiring/admin/match/removePortrait",uploadAttachment:"/sp/hiring/admin/match/addDocumentUrl",removeAttachment:"/sp/hiring/admin/match/removeDocumentUrl",dialog:{preview:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/preview.html",delete:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-delete.html",add:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-add.html",addConfirm:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-addConfirm.html",remove:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-remove.html",removeDoc:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-remove-file.html",setWeight:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/setWeight.html"}},dashboard:{getAll:"/sp/sysAdmin/hiring/dashboard/getAll",get:"/sp/sysAdmin/hiring/dashboard/get",create:"/sp/sysAdmin/hiring/dashboard/create",update:"/sp/sysAdmin/hiring/dashboard/update",getAllArticles:"/sp/sysAdmin/learning/getAllArticles",dialog:{selectArticle:"/sp/resources/html/sysAdmin/peopleAnalytics/dashboard/dialog/select-article.html"}}}}}),angular.module("spApp").value("spValue",{Company:"Surepeople",getAllGroups:[],getAllMembersForGroups:[],getAllEmployees:[],getAllCandidates:[],getAllRoles:[],getAllArchive:[],getAllAdminIdealPortrait:[],getAllIdealPortrait:[],getCompaniesIdealPortrait:[],getAllMembers:[]});
function fixContainer(){return{restrict:"A",link:function($scope,$element,$attrs){$scope.innerHeightSet=function(){jQuery("#content").css({"min-height":window.innerHeight-(jQuery("#header").outerHeight()+jQuery("#footer").outerHeight())}),$(".footer-container").removeClass("visibilitynone")},jQuery(window).resize(function(){$scope.innerHeightSet()}),$scope.innerHeightSet()}}}angular.module("spApp").directive("fixContainer",fixContainer);
function clickOut($http){return{restrict:"A",link:function($scope,$element,$attrs){jQuery("body").on("click",function(e){jQuery(e.target).hasClass("clickOut")||($scope.dropUp=!1,$scope.$apply())})}}}angular.module("spApp").directive("clickOut",clickOut),clickOut.$inject=["$http"];
function companyPicUploader($http,ajaxService,$rootScope,$timeout,ngDialog,$localStorage,sharedProperties){return{restrict:"A",link:function($scope,$element,$attrs){jQuery($element[0]).find(".select-image-btn").on("click",function(e){if(e.preventDefault(),jQuery($element[0]).find("form.pic-uploader").find("input:file").click(),$scope.enableBtns=!0,$scope.$apply(),jQuery("html").hasClass("ie10")&&$scope.prevImage===jQuery($element[0]).find(".image-editor").cropit("imageSrc")&&!0===$scope.resetFlag){jQuery($element[0]).find(".cropit-image-background").removeAttr("src"),jQuery($element[0]).find(".cropit-image-preview").removeClass("cropit-image-loaded");var img=jQuery($element[0]).find(".image-editor").cropit("imageSrc");jQuery($element[0]).find(".cropit-image-background").attr("src",img),jQuery($element[0]).find(".cropit-image-background-container").css({"background-image":'url("'+img+'")'}),jQuery($element[0]).find(".cropit-image-preview").css({"background-image":'url("'+img+'")'}).addClass("cropit-image-loaded"),$scope.prevImage="",$scope.resetFlag=!1}}),setTimeout(function(){jQuery($element[0]).find(".image-editor").cropit({imageBackground:!0,previewSize:{width:200,height:100},exportZoom:1,originalSize:!1})},500),jQuery($element[0]).find(".reset-image").on("click",function(e){if(e.preventDefault(),!0===$scope.enableBtns){$scope.enableBtns=!1,$scope.$apply();jQuery($element[0]).find("form.pic-uploader").find("input:file").val(""),jQuery($element[0]).find(".avatar-company-upload div").each(function(){jQuery(this).css("background-image","none")}),$scope.resetFlag=!0,$scope.prevImage=jQuery($element[0]).find(".image-editor").cropit("imageSrc"),jQuery($element[0]).find(".cropit-image-background").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}}),jQuery($element[0]).find(".saveInHolder").on("click",function(e){e.preventDefault(),!0===$scope.enableBtns&&null!==$scope.imageData&&($scope.enableBtns=!1,$(document).trigger("imageSaved",[{imageData:$scope.imageData}]),ngDialog.close("ngdialog1"))}),jQuery($element[0]).find(".process-pic").on("click",function(e){if(e.preventDefault(),!("none"!==jQuery($element[0]).find(".cropit-image-preview").css("background-image")))return $scope.enableBtns=!1,!1;if(!0===$scope.enableBtns){$scope.enableBtns=!1,$scope.$apply(),$scope.imageData=jQuery($element[0]).find(".image-editor").cropit("export",{type:"image/jpeg",quality:.99,exportZoom:1,originalSize:!1});var options={url:"/sp/media/company/uploadImage",data:$.param({image:$scope.imageData,companyId:$scope.themeCompanyId})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?(ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("mediaManager.growlMessage.success")),$timeout(function(){$(document).trigger("imageSaved",[{imageData:$scope.imageData}]),ngDialog.close("ngdialog1")},500)):sharedProperties.growlMessage($rootScope.pullInterNationalization("mediaManager.growlMessage.fail"),"<strong> Alert </strong>","glyphicon glyphicon-ban-circle")})}}),jQuery($element[0]).find(".select-company-logo").on("click",function(e){e.preventDefault(),jQuery($element[0]).find("form.company-logo-uploader").find("input:file").click(),$scope.enableBtns=!0,$scope.$apply()}),jQuery($element[0]).find("form.company-logo-uploader").find("input:file").change(function(){var preview=document.querySelector("img.company-image-preview"),logoImage=this.files[0],fr=new FileReader;fr.onload=function(){$scope.imageData=fr.result,preview.src=fr.result},fr.readAsDataURL(logoImage)}),jQuery($element[0]).find(".reset-company-logo, .reset-org-image").on("click",function(e){if(e.preventDefault(),!0===$scope.enableBtns){var preview=document.querySelector("img.company-image-preview");$scope.enableBtns=!1,$scope.$apply(),preview.src="/sp/resources/images/company-default.png",$scope.imageData=null}}),jQuery($element[0]).find(".process-company-logo").on("click",function(e){if(e.preventDefault(),!0===$scope.enableBtns&&null!==$scope.imageData){$scope.enableBtns=!1;var options={url:"/sp/media/company/uploadImage",maximum:7e3,data:$.param({image:$scope.imageData,companyId:$scope.themeCompanyId})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?(sharedProperties.growlMessage($rootScope.pullInterNationalization("mediaManager.growlMessage.success")),sharedProperties.fireAnalyticsEvent("Manage Account | Company Logo updated","N/A"),$timeout(function(){$(document).trigger("imageSaved",[{imageData:$scope.imageData}]),ngDialog.close("ngdialog1")},100)):(ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("mediaManager.growlMessage.fail"),"<strong> Alert </strong>","glyphicon glyphicon-ban-circle"))})}})}}}angular.module("spApp").directive("companyPicUploader",companyPicUploader),companyPicUploader.$inject=["$http","ajaxService","$rootScope","$timeout","ngDialog","$localStorage","sharedProperties"];
function dateSame(){return{require:"ngModel",link:function(scope,elem,attrs,ngModel){function validate(value){var isValid="",firstArg=scope.$eval(attrs.dateSame);return isValid=null===firstArg||void 0===firstArg||null===value||void 0===value||firstArg.toString()!==value.toString(),ngModel.$setValidity("same",isValid),isValid?value:void 0}ngModel.$parsers.unshift(validate),scope.$watch(attrs.dateSame,function(){ngModel.$setViewValue(ngModel.$viewValue)})}}}function sameAs(){return{require:"ngModel",link:function(scope,elem,attrs,ngModel){function validate(value){var isValid=scope.$eval(attrs.sameAs)===value;return ngModel.$setValidity("same-as",isValid),isValid?value:void 0}ngModel.$parsers.unshift(validate),scope.$watch(attrs.sameAs,function(){ngModel.$setViewValue(ngModel.$viewValue)})}}}angular.module("spApp").directive("sameAs",sameAs),angular.module("spApp").directive("dateSame",dateSame),angular.module("spApp").directive("validationCheck",["$parse",function($parse){return{require:"ngModel",link:function(scope,elm,attrs,ngModel){var check=$parse(attrs.validationCheck);scope.$watch(check,function(newValue){ngModel.$setValidity(attrs.name,newValue)})}}}]);
function focusIf($timeout){function link($scope,$element,$attrs){function focusFn(condition){condition&&$timeout(function(){dom.focus()},$scope.$eval($attrs.focusDelay)||0)}var dom=$element[0];$attrs.focusIf?$scope.$watch($attrs.focusIf,focusFn):focusFn(!0)}return{restrict:"A",link:link}}function overflowHoverList($timeout,$rootScope){return{restrict:"A",scope:{list:"=list",len:"=length",mLen:"=mlength",msgProps:"=msgprops",ellipsis:"=ellipsis",addCommas:"=addcommas"},link:function(scope,element,attrs){function setupHover(fullList,partialList){moreList=[];for(var i=0;i<fullList.length;i++){-1===$.inArray(fullList[i],partialList)&&moreList.push(fullList[i])}pTag.append('<span class="list-more"> +'+moreList.length+" "+$rootScope.pullInterNationalization("spectrum.more")+"</span>");for(var j=0;j<moreList.length;j++){var cont="manageContent."+moreList[j];void 0!==scope.addCommas?moreWrap.append("<span>"+(void 0!==scope.msgProps?$rootScope.pullInterNationalization(cont):moreList[j])+(j<moreList.length-1?", ":"")+"</span>"):moreWrap.append("<span>"+(void 0!==scope.msgProps?$rootScope.pullInterNationalization(cont):moreList[j])+"</span>")}isTouch?pTag.find(".list-more").off("click").on("click",function(e){moreWrap.hasClass("hide")?(moreWrap.removeClass("hide"),moreWrap.css({top:element[0].querySelector(".list-more").offsetTop+18,left:element[0].querySelector(".list-more").offsetLeft+2})):moreWrap.addClass("hide")}):(pTag.find(".list-more").on("mouseenter",function(){moreWrap.removeClass("hide"),moreWrap.css({top:element[0].querySelector(".list-more").offsetTop+18,left:element[0].querySelector(".list-more").offsetLeft+2})}),pTag.find(".list-more").on("mouseleave",function(){moreWrap.addClass("hide")}))}function appendList(){var len=hoverList.length,limit=$(window).width()>1024?parseInt(scope.len,10):parseInt(scope.mLen,10);selectedList=[],moreWrap.hasClass("hide")||moreWrap.addClass("hide"),pTag.find(".list-more").off("click"),moreWrap.find("span").remove(),pTag.find(".selected-list-name, .elp, .list-more").remove();for(var i=0;i<(len<=limit?len:limit);i++){var cont="manageContent."+hoverList[i];pTag.append('<span class="selected-list-name">'+(void 0!==scope.msgProps?$rootScope.pullInterNationalization(cont):hoverList[i])+(len>1&&i<(len<=limit?len:limit)-1?", ":"")+"</span>"),selectedList.push(hoverList[i])}len>limit&&(void 0===scope.ellipsis&&pTag.append('<span class="elp">...</span>'),setupHover(hoverList,selectedList))}var ele=$(element[0]),pTag=ele.find("p"),moreWrap=ele.find(".more-list-wrapper"),hoverList=[],selectedList=[],isTouch="ontouchstart"in window||navigator.msMaxTouchPoints>0,moreList=[];scope.$watch("list",function(newVal,oldVal){$timeout(function(){hoverList=newVal,selectedList=[],moreList=[],appendList()},200)},!0)}}}function dropToolTip($templateRequest,$compile){return{restrict:"A",link:function($scope,$element,$attrs){$templateRequest("/sp/resources/html/common/tooltip.html").then(function(html){if(""===$attrs.desc)return!0;var user=JSON.parse($attrs.desc),self=user.id!==$attrs.self;$scope.user=user,$scope.self=self;var template=angular.element(html),elem=$compile(template)($scope);Tipped.create($element[0],elem[0],{showDelay:1e3,maxWidth:"220",detach:!0,size:"large",stem:{height:60,width:220}})})}}}function dropToolTiptext($templateRequest,$compile){return{restrict:"A",link:function($scope,$element,$attrs){Tipped.create($element[0],$attrs.desc)}}}function notesOptions($templateRequest,$compile,sharedProperties){return{restrict:"A",link:function($scope,$element,$attrs){$templateRequest("/sp/resources/html/"+$attrs.urlSrc).then(function(html){function handleNotesCallback(event){var method=$element.attr("notes-callback");$scope.$event=event,$scope.$apply(method)}var template=angular.element(html),elem=$compile(template)($scope),styles=$attrs.styles,drop=new Drop({target:$element[0],content:elem[0],position:"bottom left",openOn:"click",remove:!0,classes:void 0!==styles?styles:"notes-options",$scope:$scope});$scope.openNotesPanel=function(tab){sharedProperties.setSelectedNotesTab(tab),sharedProperties.fireAnalyticsEvent("Sticky Footer | Open Module",tab),drop.remove(),$(".drop-element").remove()},$element.bind("touchstart click",handleNotesCallback)})}}}function fileStackModal($compile,$rootScope,sharedProperties){return{restrict:"A",link:function(scope,el,$attrs){function handleFileStack(){$("body .sticky-bottom").hide(),el[0].blur(),filepicker.setKey($rootScope.fileStackAPIKey);var fileDialog=filepicker.pick({mimetypes:"*/*",container:"modal",services:["COMPUTER","BOX","DROPBOX","GOOGLE_DRIVE","SKYDRIVE"],maxSize:10485760,language:sharedProperties.provideVendorSpecificLocale("fileStack")},function(Blob){$("body .sticky-bottom").show();var fileStackObj={recordIndex:recordIndex,fileData:Blob};scope.$broadcast("fileStackSuccess",fileStackObj)},function(FPError){$("body .sticky-bottom").show(),console.log(FPError.toString())});window.addEventListener("popstate",function(e){$("body").find("#filepicker_dialog_container").length&&fileDialog.close()}),history.pushState({state:"filestack"},"",window.location.href)}var overrideStyle=void 0!==$attrs.overrideStyle?$attrs.overrideStyle:"",recordIndex=void 0!==$attrs.recordIndex?$attrs.recordIndex:0,template=(void 0!==$attrs.fsPos&&$attrs.fsPos,'<span class="file-attach icon-file_select sp-icon-color '+overrideStyle+'" data-ng-click="handleFileStack();"></span>'),elem=$compile(template)(scope);$attrs.fsPos?$($attrs.fsPos).append(elem):el.after(elem),elem.bind("touchstart click",handleFileStack)}}}function progressAnimation($timeout,$parse,sharedProperties){return{restrict:"A",scope:{progressGraph:"=progressGraph",observeParam:"@",totalTasks:"=totalTasks",remainingTasks:"=remainingTasks",iconLevel:"=iconLevel"},link:function(scope,el,$attrs){function createProgress(){var totalTasks=scope.totalTasks,remainingTasks=scope.remainingTasks,animationType=$attrs.type,customText=$attrs.customText,showIcon=$attrs.showIcon,iconClass=$attrs.iconClass,overrideIcon=$attrs.overrideIcon,iconLevel=scope.iconLevel,expressions={},uiProgress=$parse($attrs.uiProgress)(scope),optionsAnimation={strokeWidth:10,easing:"easeInOut",duration:1400,color:sharedProperties.whiteLabelColorCodes("sp-icon-color").color,trailColor:"#ccc",trailWidth:10,svgStyle:{width:"100%",height:"100%"},text:{style:{color:"#999",position:"absolute",right:"0",top:"30px",padding:0,margin:0,transform:null},autoStyleContainer:!1},step:function(state,bar){bar.setText(Math.round(100*bar.value())+" %")}},optionsRadial={color:sharedProperties.whiteLabelColorCodes("sp-icon-color").color,strokeWidth:sharedProperties.detectIE()?6:9,trailWidth:3,easing:"easeInOut",trailColor:"#ccc",duration:1400,text:{autoStyleContainer:!1},step:function(state,circle){var value=Math.round(100*circle.value())+"%";void 0!==customText&&(value=customText),0===value||showIcon?circle.setText(""):circle.setText(value)}},percentageVal=parseFloat(remainingTasks/totalTasks);if("radial"===animationType){angular.extend(expressions,optionsRadial,uiProgress),$(el[0]).empty();var radialProgress=new ProgressBar.Circle(el[0],expressions);if(radialProgress.text.style.fontSize=expressions.textFont||"14px",radialProgress.text.style.color=expressions.textColor||"#999",$timeout(function(){radialProgress.animate(percentageVal.toFixed(2)),scope.progressGraph=radialProgress},1e3),showIcon){var iconTarget=el[0].querySelector(".progressbar-text"),iconElement=angular.element(iconTarget);overrideIcon?iconElement.addClass("icon-icon-badge_level"+iconLevel):iconElement.addClass(iconClass)}}else if("linear"===animationType){angular.extend(expressions,optionsAnimation,uiProgress),$(el[0]).empty();var bar=new ProgressBar.Line(el[0],expressions);$timeout(function(){bar.animate(percentageVal.toFixed(2)),scope.progressGraph=bar},500)}}void 0!==$attrs.observeParam?$attrs.$observe("observeParam",function(newValue,oldValue){void 0!==scope.progressGraph&&scope.progressGraph.destroy(),createProgress()},!0):createProgress()}}}function sameAs(){return{require:"ngModel",link:function(scope,elem,attrs,ngModel){function validate(value){var isValid=scope.$eval(attrs.sameAs)===value;return ngModel.$setValidity("same-as",isValid),isValid?value:void 0}ngModel.$parsers.unshift(validate),scope.$watch(attrs.sameAs,function(){ngModel.$setViewValue(ngModel.$viewValue)})}}}function badgeProgress($templateRequest,$compile,$rootScope){return{restrict:"A",link:function($scope,$element,$attrs){function displayBadge(){$templateRequest("/sp/resources/html/"+$attrs.urlSrc).then(function(html){var template=angular.element(html),elem=$compile(template)($scope),styles=$attrs.styles,badge=$attrs.badgeObject,moduleName=$attrs.moduleName;new Drop({target:$element[0],content:elem[0],position:"bottom left",openOn:"click",remove:!0,classes:void 0!==styles?styles:"notes-options",$scope:$scope});$scope.badge=JSON.parse(badge),$scope.badge.module=moduleName,$scope.badge.moduleLabel="Erti"===moduleName?$rootScope.pullInterNationalization("dashboard.erti"):$rootScope.pullInterNationalization("manageAccountContent.organization")})}void 0!==$attrs.badgeObject?$attrs.$observe("badgeObject",function(newValue,oldValue){displayBadge()},!0):displayBadge()}}}angular.module("spApp").directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13!==event.which||event.shiftKey||(scope.$apply(function(){scope.$eval(attrs.ngEnter,{$event:event})}),event.preventDefault())})}}),angular.module("spApp").filter("addEllipsis",["$sce",function($sce){return function(input,number){if(input)return input=input.length>number?input.substring(0,number)+"...":input,input=$sce.trustAsHtml(input)}}]),angular.module("spApp").filter("unique",function(){return function(arr,field){var i,o={},l=arr.length,r=[];for(i=0;i<l;i+=1)o[arr[i][field]]=arr[i];for(i in o)r.push(o[i]);return r}}),angular.module("spApp").directive("autoFocus",function(){return function(scope,element,attr){element[0].focus()}}),angular.module("spApp").directive("focusIf",focusIf),focusIf.$inject=["$timeout"],angular.module("spApp").filter("secureHtml",["$sce",function($sce){return function(input){return $sce.trustAsHtml(input)}}]),angular.module("spApp").filter("secureHtmlAndReplace",["$sce","$localStorage",function($sce,$localStorage){return function(input){if(null===input||void 0===input)return"";var personalityMap=$localStorage.get("loggegdInProfile").member.personalityMap;return input=input.replace("{primaryPersonality}",personalityMap.Primary).replace("{personalityUnderPressure}",personalityMap.UnderPressure),input=$sce.trustAsHtml(input)}}]),angular.module("spApp").filter("replacePlaceholder",["$localStorage",function($localStorage){return function(input){if(null===input||void 0===input)return"";var personalityMap=$localStorage.get("loggegdInProfile").member.personalityMap;return input=input.replace("{primaryPersonality}",personalityMap.Primary).replace("{personalityUnderPressure}",personalityMap.UnderPressure)}}]),angular.module("spApp").directive("dynamicName",["$parse",function($parse){return{restrict:"A",priority:1e4,controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var name=null,updateName=function(){var customIndex=$attrs.dynamicName.search("customIndex"),fixedIndex=$attrs.dynamicName.search("fixedIndex");name=-1!==customIndex?$attrs.dynamicName.replace("customIndex",$scope.customIndex):-1!==fixedIndex?$attrs.dynamicName.replace("fixedIndex",$scope.fixedIndex):$attrs.dynamicName.replace("$index",$scope.$index),$attrs.$set("name",name)};updateName(),$element.removeAttr("data-dynamic-name"),$element.removeAttr("dynamic-name"),$scope.$watch($attrs.updatedIndex,function(newVal,oldVal){newVal!==oldVal&&updateName()})}]}}]),angular.module("spApp").directive("changeName",["$parse",function($parse){return{restrict:"A",priority:1e4,controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var name=$attrs.changeName.replace("$index",$scope.$index).replace("ctrl.currentActionPlan",$scope.ctrl.currentActionPlan).replace("actionList.type",void 0===$scope.actionList?"":$scope.actionList.type).replace("parentIndex",$scope.parentIndex).replace("superIndex",$scope.superIndex).replace("currentIndex",$scope.currentIndex);delete $attrs.changeName,$element.removeAttr("data-change-name"),$element.removeAttr("change-name"),$attrs.$set("name",name)}]}}]),angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function($parse,$compile){function contains(arr,item){if(angular.isArray(arr))for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item))return!0;return!1}function add(arr,item){arr=angular.isArray(arr)?arr:[];for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item))return arr;return arr.push(item),arr}function remove(arr,item){if(angular.isArray(arr))for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item)){arr.splice(i,1);break}return arr}function postLinkFn(scope,elem,attrs){$compile(elem)(scope);var getter=$parse(attrs.checklistModel),setter=getter.assign,value=$parse(attrs.checklistValue)(scope.$parent);scope.$watch("checked",function(newValue,oldValue){if(newValue!==oldValue){var current=getter(scope.$parent);!0===newValue?setter(scope.$parent,add(current,value)):setter(scope.$parent,remove(current,value))}}),scope.$parent.$watch(attrs.checklistModel,function(newArr,oldArr){scope.checked=contains(newArr,value)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if("INPUT"!==tElement[0].tagName||!tElement.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!tAttrs.checklistValue)throw"You should provide `checklist-value`.";return tElement.removeAttr("checklist-model"),tElement.attr("ng-model","checked"),postLinkFn}}}]),angular.module("spApp").directive("repeatDone",function(){return function(scope,element,attrs){scope.$last&&window.setTimeout(function(){scope.$eval(attrs.repeatDone)},100)}}),angular.module("spApp").filter("thousandSuffix",function(){return function(input,decimals){var exp,suffixes=["k","M","G","T","P","E"];return window.isNaN(input)?null:input<1e3?input:(exp=Math.floor(Math.log(input)/Math.log(1e3)),(input/Math.pow(1e3,exp)).toFixed(decimals)+suffixes[exp-1])}}),angular.module("spApp").directive("imageonload",function(){return{restrict:"A",link:function(scope,element,attrs){element.bind("load",function(){scope.$apply(attrs.imageonload)})}}}),angular.module("spApp").directive("convertToNumber",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(val){return parseInt(val,10)}),ngModel.$formatters.push(function(val){return""+val})}}}),angular.module("spApp").directive("spClickOutside",["$document",function($document){return{restrict:"A",scope:{spCondition:"=",spClickOutside:"="},link:function(scope,element,attrs){var bodyCheck=function(e){element!==e.target&&!element[0].contains(e.target)&&scope.spClickOutside&&(scope.spClickOutside=!1,scope.$apply(scope.spClickOutside),$document.off("click",bodyCheck))};element.bind("click",function(e){e.preventDefault(),scope.spCondition&&(scope.spClickOutside?(scope.spClickOutside=!1,scope.$apply(scope.spClickOutside),$document.off("click",bodyCheck)):(scope.spClickOutside=!0,scope.$apply(scope.spClickOutside),$document.off("click",bodyCheck).on("click",bodyCheck)))})}}}]),angular.module("spApp").directive("overflowHoverList",overflowHoverList),overflowHoverList.$inject=["$timeout","$rootScope"],angular.module("spApp").directive("dropToolTip",dropToolTip),dropToolTip.$inject=["$templateRequest","$compile"],angular.module("spApp").directive("dropToolTiptext",dropToolTiptext),dropToolTiptext.$inject=["$templateRequest","$compile"],angular.module("spApp").directive("notesOptions",notesOptions),notesOptions.$inject=["$templateRequest","$compile","sharedProperties"],angular.module("spApp").filter("spDateFormat",["$filter","$localStorage","sharedProperties",function($filter,$localStorage,sharedProperties){return function(input){if(null===input||void 0===input)return"";var userTimeZone=$localStorage.get("loggegdInProfile").timeZome,year=input[0],month=input[1],day=input[2],hours=input[3],mins=input[4],secs="00";moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker"));var momentDateTime=new Date(year+"/"+month+"/"+day+" "+hours+":"+mins+":"+secs);momentDateTime=moment(momentDateTime).format("YYYY-MM-DD HH:mm:ss");var utcTime=moment.tz(momentDateTime,userTimeZone).toISOString();return moment.utc(utcTime).format("MMM DD, YYYY").toUpperCase()}}]),angular.module("spApp").filter("spTimeUpdate",["$filter","$localStorage","sharedProperties",function($filter,$localStorage,sharedProperties){return function(input){if(null===input||void 0===input||!angular.isArray(input))return!0;if(null!==$localStorage.get("loggegdInProfile")){var userTimeZone=$localStorage.get("loggegdInProfile").timeZome,year=input[0],month=input[1],day=input[2],hours=input[3],mins=input[4],secs=input[5];moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker"));var momentDateTime=new Date(year+"/"+month+"/"+day+" "+hours+":"+mins+":"+secs);return momentDateTime=moment(momentDateTime).format("YYYY-MM-DD HH:mm:ss"),moment.tz(momentDateTime,userTimeZone).fromNow()}}}]),angular.module("spApp").directive("numbersOnly",function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(inputValue){return parseInt(inputValue)<=200&&parseInt(inputValue)>=0?(modelCtrl.$setValidity("numbersOnly",!0),inputValue):(modelCtrl.$setValidity("numbersOnly",!1),modelCtrl.$modelValue)})}}}),angular.module("spApp").filter("htmlLinky",["$sanitize","linkyFilter",function($sanitize,linkyFilter){var ELEMENT_NODE=1,TEXT_NODE=3,linkifiedDOM=document.createElement("div"),inputDOM=document.createElement("div"),linkify=function linkify(startNode){var i,currentNode;for(i=0;i<startNode.childNodes.length;i++)switch(currentNode=startNode.childNodes[i],currentNode.nodeType){case ELEMENT_NODE:linkify(currentNode);break;case TEXT_NODE:var mode=-1!==currentNode.textContent.indexOf(window.location.host)?"_self":"_blank";for(linkifiedDOM.innerHTML=linkyFilter(currentNode.textContent,mode),i+=linkifiedDOM.childNodes.length-1;linkifiedDOM.childNodes.length;)startNode.insertBefore(linkifiedDOM.childNodes[0],currentNode);startNode.removeChild(currentNode)}return startNode};return function(input){return inputDOM.innerHTML=input,linkify(inputDOM).innerHTML}}]),angular.module("spApp").directive("setFocusLast",function(){return{scope:{setFocusLast:"=",setEl:"=",setHeight:"="},link:function(scope,element){var _this=$(element[0]);scope.setFocusLast?window.setTimeout(function(){void 0!==scope.setEl?$(scope.setEl).scrollTop($(scope.setHeight).height()):_this.parent().scrollTop(_this.position().top)},200):void 0!==scope.setEl?$(scope.setEl).scrollTop(0):_this.parent().scrollTop(0)}}}),angular.module("spApp").filter("convertToLink",function(){return function(input){return input&&(input=input.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(url){var full_url=url;return full_url.match("^https?://")||(full_url="http://"+full_url),'<a class="wrap-url" target="_blank" href="'+full_url+'">'+url+"</a>"})),input}}),angular.module("spApp").directive("fileStackModal",fileStackModal),fileStackModal.$inject=["$compile","$rootScope","sharedProperties"],angular.module("spApp").filter("newMediaManagerFilter",function(){return function(items,types,searchText,filterFilter){var filtered=[];return angular.forEach(items,function(item){!1===types.image&&!1===types.pdf&&!1===types.ppt&&!1===types.msdoc&&!1===types.video&&!1===types.web&&!1===types.excel?filtered.push(item):!0===types.image&&"IMAGE"===item.mediaType?filtered.push(item):!0===types.pdf&&"PDF"===item.mediaType?filtered.push(item):!0===types.ppt&&"PPT"===item.mediaType?filtered.push(item):!0===types.msdoc&&"MSDOC"===item.mediaType?filtered.push(item):!0===types.video&&"Video"===item.mediaType?filtered.push(item):!0===types.web&&"Web"===item.mediaType?filtered.push(item):!0===types.excel&&"MSEXCEL"===item.mediaType&&filtered.push(item),""!==searchText&&(filtered=filterFilter(filtered,searchText))}),filtered}}),angular.module("spApp").directive("myMention",["basicService",function(basicService){return{require:"uiMention",link:function($scope,$element,$attrs,uiMention){var choices=null;basicService.getAllValidMember().then(function(response){choices=response}),uiMention.label=function(choice){return choice.name},uiMention.labelWord=function(choice){return choice.firstName},uiMention.findChoices=function(match,mentions){return choices.filter(function(choice){return!mentions.some(function(mention){return mention.id===choice.id})}).filter(function(choice){return-1!==choice.name.toLowerCase().indexOf(match[1].toLowerCase())})},uiMention.encode=function(choice){return'<a href="'+window.location.origin+"/sp/dashboard/profile?userId="+choice.id+'" class="sp-user-tool-tip">'+this.label(choice)+"</a>"}}}}]),angular.module("spApp").filter("spLocaleDate",["sharedProperties",function(sharedProperties){return function(input){if(null===input||void 0===input)return"";var year=input[0],month=input[1],day=input[2];moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker"));var momentDate=new Date(year+"/"+month+"/"+day);return momentDate=moment(momentDate).format("MMM DD, YYYY").toUpperCase()}}]),angular.module("spApp").directive("displayRole",["$compile","$rootScope",function($compile,$rootScope){return{restrict:"A",scope:{displayRole:"=displayRole"},link:function(scope,element,attr){var elem,userRoles=scope.displayRole.roles,complete=[],classTobind=attr.addClass;-1!==userRoles.indexOf("GroupLead")&&complete.push('<span class="thin">'+$rootScope.pullInterNationalization("manageAccountContent.l")+"</span>"),-1!==userRoles.indexOf("AccountAdministrator")&&complete.push('<span class="thin">'+$rootScope.pullInterNationalization("manageAccountContent.admin")+"</span>"),scope.displayRole.deactivated&&complete.push('<span class="thin blocked">'+$rootScope.pullInterNationalization("manageAccountContent.blocked")+"</span>"),complete.length?(elem=$compile(complete.join(""))(scope),element.empty().append(elem),element.addClass(classTobind)):element.removeClass(classTobind)}}}]),angular.module("spApp").directive("progressAnimation",progressAnimation),progressAnimation.$inject=["$timeout","$parse","sharedProperties"],angular.module("spApp").directive("sameAs",sameAs),angular.module("spApp").directive("validationCheck",["$parse",function($parse){return{require:"ngModel",link:function(scope,elm,attrs,ngModel){var check=$parse(attrs.validationCheck);scope.$watch(check,function(newValue){ngModel.$setValidity(attrs.name,newValue)})}}}]),angular.module("spApp").directive("badgeProgress",badgeProgress),badgeProgress.$inject=["$templateRequest","$compile","$rootScope"],angular.module("spApp").filter("unescapeText",function(){return function(text){return unescape(text)}}),angular.module("spApp").filter("replaceName",["$sce",function($sce){return function(text,name){return text=text.replace("[name]",name),text=$sce.trustAsHtml(text)}}]);
angular.module("spApp").directive("feedbackResponse",["$rootScope","ajaxService","$localStorage","sharedProperties","feedbackService","ngDialog","$q","basicService","$filter",function($rootScope,ajaxService,$localStorage,sharedProperties,feedbackService,ngDialog,$q,basicService,$filter){return{restrict:"EA",scope:{responseObj:"@"},templateUrl:function(element,attrs){return attrs.urlSrc||"/sp/resources/html/common/feedback-response.html"},link:function(scope,element,attrs){function startup(){responseObj=JSON.parse(attrs.responseObj),sharedProperties.setFeedbackObjectForPanel(responseObj),vm.feedbackRefObj={},vm.referenceId=null,vm.parentId=null,vm.feedbackForm={},vm.masterList=[],vm.feedbackRequestList=[],vm.activeFeedId="",vm.inputRequired=!1,vm.feedbackUpdated=!1,vm.responseAvailable=!1,vm.feedbackUsers=[],vm.loggedInUser=null,vm.noDataOnLoad=!1,vm.selectedFilter="",vm.listingFilter="",vm.formSubmitted=!1,vm.activeResponseFeed=-1,vm.spFeatureName="",vm.allMember=[],vm.showNotesOptions=!1,vm.individualFeedbackId=null,vm.pullInterNationalization=$rootScope.pullInterNationalization,vm.feedbackRefObj=sharedProperties.getFeedbackObjectForPanel(),vm.statusFilterName=$rootScope.pullInterNationalization("feedback.filters.status.viewAll.label"),vm.listingFilterName=$rootScope.pullInterNationalization("feedback.filters.status.viewAll.label"),vm.loggedInUser=$localStorage.get("loggegdInProfile"),vm.feedResponse=[],feedbackService.getAllFeedbackRequests(vm.feedbackRefObj.id,vm.feedbackRefObj.spFeature).then(function(data){void 0!==data&&data.Success&&(vm.masterList=data.developmentFeedbackListing,vm.feedbackRequestList=angular.copy(vm.masterList),vm.activeFeedId=vm.feedbackRefObj.id,vm.responseAvailable=!0,vm.masterList.length||(vm.noDataOnLoad=!0))})}var vm=scope,responseObj=null;attrs.$observe("responseObj",function(newValue,oldValue){void 0!==vm.responseObj&&startup()}),vm.openFeedback=function(mode,dialog){vm.feedbackView=mode,vm.formSubmitted=!1,vm.winHeight=$(window).height()-140+"px",vm.winWidth=$(window).width(),0===mode?(vm.newFeedbackFlow(mode),sharedProperties.fireAnalyticsEvent("Feedback | Open Request Feedback",vm.feedbackRefObj.spFeature)):sharedProperties.fireAnalyticsEvent("Feedback | Open Feedback Responses",vm.feedbackRefObj.spFeature),void 0===dialog&&ngDialog.open({template:"/sp/resources/html/common/feedback-response-dialog.html",scope:scope,className:vm.winWidth>767?"ngdialog-theme-default":"ngdialog-theme-default no-overflow no-padding"})},vm.tagAdded=function(tag){vm.feedbackUsers.push(tag.email)},vm.tagRemoved=function(tag){vm.feedbackUsers.splice(vm.feedbackUsers.indexOf(tag.email),1)},vm.loadEmail=function(query){var deferred=$q.defer(),result=vm.allMember.filter(function(e){return-1!==e.name.toLowerCase().indexOf(query.toLowerCase())||-1!==e.email.toLowerCase().indexOf(query.toLowerCase())});return deferred.resolve(result),deferred.promise};var prepareFeedbackForm=function(){return vm.feedbackForm.devFeedRefId=vm.feedbackRefObj.id,vm.feedbackForm.spFeature=vm.feedbackRefObj.spFeature,vm.feedbackForm.feedbackUsers=vm.feedbackUsers,vm.feedbackForm.feedParentRefId=vm.feedbackRefObj.parentId,vm.feedbackForm};vm.submitFeedbackRequest=function(){vm.formSubmitted=!0,""!==vm.feedbackForm.comment.trim()&&void 0!==vm.feedbackForm.comment&&vm.feedbackUsers.length&&(vm.inputRequired=!1,vm.feedbackForm=prepareFeedbackForm(),vm.feedbackUpdated=!1,feedbackService.submitFeedbackRequest(vm.feedbackForm).then(function(data){data&&(ngDialog.close(),sharedProperties.growlMessage($rootScope.pullInterNationalization("feedback.ajaxMessage.requestSent")),vm.feedbackUpdated=!0,vm.noDataOnLoad=!1,vm.goBackToListing(),sharedProperties.fireAnalyticsEvent("Feedback | Request sent","Name - "+vm.feedbackRefObj.name+", Feature -    "+vm.feedbackRefObj.spFeature))}))},vm.goBackToListing=function(){vm.formSubmitted=!1,vm.selectedFilter="",vm.listingFilter="",vm.feedbackUsers=[],vm.feedbackUpdated&&feedbackService.getAllFeedbackRequests(vm.feedbackRefObj.id,vm.feedbackRefObj.spFeature).then(function(data){data.Success&&(vm.masterList=data.developmentFeedbackListing,vm.feedbackRequestList=angular.copy(vm.masterList),vm.responseAvailable=!0)})},vm.newFeedbackFlow=function(mode){vm.selectedFilter="",vm.listingFilter="",vm.feedbackView=mode,vm.inputRequired=!1,vm.feedbackUpdated=!1,vm.tagsAdded=!1,vm.feedbackForm.comment="",vm.allMember.length||basicService.getAllValidMember().then(function(response){if(vm.allMember=response,null!==vm.loggedInUser)for(var i=0;i<vm.allMember.length;i++)if(vm.allMember[i].email===vm.loggedInUser.member.email){vm.allMember.splice(i,1);break}})},vm.emailFeedback=function(feedbackId){vm.feedbackForm={},vm.feedbackForm.spFeature=vm.feedbackRefObj.spFeature,null!==feedbackId&&void 0!==feedbackId?(vm.feedbackForm.id=feedbackId,vm.feedbackForm.devFeedRefId=null):(vm.feedbackForm.id=null,vm.feedbackForm.devFeedRefId=vm.feedbackRefObj.id),feedbackService.emailFeedback(vm.feedbackForm).then(function(data){data&&(sharedProperties.growlMessage($rootScope.pullInterNationalization("feedback.ajaxMessage.emailSent")),sharedProperties.fireAnalyticsEvent("Feedback | Send email from side panel","N/A"))})},vm.deleteModal=function(feedbackId){vm.individualFeedbackId=feedbackId,ngDialog.open({template:"/sp/resources/html/feedback/delete-feedback.html",scope:scope})},vm.deleteFeedback=function(){var devFeedId=vm.activeFeedId;null!==vm.individualFeedbackId&&(devFeedId=null),feedbackService.deleteFeedback(vm.individualFeedbackId,devFeedId,vm.feedbackRefObj.spFeature).then(function(data){data&&(ngDialog.close("ngdialog2"),sharedProperties.growlMessage($rootScope.pullInterNationalization("feedback.ajaxMessage.delete")),vm.feedbackUpdated=!0,null!==vm.individualFeedbackId?(sharedProperties.spilceIndexWithBreak(vm.masterList,"id",vm.individualFeedbackId),vm.feedbackRequestList=angular.copy(vm.masterList),vm.feedbackRequestList.length||(vm.feedbackRequestList=[],vm.masterList=[],vm.noDataOnLoad=!0,vm.newFeedbackFlow(vm.feedbackView))):(vm.feedbackRequestList=[],vm.masterList=[],vm.noDataOnLoad=!0,vm.newFeedbackFlow(vm.feedbackView)),sharedProperties.fireAnalyticsEvent("Feedback | Delete feedback from side panel","N/A"))})},vm.filterData=function(data,displayName){var resp=[];resp=$filter("feedbackFilter")(vm.masterList,data,"status"),vm.feedbackRequestList=[],vm.feedbackRequestList=resp,vm.statusFilterName=displayName,vm.selectedFilter=data}}}}]);
angular.module("spApp").directive("footerStick",["$rootScope",function($rootScope){return{restrict:"EA",templateUrl:function(element,attrs){return attrs.urlSrc||"/sp/resources/html/common/footer-b.html"},link:function(scope,element,attrs){scope.pullInterNationalization=$rootScope.pullInterNationalization}}}]);
function navModule($compile,$templateRequest,spConfig){var controller=function($scope,$rootScope,sharedProperties,ajaxService,$q,basicService,$localStorage,$timeout){var self=this;$scope.showMenu=!1,$rootScope.navLoaded=!1,$scope.showNav=!1,self.globalNav={},self.userNav="",self.acceptedNav=["erti","pplAnalytics","superAdmin"],self.paPathName="/pa/",$rootScope.selectedNav="",$rootScope.smallViewPort=$(window).width()<768;var init=function(){-1===window.location.pathname.indexOf(self.paPathName)&&"pplAnalytics"===$localStorage.get("userSelectedNav")&&$localStorage.remove("userSelectedNav"),localstorageCheck("globalNav")?fetchSiteNavigationData():processNavigation()},fetchSiteNavigationData=function(){ajaxService.getAjaxResponse({url:spConfig.nav.fetchNavApi}).then(function(response){"true"===response.Success&&($localStorage.set("globalNav",response),processNavigation())})},checkForErti=function(){ajaxService.getAjaxResponse({url:spConfig.nav.checkErti}).then(function(response){"true"!==response.Success||response.hasErti||$localStorage.set("noErti",!0)})},processNavigation=function(){var storedGlobalNav=$localStorage.get("globalNav").navigation.navigationList;if(localstorageCheck("userSelectedNav")?(-1===Object.keys(storedGlobalNav).indexOf("erti")&&-1===Object.keys(storedGlobalNav).indexOf("pplAnalytics")?self.userNav="superAdmin":-1!==Object.keys(storedGlobalNav).indexOf("erti")?self.userNav="erti":(checkForErti(),self.userNav="pplAnalytics"),$localStorage.set("userSelectedNav",self.userNav)):self.userNav=$localStorage.get("userSelectedNav"),null!==sharedProperties.getParam("nav")){var navParam="";navParam=null===$localStorage.get("noErti")?-1===self.acceptedNav.indexOf(sharedProperties.getParam("nav"))?"erti":sharedProperties.getParam("nav"):-1===self.acceptedNav.indexOf(sharedProperties.getParam("nav"))?"pplAnalytics":sharedProperties.getParam("nav"),$localStorage.set("userSelectedNav",navParam),self.userNav=$localStorage.get("userSelectedNav")}-1!==window.location.pathname.indexOf(self.paPathName)&&($localStorage.set("userSelectedNav","pplAnalytics"),self.userNav=$localStorage.get("userSelectedNav")),"erti"===self.userNav?$rootScope.showStickyFooter=!0:$rootScope.showStickyFooter=!1,$rootScope.selectedNav=self.userNav,self.globalNav=storedGlobalNav[self.userNav],$rootScope.navLoaded=!0,storedGlobalNav=null},localstorageCheck=function(key){return null===$localStorage.get(key)};$scope.$on("updatePermissionSSE",function(e,data){if(null===data)return!0;$scope.$apply(function(){$localStorage.set("globalNav",data),processNavigation()})}),$scope.$on("updateNavigationSSE",function(e,data){if(null===data)return!0;$scope.$apply(function(){$localStorage.set("globalNav",data),processNavigation()})});!function(){init()}()};return controller.$inject=["$scope","$rootScope","sharedProperties","ajaxService","$q","basicService","$localStorage","$timeout"],{restrict:"EA",link:function($scope,$element,$attrs){$templateRequest(spConfig.nav.htmlSrc).then(function(html){var template=angular.element(html);$element.append(template),$compile(template)($scope)})},controller:controller,controllerAs:"navCtrl",bindToController:!0}}function flyoutNav($timeout){return{restrict:"A",scope:{showNav:"=show"},link:function(scope,element,attrs){function openFlyoutMenu(isEnabled){isEnabled&&($(".nav-col1, .nav-col2").stop().removeClass("addPos animate_slideLeft animate_slideLeft1").removeAttr("style"),$(".header-body-wrap").stop().addClass("hide").css({left:"-9999em"}).removeAttr("style"),$("body").css({overflow:"hidden"}),$(".header-body-wrap").css({left:0}).removeClass("hide").fadeIn(400),$(".nav-col1").addClass("animate_slideLeft"),$timeout(function(){$(".nav-col2").addClass("addPos animate_slideLeft1"),$("body .sticky-bottom").hide()},timer))}function closeFlyoutMenu(){$(".nav-col1, .nav-col2, .header-body-wrap").fadeOut(250,function(){$(".nav-col1, .nav-col2").removeClass("addPos animate_slideLeft animate_slideLeft1").removeAttr("style"),$(".header-body-wrap").addClass("hide").css({left:"-9999em"}).removeAttr("style"),$("body").removeAttr("style"),scope.$apply(function(){scope.$parent.showMenu=!1}),$("body .sticky-bottom").show()})}$(".header-body-wrap, .nav-close-btn").off("click").on("click",function(e){closeFlyoutMenu()}),$(document).keyup(function(e){27===e.keyCode&&closeFlyoutMenu()});var timer=$(window).width()<768?100:50;$("body").on("click",".flyout-global-nav a",function(e){closeFlyoutMenu()});scope.$on("disableNavClick",function(){closeFlyoutMenu()});scope.$watch("showNav",function(){openFlyoutMenu(scope.showNav)},!0)}}}navModule.$inject=["$compile","$templateRequest","spConfig"],angular.module("spApp").directive("navModule",navModule),angular.module("spApp").directive("flyoutNav",flyoutNav),flyoutNav.$inject=["$timeout"];
function profilePicUploader($http,ajaxService,$rootScope,$timeout,ngDialog,$localStorage,sharedProperties){return{restrict:"A",link:function($scope,$element,$attrs){jQuery($element[0]).find(".select-image-btn").on("click",function(e){if(e.preventDefault(),jQuery($element[0]).find("form.pic-uploader").find("input:file").click(),$scope.enableBtns=!0,$scope.$apply(),jQuery("html").hasClass("ie10")&&$scope.prevImage===jQuery($element[0]).find(".image-editor").cropit("imageSrc")&&!0===$scope.resetFlag){jQuery($element[0]).find(".cropit-image-background").removeAttr("src"),jQuery($element[0]).find(".cropit-image-preview").removeClass("cropit-image-loaded");var img=jQuery($element[0]).find(".image-editor").cropit("imageSrc");jQuery($element[0]).find(".cropit-image-background").attr("src",img),jQuery($element[0]).find(".cropit-image-background-container").css({"background-image":'url("'+img+'")'}),jQuery($element[0]).find(".cropit-image-preview").css({"background-image":'url("'+img+'")'}).addClass("cropit-image-loaded"),$scope.prevImage="",$scope.resetFlag=!1}}),setTimeout(function(){jQuery($element[0]).find(".image-editor").cropit({imageBackground:!0,previewSize:{width:170,height:170},exportZoom:.51,originalSize:!1})},500),jQuery($element[0]).find(".reset-image").on("click",function(e){if(e.preventDefault(),!0===$scope.enableBtns){$scope.enableBtns=!1,$scope.$apply();jQuery($element[0]).find("form.pic-uploader").find("input:file").val(""),jQuery($element[0]).find(".avatar-upload div").each(function(){jQuery(this).css("background-image","none")}),$scope.resetFlag=!0,$scope.prevImage=jQuery($element[0]).find(".image-editor").cropit("imageSrc"),jQuery($element[0]).find(".cropit-image-background").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}}),jQuery($element[0]).find(".process-pic").on("click",function(e){if(e.preventDefault(),!("none"!==jQuery($element[0]).find(".cropit-image-preview").css("background-image")))return $scope.enableBtns=!1,!1;if(!0===$scope.enableBtns){$scope.enableBtns=!1,$scope.$apply(),$scope.imageData=jQuery($element[0]).find(".image-editor").cropit("export",{type:"image/jpeg",quality:.99,exportZoom:.5});var options={url:"company"===$scope.imageType?"/sp/admin/company/uploadImage":"/sp/uploadImage",data:$.param({image:$scope.imageData})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?(ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.imageUploaded")),$timeout(function(){$localStorage.remove("loggegdInProfile"),window.location.reload()},1e3)):sharedProperties.ajaxError($rootScope.pullInterNationalization("mediaManager.growlMessage.fail"))})}})}}}profilePicUploader.$inject=["$http","ajaxService","$rootScope","$timeout","ngDialog","$localStorage","sharedProperties"],angular.module("spApp").directive("profilePicUploader",profilePicUploader);
function toggleSection(){return{restrict:"A",link:function($scope,$element,$attrs){jQuery($element[0]).on("click",function(e){e.preventDefault();var activeTab,secInfo=jQuery(this).attr("data-rel"),secCont=jQuery("body").find("div[data-section="+secInfo+"]");$.each(jQuery("body").find(".btn-wrap a.toggle-btn"),function(){jQuery(this).hasClass("on")&&(activeTab=jQuery(this).attr("data-rel"))}),$.each(jQuery("body").find("div[data-section]"),function(){jQuery(this).removeClass("toggleShow").addClass("toggleHide")}),$.each(jQuery("body").find(".btn-wrap a.toggle-btn"),function(){jQuery(this).removeClass("on")}),secInfo!==activeTab?(secCont.removeClass("toggleHide").addClass("toggleShow"),jQuery(this).addClass("on"),jQuery("html,body").animate({scrollTop:jQuery(secCont).offset().top-40},300)):(secCont.removeClass("toggleShow").addClass("toggleHide"),jQuery(this).removeClass("on"))})}}}angular.module("spApp").directive("toggleSection",toggleSection);
function rangeSlider(){return{restrict:"A",priority:10,link:function($scope,$element,$attrs){jQuery('input[type="range"]').rangeslider({polyfill:!1,onSlideEnd:function(position,value){$scope.$apply(function(){$scope.competencyRangeSlider=value})}})}}}angular.module("spApp").directive("rangeSlider",rangeSlider);
function wolLinks($http,ajaxService,$rootScope,$timeout,ngDialog){return{restrict:"A",link:function($scope,$element,$attrs){$scope.redirectToPage=function(l){window.open(l),$timeout(function(){ngDialog.close("ngdialog1")},200)},jQuery($element[0]).on("click","a",function(e){e.preventDefault(),$scope.link=jQuery(this).attr("href"),ngDialog.open({template:"/sp/resources/html/curriculum/wol.html",scope:$scope})})}}}angular.module("spApp").directive("wolLinks",wolLinks),wolLinks.$inject=["$http","ajaxService","$rootScope","$timeout","ngDialog"];
function paProfileModal($localStorage,ajaxService,$timeout,sharedProperties,$rootScope,ngDialog){return{restrict:"EA",templateUrl:function(element,attrs){return attrs.urlSrc||"/sp/resources/html/people-analytics/view/edit-profile-modal.html"},link:function(scope,element,attrs,$ctrl){function getUserDetail(){ajaxService.getAjaxResponse({url:serviceApis.getUserDetail,data:$.param({userEmail:self.signedInUser.member.email}).replace(/%40/g,"@")}).then(function(response){"true"===response.Success&&(self.userProfileBackup=angular.copy(response),self.profile=angular.copy(response.profileForm),self.profileSummary=angular.copy(response.userSummary),null!==response.address?(self.profile.country="USA"===response.address.country?"US":response.address.country,self.stateCheck.forSelectedCountry=self.profile.country,self.profile.address1=response.address.addressLine1,self.profile.address2=response.address.addressLine2,self.profile.city=response.address.city,self.profile.state=response.address.state,self.profile.zip=response.address.zipCode,self.profile.state=response.address.state):(self.profile.country="default",self.stateCheck.forSelectedCountry="default",self.profile.address1=null,self.profile.address2=null,self.profile.city=null,self.profile.state=null,self.profile.zip=null),null===self.profile.gender&&(self.profile.gender="default"),0===self.profile.year&&(self.profile.year="default"),0===self.profile.month&&(self.profile.month="default"),0===self.profile.day&&(self.profile.day="default"),self.ready=!0)})}var self=scope,serviceApis={getUserDetail:"/sp/admin/user",updateProfile:"/sp/updateProfile",changePassword:"/sp/changePassword"};self.signedInUser=$localStorage.get("loggegdInProfile"),self.ready=!1,self.stateCheck={},self.profile={},self.formStatus={},self.userProfileBackup={},self.pageView="home",self.enableBtns=!1,self.disableForm=!0,self.resetPwdError=!1,self.resetPwdFormError={validationErrors:!1},self.resetPwd={},self.pwdFlag=!1,self.resetPasswordForm=function(){self.pageView="change",self.resetPwdError=!1,self.resetPwdFormError.validationErrors=!1,self.resetPwd={}},self.addressFormReset=function(t){self.profile.address1=null,self.profile.address2=null,self.profile.city=null,self.profile.zip=null,self.stateCheck.forSelectedCountry=self.profile.country,"US"===self.stateCheck.forSelectedCountry?self.profile.state="default":self.profile.state=null},self.cancelAndUpdate=function(){var _response=angular.copy(self.userProfileBackup);self.profile=_response.profileForm,self.profileSummary=_response.userSummary,null!==_response.address?(self.profile.country="USA"===_response.address.country?"US":_response.address.country,self.stateCheck.forSelectedCountry=self.profile.country,self.profile.address1=_response.address.addressLine1,self.profile.address2=_response.address.addressLine2,self.profile.city=_response.address.city,self.profile.state=_response.address.state,self.profile.zip=_response.address.zipCode,self.profile.state=_response.address.state):(self.profile.country="default",self.stateCheck.forSelectedCountry="default",self.profile.address1=null,self.profile.address2=null,self.profile.city=null,self.profile.state=null,self.profile.zip=null),null===self.profile.gender&&(self.profile.gender="default"),0===self.profile.year&&(self.profile.year="default"),0===self.profile.month&&(self.profile.month="default"),0===self.profile.day&&(self.profile.day="default")},self.saveAndUpdate=function(formData,formName){var empCountErr;empCountErr=!(void 0!==formData.numberOfEmployees&&formData.numberOfEmployees<1);var vCount=0;self.formStatus.sumbit=!1;for(var k in formData)if("object"==typeof formData[k])for(var l in formData[k])"default"!==formData[k][l]&&"default1"!==formData[k][l]&&0!==formData[k][l]&&0!==formData[k][l]||vCount++;else"default"!==formData[k]&&"default1"!==formData[k]&&0!==formData[k]&&0!==formData[k]||vCount++;this[formName].$valid&&0===vCount&&empCountErr?(self.disableCompanyEditing=!0,self.disableProfileEditing=!0,self.disableIndividualEditing=!0,self.disableUserProfileEditing=!0,ajaxService.getAjaxResponse({url:serviceApis.updateProfile,data:$.param(formData).replace(/address%5B/g,"").replace(/%5D/g,"").replace(/%2C/g,",")}).then(function(response){"true"===response.Success&&(sharedProperties.fireAnalyticsEvent("PA | Profile Updated by User","N/A"),$localStorage.remove("loggegdInProfile"),window.location.reload())})):self.formStatus.sumbit=!0},self.updatePwdFlag=function(){$("#newPassword").val().length>=8&&(self.pwdFlag=sharedProperties.passwordCriterionCheck($("#newPassword").val()))},self.processPasswordReset=function(fData){self.resetPwdFormError.validationErrors=!1,self.resetPwdError=!1,self.pwdFlag=!1,self.pwdFlag=sharedProperties.passwordCriterionCheck($("#newPassword").val()),this.resetPwdForm.$valid&&self.pwdFlag?ajaxService.getAjaxResponse({url:serviceApis.changePassword,data:$.param({oldPassword:fData.oldPassword,newPassword:fData.newPassword})}).then(function(response){if("true"===response.Success)self.resetPwdError=!1,document.getElementById("reset-pwd-form").reset(),self.pageView="home",sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.passwordChange")),sharedProperties.fireAnalyticsEvent("PA | Password changed by User","N/A");else{self.resetPwdFormError.validationErrors=!1,self.resetPwdError=!0;for(var key in response.error)self.resetPwdErrorMsg=response.error[key]}}):(self.resetPwdError=!1,this.resetPwdFormError.validationErrors=!0)},self.goto=function(pointer){self.pageView=pointer},function(){self.countries=$localStorage.get("countriesFullList").countries,getUserDetail()}()}}}paProfileModal.$inject=["$localStorage","ajaxService","$timeout","sharedProperties","$rootScope","ngDialog"],angular.module("spApp").directive("paProfileModal",paProfileModal);
function siteHeaderController($scope,$rootScope,ajaxService,$localStorage,eventSourceProvider,$timeout,sharedProperties,localeLang){$scope.userProfile={},$scope.selectedLang=localeLang.getCookie("sp-locale")||localeLang.getLang(!0).replace("-","_"),localeLang.override($scope.selectedLang.replace("_","-"),!1),sharedProperties.countriesList(),$scope.updateLang=function(param){localeLang.override(param,!0)},$scope.getProfileInfo=function(){this.getUserProfile=function(){ajaxService.getAjaxResponse({url:"/sp/signedIn/getProfile"}).then(function(response){if("true"===response.Success){$scope.userProfile=response.member;var userRoles=$scope.userProfile.roles;$rootScope.isSuperAdmin=-1!==userRoles.indexOf("SuperAdministrator"),$localStorage.set("loggegdInProfile",response),$rootScope.$broadcast("profileCreated"),$scope.headerFn.welcomeConsole($localStorage.get("loggegdInProfile").member.name),$rootScope.profileReady=!0,$localStorage.set("spSession",localeLang.getCookie("JSESSIONID"));var userCookie={};userCookie.uid=response.member.id,userCookie.cid=response.member.companyId,localeLang.setCookie("udata",JSON.stringify(userCookie),14,";path=/; domain=.surepeople.com")}})},this.welcomeConsole=function(name){-1!==navigator.userAgent.indexOf("Firefox")?console.log("\nWelcome %s to SUREPEOPLE\nLearn about our intelligent learning, development and hiring platform that drives performance and innovation for companies worldwide.\n",name):console.log("%cWelcome %s to SUREPEOPLE\n%c\nLearn about our intelligent learning, development and hiring platform that drives performance and innovation for companies worldwide.\n","color: #ff6633; font-size: 24px",name,"color: black; font-size: 18px")},this.init=function(){if(this.localstorageCheck("loggegdInProfile"))this.getUserProfile();else{var storedProfile=$localStorage.get("loggegdInProfile");$scope.userProfile=storedProfile.member,$rootScope.profileReady=!0;var userRoles=$scope.userProfile.roles;$rootScope.isSuperAdmin=-1!==userRoles.indexOf("SuperAdministrator"),this.welcomeConsole(storedProfile.member.name)}},this.localstorageCheck=function(key){return null===$localStorage.get(key)}};var initSSE=function(){eventSourceProvider.initEventSource()};!function(){$scope.headerFn=new $scope.getProfileInfo,$scope.headerFn.init(),initSSE();var receiveProfileData=$scope.$on("profileCreated",function(){receiveProfileData(),null===window.sessionStorage.getItem("loggedIn")&&$scope.selectedLang.toLowerCase()!==$localStorage.get("loggegdInProfile").locale.toLowerCase()&&(localeLang.override($localStorage.get("loggegdInProfile").locale,!0),window.sessionStorage.setItem("loggedIn",!0))})}()}function loginLangController(localeLang,sharedProperties){var _this=this;_this.selectedLang=localeLang.getCookie("sp-locale")||localeLang.getLang(!0).replace("-","_"),localeLang.override(_this.selectedLang.replace("_","-"),!1),_this.updateLang=function(param){localeLang.override(param,!0)},sharedProperties.countriesList()}angular.module("spApp").controller("siteHeaderController",siteHeaderController),siteHeaderController.$inject=["$scope","$rootScope","ajaxService","$localStorage","eventSourceProvider","$timeout","sharedProperties","localeLang"],angular.module("spApp").controller("loginLangController",loginLangController),loginLangController.$inject=["localeLang","sharedProperties"];
function routerBlueConfig($stateProvider){$stateProvider.state("create",{url:"/create",templateUrl:"/sp/resources/html/blueprint/create.html",controllerAs:"vm"}).state("createAdmin",{url:"/create",templateUrl:"/sp/resources/html/blueprint/createAdmin.html",controllerAs:"vm"}).state("approvalRequest",{url:"/approvalRequest",templateUrl:"/sp/resources/html/blueprint/approvalRequest.html",controllerAs:"vm"}).state("publish",{url:"/publish",templateUrl:"/sp/resources/html/blueprint/publish.html",controllerAs:"vm"})}angular.module("spApp").config(routerBlueConfig),routerBlueConfig.$inject=["$stateProvider"];
function routerConfig($stateProvider){$stateProvider.state("practice",{url:"/practice",templateUrl:"/sp/resources/html/goals/practice.html",controllerAs:"vm"}).state("addNote",{url:"/addnote",templateUrl:"/sp/resources/html/goals/addNote.html",controllerAs:"vm"}).state("requestFeedback",{url:"/requestFeedback",templateUrl:"/sp/resources/html/goals/requestFeedback.html",controllerAs:"vm"}).state("completedArticle",{url:"/completedArticle",templateUrl:"/sp/resources/html/goals/completedArticle.html",controllerAs:"vm"}).state("notesAndFeedback",{url:"/notesAndFeedback",templateUrl:"/sp/resources/html/goals/notesFeedbackOverlay.html",controllerAs:"vm"}).state("manageArticle",{url:"/manageArticle",templateUrl:"/sp/resources/html/goals/manageStratagies.html",controllerAs:"vm"}).state("selectActionPlan",{url:"/selectActionPlan",templateUrl:"/sp/resources/html/goals/orgLanding.html",controllerAs:"vm"}).state("organization",{url:"/organization",templateUrl:"/sp/resources/html/goals/organization.html",controllerAs:"vm"}).state("admin",{views:{create:{templateUrl:"/sp/resources/html/sysAdmin/organization/admin-create.html",controllerAs:"vm"},edit:{templateUrl:"/sp/resources/html/sysAdmin/organization/admin-edit.html",controllerAs:"vm"},preview:{templateUrl:"/sp/resources/html/sysAdmin/organization/admin-preview.html",controllerAs:"vm"},setting:{templateUrl:"/sp/resources/html/sysAdmin/organization/admin-setting.html",controllerAs:"vm"},step:{templateUrl:"/sp/resources/html/sysAdmin/organization/admin-stepSetting.html",controllerAs:"vm"}}}).state("adminTutorial",{views:{create:{templateUrl:"/sp/resources/html/sysAdmin/tutorial/create.html",controllerAs:"vm"},edit:{templateUrl:"/sp/resources/html/sysAdmin/tutorial/edit.html",controllerAs:"vm"},preview:{templateUrl:"/sp/resources/html/sysAdmin/tutorial/preview.html",controllerAs:"vm"},setting:{templateUrl:"/sp/resources/html/sysAdmin/tutorial/setting.html",controllerAs:"vm"}}}).state("visual",{views:{"personality-balance":{templateUrl:"/sp/resources/html/spectrum/personality-balance.html",controllerAs:"vm"},"personality-balance-filter":{templateUrl:"/sp/resources/html/spectrum/personality-balance-filter.html",controllerAs:"vm"},"blueprint-analytics-filter":{templateUrl:"/sp/resources/html/spectrum/blueprint-analytics-filter.html",controllerAs:"vm"},"blueprint-analytics":{templateUrl:"/sp/resources/html/spectrum/blueprint-analytics.html",controllerAs:"vm"},"ert-insights-filter":{templateUrl:"/sp/resources/html/spectrum/ert-insights-filter.html",controllerAs:"vm"},"ert-insights":{templateUrl:"/sp/resources/html/spectrum/ert-insights.html",controllerAs:"vm"},"org-plan":{templateUrl:"/sp/resources/html/spectrum/org-plan.html",controllerAs:"vm"},"org-plan-filter":{templateUrl:"/sp/resources/html/spectrum/org-plan-filter.html",controllerAs:"vm"},"ert-analytics-filter":{templateUrl:"/sp/resources/html/spectrum/ert-analytics-filter.html",controllerAs:"vm"},"ert-analytics":{templateUrl:"/sp/resources/html/spectrum/ert-analytics.html",controllerAs:"vm"},"competency-filter":{templateUrl:"/sp/resources/html/spectrum/competency-filter.html",controllerAs:"vm"},competency:{templateUrl:"/sp/resources/html/spectrum/competency.html",controllerAs:"vm"},"engagement-filter":{templateUrl:"/sp/resources/html/spectrum/engagement-filter.html",controllerAs:"vm"},engagement:{templateUrl:"/sp/resources/html/spectrum/engagement.html",controllerAs:"vm"}}}).state("competencyView",{views:{create:{templateUrl:"/sp/resources/html/sysAdmin/competency/create.html",controllerAs:"vm"},edit:{templateUrl:"/sp/resources/html/sysAdmin/competency/update.html",controllerAs:"vm"},preview:{templateUrl:"/sp/resources/html/sysAdmin/competency/preview.html",controllerAs:"vm"}}}).state("addNoteCompetency",{url:"/addnote",templateUrl:"/sp/resources/html/competency/addNote.html",controllerAs:"vm"}).state("profiles",{url:"/profiles",templateUrl:"/sp/resources/html/competency/competency-details.html",controllerAs:"vm"}).state("members",{url:"/members",templateUrl:"/sp/resources/html/admin/manage-account/home-members.html",controller:"adminMemberController",controllerAs:"ctrl"}).state("groups",{url:"/groups",templateUrl:"/sp/resources/html/admin/manage-account/home-groups.html",controller:"groupListController",controllerAs:"ctrl"}).state("memberDetails",{url:"/memberDetails?email",templateUrl:"/sp/resources/html/admin/manage-account/home-memberDetails.html",controller:"memberDetailsController",controllerAs:"ctrl"}).state("groupMember",{url:"/groupMember?email",templateUrl:"/sp/resources/html/dashboard/home-memberDetails.html",controller:"memberDetailsController",controllerAs:"ctrl"}).state("accountOrganization",{url:"/accountOrganization",templateUrl:"/sp/resources/html/admin/manage-account/account-admin-organization.html",controller:"organizationAccountAdmin",controllerAs:"ctrl"}).state("accountCompetency",{url:"/accountCompetency",templateUrl:"/sp/resources/html/admin/manage-account/account-admin-competency.html",controller:"competencyAccountAdmin",controllerAs:"ctrl"}).state("settings",{url:"/settings",templateUrl:"/sp/resources/html/admin/manage-account/home-settings.html",controller:"manageSettingsController",controllerAs:"ctrl"}).state("SurePeople",{url:"/learningProgramSP",templateUrl:"/sp/resources/html/sysAdmin/organization/home-surepeople.html",controllerAs:"ctrl"}).state("Company",{url:"/learningProgramAP",templateUrl:"/sp/resources/html/sysAdmin/organization/home-company.html",controllerAs:"ctrl"}).state("archives",{url:"/archives",templateUrl:"/sp/resources/html/hiring/home-archives.html",controller:"candidatesListing",controllerAs:"ctrl"}).state("advisor",{url:"/advisor?cemail",templateUrl:"/sp/resources/html/hiring/home-advisor.html",controller:"candidateAdvisorController",controllerAs:"ctrl"}).state("candidateDetails",{url:"/candidateDetails?cemail",templateUrl:"/sp/resources/html/hiring/home-candidateDetails.html",controller:"candidateDetailsController",controllerAs:"ctrl"})}angular.module("spApp").config(routerConfig),routerConfig.$inject=["$stateProvider"];
function paRouteConfig($stateProvider){$stateProvider.state("candidatesModule",{url:"/candidates",template:"<candidates-list url-src='candidates-list.html' active-view='candidatesModule' class='candidates-list-container'></candidates-list>"}).state("employeesModule",{url:"/employees",template:"<employees url-src='employees-list.html' active-view='employeesModule' class='employees-list-container'></employees>"}).state("employeeDetailsModule",{url:"/memberDetail",template:"<employee-detail url-src='employeeDetails-home.html' class='employees-list-container posRel'></employee-detail>"}).state("archiveDetailsModule",{url:"/memberDetail",template:"<employee-detail url-src='archiveDetails-home.html' class='employees-list-container posRel'></employee-detail>"}).state("employeeCompare",{url:"/compare?email",templateUrl:"/sp/resources/html/people-analytics/view/employee-compare.html",controller:"candidateAdvisorController",controllerAs:"ctrl"}).state("groupsPAModule",{url:"/groupsPA",template:"<groups-list url-src='groups-list.html' active-view='groupsPAModule' class='groups-list-container'></groups-list>"}).state("rolesPAModule",{url:"/rolesPA",template:"<roles-list url-src='roles-list.html' active-view='rolesPAModule' class='roles-list-container'></roles-list>"}).state("roleDetails",{url:"/roleDetails?id",template:"<role-details url-src='role-details.html'></role-details>"}).state("archivesPAModule",{url:"/archivesPA",template:"<archives url-src='archives-list.html' active-view='archivesPAModule' class='archives-list-container'></archives>"}).state("settingsPAModule",{url:"/settingsPA",template:"<settings-section active-view='settingsPAModule' url-src='settings-section.html' active-view='settings' class='settings-list-container'></settings-section>"}).state("PersonalityPA",{url:"/PersonalityPA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/personality.html"}).state("ProcessingPA",{url:"/ProcessingPA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/processing.html"}).state("DecisionMakingPA",{url:"/DecisionMakingPA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/decision-making.html"}).state("ConflictManagementPA",{url:"/ConflictManagementPA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/conflict-management.html"}).state("MotivationPA",{url:"/MotivationPA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/motivation.html"}).state("FundamentalNeedsPA",{url:"/FundamentalNeedsPA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/fundamental-needs.html"}).state("LearningStylePA",{url:"/LearningStylePA",templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/view/learning-style.html"}).state("paDashboard",{views:{articles:{templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/dashboard/view/articles.html"},images:{templateUrl:"/sp/resources/html/sysAdmin/peopleAnalytics/dashboard/view/images.html"}}}).state("portrait-listing",{url:"/home",templateUrl:"/sp/resources/html/people-analytics/view/portrait-listing.html"}).state("portrait-compare",{url:"/viewPortrait",templateUrl:"/sp/resources/html/people-analytics/view/portrait-compare.html"})}angular.module("spApp").config(paRouteConfig),paRouteConfig.$inject=["$stateProvider"];
function basicService(ajaxService,sharedProperties,$localStorage,$q){var promise,serviceUrl={allUser:"/sp/allUsers",allGroups:"/sp/admin/group/all",allCompetency:"/sp/admin/competency/getUserCompetency",allOrganization:"/sp/admin/account/actionPlan/getCompanyActionPlans",combinedUserDetail:"/sp/goals/groupView/getMemberLndCompDetails"};this.getAllValidMember=function(){var deferred=$q.defer();if(sharedProperties.getValidUser().length)deferred.resolve(sharedProperties.getValidUser());else{if(promise)return promise;ajaxService.getAjaxResponse({url:serviceUrl.allUser,data:$.param({isAccountAdmin:!0})}).then(function(response){"true"===response.Success?(sharedProperties.setValidUser(response.allMembers),deferred.resolve(response.allMembers)):null!==response.error&&sharedProperties.ajaxError(response.error)})}return promise=deferred.promise},this.getAllGroup=function(callback){sharedProperties.getGroup().length?callback&&callback(sharedProperties.getGroup()):ajaxService.getAjaxResponse({url:serviceUrl.allGroups}).then(function(response){"true"===response.Success?(sharedProperties.setGroup(response.groupInfoList),callback&&callback(response.groupInfoList)):null!==response.error&&sharedProperties.ajaxError(response.error)})},this.getAllCompetency=function(callback){null===sharedProperties.getCompetency()?ajaxService.getAjaxResponse({url:serviceUrl.allCompetency}).then(function(response){"true"===response.Success?(sharedProperties.setCompetency(response),callback&&callback(response)):null!=response.error&&sharedProperties.ajaxError(response.error)}):callback&&callback(sharedProperties.getCompetency())},this.getAllOrganization=function(callback){null===sharedProperties.getOrganization()?ajaxService.getAjaxResponse({url:serviceUrl.allOrganization}).then(function(response){"true"===response.Success?(sharedProperties.setOrganization(response),callback&&callback(response)):null!=response.error&&sharedProperties.ajaxError(response.error)}):callback&&callback(sharedProperties.getOrganization())},this.combinedUserDetail=function(callback){ajaxService.getAjaxResponse({url:serviceUrl.combinedUserDetail}).then(function(response){"true"===response.Success?callback&&callback(response):null!=response.error&&sharedProperties.ajaxError(response.error)})},this.getUserInfo=function(){return $localStorage.get("loggegdInProfile")}}angular.module("spApp").service("basicService",basicService),basicService.$inject=["ajaxService","sharedProperties","$localStorage","$q"];
function ajaxService($http,$q,$rootScope,$filter,$localStorage,$timeout){function getAjaxResponse(options){return void 0===options?void console.log("Please Provide Options to Perform Ajax Request"):$http({method:void 0!==options.method?options.method:"post",url:void 0!==options.url?options.url:"#",data:void 0!==options.data?options.data:"",param:void 0!==options.param?options.param:"",headers:void 0!==options.headers?options.headers:{"Content-Type":"application/x-www-form-urlencoded"},delay:options.delay,maximum:options.maximum,loader:options.loader}).then(handleSuccess,handleError)}function handleError(response){return angular.isObject(response.success)&&response.success?$q.reject(response.data.error):$q.reject("An unknown error occurred.")}function handleSuccess(response){if(null!==response.data&&void 0!==response.data){if(null!==response.data.success&&void 0!==response.data.success)return void 0!==response.data.success.Actions&&updateLocalStorage(response.data.success.Actions),response.data.success;if(null!==response.data.error&&void 0!==response.data.error){if(void 0===response.data.error.DashboardRedirectException)return void 0!==response.data.error.Actions&&updateLocalStorage(response.data.error.Actions),response.data;$timeout(function(){window.location.href="/sp/"},1500)}}return response.data}function updateLocalStorage(Action){void 0!==Action.UpdateNavigation&&($localStorage.set("globalNav",Action.UpdateNavigation),$localStorage.remove("navHtml")),void 0!==Action.UpdatePermission&&$localStorage.set("loggegdInProfile",Action.UpdatePermission),void 0!==Action.UpdateParams&&Action.UpdateParams.doLogout&&(window.location.href="/sp/logout")}return{getAjaxResponse:getAjaxResponse}}function sharedProperties($rootScope,ngDialog,ajaxService,$localStorage,$timeout,localeLang){var objectValue={},resetEmail="",videoUrl=null,member=[],candidates=[],archiveCandidates=[],group=[],companiesList=[],validUser=[],organization=null,competency=null,permissionLevel={prism:!1,blueprint:!1,org:!1,competency:!1,iamaccountadmin:!1,prismLens:!1,relationshipadvisor:!1},notesState={selectedNotesTab:"",referenceObj:null},feedbackObject={devFeedRefId:null,feedParentRefId:null},schedule={title:null,uid:null,actionPlanId:null,actionPlanName:null};return $rootScope.showNotesPanel=!1,{setMember:function(value){member=value},getMember:function(){return member},setValidUser:function(value){validUser=value},getValidUser:function(){return validUser},setCompetency:function(value){competency=value},getCompetency:function(){return competency},setOrganization:function(value){organization=value},getOrganization:function(){return organization},setGroup:function(value){group=value},getGroup:function(){return group},setAllCompaniesList:function(value){companiesList=value},getAllCompaniesList:function(){return companiesList},setObject:function(obj){objectValue=angular.copy(obj)},getObject:function(){return objectValue},setResetEmail:function(val){resetEmail=val},getResetEmail:function(){return resetEmail},spliceIndex:function(parent,searchkey,parentkey){return angular.forEach(parent,function(value,index){value[searchkey]===parentkey&&parent.splice(index,1)}),parent},spilceIndexWithBreak:function(parent,searchkey,parentkey){if(null===parent)return!0;for(var i=0;i<parent.length;i++)if(parent[i][searchkey]===parentkey){parent.splice(i,1);break}return parent},toggleFilterClick:function(event,currentPredicate){var currentElem=$(event.currentTarget);currentElem.data("predicate"),currentElem.find("h4").hasClass("on")||currentElem.hasClass("on")?currentElem.find("h4").hasClass("reverseon")||currentElem.hasClass("reverseon")?(currentElem.find("h4").removeClass("reverseon"),currentElem.removeClass("reverseon")):(currentElem.find("h4").addClass("reverseon"),currentElem.addClass("reverseon")):(currentElem.parent().find(".tog h4").removeClass("on"),currentElem.find("h4").addClass("on"),currentElem.parent().parent().find(".tog h4").removeClass("on reverseon"),currentElem.addClass("on"))},singleElementSearch:function(textVar,parent,num){if(!(void 0!==textVar&&textVar.length>=num))return parent;if("undefined"==typeof key)if(""===angular.lowercase(parent.name)||null===angular.lowercase(parent.name)){if(angular.lowercase(parent.email).indexOf(angular.lowercase(textVar))>-1)return parent}else if(angular.lowercase(parent.email).indexOf(angular.lowercase(textVar))>-1||angular.lowercase(parent.name).indexOf(angular.lowercase(textVar))>-1)return parent},searchModuleName:function(textVar,parent,num,change,key){var type=void 0===change?"email":change;if(textVar.length>=num){for(var copyArray=[],i=0;i<parent.length;i++)void 0===key?""===angular.lowercase(parent[i].name)||null===angular.lowercase(parent[i].name)?angular.lowercase(parent[i][type]).indexOf(angular.lowercase(textVar))>-1&&copyArray.push(parent[i]):(angular.lowercase(parent[i][type]).indexOf(angular.lowercase(textVar))>-1||angular.lowercase(parent[i].name).indexOf(angular.lowercase(textVar))>-1)&&copyArray.push(parent[i]):""===angular.lowercase(parent[i][key].name)||null===angular.lowercase(parent[i][key].name)?angular.lowercase(parent[i][key][type]).indexOf(angular.lowercase(textVar))>-1&&copyArray.push(parent[i]):(angular.lowercase(parent[i][key][type]).indexOf(angular.lowercase(textVar))>-1||angular.lowercase(parent[i][key].name).indexOf(angular.lowercase(textVar))>-1)&&copyArray.push(parent[i]);return copyArray}return parent},getParam:function(param,loc){var url=void 0===loc?location.href:loc,regexS="[\\?&]"+param+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(url);return null==results?null:results[1]},setGetParameter:function(paramName,paramValue){var url=window.location.href,hash=location.hash;if(url=url.replace(hash,""),url.indexOf(paramName+"=")>=0){var prefix=url.substring(0,url.indexOf(paramName)),suffix=url.substring(url.indexOf(paramName));suffix=suffix.substring(suffix.indexOf("=")+1),suffix=suffix.indexOf("&")>=0?suffix.substring(suffix.indexOf("&")):"",url=prefix+paramName+"="+paramValue+suffix}else url.indexOf("?")<0?url+="?"+paramName+"="+paramValue:url+="&"+paramName+"="+paramValue;window.location.href=url+hash},setSwitch:function(param){$rootScope.switchType=param},notification:function(args,userTypeName,disabledName,extra){if($rootScope.notificationList=args,$rootScope.extra=null,$rootScope.userTypeName=void 0===userTypeName?"GenericMessage":userTypeName,void 0===disabledName)$rootScope.disabledName=null,$rootScope.selectedNotification="default";else{if($rootScope.disabledName=disabledName,$rootScope.selectedNotification=disabledName,"ProfileIncomplete"!==disabledName){var comment=$.parseHTML($rootScope.pullInterNationalization("admin.group."+disabledName+".notification.text").replace("$companyName",$localStorage.get("loggegdInProfile").company.name))[0];$rootScope.commentNotification=$(comment).text()}var subBlock=$.parseHTML($rootScope.pullInterNationalization("admin.group."+disabledName+".notification.nosubject"))[0];$rootScope.subBlockNotification=subBlock==="admin.group."+disabledName+".notification.nosubject"?"":$(subBlock).text()}$rootScope.notify=["Profile","Goals","Prism"],angular.isObject(extra)&&($rootScope.extra=extra),ngDialog.open({template:"/sp/notification/email"})},printPdfProfile:function(options){var $getCont=$(options.holder),cssToApply=void 0===options.cssName?"global.min.css":options.cssName,parObj=options.obj;if(!$getCont.length)return!0;var printContents=$getCont.html(),currentPath=window.location.origin,data={content:encodeURIComponent('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script src="//use.typekit.net/ofk8xcu.js"><\/script><script> try {Typekit.load();} catch (e) {}<\/script><link type="text/css" rel="stylesheet" href="'+currentPath+'/resources/css/css-min/bootstrap.min.css"><link type="text/css" rel="stylesheet" href="'+currentPath+"/resources/css/css-min/"+cssToApply+'"></head><body>'+printContents+"</body></html>")};options.extraParam,data.pdfName=options.extraParam,ajaxService.getAjaxResponse({url:options.url,data:$.param(data)}).then(function(response){if("true"===response.Success)$rootScope.$broadcast("pdfGenerated",{obj:parObj,url:response.url});else if(null!==response.error){var errorMessage="",responses=response.error;for(var key in responses)errorMessage=responses[key];$.notify({icon:"glyphicon glyphicon-ban-circle",title:$rootScope.pullInterNationalization("service.growl.alert")+" ",message:errorMessage},{offset:{x:400,y:200},allow_dismiss:!1}),$rootScope.$broadcast("pdfGenerated",parObj),ngDialog.close("ngdialog1")}})},openMediaModal:function(){$rootScope.mediaView="select",ngDialog.open({template:"/sp/resources/html/sysAdmin/media/select-modal.html"}).closePromise.then(function(data){$rootScope.$broadcast("mediaData",$localStorage.get("mediaData")),$localStorage.remove("mediaData")})},videoPopUp:function(url,openId){videoUrl=url;ngDialog.open({template:"/sp/resources/html/common/videoPopUp.html"})},schedulePopUp:function(title,uid,actionPlanId,actionPlanName){schedule.tite=title,schedule.uid=uid,schedule.actionPlanId=actionPlanId,schedule.actionPlanName=actionPlanName;ngDialog.open({template:"/sp/schedulePop",className:$(window).width()>767?"ngdialog-theme-default":"new-mobile-theme"})},getScheduleData:function(){return schedule},getVideoUrl:function(){return videoUrl},fireAnalyticsEvent:function(name,value){var googleDataLayer="dataLayer";void 0!==window[googleDataLayer]&&window[googleDataLayer].push({event:"spAppAnalytics",attributes:{spAction:name,spActionValue:value}})},changeMomentDefaults:function(){moment.relativeTimeThreshold("s",59),moment.relativeTimeThreshold("m",59),moment.relativeTimeThreshold("h",23),moment.relativeTimeThreshold("d",28),moment.relativeTimeThreshold("M",11);var locale=localeLang.getLang(!1);"en-US"===locale?moment.updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}}):"es-LA"===locale&&moment.updateLocale("es",{relativeTime:{future:"in %s",past:"%s",s:"ahora",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1me",MM:"%dme",y:"1año",yy:"%daño"}})},checkPermission:function(){var permissions=$localStorage.get("loggegdInProfile").member.roles;return permissionLevel={prism:-1!==permissions.indexOf("Prism"),blueprint:-1!==permissions.indexOf("Blueprint"),org:-1!==permissions.indexOf("OrganizationPlan"),competency:-1!==permissions.indexOf("Competency"),iamaccountadmin:-1!==permissions.indexOf("AccountAdministrator"),groupLead:-1!==permissions.indexOf("GroupLead"),prismLens:-1!==permissions.indexOf("PrismLens"),relationshipadvisor:-1!==permissions.indexOf("RelationShipAdvisor")}},setContentReference:function(obj){notesState.referenceObj=obj},setSelectedNotesTab:function(tab){notesState.selectedNotesTab=tab,$rootScope.showNotesPanel=!0,$rootScope.selectedNotesTab=tab},getSelectedNotesTab:function(){return notesState},setFeedbackObjectForPanel:function(obj){feedbackObject=obj},getFeedbackObjectForPanel:function(){return feedbackObject},notifyUser:function(titleText,bodyText){var notification=window.Notification||window.mozNotification||window.webkitNotification;if(void 0===notification)return!1;var notify=new notification(titleText,{body:bodyText,dir:"auto",lang:"EN",tag:"uniqueNotify",icon:"/resources/images/sure_people.ico"});return notify.onclick=function(){},notify.onerror=function(){},notify.onshow=function(){},notify.onclose=function(){},!0},is_touch_supported:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},is_iOS_device:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");if(msie>0)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(ua.indexOf("Trident/")>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");return edge>0&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)},mapMediaType:function(type){var mimeType=type.toLowerCase();return"image/png"===mimeType||"image/jpeg"===mimeType||"image/jpg"===mimeType||"image/gif"===mimeType||"image/svg"===mimeType?"IMAGE":"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===mimeType||"application/msword"===mimeType?"MSDOC":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===mimeType||"application/vnd.ms-excel"===mimeType?"MSEXCEL":"application/pdf"===mimeType?"PDF":"application/vnd.ms-powerpoint"===mimeType?"PPT":"video/mp4"===mimeType||"video/mov"===mimeType||"video/avi"===mimeType||"video/flv"===mimeType||"video/mpeg"===mimeType||"video/quicktime"===mimeType?"Video":"Web"},processRatingHex:function(ratingCount,type){var str="";if(void 0!==type&&"minipolls"===type)for(var i=1;i<=ratingCount;i++)str+="★";else for(var j=1;j<=ratingCount;j++)str+="⬢";return str},whiteLabelColorCodes:function(cssName){var element=document.querySelector("."+cssName);return getComputedStyle(element)},provideVendorSpecificLocale:function(vendor){var locale=localeLang.getLang(!1),vendorLocale="";switch(vendor){case"fileStack":"en-US"===locale?vendorLocale="en":"es-LA"===locale&&(vendorLocale="es");break;case"vimeo":"en-US"===locale?vendorLocale="en":"es-LA"===locale&&(vendorLocale="es-419");break;case"datePicker":"en-US"===locale?vendorLocale="en":"es-LA"===locale&&(vendorLocale="es")}return vendorLocale},getUserLocale:function(){return localeLang.getLang(!1)},ajaxError:function(response){var xAxis=window.matchMedia("(min-width: 768px)").matches?400:20,errorMessage="";for(var key in response)errorMessage=response[key];$.notify({icon:"glyphicon glyphicon-ban-circle",message:errorMessage},{offset:{x:xAxis,y:200},allow_dismiss:!1,z_index:10001})},growlMessage:function(gMessage,title,icon){var xAxis=window.matchMedia("(min-width: 768px)").matches?400:20;$.notify({icon:void 0!==icon?icon:"glyphicon glyphicon-ok",title:void 0!==title?title:"",message:void 0!==gMessage?gMessage:"Success"},{offset:{x:xAxis,y:200},allow_dismiss:!1,z_index:10001})},setCandidates:function(value){candidates=value},getCandidates:function(){return candidates},setArchivedCandidates:function(value){archiveCandidates=value},getArchivedCandidates:function(){return archiveCandidates},emitLazy:function(){$timeout(function(){$rootScope.$emit("lazyImg:refresh")},100)},countriesList:function(){if(null!==$localStorage.get("countriesFullList")&&void 0!==$localStorage.get("countriesFullList")&&""!==$localStorage.get("countriesFullList"))return $localStorage.get("countriesFullList");ajaxService.getAjaxResponse({url:"/sp/getCountries?locale="+localeLang.getLang(!1).replace("-","_"),method:"GET"}).then(function(response){if("true"===response.Success)$localStorage.set("countriesFullList",$.parseJSON(response.countries));else if(null!==response.error){var errorMessage="",responses=response.error;for(var key in responses)errorMessage=responses[key];$.notify({icon:"glyphicon glyphicon-ban-circle",title:$rootScope.pullInterNationalization("service.growl.alert")+" ",message:errorMessage},{offset:{x:400,y:200},allow_dismiss:!1})}})},passwordCriterionCheck:function(pwd){var numPatteren=/[0-9]/,lcPatteren=/[a-z]/,ucPatteren=/[A-Z]/,splPatteren=/[-!$%^&*()@#&_+|~=`{}\[\]:";'<>?,.\/]/,numCheck=!1,lcCheck=!1,ucCheck=!1,splCheck=!1,count=0;return count<5&&(numCheck||(numPatteren.test(pwd)?(numCheck=!0,count++):numCheck=!1),lcCheck||(lcPatteren.test(pwd)?(lcCheck=!0,count++):lcCheck=!1),ucCheck||(ucPatteren.test(pwd)?(ucCheck=!0,count++):ucCheck=!1),splCheck||(splPatteren.test(pwd)?(splCheck=!0,count++):splCheck=!1)),count>=4}}}function $localStorage($window){var localStorageOn=!1,$privateMode={};if("localStorage"in window)try{$window.localStorage.setItem("_tmptest","tmpval"),localStorageOn=!0,$window.localStorage.removeItem("_tmptest")}catch(error){localStorageOn=!1}return{isAvailable:function(){return localStorageOn},executeMethod:function(fnSuccess,fnFail){return localStorageOn?fnSuccess&&fnSuccess():fnFail&&fnFail()},remove:function(){if(localStorageOn)for(var j=0;j<arguments.length;j++)$window.localStorage.removeItem(arguments[j]);else for(var i=0;i<arguments.length;i++)arguments[i]in $privateMode&&($privateMode.arguments[i]=null)},flush:function(){return localStorageOn?$window.localStorage.clear():$privateMode={},this},get:function(key){return localStorageOn?$privateMode=JSON.parse($window.localStorage[key]||null):$privateMode[key]||null},set:function(key,value,callback){if(localStorageOn){if(void 0===value)return $localStorage.remove(key);$window.localStorage[key]=JSON.stringify(value)}else $privateMode[key]=value;return"function"==typeof callback&&callback&&callback(),this},redirect:function(url){console.log("url "+url),/firefox/i.test(navigator.userAgent)?(console.log("ff"),history.pushState("","",url),window.location.reload()):window.location.replace(url)}}}angular.module("spApp").config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]),angular.module("spApp").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$location","$injector","$rootScope",function($location,$injector,$rootScope){function startRequest(delay,maximum,loader){requestCount||(startTimeout=setTimeout(function(){$rootScope.$broadcast("httpLoaderStart",loader),endTimeout=setTimeout(function(){requestCount&&(requestCount=0,$rootScope.$broadcast("httpLoaderEnd"))},maximum)},delay)),requestCount++}function endRequest(){requestCount&&(--requestCount||(clearTimeout(startTimeout),clearTimeout(endTimeout),$rootScope.$broadcast("httpLoaderEnd")))}var requestCount=0,startTimeout=0,endTimeout=0;return{request:function(config){return config.timeout=6e4,startRequest(config.delay||500,config.maximum||5e3,config.loader),config.headers["X-Requested-With"]="XMLHttpRequest",config},requestError:function(rejection){return endRequest(),rejection},response:function(response){return endRequest(),response},responseError:function(rejection){return 408===rejection.status||null===rejection.data&&0===rejection.status||-1===rejection.status?(window.location.reload(),!1):(endRequest(),rejection)}}}])}]),angular.module("spApp").service("ajaxService",ajaxService),ajaxService.$inject=["$http","$q","$rootScope","$filter","$localStorage","$timeout"],angular.module("spApp").service("sharedProperties",sharedProperties),sharedProperties.$inject=["$rootScope","ngDialog","ajaxService","$localStorage","$timeout","localeLang"],angular.module("spApp").service("$localStorage",$localStorage),$localStorage.$inject=["$window"];
function eventSourceProvider($rootScope,$localStorage){function initEventSource(){eventSource=new EventSource("/sp/sse/push"),eventSource.onopen=function(){connectionState(!0)},eventSource.onerror=function(){connectionState(!1)},eventSource.onmessage=function(event){var fireEvent=$.parseJSON(event.data);switch(fireEvent.success.actionType){case"DashboardMessage":$rootScope.$broadcast("dashboardMessage",fireEvent.success);break;case"GroupDiscussion":$rootScope.$broadcast("groupDiscussion",fireEvent.success);break;case"PublicChannel":$rootScope.$broadcast("publicChannel",fireEvent.success);break;case"ActionPlan":$rootScope.$broadcast("actionPlanSSE",fireEvent.success);break;case"UpdatePermission":$rootScope.$broadcast("updatePermissionSSE",fireEvent.success);break;case"UpdateNavigation":$rootScope.$broadcast("updateNavigationSSE",fireEvent.success);break;case"NotificationLog":$rootScope.$broadcast("notificationSSE",fireEvent.success);break;case"BadgeCompletion":$rootScope.$broadcast("badgeSSE",fireEvent.success);break;case"Logout":eventSource.close()}};var connectionState=function(flag){if(flag)console.log("Connection Successful");else{console.log("Connection Error"),eventSource.close();getCookie("JSESSIONID")!==$localStorage.get("spSession")&&window.location.reload(),clearTimeout(clearPingFn)}},getCookie=function(cookieName){for(var name=cookieName+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(name))return c.substring(name.length,c.length)}return""}}function closeEventSource(){null!==eventSource&&eventSource.close()}function pingEventSource(){null!==eventSource&&(eventSource.close(),initEventSource()),clearPingFn=setTimeout(pingEventSource,12e4)}var eventSource=null,clearPingFn=null;return pingEventSource(),{initEventSource:initEventSource,closeEventSource:closeEventSource}}angular.module("spApp").factory("eventSourceProvider",eventSourceProvider),eventSourceProvider.$inject=["$rootScope","$localStorage"];
function localeLang($localStorage,$rootScope,ajaxService){function getAcceptLanguages(){if(null===$localStorage.get("loggegdInProfile")){if(Array.isArray(nav.languages))for(i=0;i<nav.languages.length;i++)if((language=nav.languages[i])&&language.length)return mylang=language,-1===supportedLocale.indexOf(mylang)&&(mylang="en_US"),this;for(i=0;i<browserLanguagePropertyKeys.length;i++)if((language=nav[browserLanguagePropertyKeys[i]])&&language.length)return mylang=language,-1===supportedLocale.indexOf(mylang)&&(mylang="en_US"),this}else mylang=$localStorage.get("loggegdInProfile").locale;return this}function getLang(refresh){return""===mylang&&this.getAcceptLanguages().setLang().setCookieLang(),refresh&&$localStorage.flush(),mylang}function setLang(){return document.getElementsByTagName("html")[0].setAttribute("lang",mylang),this}function setCookieLang(){return setCookie("sp-locale",mylang.replace("-","_"),31536e6),this}function compareBrowserLang(){navigator.browserLanguage!==localeLang.getCookie("sp-locale")&&console.log("NOT SAME NOT")}function setCookie(cookieName,cookieValue,days,pathValue){var date,expires;days?(date=new Date,date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toGMTString()):expires="",document.cookie=cookieName+"="+cookieValue+(pathValue||"; Path=/;")+expires}function getCookie(cookieName){for(var name=cookieName+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(name))return c.substring(name.length,c.length)}return""}function changeLang(language){return mylang=language,this}function override(language,reload){this.changeLang(language).setLang().setCookieLang(),reload&&reloadMessages(language)}function reloadMessages(language){$localStorage.flush().redirect(setGetParameter("lang",language.replace("-","_"),!0))}function setGetParameter(paramName,paramValue,local){var url=window.location.href,hash=location.hash;if(url=url.replace(hash,""),url=parameterLogic(paramName,paramValue,url),void 0!==local&&local){return parameterLogic("at",(new Date).getTime(),url)+hash}window.location.href=url+hash}function parameterLogic(paramName,paramValue,url){if(url.indexOf(paramName+"=")>=0){var prefix=url.substring(0,url.indexOf(paramName)),suffix=url.substring(url.indexOf(paramName));suffix=suffix.substring(suffix.indexOf("=")+1),suffix=suffix.indexOf("&")>=0?suffix.substring(suffix.indexOf("&")):"",url=prefix+paramName+"="+paramValue+suffix}else url.indexOf("?")<0?url+="?"+paramName+"="+paramValue:url+="&"+paramName+"="+paramValue;return url}var i,language,nav=window.navigator,browserLanguagePropertyKeys=["language","browserLanguage","systemLanguage","userLanguage"],mylang="",supportedLocale=["en-US","es-LA","en-us","es-la"];return{getAcceptLanguages:getAcceptLanguages,setLang:setLang,getLang:getLang,changeLang:changeLang,setCookieLang:setCookieLang,compareBrowserLang:compareBrowserLang,setCookie:setCookie,getCookie:getCookie,override:override,setGetParameter:setGetParameter,parameterLogic:parameterLogic}}angular.module("spApp").service("localeLang",localeLang),localeLang.$inject=["$localStorage","$rootScope","ajaxService"];