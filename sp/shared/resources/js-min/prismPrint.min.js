/*------------------------------------------------------------------
    Angular App Module Declaration Starts 
  -----------------------------------------------------------------*/

angular
    .module('spApp', ['ui.router', 'ngSanitize', 'ngTagsInput', 'checklist-model', 'ngDialog', 'angucomplete', 'ngAnimate', 'infinite-scroll', 'ui.tinymce', 'angularLazyImg','ui.mention']).config(['lazyImgConfigProvider', function(lazyImgConfigProvider) {
        lazyImgConfigProvider.setOptions({
            offset: 500
        });
    }]);
/*------------------------------------------------------------------
    Angular App Module Declaration Ends 
  -----------------------------------------------------------------*/
angular.module("spApp").run(["$rootScope","$location","ajaxService","sharedProperties","ngDialog","$localStorage","$timeout","localeLang","spConfig",function($rootScope,$location,ajaxService,sharedProperties,ngDialog,$localStorage,$timeout,localeLang,spConfig){"use strict";function hideElement(){loaderObject.removeClass(loaderClass)}$rootScope.Internationalization=[],$rootScope.inviteReady=!1,$rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,$rootScope.fileStackAPIKey="ArRPmifJMQ56HiIYoIf4zz",$rootScope.defaultImage=spConfig.image.default,$rootScope.fireFox=!1,$rootScope.emailRegex=/^[A-Za-z0-9._-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i;var loaderObject=$("#loader").find(".spinner"),loaderClass="selected";if(/firefox/i.test(navigator.userAgent)){var enURL=localeLang.setGetParameter("lang","en_US",!0),esURL=localeLang.setGetParameter("lang","es_LA",!0);$rootScope.enLangURL=localeLang.parameterLogic("clearCache",!0,enURL),$rootScope.esLangURL=localeLang.parameterLogic("clearCache",!0,esURL),sharedProperties.getParam("clearCache")&&($localStorage.flush(),localeLang.override(sharedProperties.getParam("lang"),!1)),$rootScope.fireFox=!0}$rootScope.$watch(function(){return $location.url()},function(a){var newEmail=sharedProperties.getParam("email",a);if($rootScope.noSelf=null===newEmail?"":newEmail,$localStorage.isAvailable()&&null!=$localStorage.get("interNationalization"))$rootScope.Internationalization=$localStorage.get("interNationalization"),$rootScope.inviteReady=!0;else{var options={url:"/sp/messages",data:$.param({url:window.location.pathname,localStorage:$localStorage.isAvailable()})};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success&&$localStorage.set("interNationalization",response,function(){$rootScope.Internationalization=response,$rootScope.inviteReady=!0})})}},!0),$rootScope.pullInterNationalization=function(key,single,mem){return void 0!==single&&"custom"===single?mem+"."+key in $rootScope.Internationalization?$rootScope.Internationalization[mem+"."+key]:key:key in $rootScope.Internationalization?$rootScope.Internationalization[key]:key},$rootScope.callSwitchChange=function(param){sharedProperties.setSwitch(param)},$rootScope.notificationEmailPoP=function(args,type,defaults,params){angular.isArray(args)||(args=args.split(",")),"ASSESSMENT_PENDING"===type||"ASSESSMENT_PROGRESS"===type?type="AssessmentPendingReminder":"PROFILE_INCOMPLETE"===type?(type="ProfileIncompleteReminder",defaults="ProfileIncomplete"):"HiringCandidateReminder"===type?type="HiringCandidateReminder":"HiringCandidateProfileAccess"===type&&(type="HiringCandidateProfileAccess"),$rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,sharedProperties.notification(args,type,defaults,params)},$rootScope.notificatationListName=function(notifyMessage,extra){var headerName;if($rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,$rootScope.selectedNotification=notifyMessage,"ProfileIncomplete"!==notifyMessage){if("learningProgram"===notifyMessage){var comment2=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.text").replace("[Name]",extra.lpName);$("#commentBlock").val(comment2),headerName=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.brandCopy").replace("[Name]",extra.lpName)}else{var comment1=$("<div/>").html($.parseHTML($rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.text").replace("$companyName",$localStorage.get("loggegdInProfile").company.name)));$("#commentBlock").val($(comment1).html()),headerName=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.brandCopy")}$("#headerName").val(headerName);var ctaLabel=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.ctaLabel");ctaLabel==="admin.group."+notifyMessage+".notification.ctaLabel"?$("#ctaLabel").remove():$("#ctaLabel").val(ctaLabel);var ctaUrl=$rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.ctaUrl");ctaUrl==="admin.group."+notifyMessage+".notification.ctaUrl"?$("#ctaUrl").remove():$("#ctaUrl").val(ctaUrl)}var subBlock="learningProgram"===notifyMessage?$.parseHTML($rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.nosubject").replace("[Name]",extra.lpName))[0]:$.parseHTML($rootScope.pullInterNationalization("admin.group."+notifyMessage+".notification.nosubject"))[0],subBlock1=$(subBlock).text();subBlock==="admin.group."+notifyMessage+".notification.nosubject"?$("#subBlock").remove():$("#subBlock").val(subBlock1)},window.addEventListener("popstate",function(e){$("body").hasClass("ngdialog-open")&&ngDialog.close()}),$rootScope.$on("ngDialog.opened",function(e){history.pushState({action:"modal"},"",window.location.href),$("body .sticky-bottom").hide()}),$rootScope.$on("ngDialog.closed",function(e){$("body .sticky-bottom").show()}),$rootScope.$on("httpLoaderStart",function(e,loader){loaderObject=void 0!==loader?loader.obj:$("#loader").find(".spinner"),loaderClass=void 0!==loader?"loading-bar":loaderClass,loaderObject.addClass(loaderClass)}),$rootScope.$on("httpLoaderEnd",hideElement),$rootScope.setBoxSizes=function(c1,c2,h){$(c1).each(function(){var boxes=$(this).find(c2),maxHeight=0;boxes.attr("style",""),maxHeight=Math.max.apply(Math,boxes.map(function(){return $(this).outerHeight()}).get()),"full"===h?boxes.attr("style","").css({height:maxHeight}):boxes.attr("style","").css({"min-height":maxHeight})})},$rootScope.sendNotification=function(form,list,type,mode){function extractEmails(e){var _list=e,emailList=[],counter=0;if($.each(_list,function(i){emailList.push(_list[i].email),counter++}),counter===_list.length)return emailList.toString()}if($rootScope.formSendNotificationError=!1,$rootScope.messageAreaEmpty=!1,void 0!==mode&&($("#subBlock").val($rootScope.subBlockNotification),$("#commentBlock").val($rootScope.commentNotification)),"default"===$rootScope.selectedNotification)return $rootScope.formSendNotificationError=!0,!0;if($("#commentBlock").is(":visible")&&""===$("#commentBlock").val())return $rootScope.messageAreaEmpty=!0,!0;if(form.$valid){var notifyForm=$(".getNotificationForm").serialize(),mList=extractEmails(list),param="";param=angular.isObject($rootScope.extra)?notifyForm+"&type="+type+"&memberList="+mList+"&"+$rootScope.extra.key+"="+$rootScope.extra.id:notifyForm+"&type="+type+"&memberList="+mList;var options={url:"/sp/notifications/sendNotificationWithParams",data:param};ajaxService.getAjaxResponse(options).then(function(response){"true"===response.Success?(ngDialog.close("ngdialog1"),sharedProperties.growlMessage($rootScope.pullInterNationalization("growl.notificationSent")),"FeedbackReminder"===type&&sharedProperties.fireAnalyticsEvent("Prism Lens | Send Feedback Reminder","N/A"),"ProfileIncompleteReminder"===type&&"yes"===mode&&sharedProperties.fireAnalyticsEvent("Manage Account | Send Reminder","Profile Incomplete"),"GenericMessage"===type&&void 0===mode&&void 0!==list&&1===list.length&&sharedProperties.fireAnalyticsEvent("Manage Account | Send Message to single Member","N/A"),"GenericMessage"===type&&void 0===mode&&void 0!==list&&list.length>1&&sharedProperties.fireAnalyticsEvent("Manage Account | Send Message to entire group members","N/A")):null!==response.error&&(ngDialog.close("ngdialog1"),sharedProperties.ajaxError(response.error))})}else $rootScope.formSendNotificationError=!0,$rootScope.messageAreaEmpty=!0},Array.prototype.swapItems=function(a,b){return this[a]=this.splice(b,1,this[a])[0],this},$rootScope.handleStickyTabs=function(type,isFadeInTutorial){$rootScope.$broadcast("stickyOpen"),$(".sticky-tutorial").hide(),void 0!==isFadeInTutorial&&($rootScope.fadeInTutorial=!0),type===$rootScope.selectedNotesTab&&$rootScope.showNotesPanel?($rootScope.selectedNotesTab="",$rootScope.showNotesPanel=!1,$("#notesModal").modal("hide"),$rootScope.$broadcast("modalClosed"),$("body").css("overflow-y","visible"),sharedProperties.is_touch_supported()&&sharedProperties.is_iOS_device()&&($("body").css("position",""),$("body").animate({scrollTop:$("body").scrollTop()},0))):(sharedProperties.setSelectedNotesTab(type),sharedProperties.fireAnalyticsEvent("Sticky Footer | Open Module",type))},$rootScope.displayNotifications=function(){$rootScope.showNotifications=!0},$rootScope.setTutorialObject=function(){$rootScope.$broadcast("stickyOpen"),$(".sticky-tutorial").hide(),$rootScope.showNotesPanel&&($rootScope.showNotesPanel=!1,$("#notesModal").modal("hide"),$rootScope.selectedNotesTab="",$("body").css("overflow-y","visible"),sharedProperties.is_touch_supported()&&sharedProperties.is_iOS_device()&&($("body").css("position",""),$("body").animate({scrollTop:$("body").scrollTop()},0))),null===$localStorage.get("tutorialObj")?ajaxService.getAjaxResponse({url:"/sp/tutorial/get"}).then(function(response){if("true"===response.Success&&void 0!==response.tutorial){$rootScope.tutorialAvailable=!0;var completedPercent=Math.round(parseInt(response.tutorial.completedCount)/parseInt(response.tutorial.actionCount)*100);response.tutorial.completed=completedPercent,$localStorage.set("tutorialObj",response.tutorial),$rootScope.tutorialObj=$localStorage.get("tutorialObj")}else $rootScope.tutorialAvailable=!1}):($rootScope.tutorialObj=$localStorage.get("tutorialObj"),$rootScope.tutorialAvailable=!0)},$rootScope.setContentReferenceForModule=function(obj,type){var tempObj={data:obj,type:type};sharedProperties.setContentReference(tempObj),tempObj=null},$rootScope.redirectReferenceUrl=function(url){null!==url&&(sharedProperties.fireAnalyticsEvent("Notes Module | Reference URL Click",url),window.location.href=url)},$rootScope.handleFileStack=function(flag,supportFlag){if(flag){$("body .sticky-bottom").hide(),filepicker.setKey($rootScope.fileStackAPIKey);var serviceList=["COMPUTER","BOX","DROPBOX","GOOGLE_DRIVE","SKYDRIVE"];supportFlag&&(serviceList=["COMPUTER"]),filepicker.pick({mimetypes:"*/*",container:"modal",services:serviceList,maxSize:10485760,language:sharedProperties.provideVendorSpecificLocale("fileStack")},function(Blob){$("body .sticky-bottom").show();var fileStackObj={fileData:Blob};$rootScope.$broadcast("fileStackSuccessNotes",fileStackObj)},function(FPError){$("body .sticky-bottom").show(),$("body").hasClass("ngdialog-open")&&$(".ngdialog").show()})}},$rootScope.openProfileModal=function(){ngDialog.open({template:spConfig.talentAnalytics.memberService.dialog.openProfileModal})},$rootScope.viewTraitDesc=function(prismSection,id,trait){var aliasPersonalities=["Examiner","Designer","Promoter","Encourager","Innovator","Actuary","Motivator","Supporter","Refiner"],mappedPersonalities={Examiner:"Influencer",Designer:"Pioneer",Promoter:"Connector",Encourager:"Peacemaker",Innovator:"Strategist",Actuary:"Scientist",Motivator:"Catalyst",Supporter:"Ally",Refiner:"Architect"},_trait=-1!==aliasPersonalities.indexOf(trait.trim())?mappedPersonalities[trait.trim()]:trait.trim();$rootScope.traitDesc={section:prismSection,traitName:trait.trim(),trait:_trait.replace(" & ","").replace("_N_",""),id:id},ngDialog.open({template:spConfig.talentAnalytics.idealPortrait.dialog.traitDesc,scope:$rootScope})},jQuery(function($){var gdParam=window.location.hash.substr(2);"/sp/dashboard"!==window.location.pathname&&"/sp/signin"!==window.location.pathname||""===gdParam||$localStorage.set("gdParam",gdParam),null!==sharedProperties.getParam("support_status")&&"Success"===sharedProperties.getParam("support_status")&&(sharedProperties.growlMessage($rootScope.pullInterNationalization("support.alertMsg")),sharedProperties.fireAnalyticsEvent("Sticky Footer | Submit Support Request","N/A"))})}]);
angular.module("spApp").constant("assessmentConfig",{services:{default:{start:"/sp/assessment/start",next:"/sp/assessment/process",previous:"/sp/assessment/previous",redirect:"/sp/assessment/completed"},prismLens:{start:"/sp/assessment360/start/",next:"/sp/assessment360/process/",previous:"/sp/assessment360/previous/",redirect:"/sp/external/thankyou"},candidatesEmployees:{start:"/sp/assessment/start",next:"/sp/assessment/process",previous:"/sp/assessment/previous",redirect:"/sp/thankYou"}},templates:{rank:"/sp/resources/html/assessment/rank.html",whoRu:"/sp/resources/html/assessment/who-ru.html",choose:"/sp/resources/html/assessment/choose.html",mostLeast:"/sp/resources/html/assessment/most-least.html"}}),angular.module("spApp").constant("spConfig",{image:{candidateDefault:"/resources/images/candidateDefault.png",default:"/resources/images/default.png"},nav:{htmlSrc:"/sp/resources/html/common/nav-module.html",fetchNavApi:"/sp/navigation/get",checkErti:"/sp/hiring/companyHasErti"},talentAnalytics:{home:"/sp",images:{relationShip:"/resources/images/bg-4.png",spectrum:"/resources/images/bg-5.jpg",idealPortrait:"/resources/images/bg-5.jpg"},commonService:{sendReminders:"/sp/notifications/sendNotificationWithParams"},groupService:{allGroups:"/sp/hiring/group/getAll",groupDetail:"/sp/hiring/group/get",createGroup:"/sp/hiring/group/create",renameGroup:"/sp/hiring/group/update",deleteGroup:"/sp/hiring/group/delete",getAllMembers:"/sp/hiring/getAllMembers",addUser:"/sp/hiring/group/addUsers",removeUsers:"/sp/hiring/group/removeUsers",getGroupCompare:"/sp/hiring/group/getPortraits",dialog:{deleteGroup:"/sp/resources/html/people-analytics/dialog/groups-delete.html",addMemberModalGroup:"/sp/resources/html/people-analytics/dialog/groups-addMembers.html",removeSingle:"/sp/resources/html/people-analytics/dialog/groups-removeSingle.html",removeMulti:"/sp/resources/html/people-analytics/dialog/groups-removeMultiple.html",deleteSingle:"/sp/resources/html/people-analytics/dialog/members-deleteSingle.html",teamAdvisor:"/sp/resources/html/common/team-advisor.html"}},memberService:{getAll:"/sp/hiring/getAll",add:"/sp/hiring/add",subscriptions:"/sp/hiring/getAvailableSubscriptions",rolesAndTag:"/sp/hiring/getRolesAndTags",isMemberPresent:"/sp/hiring/checkCandidate",delete:"/sp/hiring/delete",getProfileInfo:"/sp/hiring/getProfileDetails",getUserGroups:"/sp/hiring/group/userGroups",archiveUser:"/sp/hiring/archiveUser",addNote:"/sp/hiring/addComment",updateNote:"/sp/hiring/updateComment",removeNote:"/sp/hiring/removeComment",updateProfile:"/sp/hiring/updateProfile",hireCandidate:"/sp/hiring/hireCandidate",profileShareId:"/sp/hiring/getProfileShareId",userShareList:"/sp/hiring/getSharePortraitList",getAllPrismLensRequests:"/sp/hiring/lens/getAllRequests",getPrismLensDetails:"/sp/hiring/lens/get",submitPrismLensFeedbackRequest:"/sp/hiring/lens/create",updateLensProfile:"/sp/hiring/lens/update",deletePrismLensRequest:"/sp/hiring/lens/delete",shareUserProfile:"/sp/hiring/getSharePortraitDetails",deleteShareUser:"/sp/hiring/deleteSharePortrait",archiveProfileDetails:"/sp/hiring/getArchivedUserProfileDetails",referenceSendRequest:"/sp/hiring/lens/sendRequest",addToErti:"/sp/hiring/addToErti",updateUserTags:"/sp/hiring/updateTags",viewLensReportExt:"/sp/hiring/ext/portrait/lens/get",getAllMembers:"/sp/hiring/getAllMembers",addUpdateUrl:"/sp/hiring/addUpdateUrl",removeUrl:"/sp/hiring/removeUrl",getUserRoles:"/sp/hiring/getUserRoles",dialog:{referenceCheck:"/sp/resources/html/people-analytics/dialog/reference-check.html",deleteEmployeeSingle:"/sp/resources/html/people-analytics/dialog/employee-deleteSingle.html",deleteEmployeeMultiple:"/sp/resources/html/people-analytics/dialog/employee-deleteMultiple.html",archiveEmployeeSingle:"/sp/resources/html/people-analytics/dialog/employee-archiveSingle.html",archiveEmployeeMultiple:"/sp/resources/html/people-analytics/dialog/employee-archiveMultiple.html",addRole:"/sp/resources/html/people-analytics/dialog/addRole.html",removeRole:"/sp/resources/html/people-analytics/dialog/removeRole.html",addNote:"/sp/resources/html/people-analytics/dialog/addNote.html",removeUserFromGroup:"/sp/resources/html/people-analytics/dialog/employee-groupRemove.html",hire:"/sp/resources/html/people-analytics/dialog/hire.html",noMember:"/sp/resources/html/people-analytics/dialog/no-members.html",deleteNote:"/sp/resources/html/people-analytics/dialog/delete-note.html",shareUserId:"/sp/resources/html/people-analytics/dialog/share-profile-id.html",shareProfileId:"/sp/resources/html/people-analytics/dialog/share-profile.html",prismLensDelete:"/sp/resources/html/people-analytics/dialog/delete-feedback.html",sendRequestReference:"/sp/resources/html/people-analytics/dialog/invite-reference.html",removePortraitShare:"/sp/resources/html/people-analytics/dialog/removePortraitShare.html",addToErti:"/sp/resources/html/people-analytics/dialog/addToErti.html",updateRefListDialog:"/sp/resources/html/people-analytics/dialog/reference-lens-update.html",requestLens:"/sp/resources/html/people-analytics/dialog/request-lens.html",viewLensReportExt:"/sp/resources/html/people-analytics/dialog/lens-extDetail.html",addRolePortrait:"/sp/resources/html/people-analytics/dialog/addRole-Portrait.html",openProfileModal:"/sp/resources/html/people-analytics/dialog/profile-modal.html",accountsRequest:"/sp/resources/html/people-analytics/dialog/accounts-request.html"}},roles:{getAll:"/sp/hiring/role/getAll",get:"/sp/hiring/role/get",create:"/sp/hiring/role/create",update:"/sp/hiring/role/update",delete:"/sp/hiring/role/delete",assignPortrait:"/sp/hiring/role/assignPortrait",removePortrait:"/sp/hiring/role/removePortrait",add:"/sp/hiring/addRole",remove:"/sp/hiring/removeRole",getUserRolesAndMatch:"/sp/hiring/role/getUserRolesAndMatch",getRolesWithoutPortrait:"/sp/hiring/role/getRolesWithoutPortrait",addUserToRole:"/sp/hiring/role/addToRole",dialog:{delete:"/sp/resources/html/people-analytics/dialog/role-delete.html",removeRole:"/sp/resources/html/people-analytics/dialog/role-remove.html",createRole:"/sp/resources/html/people-analytics/dialog/create-new-role.html",assignPortrait:"/sp/resources/html/people-analytics/dialog/assign-portrait.html",removePortrait:"/sp/resources/html/people-analytics/dialog/remove-portrait.html",rolesCompareOverlay:"/sp/resources/html/people-analytics/roles-compare-overlay.html",addMemberModalGroup:"/sp/resources/html/people-analytics/dialog/roles-addMembers.html"}},archiveService:{getAll:"/sp/hiring/archiveGetAll",delete:"/sp/hiring/deleteArchiveUser",putBack:"/sp/hiring/archivePutBack",dialog:{putBack:"/sp/resources/html/people-analytics/dialog/putBack.html"}},settings:{getCompanyInfo:"/sp/admin/account/getCompanyDetails",getAccountInfo:"/sp/admin/account/businessAccountDetails",updateCompanyInfo:"/sp/admin/account/updateCompany",restrictRA:"/sp/admin/account/restrictRelationshipAdvisor",blockMembers:"/sp/admin/account/blockAllMembers",removeAdmin:"/sp/hiring/removeAdministrator",getAdminMembers:"/sp/hiring/getMembersForAdmin",addAdmin:"/sp/hiring/addAdministrator",transactions:"/sp/admin/account/paymentHistory",deactivateRenewal:"/sp/admin/account/cancel",activateRenewal:"/sp/admin/account/reActivate",enableShare:"/sp/admin/account/enableSharePortrait",getAdminSubscriptions:"/sp/hiring/getAvailableAdminSubscriptions"},idealPortrait:{homePage:"/sp/pa/ideal-portrait#/home",getAll:"/sp/hiring/match/getAll",get:"/sp/hiring/match/get",matchPortrait:"/sp/hiring/match/matchPortrait",dialog:{rolePreview:"/sp/resources/html/people-analytics/dialog/role-info.html",portraitsList:"/sp/resources/html/people-analytics/dialog/portraits-modal.html",requestNewPortrait:"/sp/resources/html/people-analytics/dialog/request-portrait.html",removeRole:"/sp/resources/html/people-analytics/dialog/remove-role-portrait.html",traitDesc:"/sp/resources/html/people-analytics/dialog/trait-descriptions.html"}},dashboard:{getEmployeeCandidateStats:"/sp/hiring/dashboard/getEmployeeCandidateStats",getDashboardSettingsDetail:"/sp/hiring/dashboard/getDashboardSettingsDetail",visitedDashboard:"/sp/hiring/dashboard/visitedDashboard",knowledge:"/sp/trainingLibrary/getArticleDetail/",search:"/sp/resources/html/people-analytics/view/dashboard-search.html",dialog:{knowledge:"/sp/resources/html/people-analytics/dialog/knowledge.html"}}},admin:{talentAnalytics:{idealPortrait:{getAll:"/sp/hiring/admin/match/getAll",get:"/sp/hiring/admin/match/get",create:"/sp/hiring/admin/match/create",update:"/sp/hiring/admin/match/update",delete:"/sp/hiring/admin/match/delete",getCompanies:"/sp/hiring/admin/match/getCompanies",assignPortrait:"/sp/hiring/admin/match/assignPortrait",removePortrait:"/sp/hiring/admin/match/removePortrait",uploadAttachment:"/sp/hiring/admin/match/addDocumentUrl",removeAttachment:"/sp/hiring/admin/match/removeDocumentUrl",dialog:{preview:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/preview.html",delete:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-delete.html",add:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-add.html",addConfirm:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-addConfirm.html",remove:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-remove.html",removeDoc:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/portrait-remove-file.html",setWeight:"/sp/resources/html/sysAdmin/peopleAnalytics/Ideal-Portrait/dialog/setWeight.html"}},dashboard:{getAll:"/sp/sysAdmin/hiring/dashboard/getAll",get:"/sp/sysAdmin/hiring/dashboard/get",create:"/sp/sysAdmin/hiring/dashboard/create",update:"/sp/sysAdmin/hiring/dashboard/update",getAllArticles:"/sp/sysAdmin/learning/getAllArticles",dialog:{selectArticle:"/sp/resources/html/sysAdmin/peopleAnalytics/dashboard/dialog/select-article.html"}}}}}),angular.module("spApp").value("spValue",{Company:"Surepeople",getAllGroups:[],getAllMembersForGroups:[],getAllEmployees:[],getAllCandidates:[],getAllRoles:[],getAllArchive:[],getAllAdminIdealPortrait:[],getAllIdealPortrait:[],getCompaniesIdealPortrait:[],getAllMembers:[]});
function focusIf($timeout){function link($scope,$element,$attrs){function focusFn(condition){condition&&$timeout(function(){dom.focus()},$scope.$eval($attrs.focusDelay)||0)}var dom=$element[0];$attrs.focusIf?$scope.$watch($attrs.focusIf,focusFn):focusFn(!0)}return{restrict:"A",link:link}}function overflowHoverList($timeout,$rootScope){return{restrict:"A",scope:{list:"=list",len:"=length",mLen:"=mlength",msgProps:"=msgprops",ellipsis:"=ellipsis",addCommas:"=addcommas"},link:function(scope,element,attrs){function setupHover(fullList,partialList){moreList=[];for(var i=0;i<fullList.length;i++){-1===$.inArray(fullList[i],partialList)&&moreList.push(fullList[i])}pTag.append('<span class="list-more"> +'+moreList.length+" "+$rootScope.pullInterNationalization("spectrum.more")+"</span>");for(var j=0;j<moreList.length;j++){var cont="manageContent."+moreList[j];void 0!==scope.addCommas?moreWrap.append("<span>"+(void 0!==scope.msgProps?$rootScope.pullInterNationalization(cont):moreList[j])+(j<moreList.length-1?", ":"")+"</span>"):moreWrap.append("<span>"+(void 0!==scope.msgProps?$rootScope.pullInterNationalization(cont):moreList[j])+"</span>")}isTouch?pTag.find(".list-more").off("click").on("click",function(e){moreWrap.hasClass("hide")?(moreWrap.removeClass("hide"),moreWrap.css({top:element[0].querySelector(".list-more").offsetTop+18,left:element[0].querySelector(".list-more").offsetLeft+2})):moreWrap.addClass("hide")}):(pTag.find(".list-more").on("mouseenter",function(){moreWrap.removeClass("hide"),moreWrap.css({top:element[0].querySelector(".list-more").offsetTop+18,left:element[0].querySelector(".list-more").offsetLeft+2})}),pTag.find(".list-more").on("mouseleave",function(){moreWrap.addClass("hide")}))}function appendList(){var len=hoverList.length,limit=$(window).width()>1024?parseInt(scope.len,10):parseInt(scope.mLen,10);selectedList=[],moreWrap.hasClass("hide")||moreWrap.addClass("hide"),pTag.find(".list-more").off("click"),moreWrap.find("span").remove(),pTag.find(".selected-list-name, .elp, .list-more").remove();for(var i=0;i<(len<=limit?len:limit);i++){var cont="manageContent."+hoverList[i];pTag.append('<span class="selected-list-name">'+(void 0!==scope.msgProps?$rootScope.pullInterNationalization(cont):hoverList[i])+(len>1&&i<(len<=limit?len:limit)-1?", ":"")+"</span>"),selectedList.push(hoverList[i])}len>limit&&(void 0===scope.ellipsis&&pTag.append('<span class="elp">...</span>'),setupHover(hoverList,selectedList))}var ele=$(element[0]),pTag=ele.find("p"),moreWrap=ele.find(".more-list-wrapper"),hoverList=[],selectedList=[],isTouch="ontouchstart"in window||navigator.msMaxTouchPoints>0,moreList=[];scope.$watch("list",function(newVal,oldVal){$timeout(function(){hoverList=newVal,selectedList=[],moreList=[],appendList()},200)},!0)}}}function dropToolTip($templateRequest,$compile){return{restrict:"A",link:function($scope,$element,$attrs){$templateRequest("/sp/resources/html/common/tooltip.html").then(function(html){if(""===$attrs.desc)return!0;var user=JSON.parse($attrs.desc),self=user.id!==$attrs.self;$scope.user=user,$scope.self=self;var template=angular.element(html),elem=$compile(template)($scope);Tipped.create($element[0],elem[0],{showDelay:1e3,maxWidth:"220",detach:!0,size:"large",stem:{height:60,width:220}})})}}}function dropToolTiptext($templateRequest,$compile){return{restrict:"A",link:function($scope,$element,$attrs){Tipped.create($element[0],$attrs.desc)}}}function notesOptions($templateRequest,$compile,sharedProperties){return{restrict:"A",link:function($scope,$element,$attrs){$templateRequest("/sp/resources/html/"+$attrs.urlSrc).then(function(html){function handleNotesCallback(event){var method=$element.attr("notes-callback");$scope.$event=event,$scope.$apply(method)}var template=angular.element(html),elem=$compile(template)($scope),styles=$attrs.styles,drop=new Drop({target:$element[0],content:elem[0],position:"bottom left",openOn:"click",remove:!0,classes:void 0!==styles?styles:"notes-options",$scope:$scope});$scope.openNotesPanel=function(tab){sharedProperties.setSelectedNotesTab(tab),sharedProperties.fireAnalyticsEvent("Sticky Footer | Open Module",tab),drop.remove(),$(".drop-element").remove()},$element.bind("touchstart click",handleNotesCallback)})}}}function fileStackModal($compile,$rootScope,sharedProperties){return{restrict:"A",link:function(scope,el,$attrs){function handleFileStack(){$("body .sticky-bottom").hide(),el[0].blur(),filepicker.setKey($rootScope.fileStackAPIKey);var fileDialog=filepicker.pick({mimetypes:"*/*",container:"modal",services:["COMPUTER","BOX","DROPBOX","GOOGLE_DRIVE","SKYDRIVE"],maxSize:10485760,language:sharedProperties.provideVendorSpecificLocale("fileStack")},function(Blob){$("body .sticky-bottom").show();var fileStackObj={recordIndex:recordIndex,fileData:Blob};scope.$broadcast("fileStackSuccess",fileStackObj)},function(FPError){$("body .sticky-bottom").show(),console.log(FPError.toString())});window.addEventListener("popstate",function(e){$("body").find("#filepicker_dialog_container").length&&fileDialog.close()}),history.pushState({state:"filestack"},"",window.location.href)}var overrideStyle=void 0!==$attrs.overrideStyle?$attrs.overrideStyle:"",recordIndex=void 0!==$attrs.recordIndex?$attrs.recordIndex:0,template=(void 0!==$attrs.fsPos&&$attrs.fsPos,'<span class="file-attach icon-file_select sp-icon-color '+overrideStyle+'" data-ng-click="handleFileStack();"></span>'),elem=$compile(template)(scope);$attrs.fsPos?$($attrs.fsPos).append(elem):el.after(elem),elem.bind("touchstart click",handleFileStack)}}}function progressAnimation($timeout,$parse,sharedProperties){return{restrict:"A",scope:{progressGraph:"=progressGraph",observeParam:"@",totalTasks:"=totalTasks",remainingTasks:"=remainingTasks",iconLevel:"=iconLevel"},link:function(scope,el,$attrs){function createProgress(){var totalTasks=scope.totalTasks,remainingTasks=scope.remainingTasks,animationType=$attrs.type,customText=$attrs.customText,showIcon=$attrs.showIcon,iconClass=$attrs.iconClass,overrideIcon=$attrs.overrideIcon,iconLevel=scope.iconLevel,expressions={},uiProgress=$parse($attrs.uiProgress)(scope),optionsAnimation={strokeWidth:10,easing:"easeInOut",duration:1400,color:sharedProperties.whiteLabelColorCodes("sp-icon-color").color,trailColor:"#ccc",trailWidth:10,svgStyle:{width:"100%",height:"100%"},text:{style:{color:"#999",position:"absolute",right:"0",top:"30px",padding:0,margin:0,transform:null},autoStyleContainer:!1},step:function(state,bar){bar.setText(Math.round(100*bar.value())+" %")}},optionsRadial={color:sharedProperties.whiteLabelColorCodes("sp-icon-color").color,strokeWidth:sharedProperties.detectIE()?6:9,trailWidth:3,easing:"easeInOut",trailColor:"#ccc",duration:1400,text:{autoStyleContainer:!1},step:function(state,circle){var value=Math.round(100*circle.value())+"%";void 0!==customText&&(value=customText),0===value||showIcon?circle.setText(""):circle.setText(value)}},percentageVal=parseFloat(remainingTasks/totalTasks);if("radial"===animationType){angular.extend(expressions,optionsRadial,uiProgress),$(el[0]).empty();var radialProgress=new ProgressBar.Circle(el[0],expressions);if(radialProgress.text.style.fontSize=expressions.textFont||"14px",radialProgress.text.style.color=expressions.textColor||"#999",$timeout(function(){radialProgress.animate(percentageVal.toFixed(2)),scope.progressGraph=radialProgress},1e3),showIcon){var iconTarget=el[0].querySelector(".progressbar-text"),iconElement=angular.element(iconTarget);overrideIcon?iconElement.addClass("icon-icon-badge_level"+iconLevel):iconElement.addClass(iconClass)}}else if("linear"===animationType){angular.extend(expressions,optionsAnimation,uiProgress),$(el[0]).empty();var bar=new ProgressBar.Line(el[0],expressions);$timeout(function(){bar.animate(percentageVal.toFixed(2)),scope.progressGraph=bar},500)}}void 0!==$attrs.observeParam?$attrs.$observe("observeParam",function(newValue,oldValue){void 0!==scope.progressGraph&&scope.progressGraph.destroy(),createProgress()},!0):createProgress()}}}function sameAs(){return{require:"ngModel",link:function(scope,elem,attrs,ngModel){function validate(value){var isValid=scope.$eval(attrs.sameAs)===value;return ngModel.$setValidity("same-as",isValid),isValid?value:void 0}ngModel.$parsers.unshift(validate),scope.$watch(attrs.sameAs,function(){ngModel.$setViewValue(ngModel.$viewValue)})}}}function badgeProgress($templateRequest,$compile,$rootScope){return{restrict:"A",link:function($scope,$element,$attrs){function displayBadge(){$templateRequest("/sp/resources/html/"+$attrs.urlSrc).then(function(html){var template=angular.element(html),elem=$compile(template)($scope),styles=$attrs.styles,badge=$attrs.badgeObject,moduleName=$attrs.moduleName;new Drop({target:$element[0],content:elem[0],position:"bottom left",openOn:"click",remove:!0,classes:void 0!==styles?styles:"notes-options",$scope:$scope});$scope.badge=JSON.parse(badge),$scope.badge.module=moduleName,$scope.badge.moduleLabel="Erti"===moduleName?$rootScope.pullInterNationalization("dashboard.erti"):$rootScope.pullInterNationalization("manageAccountContent.organization")})}void 0!==$attrs.badgeObject?$attrs.$observe("badgeObject",function(newValue,oldValue){displayBadge()},!0):displayBadge()}}}angular.module("spApp").directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13!==event.which||event.shiftKey||(scope.$apply(function(){scope.$eval(attrs.ngEnter,{$event:event})}),event.preventDefault())})}}),angular.module("spApp").filter("addEllipsis",["$sce",function($sce){return function(input,number){if(input)return input=input.length>number?input.substring(0,number)+"...":input,input=$sce.trustAsHtml(input)}}]),angular.module("spApp").filter("unique",function(){return function(arr,field){var i,o={},l=arr.length,r=[];for(i=0;i<l;i+=1)o[arr[i][field]]=arr[i];for(i in o)r.push(o[i]);return r}}),angular.module("spApp").directive("autoFocus",function(){return function(scope,element,attr){element[0].focus()}}),angular.module("spApp").directive("focusIf",focusIf),focusIf.$inject=["$timeout"],angular.module("spApp").filter("secureHtml",["$sce",function($sce){return function(input){return $sce.trustAsHtml(input)}}]),angular.module("spApp").filter("secureHtmlAndReplace",["$sce","$localStorage",function($sce,$localStorage){return function(input){if(null===input||void 0===input)return"";var personalityMap=$localStorage.get("loggegdInProfile").member.personalityMap;return input=input.replace("{primaryPersonality}",personalityMap.Primary).replace("{personalityUnderPressure}",personalityMap.UnderPressure),input=$sce.trustAsHtml(input)}}]),angular.module("spApp").filter("replacePlaceholder",["$localStorage",function($localStorage){return function(input){if(null===input||void 0===input)return"";var personalityMap=$localStorage.get("loggegdInProfile").member.personalityMap;return input=input.replace("{primaryPersonality}",personalityMap.Primary).replace("{personalityUnderPressure}",personalityMap.UnderPressure)}}]),angular.module("spApp").directive("dynamicName",["$parse",function($parse){return{restrict:"A",priority:1e4,controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var name=null,updateName=function(){var customIndex=$attrs.dynamicName.search("customIndex"),fixedIndex=$attrs.dynamicName.search("fixedIndex");name=-1!==customIndex?$attrs.dynamicName.replace("customIndex",$scope.customIndex):-1!==fixedIndex?$attrs.dynamicName.replace("fixedIndex",$scope.fixedIndex):$attrs.dynamicName.replace("$index",$scope.$index),$attrs.$set("name",name)};updateName(),$element.removeAttr("data-dynamic-name"),$element.removeAttr("dynamic-name"),$scope.$watch($attrs.updatedIndex,function(newVal,oldVal){newVal!==oldVal&&updateName()})}]}}]),angular.module("spApp").directive("changeName",["$parse",function($parse){return{restrict:"A",priority:1e4,controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var name=$attrs.changeName.replace("$index",$scope.$index).replace("ctrl.currentActionPlan",$scope.ctrl.currentActionPlan).replace("actionList.type",void 0===$scope.actionList?"":$scope.actionList.type).replace("parentIndex",$scope.parentIndex).replace("superIndex",$scope.superIndex).replace("currentIndex",$scope.currentIndex);delete $attrs.changeName,$element.removeAttr("data-change-name"),$element.removeAttr("change-name"),$attrs.$set("name",name)}]}}]),angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function($parse,$compile){function contains(arr,item){if(angular.isArray(arr))for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item))return!0;return!1}function add(arr,item){arr=angular.isArray(arr)?arr:[];for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item))return arr;return arr.push(item),arr}function remove(arr,item){if(angular.isArray(arr))for(var i=0;i<arr.length;i++)if(angular.equals(arr[i],item)){arr.splice(i,1);break}return arr}function postLinkFn(scope,elem,attrs){$compile(elem)(scope);var getter=$parse(attrs.checklistModel),setter=getter.assign,value=$parse(attrs.checklistValue)(scope.$parent);scope.$watch("checked",function(newValue,oldValue){if(newValue!==oldValue){var current=getter(scope.$parent);!0===newValue?setter(scope.$parent,add(current,value)):setter(scope.$parent,remove(current,value))}}),scope.$parent.$watch(attrs.checklistModel,function(newArr,oldArr){scope.checked=contains(newArr,value)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if("INPUT"!==tElement[0].tagName||!tElement.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!tAttrs.checklistValue)throw"You should provide `checklist-value`.";return tElement.removeAttr("checklist-model"),tElement.attr("ng-model","checked"),postLinkFn}}}]),angular.module("spApp").directive("repeatDone",function(){return function(scope,element,attrs){scope.$last&&window.setTimeout(function(){scope.$eval(attrs.repeatDone)},100)}}),angular.module("spApp").filter("thousandSuffix",function(){return function(input,decimals){var exp,suffixes=["k","M","G","T","P","E"];return window.isNaN(input)?null:input<1e3?input:(exp=Math.floor(Math.log(input)/Math.log(1e3)),(input/Math.pow(1e3,exp)).toFixed(decimals)+suffixes[exp-1])}}),angular.module("spApp").directive("imageonload",function(){return{restrict:"A",link:function(scope,element,attrs){element.bind("load",function(){scope.$apply(attrs.imageonload)})}}}),angular.module("spApp").directive("convertToNumber",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(val){return parseInt(val,10)}),ngModel.$formatters.push(function(val){return""+val})}}}),angular.module("spApp").directive("spClickOutside",["$document",function($document){return{restrict:"A",scope:{spCondition:"=",spClickOutside:"="},link:function(scope,element,attrs){var bodyCheck=function(e){element!==e.target&&!element[0].contains(e.target)&&scope.spClickOutside&&(scope.spClickOutside=!1,scope.$apply(scope.spClickOutside),$document.off("click",bodyCheck))};element.bind("click",function(e){e.preventDefault(),scope.spCondition&&(scope.spClickOutside?(scope.spClickOutside=!1,scope.$apply(scope.spClickOutside),$document.off("click",bodyCheck)):(scope.spClickOutside=!0,scope.$apply(scope.spClickOutside),$document.off("click",bodyCheck).on("click",bodyCheck)))})}}}]),angular.module("spApp").directive("overflowHoverList",overflowHoverList),overflowHoverList.$inject=["$timeout","$rootScope"],angular.module("spApp").directive("dropToolTip",dropToolTip),dropToolTip.$inject=["$templateRequest","$compile"],angular.module("spApp").directive("dropToolTiptext",dropToolTiptext),dropToolTiptext.$inject=["$templateRequest","$compile"],angular.module("spApp").directive("notesOptions",notesOptions),notesOptions.$inject=["$templateRequest","$compile","sharedProperties"],angular.module("spApp").filter("spDateFormat",["$filter","$localStorage","sharedProperties",function($filter,$localStorage,sharedProperties){return function(input){if(null===input||void 0===input)return"";var userTimeZone=$localStorage.get("loggegdInProfile").timeZome,year=input[0],month=input[1],day=input[2],hours=input[3],mins=input[4],secs="00";moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker"));var momentDateTime=new Date(year+"/"+month+"/"+day+" "+hours+":"+mins+":"+secs);momentDateTime=moment(momentDateTime).format("YYYY-MM-DD HH:mm:ss");var utcTime=moment.tz(momentDateTime,userTimeZone).toISOString();return moment.utc(utcTime).format("MMM DD, YYYY").toUpperCase()}}]),angular.module("spApp").filter("spTimeUpdate",["$filter","$localStorage","sharedProperties",function($filter,$localStorage,sharedProperties){return function(input){if(null===input||void 0===input||!angular.isArray(input))return!0;if(null!==$localStorage.get("loggegdInProfile")){var userTimeZone=$localStorage.get("loggegdInProfile").timeZome,year=input[0],month=input[1],day=input[2],hours=input[3],mins=input[4],secs=input[5];moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker"));var momentDateTime=new Date(year+"/"+month+"/"+day+" "+hours+":"+mins+":"+secs);return momentDateTime=moment(momentDateTime).format("YYYY-MM-DD HH:mm:ss"),moment.tz(momentDateTime,userTimeZone).fromNow()}}}]),angular.module("spApp").directive("numbersOnly",function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(inputValue){return parseInt(inputValue)<=200&&parseInt(inputValue)>=0?(modelCtrl.$setValidity("numbersOnly",!0),inputValue):(modelCtrl.$setValidity("numbersOnly",!1),modelCtrl.$modelValue)})}}}),angular.module("spApp").filter("htmlLinky",["$sanitize","linkyFilter",function($sanitize,linkyFilter){var ELEMENT_NODE=1,TEXT_NODE=3,linkifiedDOM=document.createElement("div"),inputDOM=document.createElement("div"),linkify=function linkify(startNode){var i,currentNode;for(i=0;i<startNode.childNodes.length;i++)switch(currentNode=startNode.childNodes[i],currentNode.nodeType){case ELEMENT_NODE:linkify(currentNode);break;case TEXT_NODE:var mode=-1!==currentNode.textContent.indexOf(window.location.host)?"_self":"_blank";for(linkifiedDOM.innerHTML=linkyFilter(currentNode.textContent,mode),i+=linkifiedDOM.childNodes.length-1;linkifiedDOM.childNodes.length;)startNode.insertBefore(linkifiedDOM.childNodes[0],currentNode);startNode.removeChild(currentNode)}return startNode};return function(input){return inputDOM.innerHTML=input,linkify(inputDOM).innerHTML}}]),angular.module("spApp").directive("setFocusLast",function(){return{scope:{setFocusLast:"=",setEl:"=",setHeight:"="},link:function(scope,element){var _this=$(element[0]);scope.setFocusLast?window.setTimeout(function(){void 0!==scope.setEl?$(scope.setEl).scrollTop($(scope.setHeight).height()):_this.parent().scrollTop(_this.position().top)},200):void 0!==scope.setEl?$(scope.setEl).scrollTop(0):_this.parent().scrollTop(0)}}}),angular.module("spApp").filter("convertToLink",function(){return function(input){return input&&(input=input.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(url){var full_url=url;return full_url.match("^https?://")||(full_url="http://"+full_url),'<a class="wrap-url" target="_blank" href="'+full_url+'">'+url+"</a>"})),input}}),angular.module("spApp").directive("fileStackModal",fileStackModal),fileStackModal.$inject=["$compile","$rootScope","sharedProperties"],angular.module("spApp").filter("newMediaManagerFilter",function(){return function(items,types,searchText,filterFilter){var filtered=[];return angular.forEach(items,function(item){!1===types.image&&!1===types.pdf&&!1===types.ppt&&!1===types.msdoc&&!1===types.video&&!1===types.web&&!1===types.excel?filtered.push(item):!0===types.image&&"IMAGE"===item.mediaType?filtered.push(item):!0===types.pdf&&"PDF"===item.mediaType?filtered.push(item):!0===types.ppt&&"PPT"===item.mediaType?filtered.push(item):!0===types.msdoc&&"MSDOC"===item.mediaType?filtered.push(item):!0===types.video&&"Video"===item.mediaType?filtered.push(item):!0===types.web&&"Web"===item.mediaType?filtered.push(item):!0===types.excel&&"MSEXCEL"===item.mediaType&&filtered.push(item),""!==searchText&&(filtered=filterFilter(filtered,searchText))}),filtered}}),angular.module("spApp").directive("myMention",["basicService",function(basicService){return{require:"uiMention",link:function($scope,$element,$attrs,uiMention){var choices=null;basicService.getAllValidMember().then(function(response){choices=response}),uiMention.label=function(choice){return choice.name},uiMention.labelWord=function(choice){return choice.firstName},uiMention.findChoices=function(match,mentions){return choices.filter(function(choice){return!mentions.some(function(mention){return mention.id===choice.id})}).filter(function(choice){return-1!==choice.name.toLowerCase().indexOf(match[1].toLowerCase())})},uiMention.encode=function(choice){return'<a href="'+window.location.origin+"/sp/dashboard/profile?userId="+choice.id+'" class="sp-user-tool-tip">'+this.label(choice)+"</a>"}}}}]),angular.module("spApp").filter("spLocaleDate",["sharedProperties",function(sharedProperties){return function(input){if(null===input||void 0===input)return"";var year=input[0],month=input[1],day=input[2];moment.locale(sharedProperties.provideVendorSpecificLocale("datePicker"));var momentDate=new Date(year+"/"+month+"/"+day);return momentDate=moment(momentDate).format("MMM DD, YYYY").toUpperCase()}}]),angular.module("spApp").directive("displayRole",["$compile","$rootScope",function($compile,$rootScope){return{restrict:"A",scope:{displayRole:"=displayRole"},link:function(scope,element,attr){var elem,userRoles=scope.displayRole.roles,complete=[],classTobind=attr.addClass;-1!==userRoles.indexOf("GroupLead")&&complete.push('<span class="thin">'+$rootScope.pullInterNationalization("manageAccountContent.l")+"</span>"),-1!==userRoles.indexOf("AccountAdministrator")&&complete.push('<span class="thin">'+$rootScope.pullInterNationalization("manageAccountContent.admin")+"</span>"),scope.displayRole.deactivated&&complete.push('<span class="thin blocked">'+$rootScope.pullInterNationalization("manageAccountContent.blocked")+"</span>"),complete.length?(elem=$compile(complete.join(""))(scope),element.empty().append(elem),element.addClass(classTobind)):element.removeClass(classTobind)}}}]),angular.module("spApp").directive("progressAnimation",progressAnimation),progressAnimation.$inject=["$timeout","$parse","sharedProperties"],angular.module("spApp").directive("sameAs",sameAs),angular.module("spApp").directive("validationCheck",["$parse",function($parse){return{require:"ngModel",link:function(scope,elm,attrs,ngModel){var check=$parse(attrs.validationCheck);scope.$watch(check,function(newValue){ngModel.$setValidity(attrs.name,newValue)})}}}]),angular.module("spApp").directive("badgeProgress",badgeProgress),badgeProgress.$inject=["$templateRequest","$compile","$rootScope"],angular.module("spApp").filter("unescapeText",function(){return function(text){return unescape(text)}}),angular.module("spApp").filter("replaceName",["$sce",function($sce){return function(text,name){return text=text.replace("[name]",name),text=$sce.trustAsHtml(text)}}]);
function basicService(ajaxService,sharedProperties,$localStorage,$q){var promise,serviceUrl={allUser:"/sp/allUsers",allGroups:"/sp/admin/group/all",allCompetency:"/sp/admin/competency/getUserCompetency",allOrganization:"/sp/admin/account/actionPlan/getCompanyActionPlans",combinedUserDetail:"/sp/goals/groupView/getMemberLndCompDetails"};this.getAllValidMember=function(){var deferred=$q.defer();if(sharedProperties.getValidUser().length)deferred.resolve(sharedProperties.getValidUser());else{if(promise)return promise;ajaxService.getAjaxResponse({url:serviceUrl.allUser,data:$.param({isAccountAdmin:!0})}).then(function(response){"true"===response.Success?(sharedProperties.setValidUser(response.allMembers),deferred.resolve(response.allMembers)):null!==response.error&&sharedProperties.ajaxError(response.error)})}return promise=deferred.promise},this.getAllGroup=function(callback){sharedProperties.getGroup().length?callback&&callback(sharedProperties.getGroup()):ajaxService.getAjaxResponse({url:serviceUrl.allGroups}).then(function(response){"true"===response.Success?(sharedProperties.setGroup(response.groupInfoList),callback&&callback(response.groupInfoList)):null!==response.error&&sharedProperties.ajaxError(response.error)})},this.getAllCompetency=function(callback){null===sharedProperties.getCompetency()?ajaxService.getAjaxResponse({url:serviceUrl.allCompetency}).then(function(response){"true"===response.Success?(sharedProperties.setCompetency(response),callback&&callback(response)):null!=response.error&&sharedProperties.ajaxError(response.error)}):callback&&callback(sharedProperties.getCompetency())},this.getAllOrganization=function(callback){null===sharedProperties.getOrganization()?ajaxService.getAjaxResponse({url:serviceUrl.allOrganization}).then(function(response){"true"===response.Success?(sharedProperties.setOrganization(response),callback&&callback(response)):null!=response.error&&sharedProperties.ajaxError(response.error)}):callback&&callback(sharedProperties.getOrganization())},this.combinedUserDetail=function(callback){ajaxService.getAjaxResponse({url:serviceUrl.combinedUserDetail}).then(function(response){"true"===response.Success?callback&&callback(response):null!=response.error&&sharedProperties.ajaxError(response.error)})},this.getUserInfo=function(){return $localStorage.get("loggegdInProfile")}}angular.module("spApp").service("basicService",basicService),basicService.$inject=["ajaxService","sharedProperties","$localStorage","$q"];
function ajaxService($http,$q,$rootScope,$filter,$localStorage,$timeout){function getAjaxResponse(options){return void 0===options?void console.log("Please Provide Options to Perform Ajax Request"):$http({method:void 0!==options.method?options.method:"post",url:void 0!==options.url?options.url:"#",data:void 0!==options.data?options.data:"",param:void 0!==options.param?options.param:"",headers:void 0!==options.headers?options.headers:{"Content-Type":"application/x-www-form-urlencoded"},delay:options.delay,maximum:options.maximum,loader:options.loader}).then(handleSuccess,handleError)}function handleError(response){return angular.isObject(response.success)&&response.success?$q.reject(response.data.error):$q.reject("An unknown error occurred.")}function handleSuccess(response){if(null!==response.data&&void 0!==response.data){if(null!==response.data.success&&void 0!==response.data.success)return void 0!==response.data.success.Actions&&updateLocalStorage(response.data.success.Actions),response.data.success;if(null!==response.data.error&&void 0!==response.data.error){if(void 0===response.data.error.DashboardRedirectException)return void 0!==response.data.error.Actions&&updateLocalStorage(response.data.error.Actions),response.data;$timeout(function(){window.location.href="/sp/"},1500)}}return response.data}function updateLocalStorage(Action){void 0!==Action.UpdateNavigation&&($localStorage.set("globalNav",Action.UpdateNavigation),$localStorage.remove("navHtml")),void 0!==Action.UpdatePermission&&$localStorage.set("loggegdInProfile",Action.UpdatePermission),void 0!==Action.UpdateParams&&Action.UpdateParams.doLogout&&(window.location.href="/sp/logout")}return{getAjaxResponse:getAjaxResponse}}function sharedProperties($rootScope,ngDialog,ajaxService,$localStorage,$timeout,localeLang){var objectValue={},resetEmail="",videoUrl=null,member=[],candidates=[],archiveCandidates=[],group=[],companiesList=[],validUser=[],organization=null,competency=null,permissionLevel={prism:!1,blueprint:!1,org:!1,competency:!1,iamaccountadmin:!1,prismLens:!1,relationshipadvisor:!1},notesState={selectedNotesTab:"",referenceObj:null},feedbackObject={devFeedRefId:null,feedParentRefId:null},schedule={title:null,uid:null,actionPlanId:null,actionPlanName:null};return $rootScope.showNotesPanel=!1,{setMember:function(value){member=value},getMember:function(){return member},setValidUser:function(value){validUser=value},getValidUser:function(){return validUser},setCompetency:function(value){competency=value},getCompetency:function(){return competency},setOrganization:function(value){organization=value},getOrganization:function(){return organization},setGroup:function(value){group=value},getGroup:function(){return group},setAllCompaniesList:function(value){companiesList=value},getAllCompaniesList:function(){return companiesList},setObject:function(obj){objectValue=angular.copy(obj)},getObject:function(){return objectValue},setResetEmail:function(val){resetEmail=val},getResetEmail:function(){return resetEmail},spliceIndex:function(parent,searchkey,parentkey){return angular.forEach(parent,function(value,index){value[searchkey]===parentkey&&parent.splice(index,1)}),parent},spilceIndexWithBreak:function(parent,searchkey,parentkey){if(null===parent)return!0;for(var i=0;i<parent.length;i++)if(parent[i][searchkey]===parentkey){parent.splice(i,1);break}return parent},toggleFilterClick:function(event,currentPredicate){var currentElem=$(event.currentTarget);currentElem.data("predicate"),currentElem.find("h4").hasClass("on")||currentElem.hasClass("on")?currentElem.find("h4").hasClass("reverseon")||currentElem.hasClass("reverseon")?(currentElem.find("h4").removeClass("reverseon"),currentElem.removeClass("reverseon")):(currentElem.find("h4").addClass("reverseon"),currentElem.addClass("reverseon")):(currentElem.parent().find(".tog h4").removeClass("on"),currentElem.find("h4").addClass("on"),currentElem.parent().parent().find(".tog h4").removeClass("on reverseon"),currentElem.addClass("on"))},singleElementSearch:function(textVar,parent,num){if(!(void 0!==textVar&&textVar.length>=num))return parent;if("undefined"==typeof key)if(""===angular.lowercase(parent.name)||null===angular.lowercase(parent.name)){if(angular.lowercase(parent.email).indexOf(angular.lowercase(textVar))>-1)return parent}else if(angular.lowercase(parent.email).indexOf(angular.lowercase(textVar))>-1||angular.lowercase(parent.name).indexOf(angular.lowercase(textVar))>-1)return parent},searchModuleName:function(textVar,parent,num,change,key){var type=void 0===change?"email":change;if(textVar.length>=num){for(var copyArray=[],i=0;i<parent.length;i++)void 0===key?""===angular.lowercase(parent[i].name)||null===angular.lowercase(parent[i].name)?angular.lowercase(parent[i][type]).indexOf(angular.lowercase(textVar))>-1&&copyArray.push(parent[i]):(angular.lowercase(parent[i][type]).indexOf(angular.lowercase(textVar))>-1||angular.lowercase(parent[i].name).indexOf(angular.lowercase(textVar))>-1)&&copyArray.push(parent[i]):""===angular.lowercase(parent[i][key].name)||null===angular.lowercase(parent[i][key].name)?angular.lowercase(parent[i][key][type]).indexOf(angular.lowercase(textVar))>-1&&copyArray.push(parent[i]):(angular.lowercase(parent[i][key][type]).indexOf(angular.lowercase(textVar))>-1||angular.lowercase(parent[i][key].name).indexOf(angular.lowercase(textVar))>-1)&&copyArray.push(parent[i]);return copyArray}return parent},getParam:function(param,loc){var url=void 0===loc?location.href:loc,regexS="[\\?&]"+param+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(url);return null==results?null:results[1]},setGetParameter:function(paramName,paramValue){var url=window.location.href,hash=location.hash;if(url=url.replace(hash,""),url.indexOf(paramName+"=")>=0){var prefix=url.substring(0,url.indexOf(paramName)),suffix=url.substring(url.indexOf(paramName));suffix=suffix.substring(suffix.indexOf("=")+1),suffix=suffix.indexOf("&")>=0?suffix.substring(suffix.indexOf("&")):"",url=prefix+paramName+"="+paramValue+suffix}else url.indexOf("?")<0?url+="?"+paramName+"="+paramValue:url+="&"+paramName+"="+paramValue;window.location.href=url+hash},setSwitch:function(param){$rootScope.switchType=param},notification:function(args,userTypeName,disabledName,extra){if($rootScope.notificationList=args,$rootScope.extra=null,$rootScope.userTypeName=void 0===userTypeName?"GenericMessage":userTypeName,void 0===disabledName)$rootScope.disabledName=null,$rootScope.selectedNotification="default";else{if($rootScope.disabledName=disabledName,$rootScope.selectedNotification=disabledName,"ProfileIncomplete"!==disabledName){var comment=$.parseHTML($rootScope.pullInterNationalization("admin.group."+disabledName+".notification.text").replace("$companyName",$localStorage.get("loggegdInProfile").company.name))[0];$rootScope.commentNotification=$(comment).text()}var subBlock=$.parseHTML($rootScope.pullInterNationalization("admin.group."+disabledName+".notification.nosubject"))[0];$rootScope.subBlockNotification=subBlock==="admin.group."+disabledName+".notification.nosubject"?"":$(subBlock).text()}$rootScope.notify=["Profile","Goals","Prism"],angular.isObject(extra)&&($rootScope.extra=extra),ngDialog.open({template:"/sp/notification/email"})},printPdfProfile:function(options){var $getCont=$(options.holder),cssToApply=void 0===options.cssName?"global.min.css":options.cssName,parObj=options.obj;if(!$getCont.length)return!0;var printContents=$getCont.html(),currentPath=window.location.origin,data={content:encodeURIComponent('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script src="//use.typekit.net/ofk8xcu.js"><\/script><script> try {Typekit.load();} catch (e) {}<\/script><link type="text/css" rel="stylesheet" href="'+currentPath+'/resources/css/css-min/bootstrap.min.css"><link type="text/css" rel="stylesheet" href="'+currentPath+"/resources/css/css-min/"+cssToApply+'"></head><body>'+printContents+"</body></html>")};options.extraParam,data.pdfName=options.extraParam,ajaxService.getAjaxResponse({url:options.url,data:$.param(data)}).then(function(response){if("true"===response.Success)$rootScope.$broadcast("pdfGenerated",{obj:parObj,url:response.url});else if(null!==response.error){var errorMessage="",responses=response.error;for(var key in responses)errorMessage=responses[key];$.notify({icon:"glyphicon glyphicon-ban-circle",title:$rootScope.pullInterNationalization("service.growl.alert")+" ",message:errorMessage},{offset:{x:400,y:200},allow_dismiss:!1}),$rootScope.$broadcast("pdfGenerated",parObj),ngDialog.close("ngdialog1")}})},openMediaModal:function(){$rootScope.mediaView="select",ngDialog.open({template:"/sp/resources/html/sysAdmin/media/select-modal.html"}).closePromise.then(function(data){$rootScope.$broadcast("mediaData",$localStorage.get("mediaData")),$localStorage.remove("mediaData")})},videoPopUp:function(url,openId){videoUrl=url;ngDialog.open({template:"/sp/resources/html/common/videoPopUp.html"})},schedulePopUp:function(title,uid,actionPlanId,actionPlanName){schedule.tite=title,schedule.uid=uid,schedule.actionPlanId=actionPlanId,schedule.actionPlanName=actionPlanName;ngDialog.open({template:"/sp/schedulePop",className:$(window).width()>767?"ngdialog-theme-default":"new-mobile-theme"})},getScheduleData:function(){return schedule},getVideoUrl:function(){return videoUrl},fireAnalyticsEvent:function(name,value){var googleDataLayer="dataLayer";void 0!==window[googleDataLayer]&&window[googleDataLayer].push({event:"spAppAnalytics",attributes:{spAction:name,spActionValue:value}})},changeMomentDefaults:function(){moment.relativeTimeThreshold("s",59),moment.relativeTimeThreshold("m",59),moment.relativeTimeThreshold("h",23),moment.relativeTimeThreshold("d",28),moment.relativeTimeThreshold("M",11);var locale=localeLang.getLang(!1);"en-US"===locale?moment.updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}}):"es-LA"===locale&&moment.updateLocale("es",{relativeTime:{future:"in %s",past:"%s",s:"ahora",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1me",MM:"%dme",y:"1ao",yy:"%dao"}})},checkPermission:function(){var permissions=$localStorage.get("loggegdInProfile").member.roles;return permissionLevel={prism:-1!==permissions.indexOf("Prism"),blueprint:-1!==permissions.indexOf("Blueprint"),org:-1!==permissions.indexOf("OrganizationPlan"),competency:-1!==permissions.indexOf("Competency"),iamaccountadmin:-1!==permissions.indexOf("AccountAdministrator"),groupLead:-1!==permissions.indexOf("GroupLead"),prismLens:-1!==permissions.indexOf("PrismLens"),relationshipadvisor:-1!==permissions.indexOf("RelationShipAdvisor")}},setContentReference:function(obj){notesState.referenceObj=obj},setSelectedNotesTab:function(tab){notesState.selectedNotesTab=tab,$rootScope.showNotesPanel=!0,$rootScope.selectedNotesTab=tab},getSelectedNotesTab:function(){return notesState},setFeedbackObjectForPanel:function(obj){feedbackObject=obj},getFeedbackObjectForPanel:function(){return feedbackObject},notifyUser:function(titleText,bodyText){var notification=window.Notification||window.mozNotification||window.webkitNotification;if(void 0===notification)return!1;var notify=new notification(titleText,{body:bodyText,dir:"auto",lang:"EN",tag:"uniqueNotify",icon:"/resources/images/sure_people.ico"});return notify.onclick=function(){},notify.onerror=function(){},notify.onshow=function(){},notify.onclose=function(){},!0},is_touch_supported:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},is_iOS_device:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");if(msie>0)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(ua.indexOf("Trident/")>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");return edge>0&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)},mapMediaType:function(type){var mimeType=type.toLowerCase();return"image/png"===mimeType||"image/jpeg"===mimeType||"image/jpg"===mimeType||"image/gif"===mimeType||"image/svg"===mimeType?"IMAGE":"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===mimeType||"application/msword"===mimeType?"MSDOC":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===mimeType||"application/vnd.ms-excel"===mimeType?"MSEXCEL":"application/pdf"===mimeType?"PDF":"application/vnd.ms-powerpoint"===mimeType?"PPT":"video/mp4"===mimeType||"video/mov"===mimeType||"video/avi"===mimeType||"video/flv"===mimeType||"video/mpeg"===mimeType||"video/quicktime"===mimeType?"Video":"Web"},processRatingHex:function(ratingCount,type){var str="";if(void 0!==type&&"minipolls"===type)for(var i=1;i<=ratingCount;i++)str+="";else for(var j=1;j<=ratingCount;j++)str+="";return str},whiteLabelColorCodes:function(cssName){var element=document.querySelector("."+cssName);return getComputedStyle(element)},provideVendorSpecificLocale:function(vendor){var locale=localeLang.getLang(!1),vendorLocale="";switch(vendor){case"fileStack":"en-US"===locale?vendorLocale="en":"es-LA"===locale&&(vendorLocale="es");break;case"vimeo":"en-US"===locale?vendorLocale="en":"es-LA"===locale&&(vendorLocale="es-419");break;case"datePicker":"en-US"===locale?vendorLocale="en":"es-LA"===locale&&(vendorLocale="es")}return vendorLocale},getUserLocale:function(){return localeLang.getLang(!1)},ajaxError:function(response){var xAxis=window.matchMedia("(min-width: 768px)").matches?400:20,errorMessage="";for(var key in response)errorMessage=response[key];$.notify({icon:"glyphicon glyphicon-ban-circle",message:errorMessage},{offset:{x:xAxis,y:200},allow_dismiss:!1,z_index:10001})},growlMessage:function(gMessage,title,icon){var xAxis=window.matchMedia("(min-width: 768px)").matches?400:20;$.notify({icon:void 0!==icon?icon:"glyphicon glyphicon-ok",title:void 0!==title?title:"",message:void 0!==gMessage?gMessage:"Success"},{offset:{x:xAxis,y:200},allow_dismiss:!1,z_index:10001})},setCandidates:function(value){candidates=value},getCandidates:function(){return candidates},setArchivedCandidates:function(value){archiveCandidates=value},getArchivedCandidates:function(){return archiveCandidates},emitLazy:function(){$timeout(function(){$rootScope.$emit("lazyImg:refresh")},100)},countriesList:function(){if(null!==$localStorage.get("countriesFullList")&&void 0!==$localStorage.get("countriesFullList")&&""!==$localStorage.get("countriesFullList"))return $localStorage.get("countriesFullList");ajaxService.getAjaxResponse({url:"/sp/getCountries?locale="+localeLang.getLang(!1).replace("-","_"),method:"GET"}).then(function(response){if("true"===response.Success)$localStorage.set("countriesFullList",$.parseJSON(response.countries));else if(null!==response.error){var errorMessage="",responses=response.error;for(var key in responses)errorMessage=responses[key];$.notify({icon:"glyphicon glyphicon-ban-circle",title:$rootScope.pullInterNationalization("service.growl.alert")+" ",message:errorMessage},{offset:{x:400,y:200},allow_dismiss:!1})}})},passwordCriterionCheck:function(pwd){var numPatteren=/[0-9]/,lcPatteren=/[a-z]/,ucPatteren=/[A-Z]/,splPatteren=/[-!$%^&*()@#&_+|~=`{}\[\]:";'<>?,.\/]/,numCheck=!1,lcCheck=!1,ucCheck=!1,splCheck=!1,count=0;return count<5&&(numCheck||(numPatteren.test(pwd)?(numCheck=!0,count++):numCheck=!1),lcCheck||(lcPatteren.test(pwd)?(lcCheck=!0,count++):lcCheck=!1),ucCheck||(ucPatteren.test(pwd)?(ucCheck=!0,count++):ucCheck=!1),splCheck||(splPatteren.test(pwd)?(splCheck=!0,count++):splCheck=!1)),count>=4}}}function $localStorage($window){var localStorageOn=!1,$privateMode={};if("localStorage"in window)try{$window.localStorage.setItem("_tmptest","tmpval"),localStorageOn=!0,$window.localStorage.removeItem("_tmptest")}catch(error){localStorageOn=!1}return{isAvailable:function(){return localStorageOn},executeMethod:function(fnSuccess,fnFail){return localStorageOn?fnSuccess&&fnSuccess():fnFail&&fnFail()},remove:function(){if(localStorageOn)for(var j=0;j<arguments.length;j++)$window.localStorage.removeItem(arguments[j]);else for(var i=0;i<arguments.length;i++)arguments[i]in $privateMode&&($privateMode.arguments[i]=null)},flush:function(){return localStorageOn?$window.localStorage.clear():$privateMode={},this},get:function(key){return localStorageOn?$privateMode=JSON.parse($window.localStorage[key]||null):$privateMode[key]||null},set:function(key,value,callback){if(localStorageOn){if(void 0===value)return $localStorage.remove(key);$window.localStorage[key]=JSON.stringify(value)}else $privateMode[key]=value;return"function"==typeof callback&&callback&&callback(),this},redirect:function(url){console.log("url "+url),/firefox/i.test(navigator.userAgent)?(console.log("ff"),history.pushState("","",url),window.location.reload()):window.location.replace(url)}}}angular.module("spApp").config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]),angular.module("spApp").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$location","$injector","$rootScope",function($location,$injector,$rootScope){function startRequest(delay,maximum,loader){requestCount||(startTimeout=setTimeout(function(){$rootScope.$broadcast("httpLoaderStart",loader),endTimeout=setTimeout(function(){requestCount&&(requestCount=0,$rootScope.$broadcast("httpLoaderEnd"))},maximum)},delay)),requestCount++}function endRequest(){requestCount&&(--requestCount||(clearTimeout(startTimeout),clearTimeout(endTimeout),$rootScope.$broadcast("httpLoaderEnd")))}var requestCount=0,startTimeout=0,endTimeout=0;return{request:function(config){return config.timeout=6e4,startRequest(config.delay||500,config.maximum||5e3,config.loader),config.headers["X-Requested-With"]="XMLHttpRequest",config},requestError:function(rejection){return endRequest(),rejection},response:function(response){return endRequest(),response},responseError:function(rejection){return 408===rejection.status||null===rejection.data&&0===rejection.status||-1===rejection.status?(window.location.reload(),!1):(endRequest(),rejection)}}}])}]),angular.module("spApp").service("ajaxService",ajaxService),ajaxService.$inject=["$http","$q","$rootScope","$filter","$localStorage","$timeout"],angular.module("spApp").service("sharedProperties",sharedProperties),sharedProperties.$inject=["$rootScope","ngDialog","ajaxService","$localStorage","$timeout","localeLang"],angular.module("spApp").service("$localStorage",$localStorage),$localStorage.$inject=["$window"];
function eventSourceProvider($rootScope,$localStorage){function initEventSource(){eventSource=new EventSource("/sp/sse/push"),eventSource.onopen=function(){connectionState(!0)},eventSource.onerror=function(){connectionState(!1)},eventSource.onmessage=function(event){var fireEvent=$.parseJSON(event.data);switch(fireEvent.success.actionType){case"DashboardMessage":$rootScope.$broadcast("dashboardMessage",fireEvent.success);break;case"GroupDiscussion":$rootScope.$broadcast("groupDiscussion",fireEvent.success);break;case"PublicChannel":$rootScope.$broadcast("publicChannel",fireEvent.success);break;case"ActionPlan":$rootScope.$broadcast("actionPlanSSE",fireEvent.success);break;case"UpdatePermission":$rootScope.$broadcast("updatePermissionSSE",fireEvent.success);break;case"UpdateNavigation":$rootScope.$broadcast("updateNavigationSSE",fireEvent.success);break;case"NotificationLog":$rootScope.$broadcast("notificationSSE",fireEvent.success);break;case"BadgeCompletion":$rootScope.$broadcast("badgeSSE",fireEvent.success);break;case"Logout":eventSource.close()}};var connectionState=function(flag){if(flag)console.log("Connection Successful");else{console.log("Connection Error"),eventSource.close();getCookie("JSESSIONID")!==$localStorage.get("spSession")&&window.location.reload(),clearTimeout(clearPingFn)}},getCookie=function(cookieName){for(var name=cookieName+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(name))return c.substring(name.length,c.length)}return""}}function closeEventSource(){null!==eventSource&&eventSource.close()}function pingEventSource(){null!==eventSource&&(eventSource.close(),initEventSource()),clearPingFn=setTimeout(pingEventSource,12e4)}var eventSource=null,clearPingFn=null;return pingEventSource(),{initEventSource:initEventSource,closeEventSource:closeEventSource}}angular.module("spApp").factory("eventSourceProvider",eventSourceProvider),eventSourceProvider.$inject=["$rootScope","$localStorage"];
function localeLang($localStorage,$rootScope,ajaxService){function getAcceptLanguages(){if(null===$localStorage.get("loggegdInProfile")){if(Array.isArray(nav.languages))for(i=0;i<nav.languages.length;i++)if((language=nav.languages[i])&&language.length)return mylang=language,-1===supportedLocale.indexOf(mylang)&&(mylang="en_US"),this;for(i=0;i<browserLanguagePropertyKeys.length;i++)if((language=nav[browserLanguagePropertyKeys[i]])&&language.length)return mylang=language,-1===supportedLocale.indexOf(mylang)&&(mylang="en_US"),this}else mylang=$localStorage.get("loggegdInProfile").locale;return this}function getLang(refresh){return""===mylang&&this.getAcceptLanguages().setLang().setCookieLang(),refresh&&$localStorage.flush(),mylang}function setLang(){return document.getElementsByTagName("html")[0].setAttribute("lang",mylang),this}function setCookieLang(){return setCookie("sp-locale",mylang.replace("-","_"),31536e6),this}function compareBrowserLang(){navigator.browserLanguage!==localeLang.getCookie("sp-locale")&&console.log("NOT SAME NOT")}function setCookie(cookieName,cookieValue,days,pathValue){var date,expires;days?(date=new Date,date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toGMTString()):expires="",document.cookie=cookieName+"="+cookieValue+(pathValue||"; Path=/;")+expires}function getCookie(cookieName){for(var name=cookieName+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(name))return c.substring(name.length,c.length)}return""}function changeLang(language){return mylang=language,this}function override(language,reload){this.changeLang(language).setLang().setCookieLang(),reload&&reloadMessages(language)}function reloadMessages(language){$localStorage.flush().redirect(setGetParameter("lang",language.replace("-","_"),!0))}function setGetParameter(paramName,paramValue,local){var url=window.location.href,hash=location.hash;if(url=url.replace(hash,""),url=parameterLogic(paramName,paramValue,url),void 0!==local&&local){return parameterLogic("at",(new Date).getTime(),url)+hash}window.location.href=url+hash}function parameterLogic(paramName,paramValue,url){if(url.indexOf(paramName+"=")>=0){var prefix=url.substring(0,url.indexOf(paramName)),suffix=url.substring(url.indexOf(paramName));suffix=suffix.substring(suffix.indexOf("=")+1),suffix=suffix.indexOf("&")>=0?suffix.substring(suffix.indexOf("&")):"",url=prefix+paramName+"="+paramValue+suffix}else url.indexOf("?")<0?url+="?"+paramName+"="+paramValue:url+="&"+paramName+"="+paramValue;return url}var i,language,nav=window.navigator,browserLanguagePropertyKeys=["language","browserLanguage","systemLanguage","userLanguage"],mylang="",supportedLocale=["en-US","es-LA","en-us","es-la"];return{getAcceptLanguages:getAcceptLanguages,setLang:setLang,getLang:getLang,changeLang:changeLang,setCookieLang:setCookieLang,compareBrowserLang:compareBrowserLang,setCookie:setCookie,getCookie:getCookie,override:override,setGetParameter:setGetParameter,parameterLogic:parameterLogic}}angular.module("spApp").service("localeLang",localeLang),localeLang.$inject=["$localStorage","$rootScope","ajaxService"];
function siteHeaderController($scope,$rootScope,ajaxService,$localStorage,eventSourceProvider,$timeout,sharedProperties,localeLang){$scope.userProfile={},$scope.selectedLang=localeLang.getCookie("sp-locale")||localeLang.getLang(!0).replace("-","_"),localeLang.override($scope.selectedLang.replace("_","-"),!1),sharedProperties.countriesList(),$scope.updateLang=function(param){localeLang.override(param,!0)},$scope.getProfileInfo=function(){this.getUserProfile=function(){ajaxService.getAjaxResponse({url:"/sp/signedIn/getProfile"}).then(function(response){if("true"===response.Success){$scope.userProfile=response.member;var userRoles=$scope.userProfile.roles;$rootScope.isSuperAdmin=-1!==userRoles.indexOf("SuperAdministrator"),$localStorage.set("loggegdInProfile",response),$rootScope.$broadcast("profileCreated"),$scope.headerFn.welcomeConsole($localStorage.get("loggegdInProfile").member.name),$rootScope.profileReady=!0,$localStorage.set("spSession",localeLang.getCookie("JSESSIONID"));var userCookie={};userCookie.uid=response.member.id,userCookie.cid=response.member.companyId,localeLang.setCookie("udata",JSON.stringify(userCookie),14,";path=/; domain=.surepeople.com")}})},this.welcomeConsole=function(name){-1!==navigator.userAgent.indexOf("Firefox")?console.log("\nWelcome %s to SUREPEOPLE\nLearn about our intelligent learning, development and hiring platform that drives performance and innovation for companies worldwide.\n",name):console.log("%cWelcome %s to SUREPEOPLE\n%c\nLearn about our intelligent learning, development and hiring platform that drives performance and innovation for companies worldwide.\n","color: #ff6633; font-size: 24px",name,"color: black; font-size: 18px")},this.init=function(){if(this.localstorageCheck("loggegdInProfile"))this.getUserProfile();else{var storedProfile=$localStorage.get("loggegdInProfile");$scope.userProfile=storedProfile.member,$rootScope.profileReady=!0;var userRoles=$scope.userProfile.roles;$rootScope.isSuperAdmin=-1!==userRoles.indexOf("SuperAdministrator"),this.welcomeConsole(storedProfile.member.name)}},this.localstorageCheck=function(key){return null===$localStorage.get(key)}},function(){$scope.headerFn=new $scope.getProfileInfo,$scope.headerFn.init();var receiveProfileData=$scope.$on("profileCreated",function(){receiveProfileData(),null===window.sessionStorage.getItem("loggedIn")&&$scope.selectedLang.toLowerCase()!==$localStorage.get("loggegdInProfile").locale.toLowerCase()&&(localeLang.override($localStorage.get("loggegdInProfile").locale,!0),window.sessionStorage.setItem("loggedIn",!0))})}()}angular.module("spApp").controller("siteHeaderController",siteHeaderController),siteHeaderController.$inject=["$scope","$rootScope","ajaxService","$localStorage","eventSourceProvider","$timeout","sharedProperties","localeLang"];