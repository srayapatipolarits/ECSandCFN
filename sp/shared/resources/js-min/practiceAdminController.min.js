function practiceAdminController($scope,ajaxService,$localStorage,sharedProperties,$filter,$rootScope,ngDialog,$element){function getPracticeGoal(){ajaxService.getAjaxResponse({url:vm.config.practiceArea}).then(function(response){"true"===response.Success?null===sharedProperties.getParam("goalId")?(vm.masterpracticeAreaAvailable=response.pratcieAreas,vm.returnMemberList(vm.pageSetting.pageSize)):vm.viewDetail(response.pratcieAreas):null!==response.error&&sharedProperties.ajaxError(response.error)})}function viewDetailStart(){null!==$localStorage.get("viewDetailAdmin")?(vm.viewPracticeAreaDetail=$localStorage.get("viewDetailAdmin"),vm.originalViewDetail=angular.copy(vm.viewPracticeAreaDetail)):vm.getPracticeGoal()}function viewDetail(reponse){for(var goalId=sharedProperties.getParam("goalId"),i=0;i<reponse.length;i++)if(reponse[i].id===goalId){vm.viewPracticeAreaDetail=reponse[i];break}vm.originalViewDetail=angular.copy(vm.viewPracticeAreaDetail)}function addStrategy(param){for(var copyArray=vm.viewPracticeAreaDetail.developmentStrategyList,i=0;i<param;i++)copyArray.push({id:vm.viewPracticeAreaDetail.developmentStrategyList.length-parseInt(1,10).toString(),dsDescription:null,videoUrl:null,imageUrl:null,active:!0});vm.viewPracticeAreaDetail.developmentStrategyList=angular.copy(copyArray),vm.viewDetailForm.submitted=!1}function returnMemberList(pageSize){if(!vm.masterpracticeAreaAvailable.length)return!0;vm.pageSetting.pageSize=pageSize,pageSize>=vm.masterpracticeAreaAvailable.length&&(vm.pageSetting.disabledInfinite=!0,vm.pageSetting.pageSize=vm.masterpracticeAreaAvailable.length),vm.practiceAreaAvailable=sharedProperties.searchModuleName(vm.pageSetting.textSearching,vm.masterpracticeAreaAvailable,2,"name"),vm.order(vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse)}function order(predicate,reverse){vm.pageSetting.lastPredicate=predicate,vm.pageSetting.lastReverse=reverse,vm.practiceAreaAvailable=$filter("orderBy")(vm.practiceAreaAvailable,predicate,reverse)}function resetfilter(){vm.pageSetting=angular.copy(vm.originalPageSetting),vm.returnMemberList(vm.pageSetting.pageSize);var curr=$(".memberHolder");curr.find(".heading h4").removeClass("reverseon").removeClass("on"),curr.find(".heading h4:eq(0)").addClass("on")}function searchTextFilter(search){vm.pageSetting.textSearching=search,vm.returnMemberList(vm.pageSetting.pageSize)}function clearSearch(){vm.pageSetting.textSearching.length&&(vm.pageSetting.textSearching="",vm.pageSetting.searchText="",vm.returnMemberList(vm.pageSetting.pageSize))}function active(event,setting){vm.pageSetting.lastPredicate=setting.predicate,vm.pageSetting.lastReverse=setting.reverse,sharedProperties.toggleFilterClick(event,vm.pageSetting.lastPredicate),vm.order(vm.pageSetting.lastPredicate,vm.pageSetting.lastReverse)}function deleteConfirm(id){vm.goalId=id,ngDialog.open({template:"/sp/resources/html/sysAdmin/goals/deleteConfirmation.html",scope:$scope}).closePromise.then(function(data){vm.goalId=""})}function accountStatus(goalIds,status){ajaxService.getAjaxResponse({url:vm.config.actdeactivate,data:$.param({practiceAreaId:goalIds,status:status})}).then(function(response){if("true"===response.Success){for(var i=0;i<vm.practiceAreaAvailable.length;i++)if(vm.practiceAreaAvailable[i].id===goalIds){vm.practiceAreaAvailable[i].status="INACTIVE"===status?"INACTIVE":"ACTIVE";break}sharedProperties.growlMessage("INACTIVE"===status?$rootScope.pullInterNationalization("practiceAreaAdmin.deactive"):$rootScope.pullInterNationalization("practiceAreaAdmin.active")),ngDialog.close("ngdialog1"),vm.goalId=""}else null!==response.error&&(ngDialog.close("ngdialog1"),vm.goalId="",sharedProperties.ajaxError(response.error))})}function updateViewDetail(){if(vm.viewDetailForm.$valid)ajaxService.getAjaxResponse({url:vm.config.updatePracticeArea,data:$("form").serialize()+"&practiceAreaId="+vm.viewPracticeAreaDetail.id}).then(function(response){"true"===response.Success?(vm.detailsEditing.status=!1,$localStorage.set("practiceAdminArea",$rootScope.pullInterNationalization("practiceAreaAdmin.paUpdated")),vm.returnToListing()):null!==response.error&&sharedProperties.ajaxError(response.error)});else{vm.viewDetailForm.submitted=!0;var elem=angular.element($element);$("html,body").animate({scrollTop:$(elem).find("form .ng-invalid:first").offset().top-20},300)}}function returnToOldState(){vm.viewPracticeAreaDetail=angular.copy(vm.originalViewDetail),vm.detailsEditing.status=!1,$("html,body").animate({scrollTop:$(".container").offset().top-20},300)}function createViewDetail(){if(vm.viewDetailForm.$valid)ajaxService.getAjaxResponse({url:vm.config.createPracticeArea,data:$("form").serialize()}).then(function(response){"true"===response.Success?($localStorage.set("practiceAdminArea",$rootScope.pullInterNationalization("practiceAreaAdmin.paUpdated")),vm.returnToListing()):null!==response.error&&sharedProperties.ajaxError(response.error)});else{vm.viewDetailForm.submitted=!0;var elem=angular.element($element);$("html,body").animate({scrollTop:$(elem).find("form .ng-invalid:first").offset().top-20},300)}}function returnToListing(){window.location.href="/sp/sysAdmin/practiceArea/practiceAdminArea"}function localStore(list){$localStorage.set("viewDetailAdmin",list),window.location.href="/sp/sysAdmin/practiceArea/practiceAreaViewDetail?goalId="+list.id}function editEnable(){vm.detailsEditing.status=!0,$("html,body").animate({scrollTop:$("form").offset().top-20},300)}function selectImage(action){$rootScope.showMediaManager=!0;var destroyRoot=$scope.$on("mediaData",function(e,data){if(destroyRoot(),null===data)return!0;action.imageUrl=data.url})}var vm=this;vm.config={practiceArea:"/sp/sysAdmin/practiceArea/getAll",actdeactivate:"/sp/sysAdmin/practiceArea/activateDeactivate",updatePracticeArea:"/sp/sysAdmin/practiceArea/update",createPracticeArea:"/sp/sysAdmin/practiceArea/create"},vm.practiceAreaAvailable=[],vm.masterpracticeAreaAvailable=[],vm.viewPracticeAreaDetail={developmentStrategyList:[]},vm.resetfilter=resetfilter,vm.pageSetting={searchText:"",textSearching:"",pageSize:20,disabledInfinite:!1,lastPredicate:"name",lastReverse:!1},vm.originalPageSetting=angular.copy(vm.pageSetting),vm.goalId=null,vm.getPracticeGoal=getPracticeGoal,vm.searchTextFilter=searchTextFilter,vm.returnMemberList=returnMemberList,vm.clearSearch=clearSearch,vm.active=active,vm.deleteConfirm=deleteConfirm,vm.accountStatus=accountStatus,vm.order=order,vm.originalViewDetail=null,vm.detailsEditing={status:!1},vm.viewDetailForm={submitted:!1},vm.pat=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/,vm.viewDetail=viewDetail,vm.addStrategy=addStrategy,vm.updateViewDetail=updateViewDetail,vm.returnToOldState=returnToOldState,vm.createViewDetail=createViewDetail,vm.returnToListing=returnToListing,vm.localStore=localStore,vm.viewDetailStart=viewDetailStart,vm.editEnable=editEnable,vm.selectImage=selectImage,function(){null!==$localStorage.get("practiceAdminArea")&&sharedProperties.growlMessage($localStorage.get("practiceAdminArea")),$localStorage.remove("practiceAdminArea")}()}angular.module("spApp").controller("practiceAdminController",practiceAdminController),practiceAdminController.$inject=["$scope","ajaxService","$localStorage","sharedProperties","$filter","$rootScope","ngDialog","$element"];