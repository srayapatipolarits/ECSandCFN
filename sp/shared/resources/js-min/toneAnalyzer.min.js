function toneAnalyzer($scope,ajaxService,ngDialog,$localStorage,sharedProperties,$filter,$rootScope,$timeout,$q){function getAllToneAnalysisData(){var companyId=sharedProperties.getParam("id");null!==companyId&&null!==$localStorage.get("cname")?ajaxService.getAjaxResponse({url:self.serviceApis.getAllData,data:$.param({companyId:companyId})}).then(function(response){"true"===response.Success?(self.responseAvailable=!0,self.toneAnalysisAgg=response.toneAnalysisAgg,self.activeCompany=$localStorage.get("cname"),processCompanyData()):null!==response.error&&sharedProperties.ajaxError(response.error)}):window.location.href="/sp/sysAdmin/toneAnalyze/home"}function getUserAnalysis(id,name){ajaxService.getAjaxResponse({url:self.serviceApis.getUserSpecificData,data:$.param({userId:id})}).then(function(response){if("true"===response.Success){self.responseAvailableForModal=!0,self.activeUser=name,self.toneAnalysisDetails=response.toneAnalysisDetails;ngDialog.open({template:"/sp/resources/html/sysAdmin/toneAnalyzer/user-analysis.html",scope:$scope}).closePromise.then(function(data){self.responseAvailableForModal=!1,self.searchModalText=""})}else null!==response.error&&sharedProperties.ajaxError(response.error)})}function redirectToHome(){$localStorage.remove("cname"),window.location.href="/sp/sysAdmin/toneAnalyze/home"}function order(predicate,reverse){self.lastPredicate=predicate,self.lastReverse=reverse,self.toneAnalysisAgg=$filter("orderBy")(self.toneAnalysisAgg,predicate,reverse)}function orderModal(predicate,reverse){self.lastPredicate=predicate,self.lastReverse=reverse,self.toneAnalysisDetails=$filter("orderBy")(self.toneAnalysisDetails,predicate,reverse)}function active(event){sharedProperties.toggleFilterClick(event,$scope.currentPredicate)}var self=this;self.serviceApis={getAllData:"/sp/toneAnalysis/getAll",getUserSpecificData:"/sp/toneAnalysis/getAllUserToneAnalysis"},self.toneAnalysisAgg=[],self.toneAnalysisDetails=[],self.searchText="",self.searchModalText="",self.responseAvailable=!1,self.responseAvailableForModal=!1,self.activeUser="",self.activeCompany="",self.lastPredicate="name",self.lastReverse=!1,self.companyAnalysis={},self.getAllToneAnalysisData=getAllToneAnalysisData,self.getUserAnalysis=getUserAnalysis,self.redirectToHome=redirectToHome,self.order=order,self.orderModal=orderModal,self.active=active;var processCompanyData=function(){if(self.toneAnalysisAgg.length){for(var anger=0,disgust=0,fear=0,joy=0,sadness=0,analytical=0,confident=0,tentative=0,openness=0,conscientiousness=0,extraversion=0,agreeableness=0,emotionalRange=0,totalData=self.toneAnalysisAgg.length,i=0;i<totalData;i++)anger+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Anger?self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Anger:0,disgust+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Disgust?self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Disgust:0,fear+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Fear?self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Fear:0,joy+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Joy?self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Joy:0,sadness+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Sadness?self.toneAnalysisAgg[i].aggregateAnalysis.emotion.Sadness:0,analytical+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.languageStyle.Analytical?self.toneAnalysisAgg[i].aggregateAnalysis.languageStyle.Analytical:0,confident+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.languageStyle.Confident?self.toneAnalysisAgg[i].aggregateAnalysis.languageStyle.Confident:0,tentative+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.languageStyle.Tentative?self.toneAnalysisAgg[i].aggregateAnalysis.languageStyle.Tentative:0,openness+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Openness?self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Openness:0,conscientiousness+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Conscientiousness?self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Conscientiousness:0,extraversion+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Extraversion?self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Extraversion:0,agreeableness+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Agreeableness?self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.Agreeableness:0,emotionalRange+=void 0!==self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.EmotionalRange?self.toneAnalysisAgg[i].aggregateAnalysis.socialTendencies.EmotionalRange:0;self.companyAnalysis.Anger=anger/totalData,self.companyAnalysis.Disgust=disgust/totalData,self.companyAnalysis.Fear=fear/totalData,self.companyAnalysis.Joy=joy/totalData,self.companyAnalysis.Sadness=sadness/totalData,self.companyAnalysis.Analytical=analytical/totalData,self.companyAnalysis.Confident=confident/totalData,self.companyAnalysis.Tentative=tentative/totalData,self.companyAnalysis.Openness=openness/totalData,self.companyAnalysis.Conscientiousness=conscientiousness/totalData,self.companyAnalysis.Extraversion=extraversion/totalData,self.companyAnalysis.Agreeableness=agreeableness/totalData,self.companyAnalysis.EmotionalRange=emotionalRange/totalData}}}angular.module("spApp").controller("toneAnalyzer",toneAnalyzer),toneAnalyzer.$inject=["$scope","ajaxService","ngDialog","$localStorage","sharedProperties","$filter","$rootScope","$timeout","$q"];