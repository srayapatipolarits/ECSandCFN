function adminLibraryHomeController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.libraryHomeList=[],a.getAllError=!1,a.searchTag=[],a.pageSize=10,a.statusInclude=[],a.textSearching="",a.intialPageSize=10,a.load=!0,a.getLibraryHomeList=function(){e.getAjaxResponse({url:"/sp/sysAdmin/library/getAll"}).then(function(b){if("true"===b.Success)a.getAllError=!1,a.libraryHomeList=b.company,a.returnMemberList(a.pageSize),n.set("companyLibraryHomeList",a.libraryHomeList);else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){if(a.searchTag.length&&!a.statusInclude.length&&(a.libraryHomeList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.libraryHomeList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.libraryHomeList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.libraryHomeList=angular.copy(a.libraryHomeList)),a.pageSize=b,b>=a.libraryHomeList.length&&(a.disabledInfinite=!0,a.pageSize=a.libraryHomeList.length),a.load&&(a.lastPredicate="name",a.lastReverse=!1,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.libraryHomeList=a.libraryHomeList},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.libraryHomeList=i("orderBy")(a.libraryHomeList,b,c)},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof this.selectedSearch&&(this.selectedSearch.userStatusFormatted="",this.selectedSearch.hiringRoles=""),a.libraryHomeList=angular.copy(a.libraryHomeList),"undefined"!=typeof b&&(a.pageSize=a.libraryHomeList.length),angular.element($(".tags").find("input")).scope().newTag.text="",a.load=!0,a.disabledInfinite=!1,m.$broadcast("$scrollStart"),a.returnMemberList(a.pageSize);var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.updateStatusError=!1,a.deleteCompanyLibraryInfo=function(b){e.getAjaxResponse({url:"/sp/sysAdmin/library/delete",data:$.param({companyId:b})}).then(function(b){if("true"===b.Success)a.updateStatusError=!1,j.close("ngdialog1"),a.getLibraryHomeList(),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Record</strong>",message:" deleted successfully"});else{a.updateStatusError=!0;for(var c in b.error)a.updateStatusErrorMsg=b.error[c];j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}}),window.location.reload()},a.deleteConfirm=function(b,c){a.compId=b,a.compName=c,j.open({template:"/sp/resources/html/sysAdmin/curriculam/deleteCompanyHome.html",scope:a})},a.createLibraryHomeLink=function(a){null!=a&&"business"===a?window.location="/sp/sysAdmin/curriculam/libraryHomeDetails?cid=business":null!=a&&"individual"===a&&(window.location="/sp/sysAdmin/curriculam/libraryHomeDetails?cid=individual")},a.articleWorkFlow=function(b,c){e.getAjaxResponse({url:b,method:"get"}).then(function(b){if("true"===b.Success)"articleReload"!==c&&$.growl({icon:"glyphicon glyphicon-ok",message:"Request Processed"});else if(null!=b.error){for(var d in b.error)a.errorMessage=b.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}}),"articleReload"===c&&$.growl({icon:"glyphicon glyphicon-ok",message:"Request Submitted to Server"})},a.getReadabilityScore=function(){e.getAjaxResponse({url:"/sp/sysAdmin/readability",method:"get"}).then(function(b){"true"===b.Success?(a.score=b.readability.currentScore.toFixed(2),j.open({template:"/sp/resources/html/sysAdmin/curriculam/readabilityScore.html",scope:a})):$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"There was some error in processing your request."})})},function(){a.getLibraryHomeList()}()}angular.module("spApp").controller("adminLibraryHomeController",adminLibraryHomeController),adminLibraryHomeController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];
function affiliateCodeDetailsController(a,b,c,d,e,f,g,h,i){a.affiliateCodeDetailsEdit={},a.affiliateCodeDetailsEdit.status=!0,a.affliliateCode={},a.createAffiliateCode={},a.createAffiliateCode.validationError=!1,a.createCodeError=!1,a.updateAffiliateCode=function(b){var c=function(a){if("object"==typeof a){var b="undefined"!=typeof a?a.getMonth()+1:0,c="undefined"!=typeof a?a.getDate():0,d="undefined"!=typeof a?a.getFullYear():0,e=(10>b?"0"+b:b)+"/"+(10>c?"0"+c:c)+"/"+d;return e}return"string"==typeof a?a:void 0}(b.endDate);if(b.endDate=c,b.code=a.existingPromoDetails.code,b.promotionId=a.existingPromoDetails.id,a.productsError===!1){a.createAffiliateCode.validationError=!1;var d=0;for(var e in b)("default"===b[e]||"default1"===b[e])&&d++;a.createAffiliateCode.$valid&&0===d&&b.unitPrice>0?g.getAjaxResponse({url:"/sp/sysAdmin/promotions/update",data:$.param(b).replace(/%2F/g,"/")}).then(function(b){if("true"===b.Success)a.createCodeError=!1,a.affiliateCodeDetailsEdit.status=!0,"undefined"!==a.urlPromoId&&a.urlPromoId!==!1&&a.getPromoDetails(a.urlPromoId),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Details</strong>",message:" updated successfully"});else{a.createCodeError=!0;for(var c in b.error)a.createCodeErrorMsg=b.error[c]}}):a.createAffiliateCode.validationError=!0}},a.productsError=!1,a.getAvailableProducts=function(){g.getAjaxResponse({url:"/sp/sysAdmin/promotions/getProducts"}).then(function(b){if("true"===b.Success)a.productsError=!1,a.productList=b.product;else{a.productsError=!0;for(var c in b.error)a.productsErrorMsg=b.error[c]}})},a.getDetailsError=!1,a.existingTags=null,a.getPromoDetails=function(b){g.getAjaxResponse({url:"/sp/sysAdmin/promotions/getDetails",data:$.param({promotionId:b})}).then(function(b){if("true"===b.Success)a.getDetailsError=!1,a.existingPromoDetails=b.promotion,a.affliliateCode.productList=a.existingPromoDetails.productList[0].id,a.affliliateCode.promotionType=a.existingPromoDetails.promotionType,a.affliliateCode.unitPrice=a.existingPromoDetails.unitPrice,a.affliliateCode.endDate=(a.existingPromoDetails.endDate.monthValue<10?"0"+a.existingPromoDetails.endDate.monthValue:a.existingPromoDetails.endDate.monthValue)+"/"+(a.existingPromoDetails.endDate.dayOfMonth<10?"0"+a.existingPromoDetails.endDate.dayOfMonth:a.existingPromoDetails.endDate.dayOfMonth)+"/"+a.existingPromoDetails.endDate.year,"undefined"!=typeof a.existingPromoDetails.count&&(a.affliliateCode.count=a.existingPromoDetails.count),a.existingPromoDetails.tags.length>0?a.existingTags=a.existingPromoDetails.tags.length>1?a.existingPromoDetails.tags.join(","):a.existingPromoDetails.tags[0]:a.existingTags=null,a.affliliateCode.message=a.existingPromoDetails.message,a.affliliateCode.status=a.existingPromoDetails.status;else{a.getDetailsError=!0;for(var c in b.error)a.getDetailsErrorMsg=b.error[c]}})},a.searchInAccounts=null,a.clearSearch=function(){a.searchInAccounts=null},a.enableEdit=function(){a.affiliateCodeDetailsEdit.status=!1},a.disableEdit=function(){a.affiliateCodeDetailsEdit.status=!0,"undefined"!==a.urlPromoId&&a.urlPromoId!==!1&&a.getPromoDetails(a.urlPromoId)},a.getURLPromoId=function(){var b=window.location.href,c=b.split("?")[1];"undefined"!=typeof c?a.urlPromoId=c.split("=")[1]:a.urlPromoId=null},a.getAccountsError=!1,a.getAccountDetails=function(){g.getAjaxResponse({url:"/sp/sysAdmin/promotions/accounts",data:$.param({promotionId:a.urlPromoId})}).then(function(b){if("true"===b.Success)a.getAccountsError=!1,a.accountsList=b.account;else{a.getAccountsError=!0;for(var c in b.error)a.getAccountsErrorMsg=b.error[c]}})},function(){a.getURLPromoId(),a.getAvailableProducts(),"undefined"!==a.urlPromoId&&a.urlPromoId!==!1&&(a.getPromoDetails(a.urlPromoId),a.getAccountDetails())}()}angular.module("spApp").controller("affiliateCodeDetailsController",affiliateCodeDetailsController),affiliateCodeDetailsController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage"];
function affiliateCodeListingController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.affiliateCodeListMaster=[],a.getAllError=!1,a.searchTag=[],a.pageSize=10,a.statusInclude=[],a.textSearching="",a.intialPageSize=10,a.load=!0,a.formatMonth=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split(" "),c=b[0].substr(0,3).toUpperCase(),d=c+" "+b[1]+" "+b[2];return d}},a.getAllAffiliateCodes=function(){e.getAjaxResponse({url:"/sp/sysAdmin/promotions/getAll"}).then(function(b){if("true"===b.Success)a.getAllError=!1,a.affiliateCodeListMaster=b.promotion,a.returnMemberList(a.pageSize);else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){if(!a.affiliateCodeListMaster.length)return!0;if(a.searchTag.length&&!a.statusInclude.length&&(a.affiliateCodeList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.affiliateCodeList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.affiliateCodeList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.affiliateCodeList=angular.copy(a.affiliateCodeListMaster)),a.pageSize=b,b>=a.affiliateCodeListMaster.length&&(a.disabledInfinite=!0,a.pageSize=a.affiliateCodeListMaster.length),a.load&&(a.lastPredicate="code",a.lastReverse=!0,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.affiliateCodeList=a.affiliateCodeList},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.affiliateCodeList=i("orderBy")(a.affiliateCodeList,b,c)},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof this.selectedSearch&&(this.selectedSearch.userStatusFormatted="",this.selectedSearch.hiringRoles=""),a.affiliateCodeList=angular.copy(a.affiliateCodeListMaster),"undefined"!=typeof b&&(a.pageSize=a.affiliateCodeListMaster.length),angular.element($(".tags").find("input")).scope().newTag.text="",a.load=!0,a.disabledInfinite=!1,m.$broadcast("$scrollStart"),a.returnMemberList(a.pageSize);var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.updateStatusError=!1,a.updateAffiliateCodeStatus=function(b,c){e.getAjaxResponse({url:"/sp/sysAdmin/promotions/updateStatus",data:$.param({promotionId:c,promotionStatus:b})}).then(function(b){if("true"===b.Success)a.updateStatusError=!1,j.close("ngdialog1"),a.getAllAffiliateCodes(),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Status</strong>",message:" updated successfully"});else{a.updateStatusError=!0;for(var c in b.error)a.updateStatusErrorMsg=b.error[c];j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}})},a.deleteConfirm=function(b){a.afid=b,j.open({template:"/sp/resources/html/sysAdmin/affiliateCode/deleteConfirmation.html",scope:a})},function(){var b=n.get("gNotify");null!==b&&"undefined"!=typeof b&&("AddCode"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Code</strong>",message:" generated successfully"}),setTimeout(function(){n.remove("gNotify")},1e3)),a.getAllAffiliateCodes()}()}angular.module("spApp").controller("affiliateCodeListingController",affiliateCodeListingController),affiliateCodeListingController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];
function alternateBilling(a,b,c,d,e,f,g,h,i){a.abMasterList=[],a.getAllError=!1,a.searchTag=[],a.pageSize=10,a.statusInclude=[],a.textSearching="",a.intialPageSize=10,a.load=!0,a.updateStatusError=!1,a.accountDetails=null,a.submitted=!1,a.accountList={},a.currentId=null,a.signup={},a.imports={},g(function(){a.imports.cpt=-1,a.signup.paymentAgreement=-1,a.signup.paymentType=-1},0),a.imports.camount=null,a.ptype=!1,a.errorMessage=!1;var j={getAllAccount:"/sp/sysAdmin/alternateBilling/getAllAccounts",fetchAccountDetails:"/sp/sysAdmin/alternateBilling/account/businessAccountDetails",fetchAccountDetailsIndividual:"/sp/sysAdmin/alternateBilling/account/individualAccountDetails"};a.formatMonth=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split(" "),c=b[0].substr(0,3).toUpperCase(),d=c+" "+b[1]+" "+b[2];return d}},a.getResponse=function(b,d){a.mode=b,c.getAjaxResponse({url:j.getAllAccount,data:$.param({accountType:b,isExistingAccount:d})}).then(function(b){if("true"===b.Success)a.getAllError=!1,a.abMasterList=b.accountDetails,a.abMasterList.length&&!d&&a.returnMemberList(a.pageSize);else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){return a.abMasterList.length?(a.pageSize=b,b>=a.abMasterList.length&&(a.disabledInfinite=!0,a.pageSize=a.abMasterList.length),a.load&&(a.lastPredicate="Individual"===a.mode?"memberName":"companyName",a.lastReverse=!1,a.load=!1),a.abList=a.abMasterList,void a.order(a.lastPredicate,a.lastReverse)):!0},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.abList=d("orderBy")(a.abList,b,c)},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof a.selectedSearch&&(a.selectedSearch.userStatusFormatted="",a.selectedSearch.hiringRoles=""),a.abList=angular.copy(a.abMasterList),"undefined"!=typeof b&&(a.pageSize=a.abMasterList.length),a.load=!0,a.disabledInfinite=!1,h.$broadcast("$scrollStart"),a.returnMemberList(a.pageSize);var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.activateAccount=function(b,d){var f="/sp/sysAdmin/alternateBilling/account/reActivateAccount",g=!1;"INACTIVE"===d&&(f="/sp/sysAdmin/alternateBilling/account/deactivateAccount",g=!0),c.getAjaxResponse({url:f,data:$.param({accountId:b})}).then(function(c){if("true"===c.Success){for(var d=0;d<a.abMasterList.length;d++)if(a.abMasterList[d].id===b){a.abMasterList[d].deactivated=g;break}a.returnMemberList(a.pageSize),e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Status</strong>",message:" updated successfully"})}else{e.close("ngdialog1"),a.updateStatusError=!0;for(var f in c.error)a.updateStatusErrorMsg=c.error[f];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}})},a.deleteConfirm=function(b){a.afid=b,e.open({template:"/sp/resources/html/sysAdmin/alternateBilling/deleteConfirmation.html",scope:a})},a.fetchAccountDetails=function(b,d){return a.currentId===b?!0:(a.currentId=b,a.submitted=!1,a.detailModule=d,void c.getAjaxResponse({url:"b"===d.mode?j.fetchAccountDetails:j.fetchAccountDetailsIndividual,data:$.param({accountId:b})}).then(function(b){if("true"===b.Success)a.accountDetails=null,a.accountDetails=b,a.errorMessage=!1,a.signup.paymentAgreement=b.account.agreementterm||1,a.signup.paymentType=0,g(function(){a.imports.cpt=-1},0),a.imports.camount=null,a.imports.ccomment=null;else{for(var c in b.error)a.updateStatusErrorMsg=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}}))},a.validateSendResponse=function(){if(a.submitted=!1,a.errorMessage=!1,a.ptype=!1,null===a.accountDetails)return a.errorMessage=!0,!0;if(this.importAccount.$valid&&-1!==parseInt(this.imports.cpt)){var d={chargeAmount:this.imports.camount,isTrial:"TRIAL"===this.imports.cpt?!0:!1,paymentType:this.imports.cpt,comment:this.imports.ccomment,accountId:this.accountDetails.account.id},e={url:"/sp/sysAdmin/alternateBilling/account/importExisting",data:$.param(d)};c.getAjaxResponse(e).then(function(b){if("true"===b.Success){$.growl({icon:"glyphicon glyphicon-ok",message:" Account imported successfully"});for(var c=0;c<a.abMasterList.length;c++)if(a.abMasterList[c].id===a.accountDetails.account.id){a.abMasterList.splice(c,1),$("html,body").animate({scrollTop:$(".bgWhiteBord").offset().top-20},300);break}a.accountDetails=null,a.accountList.search=null,a.currentId=null,g(function(){a.imports.cpt=-1,a.signup.paymentAgreement=-1,a.signup.paymentType=-1},0),a.imports.camount=null,a.imports.ccomment=null}else null!=b.error&&(a.failure=b.error,a.sfailure=!0)})}else{a.submitted=!0,-1===parseInt(this.imports.cpt)&&(a.ptype=!0);var f=angular.element(b);$(f).find("form .ng-invalid:first").length&&$("html,body").animate({scrollTop:$(f).find("form .ng-invalid:first").offset().top-20},300)}},a.backToDefault=function(){a.accountDetails=null,a.accountList.search=null,a.currentId=null,g(function(){a.imports.cpt=-1,a.signup.paymentAgreement=-1,a.signup.paymentType=-1},0),a.imports.camount=null,a.imports.ccomment=null,a.errorMessage=!1,a.ptype=!1,$("html,body").animate({scrollTop:$(".bgWhiteBord").offset().top-20},300)},a.removeError=function(b){-1!==b&&(a.ptype=!1)}}function accountViewDetail(a,b,c,d,e,f){a.disableCompanyEditing=!0,a.disableIndividualEditing=!0,a.formStatus={},a.dialogStatus={};var g=c.get("creditted");g===!0&&(c.remove("creditted"),$.growl({icon:"glyphicon glyphicon-ok",message:"Amount Creditted"}));var h={getAllAccountDetails:"/sp/sysAdmin/alternateBilling/account/businessAccountDetails",getAllAccountIndividualDetails:"/sp/sysAdmin/alternateBilling/account/individualAccountDetails",updateCompany:"/sp/sysAdmin/alternateBilling/account/updateCompany",updateIndividualProfile:"/sp/sysAdmin/alternateBilling/account/updateIndividualProfile",deactivateRenewal:"/sp/sysAdmin/alternateBilling/account/cancel",deactivateAccount:"/sp/sysAdmin/alternateBilling/account/deactivateAccount"};a.getAccountValue=function(c){b.getAjaxResponse({url:"undefined"==typeof c?h.getAllAccountDetails:h.getAllAccountIndividualDetails,data:$.param({accountId:d.getParam("accountId")})}).then(function(b){if("true"===b.Success)"undefined"==typeof c?(a.accountInfo=b,a.companyDetail=b.company,a.companyDetail.companyId=b.company.id,a.companyDetail.address.address1=b.company.address.addressLine1,a.companyDetail.address.address2=b.company.address.addressLine2,a.companyDetail.address.zip=b.company.address.zipCode,a.stateCheck.forSelectedCountry=b.company.address.country,a.accountDetails=b.account,a.memberList=b.accountUsers,a.masterCompanyDetail=angular.copy(a.companyDetail)):(a.accountInfo=b,a.accountDetails=b.account,a.userDetail=b.profileForm,a.userDetail.userId=b.userSummary.id,a.userDetail.address1=b.address.addressLine1,a.userDetail.address2=b.address.addressLine2,a.userDetail.zip=b.address.zipCode,a.userDetail.city=b.address.city,a.userDetail.state=b.address.state,a.userDetail.country=b.address.country,a.masterUserDetail=angular.copy(a.userDetail));else{a.getAllError=!0;for(var d in b.error)a.getAllErrorMsg=b.error[d]}})},a.saveAndUpdate=function(c,d){a.formStatus.sumbit=!1;var e;e="undefined"!=typeof c.numberOfEmployees&&c.numberOfEmployees<1?!1:!0;var f="companyDetails"===d?h.updateCompany:h.updateIndividualProfile,g=0;for(var i in c)if("object"==typeof c[i])for(var j in c[i])("default"===c[i][j]||"default1"===c[i][j])&&g++;else("default"===c[i]||"default1"===c[i])&&g++;this[d].$valid&&0===g&&e?b.getAjaxResponse({url:f,data:$.param(c).replace(/address%5B/g,"").replace(/%5D/g,"").replace(/%2C/g,",")}).then(function(b){if("true"===b.Success)a.masterCompanyDetail=angular.copy(a.companyDetail),a.disableCompanyEditing=!0,a.masterUserDetail=angular.copy(a.userDetail),a.disableIndividualEditing=!0;else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}}):a.formStatus.sumbit=!0},a.disableEdit=function(){a.formStatus.sumbit=!1,a.disableCompanyEditing=!0,a.companyDetail=angular.copy(a.masterCompanyDetail),a.disableIndividualEditing=!0,a.userDetail=angular.copy(a.masterUserDetail)},a.showDetailsDialog=function(b){"members"===b?(a.showDetails={title:"Member account details",total:'Total member accounts purchased : <span class="b-700">'+parseInt(a.accountDetails.productInfo.numActive+a.accountDetails.productInfo.availalbeMemberSubscriptions+a.accountDetails.productInfo.numDeleted)+"</span>",active:a.accountDetails.productInfo.numActive,deleted:a.accountDetails.productInfo.numDeleted,available:a.accountDetails.productInfo.availalbeMemberSubscriptions},e.open({template:"/sp/resources/html/admin/account/show-details-dialog.html",scope:a})):(a.showDetails={title:"Candidate account details",total:'Total candidate accounts purchased : <span class="b-700">'+parseInt(a.accountDetails.hiringProduct.availableHiringSubscripitons+a.accountDetails.hiringProduct.usedHiringSubscriptions)+"</span>",active:a.accountDetails.hiringProduct.usedHiringSubscriptions,deleted:a.accountDetails.hiringProduct.availableHiringSubscripitons+a.accountDetails.hiringProduct.usedHiringSubscriptions-a.accountDetails.hiringProduct.availableHiringSubscripitons-a.accountDetails.hiringProduct.usedHiringSubscriptions,available:a.accountDetails.hiringProduct.availableHiringSubscripitons},e.open({template:"/sp/resources/html/admin/account/show-details-dialog.html",scope:a}))},a.showReactivateDialog=function(c){b.getAjaxResponse({url:"/sp/sysAdmin/alternateBilling/account/reActivate",data:$.param({accountId:d.getParam("accountId")})}).then(function(b){"true"===b.Success&&(a.getAccountValue(c),$.growl({icon:"glyphicon glyphicon-ok",message:" Subscription renewal activated successfully"}))})},a.showReactivateAccount=function(c){b.getAjaxResponse({url:"/sp/sysAdmin/alternateBilling/account/reActivateAccount",data:$.param({accountId:d.getParam("accountId")})}).then(function(b){"true"===b.Success&&(a.getAccountValue(c),$.growl({icon:"glyphicon glyphicon-ok",message:" Account activated successfully"}))})},a.showCancelDialog=function(b){a.showCancelType=b,a.dialogStatus.title="Cancel Subscription",a.dialogStatus.content="Subscription cancelled successfully.",e.open({template:"/sp/resources/html/admin/account/cancel-subscription-dialog.html",scope:a})},a.showCancelAccountDialog=function(b){a.showCancelType=b,a.dialogStatus.title="Cancel Subscription",a.dialogStatus.content="Account deactivated successfully.",e.open({template:"/sp/resources/html/admin/account/cancel-subscription-account-dialog.html",scope:a})},a.showDetailsDialog=function(b){"members"===b?(a.showDetails={title:"Member account details",total:'Total member accounts purchased : <span class="b-700">'+parseInt(a.accountInfo.account.productInfo.numActive+a.accountInfo.account.productInfo.availalbeMemberSubscriptions+a.accountInfo.account.productInfo.numDeleted)+"</span>",active:a.accountInfo.account.productInfo.numActive,deleted:a.accountInfo.account.productInfo.numDeleted,available:a.accountInfo.account.productInfo.availalbeMemberSubscriptions},e.open({template:"/sp/resources/html/admin/account/show-details-dialog.html",scope:a})):(a.showDetails={title:"Candidate account details",total:'Total candidate accounts purchased : <span class="b-700">'+parseInt(a.accountInfo.account.hiringProduct.availableHiringSubscripitons+a.accountInfo.account.hiringProduct.usedHiringSubscriptions)+"</span>",active:a.accountInfo.account.hiringProduct.usedHiringSubscriptions,deleted:a.accountInfo.account.hiringProduct.availableHiringSubscripitons+a.accountInfo.account.hiringProduct.usedHiringSubscriptions-a.accountInfo.account.hiringProduct.availableHiringSubscripitons-a.accountInfo.account.hiringProduct.usedHiringSubscriptions,available:a.accountInfo.account.hiringProduct.availableHiringSubscripitons},e.open({template:"/sp/resources/html/admin/account/show-details-dialog.html",scope:a}))},a.cancelSubscription=function(c){b.getAjaxResponse({url:h.deactivateRenewal,data:$.param({accountId:d.getParam("accountId")})}).then(function(b){"true"===b.Success?(e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Subscription cancelled successfully "}),f(function(){a.getAccountValue(c)},300)):(e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Server </strong> ",message:Error}),f(function(){a.getAccountValue(c)},300))})},a.cancelAccountSubscription=function(c){b.getAjaxResponse({url:h.deactivateAccount,data:$.param({accountId:d.getParam("accountId")})}).then(function(b){"true"===b.Success?(e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:"Account deactivated successfully "}),f(function(){a.getAccountValue(c)},300)):(e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Server </strong> ",message:Error}),f(function(){a.getAccountValue(c)},300))})}}angular.module("spApp").controller("alternateBilling",alternateBilling),alternateBilling.$inject=["$scope","$element","ajaxService","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"],angular.module("spApp").controller("accountViewDetail",accountViewDetail),accountViewDetail.$inject=["$scope","ajaxService","$localStorage","sharedProperties","ngDialog","$localStorage","$timeout"];
function auditLogController(a,b,c,d,e,f,g,h,i){var j=this;j.auditFilteredList=[],j.masterAuditList=[],j.urls={getAuditHome:"/sp/sysAdmin/audit/getAuditHome",getAllServices:"/sp/sysAdmin/audit/getAllServices"};var k=new Date;j.filterDialog=null,j.allServices=[],j.pageSetting={pageSize:10,intialPageSize:10,filter:{},userEmail:{email:[]},checkBox:[],statusInclude:["online","offline"],userTypeSelected:"",userServiceSelected:"",lastPredicate:"name",lastReverse:!1,loadBtnCLicked:!1,load:!0,textSearching:"",disabledInfinite:!1,onlineC:!0,offlineC:!0,selectedActivity:"",time:"WEEK",maxDate:k.setMonth(k.getMonth()-3)},j.originalpageSetting=angular.copy(j.pageSetting),j.getAuditHomeData=function(){c.getAjaxResponse({url:j.urls.getAuditHome}).then(function(a){j.masterAuditList=a.auditLogHome,j.auditFilteredList=angular.copy(j.masterAuditList),j.getAuditFilteredList(j.pageSetting.pageSize)})},j.advancedFilterDialog=function(){j.filterDialog=e.open({template:"/sp/sysAdmin/audit/advancedFilterPopup",scope:a})},j.advanceSearch=function(a,b){var d=(1+a.getMonth()).toString();d=d.length>1?d:"0"+d;var e=(1+a.getDate()).toString();e=e.length>1?e:"0"+e;var f=d+"/"+e+"/"+a.getUTCFullYear(),g=(1+b.getMonth()).toString(),h=(1+b.getDate()).toString();h=h.length>1?h:"0"+h,g=g.length>1?g:"0"+g;var i=g+"/"+h+"/"+b.getUTCFullYear();c.getAjaxResponse({url:j.urls.getAuditHome,data:$.param({fromDate:f,endDate:i})}).then(function(a){j.masterAuditList=a.auditLogHome,j.auditFilteredList=angular.copy(j.masterAuditList),j.getAuditFilteredList(j.pageSetting.pageSize),j.filterDialog.close()})},j.getAllServices=function(){c.getAjaxResponse({url:j.urls.getAllServices}).then(function(a){j.allServices=a.services})},j.resetfilter=function(){j.pageSetting=angular.copy(j.originalpageSetting),j.getAuditFilteredList(j.pageSetting.pageSize)},j.filterByService=function(a){j.getAuditFilteredList(j.pageSetting.pageSize)},j.includeCheck=function(a){j.getAuditFilteredList(j.pageSetting.pageSize)},j.infiniteScroll=function(a){j.pageSetting.loadBtnCLicked=!0,j.getAuditFilteredList(a)},j.searchTextFilter=function(a){j.pageSetting.textSearching=a},j.clearSearch=function(){j.pageSetting.textSearching.length&&(j.pageSetting.textSearching="",j.searchText="")},j.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},j.getAuditFilteredList=function(a){if(!j.masterAuditList.length)return!0;var b=j.masterAuditList;j.auditFilteredList=b.filter(function(a){var b=null!=j.pageSetting.userTypeSelected&&j.pageSetting.userTypeSelected===a.accountType||""===j.pageSetting.userTypeSelected&&a.accountType,c=null!=j.pageSetting.selectedActivity&&j.pageSetting.selectedActivity===a.activityType||""===j.pageSetting.selectedActivity&&a.activityType,d=null!=j.pageSetting.userServiceSelected&&$.inArray(j.pageSetting.userServiceSelected,a.serviceType)>-1||""===j.pageSetting.userServiceSelected&&a.serviceType,e=j.pageSetting.onlineC===a.online,f=j.pageSetting.offlineC===a.offline,g=!1;return $.inArray(j.pageSetting.time,a.timeFilters)>-1&&(g=!0),b&&c&&d&&(e||f)&&g}),console.log("Search "+j.auditFilteredList.length),j.pageSetting.pageSize=a,a>=j.masterAuditList.length&&(j.pageSetting.disabledInfinite=!0,j.pageSetting.pageSize=j.masterAuditList.length),j.pageSetting.load&&(j.pageSetting.lastPredicate="name",j.pageSetting.lastReverse=!1,j.pageSetting.loadBtnCLicked=!1,j.pageSetting.load=!1)}}function auditLogDetailController(a,b,c,d,e,f,g,h,i){var j=this;j.auditFilteredList=[],j.masterAuditList=[],j.userDetail=null,j.urls={getAuditDetail:"/sp/sysAdmin/audit/getAuditDetail",getAllServices:"/sp/sysAdmin/audit/getAllServices"};var k=new Date;j.allServices=[],j.pageSetting={pageSize:10,intialPageSize:10,filter:{},userEmail:{email:[]},checkBox:[],statusInclude:["online","offline"],userTypeSelected:"",userServiceSelected:"",lastPredicate:"name",lastReverse:!1,loadBtnCLicked:!1,load:!0,textSearching:"",disabledInfinite:!1,onlineC:!0,offlineC:!0,time:"WEEK",maxDate:k.setMonth(k.getMonth()-3)},j.originalpageSetting=angular.copy(j.pageSetting),j.getAuditDetailData=function(){c.getAjaxResponse({url:j.urls.getAuditDetail,data:$.param({email:f.getParam("email")})}).then(function(a){j.masterAuditList=a.auditDetails,j.userDetail=a.userDetails,j.auditFilteredList=angular.copy(j.masterAuditList)})},j.resetfilter=function(){j.pageSetting=angular.copy(j.originalpageSetting),j.getAuditFilteredList(j.pageSetting.pageSize)},j.getAllServices=function(){c.getAjaxResponse({url:j.urls.getAllServices}).then(function(a){j.allServices=a.services})},j.advancedFilterDialog=function(){j.filterDialog=e.open({template:"/sp/sysAdmin/audit/advancedFilterPopup",scope:a})},j.advanceSearch=function(a,b){var d=(1+a.getMonth()).toString();d=d.length>1?d:"0"+d;var e=(1+a.getDate()).toString();e=e.length>1?e:"0"+e;var g=d+"/"+e+"/"+a.getUTCFullYear(),h=(1+b.getMonth()).toString(),i=(1+b.getDate()).toString();i=i.length>1?i:"0"+i,h=h.length>1?h:"0"+h;var k=h+"/"+i+"/"+b.getUTCFullYear();c.getAjaxResponse({url:j.urls.getAuditDetail,data:$.param({email:f.getParam("email"),fromDate:g,endDate:k})}).then(function(a){j.masterAuditList=a.auditDetails,j.userDetail=a.userDetails,j.auditFilteredList=angular.copy(j.masterAuditList),j.filterDialog.close()})},j.searchTextFilter=function(a){j.pageSetting.textSearching=a},j.clearSearch=function(){j.pageSetting.textSearching.length&&(j.pageSetting.textSearching="",j.searchText="")},j.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},j.filterByService=function(a){j.getAuditFilteredList(j.pageSetting.pageSize)},j.includeCheck=function(a){j.getAuditFilteredList(j.pageSetting.pageSize)},j.infiniteScroll=function(a){j.pageSetting.loadBtnCLicked=!0,j.getAuditFilteredList(a)},j.getAuditFilteredList=function(a){if(!j.masterAuditList.length)return!0;var b=j.masterAuditList;j.auditFilteredList=b.filter(function(a){var b=null!=j.pageSetting.userServiceSelected&&j.pageSetting.userServiceSelected===a.serviceType||""===j.pageSetting.userServiceSelected&&a.serviceType,c=!1;return $.inArray(j.pageSetting.time,a.timeFilter)>-1&&(c=!0),b&&c}),console.log("Search "+j.auditFilteredList.length),j.pageSetting.pageSize=a,a>=j.masterAuditList.length&&(j.pageSetting.disabledInfinite=!0,j.pageSetting.pageSize=j.masterAuditList.length),j.pageSetting.load&&(j.pageSetting.lastPredicate="name",j.pageSetting.lastReverse=!1,j.pageSetting.loadBtnCLicked=!1,j.pageSetting.load=!1)}}angular.module("spApp").controller("auditLogListController",auditLogController),angular.module("spApp").controller("auditLogDetailController",auditLogDetailController),auditLogController.$inject=["$scope","$q","ajaxService","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"],auditLogDetailController.$inject=["$scope","$q","ajaxService","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];
function createAffiliateCodeController(a,b,c,d,e,f,g,h,i){a.getCodeError=!1,a.generateAffiliateCode=function(){g.getAjaxResponse({url:"/sp/sysAdmin/promotions/getCode"}).then(function(b){if("true"===b.Success)a.getCodeError=!1,a.newAffiliateCode=b.promotion;else{a.getCodeError=!0;for(var c in b.error)a.getCodeErrorMsg=b.error[c]}})},a.productsError=!1,a.getAvailableProducts=function(){g.getAjaxResponse({url:"/sp/sysAdmin/promotions/getProducts"}).then(function(b){if("true"===b.Success)a.productsError=!1,a.productList=b.product;else{a.productsError=!0;for(var c in b.error)a.productsErrorMsg=b.error[c]}})},a.affliliateCode={},a.createAffiliateCode={},a.createAffiliateCode.validationError=!1,a.createCodeError=!1,a.setupAffiliateCode=function(b){if(function(a){if("object"==typeof a){var c="undefined"!=typeof a?a.getMonth()+1:0,d="undefined"!=typeof a?a.getDate():0,e="undefined"!=typeof a?a.getFullYear():0,f=(10>c?"0"+c:c)+"/"+(10>d?"0"+d:d)+"/"+e;b.endDate=f}else b.endDate=a}(b.endDate),b.code=a.newAffiliateCode,a.productsError===!1&&a.getCodeError===!1){a.createAffiliateCode.validationError=!1;var c=0;for(var d in b)("default"===b[d]||"default1"===b[d])&&c++;"COUNT_BASED"!==b.promotionType?a.createAffiliateCode.$valid&&0===c&&b.unitPrice>0?g.getAjaxResponse({url:"/sp/sysAdmin/promotions/create",data:$.param(b).replace(/%2F/g,"/")}).then(function(b){if("true"===b.Success)a.createCodeError=!1,i.set("gNotify","AddCode"),setTimeout(function(){window.location="/sp/sysAdmin/promotions/affiliateCodesListing"},100);else{a.createCodeError=!0;for(var c in b.error)a.createCodeErrorMsg=b.error[c]}}):a.createAffiliateCode.validationError=!0:"COUNT_BASED"===b.promotionType&&(b.count>0?(a.createAffiliateCode.validationError=!1,a.createAffiliateCode.$valid&&0===c&&b.unitPrice>0?g.getAjaxResponse({url:"/sp/sysAdmin/promotions/create",data:$.param(b).replace(/%2F/g,"/")}).then(function(b){if("true"===b.Success)a.createCodeError=!1,i.set("gNotify","AddCode"),setTimeout(function(){window.location="/sp/sysAdmin/promotions/affiliateCodesListing"},100);else{a.createCodeError=!0;for(var c in b.error)a.createCodeErrorMsg=b.error[c]}}):a.createAffiliateCode.validationError=!0):a.createAffiliateCode.validationError=!0)}},a.getDetailsError=!1,a.existingTags=null,a.getPromoDetails=function(b){g.getAjaxResponse({url:"/sp/sysAdmin/promotions/getDetails",data:$.param({promotionId:b})}).then(function(b){if("true"===b.Success)a.getDetailsError=!1,a.existingPromoDetails=b.promotion,a.affliliateCode.productList=a.existingPromoDetails.productList[0].id,a.affliliateCode.promotionType=a.existingPromoDetails.promotionType,a.affliliateCode.unitPrice=a.existingPromoDetails.unitPrice,a.affliliateCode.endDate=(a.existingPromoDetails.endDate.monthValue<10?"0"+a.existingPromoDetails.endDate.monthValue:a.existingPromoDetails.endDate.monthValue)+"/"+(a.existingPromoDetails.endDate.dayOfMonth<10?"0"+a.existingPromoDetails.endDate.dayOfMonth:a.existingPromoDetails.endDate.dayOfMonth)+"/"+a.existingPromoDetails.endDate.year,a.existingPromoDetails.count>0&&(a.affliliateCode.count=a.existingPromoDetails.count),a.existingPromoDetails.tags.length>0?a.existingTags=a.existingPromoDetails.tags.length>1?a.existingPromoDetails.tags.join(","):a.existingPromoDetails.tags[0]:a.existingTags=null,a.affliliateCode.message=a.existingPromoDetails.message,a.affliliateCode.status=a.existingPromoDetails.status;else{a.getDetailsError=!0;for(var c in b.error)a.getDetailsErrorMsg=b.error[c]}})},a.cancelRedirect=function(){window.location="/sp/sysAdmin/promotions/affiliateCodesListing"},function(){a.generateAffiliateCode(),a.getAvailableProducts(),a.affliliateCode.status="Active";var b=window.location.href,c=b.split("?")[1];"undefined"!=typeof c&&a.getPromoDetails(c.split("=")[1])}()}angular.module("spApp").controller("createAffiliateCodeController",createAffiliateCodeController),createAffiliateCodeController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage"];
function createLibraryHomeController(a,b,c,d,e,f,g,h,i,j){a.createNewLibraryHome={},a.createNewLibraryHome.validationErrors=!1,a.accountsListException=!1,a.updatedAccountListing=[],a.selectedAccountsCount=0,a.updatedListingIndex=0,a.accountList={},a.selectedCompanyIdList=[],a.allAccountsIdList=[],a.createNewLibraryHomeException=!1,a.filteredAccountListing={},a.cid="",a.newLibraryHome={},a.selectedAccountsDisplayList=[],a.showAccountsDisplayList=!1,a.cid="",a.searchKeywords=[],a.searchTag=[],a.pageSize=100,a.statusInclude=[],a.textSearching="",a.intialPageSize=100,a.load=!0,a.selectArticlesList=[];var k=[],l=i.get("companyLibraryHomeList"),m="/sp/resources/images/image_not_available.jpg";a.newLibraryHome.articleImage0=m,a.newLibraryHome.articleImage1=m,a.newLibraryHome.articleImage2=m,a.newLibraryHome.articleImage3=m,a.getAccountList=function(){for(var b=0;b<l.length;b++)k.push(l[b].id);g.getAjaxResponse({url:"/sp/sysAdmin/hk/getCompanyList",method:"GET"}).then(function(b){if("true"===b.Success)a.accountsListException=!1,a.accountListing=b.companies,jQuery.each(a.accountListing,function(b,c){-1===jQuery.inArray(a.accountListing[b].id,k)&&(a.updatedAccountListing.push(jQuery.extend({},a.accountListing[b],{accountSelectedStatus:!1})),a.allAccountsIdList.push(a.accountListing[b].id))});else{a.accountsListException=!0;for(var c in b.error)a.accountsListExceptionMsg=b.error[c]}})},a.getCompanyId=function(){var b=window.location.href,c=b.split("?")[1];"undefined"!=typeof c?a.cid=c.split("=")[1]:a.cid=null},a.getLibraryHomeDetails=function(){g.getAjaxResponse({url:"/sp/sysAdmin/library/articles",data:$.param({companyId:a.cid})}).then(function(b){if("true"===b.Success)a.getDetailsException=!1,a.newLibraryHome.articleId0=b.Content[0].articleId,a.newLibraryHome.articleDescription0=b.Content[0].shortDescription,a.newLibraryHome.articleName0=b.Content[0].articleLinkLabel,null!==b.Content[0].imageUrl&&void 0!==b.Content[0].imageUrl&&(a.newLibraryHome.articleImage0=b.Content[0].imageUrl+"?width=150"),a.newLibraryHome.articleId1=b.Content[1].articleId,a.newLibraryHome.articleDescription1=b.Content[1].shortDescription,a.newLibraryHome.articleName1=b.Content[1].articleLinkLabel,null!==b.Content[1].imageUrl&&void 0!==b.Content[1].imageUrl&&(a.newLibraryHome.articleImage1=b.Content[1].imageUrl+"?width=150"),a.newLibraryHome.articleId2=b.Content[2].articleId,a.newLibraryHome.articleDescription2=b.Content[2].shortDescription,a.newLibraryHome.articleName2=b.Content[2].articleLinkLabel,null!==b.Content[2].imageUrl&&void 0!==b.Content[2].imageUrl&&(a.newLibraryHome.articleImage2=b.Content[2].imageUrl+"?width=150"),a.newLibraryHome.articleId3=b.Content[3].articleId,a.newLibraryHome.articleDescription3=b.Content[3].shortDescription,a.newLibraryHome.articleName3=b.Content[3].articleLinkLabel,null!==b.Content[3].imageUrl&&void 0!==b.Content[3].imageUrl&&(a.newLibraryHome.articleImage3=b.Content[3].imageUrl+"?width=150");else{a.company.name=null,a.getDetailsException=!0;for(var c in b.error)a.getDetailsExceptionMsg=b.error[c]}})},a.addtoSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[c].id),a.updatedAccountListing[c].updatedListingIndex=a.updatedListingIndex++,!1):void 0})},a.removeFromSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!1,a.selectedAccountsCount-=1,a.selectedCompanyIdList.splice(a.selectedCompanyIdList.indexOf(b),1),!1):void 0})},a.addFilteredAccounts=function(){var b=j("filter")(a.updatedAccountListing,a.accountList.search);jQuery.each(b,function(c){jQuery.each(a.updatedAccountListing,function(d){b[c].id===a.updatedAccountListing[d].id&&(a.updatedAccountListing[d].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[d].id),a.updatedAccountListing[d].updatedListingIndex=a.updatedListingIndex++)})}),a.accountList.search=null},a.accList=a.selectedCompanyIdList,a.selectArticleViaModal=function(b,c,e,f){null===f||void 0===f?f=m:f+="?width=150",0===e?(a.newLibraryHome.articleId0=b,a.newLibraryHome.articleName0=unescape(c),a.newLibraryHome.articleImage0=f):1===e?(a.newLibraryHome.articleId1=b,a.newLibraryHome.articleName1=unescape(c),a.newLibraryHome.articleImage1=f):2===e?(a.newLibraryHome.articleId2=b,a.newLibraryHome.articleName2=unescape(c),a.newLibraryHome.articleImage2=f):3===e&&(a.newLibraryHome.articleId3=b,a.newLibraryHome.articleName3=unescape(c),a.newLibraryHome.articleImage3=f),d.close("ngdialog1")},a.createLibraryHome=function(b){var c=[],d=a.accList[0];if(a.createNewLibraryHome.validationErrors=!1,a.createNewLibraryHomeException=!1,c=[{articleId:a.newLibraryHome.articleId0,position:0,shortDescription:b.articleDescription0,companyId:d},{articleId:a.newLibraryHome.articleId1,position:1,shortDescription:b.articleDescription1,companyId:d},{articleId:a.newLibraryHome.articleId2,position:2,shortDescription:b.articleDescription2,companyId:d},{articleId:a.newLibraryHome.articleId3,position:3,shortDescription:b.articleDescription3,companyId:d}],void 0!==a.newLibraryHome.articleId0&&void 0!==a.newLibraryHome.articleId1&&void 0!==a.newLibraryHome.articleId2&&void 0!==a.newLibraryHome.articleId3&&void 0!==a.newLibraryHome.articleDescription0&&void 0!==a.newLibraryHome.articleDescription1&&void 0!==a.newLibraryHome.articleDescription2&&void 0!==a.newLibraryHome.articleDescription3&&""!==a.newLibraryHome.articleDescription0&&""!==a.newLibraryHome.articleDescription1&&""!==a.newLibraryHome.articleDescription2&&""!==a.newLibraryHome.articleDescription3&&a.accList.length>0){for(var e=0;4>e;e++)g.getAjaxResponse({url:"/sp/trainingLibrary/admin/add/contentArticles",data:$.param(c[e])}).then(function(b){if("true"===b.Success)a.createNewLibraryHome=!1,i.set("gNotify","AddNewLibraryHome");else{a.createNewLibraryHomeException=!0;for(var c in b.error)a.createNewLibraryHomeExceptionMsg=b.error[c]}});$.growl({icon:"glyphicon glyphicon-ok",message:" Articles Added Successfully"}),setTimeout(function(){window.location="/sp/sysAdmin/curriculam/libraryHome"},1e3)}else $.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"Please fill all the required Fields"}),a.createNewLibraryHome.validationErrors=!0},a.selectArticle=function(b){a.fetchedTopics=[],a.selectArticlesList=[],g.getAjaxResponse({url:"/sp/trainingLibrary/getAllTopics",method:"POST",data:$.param({topic:"Themes"})}).then(function(c){c&&(a.fetchedTopics=c.topics,a.position=b,a.getArticlesList=function(b){a.selectArticlesList=[],g.getAjaxResponse({url:"/sp/trainingLibrary/getResults",method:"POST",data:$.param({topicValue:b,topicCategory:"Themes"})}).then(function(b){if("true"===b.Success)b.articles.length>0&&(a.getAllError=!1,a.selectArticlesList=b.articles,a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize));else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){if(a.searchTag.length&&!a.statusInclude.length&&(a.selectArticlesList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.selectArticlesList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.selectArticlesList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.selectArticlesList=angular.copy(a.selectArticlesList)),a.pageSize=b,b>=a.selectArticlesList.length&&(a.pageSize=a.selectArticlesList.length),a.load&&(a.lastPredicate="name",a.lastReverse=!1,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.selectArticlesList=a.selectArticlesList},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.selectArticlesList=j("orderBy")(a.selectArticlesList,b,c)},d.open({template:"/sp/resources/html/sysAdmin/curriculam/selectArticleModal.html",scope:a}))})},a.cancelRedirect=function(){setTimeout(function(){window.location="/sp/sysAdmin/curriculam/libraryHome"},100)},function(){a.getAccountList(),-1!==window.location.href.indexOf("?")&&(a.getCompanyId(),a.getLibraryHomeDetails())}()}angular.module("spApp").controller("createLibraryHomeController",createLibraryHomeController),createLibraryHomeController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage","$filter"];
function createPulseController(a,b,c,d,e,f,g,h,i,j,k){a.createNewPulse={},a.newPulse={},a.createNewPulse.validationErrors=!1,a.fileUploadException=!1,a.newPulse.status="Active",a.accountsListException=!1,a.updatedAccountListing=[],a.selectedAccountsCount=0,a.updatedListingIndex=0,a.accountList={},a.selectedCompanyIdList=[],a.pulseFileUploadStatus=!1,a.allAccountsIdList=[],a.createNewPulseException=!1,a.filteredAccountListing={},a.mapQuestionObject=[],a.triggerOpenFile=function(){var a=jQuery("body").find("#selectFile");a.click()},a.uploader=new j({url:"/sp/sysAdmin/pulse/createPulseFile",autoUpload:!0,alias:"pulseQuestionSet",onSuccessItem:function(b,c){if(a.fileUploadException=!1,a.pulseFileUploadStatus=!1,null===c.error)a.fileUploadException=!1,a.pulseFileUploadStatus=!0,a.pulseFileName=b._file.name,a.questionList=c.success.pulseQuestion,a.questionSet(),a.pulseDrop=a.questionList.categoryKeys,e(function(){a.defaultPulseName=0},0),a.noChart(a.pulseDrop,0);else{a.pulseFileName=null,a.fileUploadException=!0,a.pulseFileUploadStatus=!1;for(var d in c.error)a.fileUploadExceptionMessage=c.error[d]}}}),a.defaultPulse=function(b){a.noChart(a.pulseDrop,a.defaultPulseName)},a.increment=function(){return a.defaultPulseName++,!0},a.decrement=function(){return a.defaultPulseName--,!0},a.questionSet=function(){"questions"in a.questionList&&(a.mapQuestionObject=a.questionList.questions[a.activePulse])},a.noChart=function(b,c){b.length&&a.noChartPulse(b[c])},a.noChartPulse=function(b){a.activePulse=b,a.mapQuestionObject=a.questionList.questions[b]},a.getAccountList=function(){g.getAjaxResponse({url:"/sp/sysAdmin/hk/getCompanyList",method:"GET"}).then(function(b){if("true"===b.Success)a.accountsListException=!1,a.accountListing=b.companies,jQuery.each(a.accountListing,function(b,c){a.updatedAccountListing.push(jQuery.extend({},a.accountListing[b],{accountSelectedStatus:!1})),a.allAccountsIdList.push(a.accountListing[b].id)});else{a.accountsListException=!0;for(var c in b.error)a.accountsListExceptionMsg=b.error[c]}})},a.addtoSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[c].id),a.updatedAccountListing[c].updatedListingIndex=a.updatedListingIndex++,!1):void 0})},a.removeFromSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!1,a.selectedAccountsCount-=1,a.selectedCompanyIdList.splice(a.selectedCompanyIdList.indexOf(b),1),!1):void 0})},a.removeAllSelectedAccounts=function(){jQuery.each(a.updatedAccountListing,function(b){a.updatedAccountListing[b].accountSelectedStatus=!1,a.updatedAccountListing[b].updatedListingIndex=null}),a.selectedAccountsCount=0,a.selectedCompanyIdList=[]},a.addFilteredAccounts=function(){var b=k("filter")(a.updatedAccountListing,a.accountList.search);jQuery.each(b,function(c){jQuery.each(a.updatedAccountListing,function(d){b[c].id===a.updatedAccountListing[d].id&&(a.updatedAccountListing[d].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[d].id),a.updatedAccountListing[d].updatedListingIndex=a.updatedListingIndex++)})}),a.accountList.search=null},a.generateNewPulse=function(b){var c;a.createNewPulse.validationErrors=!1,a.createNewPulseException=!1,"All"===b.assignAccounts?(a.accList=a.allAccountsIdList,c={name:b.name,questionSetType:b.questionSetType,status:a.newPulse.status,forAll:!0}):(a.accList=a.selectedCompanyIdList,c={name:b.name,questionSetType:b.questionSetType,status:a.newPulse.status,companyId:a.accList.join(),forAll:!1}),this.createNewPulse.$valid&&a.pulseFileUploadStatus===!0&&a.accList.length>0?g.getAjaxResponse({url:"/sp/sysAdmin/pulse/createPulse",data:$.param(c)}).then(function(b){if("true"===b.Success)a.createNewPulseException=!1,i.set("gNotify","AddPulse"),setTimeout(function(){window.location="/sp/sysAdmin/pulse/pulseListings"},100);else{a.createNewPulseException=!0;for(var c in b.error)a.createNewPulseExceptionMsg=b.error[c]}}):a.createNewPulse.validationErrors=!0},a.pulsePreview=function(){d.open({template:"/sp/resources/html/sysAdmin/pulse/pulse-preview.html",scope:a})},a.cancelRedirect=function(){setTimeout(function(){window.location="/sp/sysAdmin/pulse/pulseListings"},100)},a.clearFileStatus=function(){a.pulseFileUploadStatus=!1,a.pulseFileName=null},function(){a.getAccountList()}()}angular.module("spApp").controller("createPulseController",createPulseController),createPulseController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage","FileUploader","$filter"];
function createThemeController(a,b,c,d,e,f,g,h,i,j){a.accountsListException=!1,a.updatedAccountListing=[],a.selectedAccountsCount=0,a.updatedListingIndex=0,a.accountList={},a.selectedCompanyIdList=[],a.allAccountsIdList=[],a.accountList.search=null,a.filteredAccountListing={},a.newTheme={},a.newTheme.validationErrors=!1,a.newThemeDetails={},a.newThemeDetails.category="Business",a.newThemeDetails.isMandatory="true",a.newThemeDetails.status="ACTIVE",a.newThemeDetails.assignAccounts="All",a.createNewThemeException=!1,a.getAccountList=function(){g.getAjaxResponse({url:"/sp/sysAdmin/hk/getCompanyList",method:"GET"}).then(function(b){if("true"===b.Success)a.accountsListException=!1,a.accountListing=b.companies,jQuery.each(a.accountListing,function(b,c){a.updatedAccountListing.push(jQuery.extend({},a.accountListing[b],{accountSelectedStatus:!1})),a.allAccountsIdList.push(a.accountListing[b].id)});else{a.accountsListException=!0;for(var c in b.error)a.accountsListExceptionMsg=b.error[c]}})},a.addtoSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[c].id),a.updatedAccountListing[c].updatedListingIndex=a.updatedListingIndex++,!1):void 0})},a.removeFromSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!1,a.selectedAccountsCount-=1,a.selectedCompanyIdList.splice(a.selectedCompanyIdList.indexOf(b),1),!1):void 0})},a.removeAllSelectedAccounts=function(){jQuery.each(a.updatedAccountListing,function(b){a.updatedAccountListing[b].accountSelectedStatus=!1,a.updatedAccountListing[b].updatedListingIndex=null}),a.selectedAccountsCount=0,a.selectedCompanyIdList=[]},a.addFilteredAccounts=function(){var b=j("filter")(a.updatedAccountListing,a.accountList.search);jQuery.each(b,function(c){jQuery.each(a.updatedAccountListing,function(d){b[c].id===a.updatedAccountListing[d].id&&(a.updatedAccountListing[d].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[d].id),a.updatedAccountListing[d].updatedListingIndex=a.updatedListingIndex++)})}),a.accountList.search=null},a.cancelRedirect=function(){setTimeout(function(){window.location="/sp/sysAdmin/goals/themeListings"},100)},a.createNewTheme=function(b){var c;a.newTheme.validationErrors=!1,a.createNewThemeException=!1,"All"===b.assignAccounts?(a.accList=a.allAccountsIdList,c={name:b.name,description:b.description,status:b.status,category:b.category,isMandatory:b.isMandatory,allAccounts:!0}):(a.accList=a.selectedCompanyIdList,c={name:b.name,description:b.description,status:b.status,category:b.category,isMandatory:b.isMandatory,accounts:a.accList.join(),allAccounts:!1}),this.newTheme.$valid&&a.accList.length>0?(a.newTheme.validationErrors=!1,g.getAjaxResponse({url:"/sp/sysAdmin/goals/createGoal",data:$.param(c)}).then(function(b){if("true"===b.Success)a.createNewThemeException=!1,i.set("gNotify","AddTheme"),setTimeout(function(){window.location="/sp/sysAdmin/goals/themeListings"},100);else{a.createNewThemeException=!0;for(var c in b.error)a.createNewThemeExceptionMsg=b.error[c]}})):a.newTheme.validationErrors=!0},function(){a.getAccountList()}()}angular.module("spApp").controller("createThemeController",createThemeController),createThemeController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage","$filter"];
function libraryHomeDetailsController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.accountsListException=!1,a.updatedAccountListing=[],a.selectedAccountsCount=0,a.updatedListingIndex=0,a.accountList={},a.selectedCompanyIdList=[],a.allAccountsIdList=[],a.getDetailsException=!1,a.createNewLibraryHome={},a.newLibraryHome={},a.libraryHomeEditing={},a.libraryHomeEditing.status=!0,a.libraryHomeIdStatus=!1,a.selectedAccountsDisplayList=[],a.showAccountsDisplayList=!1,a.cid="",a.searchKeywords=[],a.searchTag=[],a.pageSize=100,a.statusInclude=[],a.textSearching="",a.intialPageSize=100,a.load=!0,a.selectArticlesList=[];var o="/sp/resources/images/image_not_available.jpg";a.newLibraryHome.articleImage0=o,a.newLibraryHome.articleImage1=o,a.newLibraryHome.articleImage2=o,a.newLibraryHome.articleImage3=o,a.libraryHomeEnableEdit=function(b){"enable"===b?a.libraryHomeEditing.status=!0:(a.libraryHomeEditing.status=!1,a.getLibraryHomeDetails()),a.accountList.search=null},a.goLibraryHome=function(){window.location="/sp/sysAdmin/curriculam/libraryHome"},a.getCompanyId=function(){var b=window.location.href,c=b.split("?")[1];"undefined"!=typeof c?a.cid=c.split("=")[1]:a.cid=null},a.getLibraryHomeDetails=function(){e.getAjaxResponse({url:"/sp/sysAdmin/library/articles",data:$.param({companyId:a.cid})}).then(function(b){if("true"===b.Success)a.getDetailsException=!1,a.company=b.company,null===b.company&&"business"===a.cid?a.globalName="Global Home - Business":null===b.company&&"individual"===a.cid&&(a.globalName="Global Home - Individual"),a.newLibraryHome.articleId0=b.Content[0].articleId,a.newLibraryHome.articleDescription0=b.Content[0].shortDescription,a.newLibraryHome.articleName0=b.Content[0].articleLinkLabel,null!==b.Content[0].imageUrl&&void 0!==b.Content[0].imageUrl&&(a.newLibraryHome.articleImage0=b.Content[0].imageUrl+"?width=150"),a.newLibraryHome.articleId1=b.Content[1].articleId,a.newLibraryHome.articleDescription1=b.Content[1].shortDescription,a.newLibraryHome.articleName1=b.Content[1].articleLinkLabel,null!==b.Content[1].imageUrl&&void 0!==b.Content[1].imageUrl&&(a.newLibraryHome.articleImage1=b.Content[1].imageUrl+"?width=150"),a.newLibraryHome.articleId2=b.Content[2].articleId,a.newLibraryHome.articleDescription2=b.Content[2].shortDescription,a.newLibraryHome.articleName2=b.Content[2].articleLinkLabel,null!==b.Content[2].imageUrl&&void 0!==b.Content[2].imageUrl&&(a.newLibraryHome.articleImage2=b.Content[2].imageUrl+"?width=150"),a.newLibraryHome.articleId3=b.Content[3].articleId,a.newLibraryHome.articleDescription3=b.Content[3].shortDescription,a.newLibraryHome.articleName3=b.Content[3].articleLinkLabel,null!==b.Content[3].imageUrl&&void 0!==b.Content[3].imageUrl&&(a.newLibraryHome.articleImage3=b.Content[3].imageUrl+"?width=150");else{a.company.name=null,a.getDetailsException=!0;for(var c in b.error)a.getDetailsExceptionMsg=b.error[c]}})},a.selectArticleViaModal=function(b,c,d,e){null===e||void 0===e?e=o:e+="?width=150",0===d?(a.newLibraryHome.articleId0=b,a.newLibraryHome.articleName0=unescape(c),a.newLibraryHome.articleImage0=e):1===d?(a.newLibraryHome.articleId1=b,a.newLibraryHome.articleName1=unescape(c),a.newLibraryHome.articleImage1=e):2===d?(a.newLibraryHome.articleId2=b,a.newLibraryHome.articleName2=unescape(c),a.newLibraryHome.articleImage2=e):3===d&&(a.newLibraryHome.articleId3=b,a.newLibraryHome.articleName3=unescape(c),a.newLibraryHome.articleImage3=e),j.close("ngdialog1")},a.updateLibraryHome=function(b){var c=[],d="";if(d=null===a.company&&"business"===a.cid?"business":null===a.company&&"individual"===a.cid?"individual":a.company.id,a.createNewLibraryHome.validationErrors=!1,a.createNewLibraryHomeException=!1,c=[{articleId:a.newLibraryHome.articleId0,position:0,shortDescription:b.articleDescription0,companyId:d},{articleId:a.newLibraryHome.articleId1,position:1,shortDescription:b.articleDescription1,companyId:d},{articleId:a.newLibraryHome.articleId2,position:2,shortDescription:b.articleDescription2,companyId:d},{articleId:a.newLibraryHome.articleId3,position:3,shortDescription:b.articleDescription3,companyId:d}],void 0!==a.newLibraryHome.articleId0&&void 0!==a.newLibraryHome.articleId1&&void 0!==a.newLibraryHome.articleId2&&void 0!==a.newLibraryHome.articleId3&&void 0!==a.newLibraryHome.articleDescription0&&void 0!==a.newLibraryHome.articleDescription1&&void 0!==a.newLibraryHome.articleDescription2&&void 0!==a.newLibraryHome.articleDescription3&&""!==a.newLibraryHome.articleDescription0&&""!==a.newLibraryHome.articleDescription1&&""!==a.newLibraryHome.articleDescription2&&""!==a.newLibraryHome.articleDescription3&&null!==d&&""!==d){for(var f=0;4>f;f++)e.getAjaxResponse({url:"/sp/trainingLibrary/admin/add/contentArticles",data:$.param(c[f])}).then(function(b){if("true"===b.Success)a.createNewLibraryHome=!1,n.set("gNotify","AddNewLibraryHome");else{a.createNewLibraryHomeException=!0;for(var c in b.error)a.createNewLibraryHomeExceptionMsg=b.error[c]}});$.growl({icon:"glyphicon glyphicon-ok",message:" Articles updated Successfully"}),setTimeout(function(){window.location="/sp/sysAdmin/curriculam/libraryHome"},1e3)}else $.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"Please fill all the required Fields"}),a.createNewLibraryHome.validationErrors=!0},a.selectArticle=function(b){a.fetchedTopics=[],a.selectArticlesList=[],e.getAjaxResponse({url:"/sp/trainingLibrary/getAllTopics",method:"POST",data:$.param({topic:"Themes"})}).then(function(c){c&&(a.fetchedTopics=c.topics,a.position=b,a.getArticlesList=function(b){a.selectArticlesList=[],e.getAjaxResponse({url:"/sp/trainingLibrary/getResults",method:"POST",data:$.param({topicValue:b,topicCategory:"Themes"})}).then(function(b){if("true"===b.Success)b.articles.length>0&&(a.getAllError=!1,a.selectArticlesList=b.articles,a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize));else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){if(a.searchTag.length&&!a.statusInclude.length&&(a.selectArticlesList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.selectArticlesList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.selectArticlesList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.selectArticlesList=angular.copy(a.selectArticlesList)),a.pageSize=b,b>=a.selectArticlesList.length&&(a.pageSize=a.selectArticlesList.length),a.load&&(a.lastPredicate="name",a.lastReverse=!1,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.selectArticlesList=a.selectArticlesList},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.selectArticlesList=i("orderBy")(a.selectArticlesList,b,c)},j.open({template:"/sp/resources/html/sysAdmin/curriculam/selectArticleModal.html",scope:a}))})},function(){a.getCompanyId(),a.getLibraryHomeDetails()}()}angular.module("spApp").controller("libraryHomeDetailsController",libraryHomeDetailsController),libraryHomeDetailsController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];
function pulseDetailsController(a,b,c,d,e,f,g,h,i,j,k){a.accountsListException=!1,a.updatedAccountListing=[],a.selectedAccountsCount=0,a.updatedListingIndex=0,a.accountList={},a.selectedCompanyIdList=[],a.allAccountsIdList=[],a.getDetailsException=!1,a.createNewPulse={},a.newPulse={},a.pulseEditing={},a.pulseEditing.status=!1,a.pulseIdStatus=!1,a.selectedAccountsDisplayList=[],a.showAccountsDisplayList=!1,a.pulseEnableEdit=function(b){"enable"===b?a.pulseEditing.status=!0:(a.pulseEditing.status=!1,a.getPulseDetailsWithId()),a.accountList.search=null},a.getAccountList=function(){g.getAjaxResponse({url:"/sp/sysAdmin/hk/getCompanyList",method:"GET"}).then(function(b){if("true"===b.Success)a.accountsListException=!1,a.accountListing=b.companies,jQuery.each(a.accountListing,function(b,c){a.updatedAccountListing.push(jQuery.extend({},a.accountListing[b],{accountSelectedStatus:!1})),a.allAccountsIdList.push(a.accountListing[b].id)});else{a.accountsListException=!0;for(var c in b.error)a.accountsListExceptionMsg=b.error[c]}})},a.addtoSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[c].id),a.updatedAccountListing[c].updatedListingIndex=a.updatedListingIndex++,!1):void 0})},a.removeFromSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!1,a.selectedAccountsCount-=1,a.selectedCompanyIdList.splice(a.selectedCompanyIdList.indexOf(b),1),!1):void 0})},a.removeAllSelectedAccounts=function(){jQuery.each(a.updatedAccountListing,function(b){a.updatedAccountListing[b].accountSelectedStatus=!1,a.updatedAccountListing[b].updatedListingIndex=null}),a.selectedAccountsCount=0,a.selectedCompanyIdList=[]},a.addFilteredAccounts=function(){var b=k("filter")(a.updatedAccountListing,a.accountList.search);jQuery.each(b,function(c){jQuery.each(a.updatedAccountListing,function(d){b[c].id===a.updatedAccountListing[d].id&&(a.updatedAccountListing[d].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[d].id),a.updatedAccountListing[d].updatedListingIndex=a.updatedListingIndex++)})}),a.accountList.search=null},a.getPulseId=function(){var b=window.location.href,c=b.split("?")[1];"undefined"!=typeof c?(a.urlPulseId=c.split("=")[1],e(function(){a.pulseIdStatus=!0},100)):(a.urlPulseId=null,e(function(){a.pulseIdStatus=!1},100))},a.getPulseDetailsWithId=function(){g.getAjaxResponse({url:"/sp/sysAdmin/pulse/getDetails",data:$.param({pulseQuestionSetId:a.urlPulseId})}).then(function(b){if("true"===b.Success){a.showAccountsDisplayList=!1,a.getDetailsException=!1,a.pulseDetails=b.pulseQuestion,a.pulseNameDisplay=a.pulseDetails.name,a.newPulse.name=a.pulseNameDisplay,a.newPulse.questionSetType=a.pulseDetails.questionSetType;var c=0;a.pulseDetails.forAll===!1?(a.selectedAccountsCount=0,a.selectedCompanyIdList=[],a.selectedAccountsDisplayList=[],a.newPulse.assignAccounts="Selected",jQuery.each(a.pulseDetails.companyId,function(b){jQuery.each(a.updatedAccountListing,function(c){a.pulseDetails.companyId[b]===a.updatedAccountListing[c].id&&(a.updatedAccountListing[c].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[c].id),a.updatedAccountListing[c].updatedListingIndex=a.updatedListingIndex++,a.selectedAccountsDisplayList.push(a.updatedAccountListing[c]))}),c++}),c===a.pulseDetails.companyId.length&&(a.showAccountsDisplayList=!0)):a.newPulse.assignAccounts="All"}else{a.pulseNameDisplay=null,a.getDetailsException=!0;for(var d in b.error)a.getDetailsExceptionMsg=b.error[d]}})},a.updateThisPulse=function(b){var c;"All"===b.assignAccounts?(a.accList=a.allAccountsIdList,c={name:b.name,pulseQuestionSetId:a.urlPulseId,type:b.questionSetType,isForAll:!0}):(a.accList=a.selectedCompanyIdList,c={name:b.name,pulseQuestionSetId:a.urlPulseId,type:b.questionSetType,companyIds:a.accList.join(),isForAll:!1}),this.createNewPulse.$valid&&a.accList.length>0?g.getAjaxResponse({url:"/sp/sysAdmin/pulse/update",data:$.param(c)}).then(function(b){if("true"===b.Success)a.updatePulseException=!1,a.pulseEnableEdit(),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Details</strong>",message:" updated successfully"});else{a.updatePulseException=!1;for(var c in b.error)a.updatePulseExceptionMsg=b.error[c]}}):a.createNewPulse.validationErrors=!0},a.pulseJsonDownload=function(){setTimeout(function(){window.location="/sp/sysAdmin/pulse/downloadJson?pulseQuestionSetId="+a.urlPulseId},100)},a.defaultPulse=function(b){a.noChart(a.pulseDrop,a.defaultPulseName)},a.increment=function(){return a.defaultPulseName++,!0},a.decrement=function(){return a.defaultPulseName--,!0},a.questionSet=function(){"questions"in a.questionList&&(a.mapQuestionObject=a.questionList.questions[a.activePulse])},a.noChart=function(b,c){b.length&&a.noChartPulse(b[c])},a.noChartPulse=function(b){a.activePulse=b,a.mapQuestionObject=a.questionList.questions[b]},a.pulsePreview=function(){g.getAjaxResponse({url:"/sp/sysAdmin/pulse/previewJson?pulseQuestionSetId="+a.urlPulseId,method:"GET"}).then(function(b){b&&(a.questionList=b.pulseQuestionSetPreview,a.questionSet(),a.pulseDrop=a.questionList.categoryKeys,e(function(){a.defaultPulseName=0},0),a.noChart(a.pulseDrop,0),d.open({template:"/sp/resources/html/sysAdmin/pulse/pulse-preview.html",scope:a}))})},function(){a.getPulseId(),a.getAccountList(),a.getPulseDetailsWithId()}()}angular.module("spApp").controller("pulseDetailsController",pulseDetailsController),pulseDetailsController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage","FileUploader","$filter"];
function pulseListingController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.pulseMasterList=[],a.getAllError=!1,a.searchTag=[],a.pageSize=10,a.statusInclude=[],a.textSearching="",a.intialPageSize=10,a.load=!0,a.formatMonth=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split(" "),c=b[0].substr(0,3).toUpperCase(),d=c+" "+b[1]+" "+b[2];return d}},a.getNewPulseList=function(){e.getAjaxResponse({url:"/sp/sysAdmin/pulse/getAll"}).then(function(b){if("true"===b.Success)a.getAllError=!1,a.pulseMasterList=b.pulseQuestion,a.returnMemberList(a.pageSize);else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){if(!a.pulseMasterList.length)return!0;if(a.searchTag.length&&!a.statusInclude.length&&(a.pulseList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.pulseList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.pulseList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.pulseList=angular.copy(a.pulseMasterList)),a.pageSize=b,b>=a.pulseMasterList.length&&(a.disabledInfinite=!0,a.pageSize=a.pulseMasterList.length),a.load&&(a.lastPredicate="name",a.lastReverse=!1,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.pulseList=a.pulseList},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.pulseList=i("orderBy")(a.pulseList,b,c)},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof this.selectedSearch&&(this.selectedSearch.userStatusFormatted="",this.selectedSearch.hiringRoles=""),a.pulseList=angular.copy(a.pulseMasterList),"undefined"!=typeof b&&(a.pageSize=a.pulseMasterList.length),angular.element($(".tags").find("input")).scope().newTag.text="",a.load=!0,a.disabledInfinite=!1,m.$broadcast("$scrollStart"),a.returnMemberList(a.pageSize);var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.updateStatusError=!1,a.updatePulseStatus=function(b,c){e.getAjaxResponse({url:"/sp/sysAdmin/pulse/updateStatus",data:$.param({pulseQuestionSetId:c,status:b})}).then(function(b){if("true"===b.Success)a.updateStatusError=!1,j.close("ngdialog1"),a.getNewPulseList(),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Status</strong>",message:" updated successfully"});else{a.updateStatusError=!0;for(var c in b.error)a.updateStatusErrorMsg=b.error[c];j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}})},a.deleteConfirm=function(b){a.afid=b,j.open({template:"/sp/resources/html/sysAdmin/pulse/deleteConfirmation.html",scope:a})},function(){var b=n.get("gNotify");null!==b&&"undefined"!=typeof b&&("AddPulse"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Pulse</strong>",message:" created successfully"}),setTimeout(function(){n.remove("gNotify")},1e3)),a.getNewPulseList()}()}angular.module("spApp").controller("pulseListingController",pulseListingController),pulseListingController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];
function sysAdminPanel(a,b,c,d,e,f,g,h){a.memberList=[],a.masterMemberList=[],a.pageSize=10,a.intialPageSize=10,a.lastPredicate="name",a.lastReverse=!1,a.userEmail={email:[]},a.textSearching="",a.checkedAll=!1,a.getLoggedInUserList=function(){var b={url:"/sp/sysAdmin/hk/getLoggedInUsers",method:"get"};d.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.masterMemberList=b.loggedInUsers.length?b.loggedInUsers:[],a.memberList=angular.copy(a.masterMemberList),a.returnMemberList(a.pageSize),a.change="email")})},a.getUserList=function(){var b={url:"/sp/sysAdmin/hk/getUserList",method:"get"};d.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.masterMemberList=b.users.length?b.users:[],a.memberList=angular.copy(a.masterMemberList),a.returnMemberList(a.pageSize),a.change="email")})},a.getCompanyList=function(){var b={url:"/sp/sysAdmin/hk/getCompanyList",method:"get"};d.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.masterMemberList=b.companies.length?b.companies:[],a.memberList=angular.copy(a.masterMemberList),a.returnMemberList(a.pageSize),a.change="phoneNumber")})},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.memberList=f("orderBy")(a.memberList,b,c)},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.active=function(b){g.toggleFilterClick(b,a.currentPredicate)},a.infinteScroll=function(b){a.returnMemberList(b)},a.returnMemberList=function(b){return a.masterMemberList.length?(a.memberList=g.searchModuleName(a.textSearching,a.masterMemberList,2,a.change),a.pageSize=b,b>=a.masterMemberList.length&&(a.disabledInfinite=!0,a.pageSize=a.masterMemberList.length),a.order(a.lastPredicate,a.lastReverse),void(a.memberList=a.memberList)):!0},a.checkUncheck=function(){a.alltoggle=!1,a.checkedAll&&(a.negative=!a.negative,a.checkedAll=!a.checkedAll)},a.checkAll=function(){a.checkedAll=!a.checkedAll,a.negative?a.userEmail.email=a.masterMemberList.map(function(a){return{email:a.email,name:a.name,title:a.title}}):a.userEmail.email=[]}}angular.module("spApp").controller("sysAdminPanel",sysAdminPanel),sysAdminPanel.$inject=["$scope","$element","$attrs","ajaxService","$state","$filter","sharedProperties","$rootScope"];
function themeDetailsController(a,b,c,d,e,f,g,h,i,j){a.accountsListException=!1,a.updatedAccountListing=[],a.selectedAccountsCount=0,a.updatedListingIndex=0,a.accountList={},a.selectedCompanyIdList=[],a.allAccountsIdList=[],a.accountList.search=null,a.filteredAccountListing={},a.newTheme={},a.newTheme.validationErrors=!1,a.newThemeDetails={},a.updateThemeException=!1,a.themeDetailsEditing={},a.themeDetailsEditing.status=!1,a.themeId=f.getParam("t"),a.getThemeDetailsException=!1,a.selectedAccountsDisplayList=[],a.getAccountList=function(){g.getAjaxResponse({url:"/sp/sysAdmin/hk/getCompanyList",method:"GET"}).then(function(b){if("true"===b.Success)a.accountsListException=!1,a.accountListing=b.companies,jQuery.each(a.accountListing,function(b,c){a.updatedAccountListing.push(jQuery.extend({},a.accountListing[b],{accountSelectedStatus:!1})),a.allAccountsIdList.push(a.accountListing[b].id)});else{a.accountsListException=!0;for(var c in b.error)a.accountsListExceptionMsg=b.error[c]}})},a.addtoSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[c].id),a.updatedAccountListing[c].updatedListingIndex=a.updatedListingIndex++,!1):void 0})},a.removeFromSelectedAccounts=function(b){jQuery.each(a.updatedAccountListing,function(c){return a.updatedAccountListing[c].id===b?(a.updatedAccountListing[c].accountSelectedStatus=!1,a.selectedAccountsCount-=1,a.selectedCompanyIdList.splice(a.selectedCompanyIdList.indexOf(b),1),!1):void 0})},a.removeAllSelectedAccounts=function(){jQuery.each(a.updatedAccountListing,function(b){a.updatedAccountListing[b].accountSelectedStatus=!1,a.updatedAccountListing[b].updatedListingIndex=null}),a.selectedAccountsCount=0,a.selectedCompanyIdList=[]},a.addFilteredAccounts=function(){var b=j("filter")(a.updatedAccountListing,a.accountList.search);jQuery.each(b,function(c){jQuery.each(a.updatedAccountListing,function(d){b[c].id===a.updatedAccountListing[d].id&&(a.updatedAccountListing[d].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[d].id),a.updatedAccountListing[d].updatedListingIndex=a.updatedListingIndex++)})}),a.accountList.search=null},a.themeDetailsEdit=function(b){"enable"===b?a.themeDetailsEditing.status=!0:(a.themeDetailsEditing.status=!1,a.getThemeDetails()),a.accountList.search=null},a.updateThemeDetails=function(b){var c;a.newTheme.validationErrors=!1,a.createNewThemeException=!1,"All"===b.assignAccounts?(a.accList=a.allAccountsIdList,c={name:b.name,description:b.description,status:b.status,category:b.category,isMandatory:b.isMandatory,allAccounts:!0,goalId:a.themeId}):(a.accList=a.selectedCompanyIdList,c={name:b.name,description:b.description,status:b.status,category:b.category,isMandatory:b.isMandatory,accounts:a.accList.join(),allAccounts:!1,goalId:a.themeId}),this.newTheme.$valid&&a.accList.length>0?(a.newTheme.validationErrors=!1,g.getAjaxResponse({url:"/sp/sysAdmin/goals/updateGoal",data:$.param(c)}).then(function(b){if("true"===b.Success)a.updateThemeException=!1,a.themeDetailsEdit(),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Details</strong>",message:" updated successfully."});else{a.updateThemeException=!0;for(var c in b.error)a.updateThemeExceptionMsg=b.error[c]}})):a.newTheme.validationErrors=!0},a.getThemeDetails=function(){null!==a.themeId&&"undefined"!=typeof a.themeId&&g.getAjaxResponse({url:"/sp/sysAdmin/goals/getGoalDetail",data:$.param({goalId:a.themeId})}).then(function(b){if("true"===b.Success)if(a.getThemeDetailsException=!1,a.currentThemeDetails=b.goal,a.newThemeDetails.name=a.currentThemeDetails.name,a.newThemeDetails.description=a.currentThemeDetails.description,a.newThemeDetails.category=a.currentThemeDetails.category,a.newThemeDetails.isMandatory=a.currentThemeDetails.mandatory.toString(),a.newThemeDetails.status=a.currentThemeDetails.status,a.currentThemeDetails.allAccounts===!0)a.newThemeDetails.assignAccounts="All";else{a.selectedAccountsDisplayList=[],a.selectedCompanyIdList=[],a.selectedAccountsCount=0,a.newThemeDetails.assignAccounts="Selected";var c=a.currentThemeDetails.companyDTO;jQuery.each(c,function(b){jQuery.each(a.updatedAccountListing,function(d){c[b].id===a.updatedAccountListing[d].id&&(a.updatedAccountListing[d].accountSelectedStatus=!0,a.selectedAccountsCount+=1,a.selectedCompanyIdList.push(a.updatedAccountListing[d].id),a.updatedAccountListing[d].updatedListingIndex=a.updatedListingIndex++,a.selectedAccountsDisplayList.push(a.updatedAccountListing[d]))})})}else a.getThemeDetailsException=!0})},function(){a.getAccountList(),e(function(){a.getThemeDetails()},300)}()}angular.module("spApp").controller("themeDetailsController",themeDetailsController),themeDetailsController.$inject=["$scope","$element","$attrs","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage","$filter"];
function themeListingController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.themesListMaster=[],a.getAllError=!1,a.searchTag=[],a.pageSize=10,a.statusInclude=[],a.textSearching="",a.intialPageSize=10,a.load=!0,a.formatMonth=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split(" "),c=b[0].substr(0,3).toUpperCase(),d=c+" "+b[1]+" "+b[2];return d}},a.getFullThemeList=function(){e.getAjaxResponse({url:"/sp/sysAdmin/goals/getAllGoals"}).then(function(b){if("true"===b.Success)a.getAllError=!1,a.themesListMaster=b.goals,a.returnMemberList(a.pageSize);else{a.getAllError=!0;for(var c in b.error)a.getAllErrorMsg=b.error[c]}})},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.returnMemberList=function(b){if(!a.themesListMaster.length)return!0;if(a.searchTag.length&&!a.statusInclude.length&&(a.themesList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.themesList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.themesList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.themesList=angular.copy(a.themesListMaster)),a.pageSize=b,b>=a.themesListMaster.length&&(a.disabledInfinite=!0,a.pageSize=a.themesListMaster.length),a.load&&(a.lastPredicate="name",a.lastReverse=!1,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.themesList=a.themesList},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.themesList=i("orderBy")(a.themesList,b,c)},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof this.selectedSearch&&(this.selectedSearch.userStatusFormatted="",this.selectedSearch.hiringRoles=""),a.themesList=angular.copy(a.themesListMaster),"undefined"!=typeof b&&(a.pageSize=a.themesListMaster.length),angular.element($(".tags").find("input")).scope().newTag.text="",a.load=!0,a.disabledInfinite=!1,m.$broadcast("$scrollStart"),a.returnMemberList(a.pageSize);var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.updateStatusError=!1,a.updateAffiliateCodeStatus=function(b,c){e.getAjaxResponse({url:"/sp/sysAdmin/promotions/updateStatus",data:$.param({promotionId:c,promotionStatus:b})}).then(function(b){if("true"===b.Success)a.updateStatusError=!1,j.close("ngdialog1"),a.getFullThemeList(),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Status</strong>",message:" updated successfully"});else{a.updateStatusError=!0;for(var c in b.error)a.updateStatusErrorMsg=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}})},a.deactivateThemeException=!1,a.deActivateTheme=function(b,c){a.currentThemeName=c,a.processDeactivate=function(){e.getAjaxResponse({url:"/sp/sysAdmin/goals/deactivate",data:$.param({goalId:b})}).then(function(b){if("true"===b.Success)a.deactivateThemeException=!1,a.getFullThemeList(),j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Status</strong>",message:" updated successfully"});else{a.deactivateThemeException=!0;for(var c in b.error)a.deactivateThemeExceptionMsg=b.error[c];j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.deactivateThemeExceptionMsg})}})},j.open({template:"/sp/resources/html/sysAdmin/learning-library/deactivateTheme.html",scope:a})},a.activateThemeException=!1,a.activateTheme=function(b){a.processActivate=function(){e.getAjaxResponse({url:"/sp/sysAdmin/goals/activate",data:$.param({goalId:b})}).then(function(b){if("true"===b.Success)a.activateThemeException=!1,a.getFullThemeList(),j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Status</strong>",message:" updated successfully"});else{a.activateThemeException=!0;for(var c in b.error)a.deactivateThemeExceptionMsg=b.error[c];j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.updateStatusErrorMsg})}})},j.open({template:"/sp/resources/html/sysAdmin/learning-library/activateTheme.html",scope:a})},function(){var b=n.get("gNotify");null!==b&&"undefined"!=typeof b&&("AddTheme"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Theme</strong>",message:" created successfully"}),setTimeout(function(){n.remove("gNotify")},1e3)),a.getFullThemeList()}()}angular.module("spApp").controller("themeListingController",themeListingController),themeListingController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"];