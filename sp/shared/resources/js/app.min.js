function barInfoGraph(a,b){return{restrict:"A",scope:{data:"=barData",barConfig:"@barConfig"},link:function(a,c,d){function e(){f="#"+jQuery(c[0]).attr("id"),g=d3.select(f),h=g.append("svg").attr({width:"100%",height:"100%",viewBox:"0 0 "+jQuery(c[0]).width()+" "+jQuery(c[0]).height(),perserveAspectRatio:"none"});var b=jQuery(c[0]).find("svg").height(),d=jQuery(c[0]).find("svg").width(),e={fill:a.data[i.name]>49?j[i.type][0]:j[i.type][1],width:"Vertical"===i.type?"100%":a.data[i.name]+"%",height:"Vertical"===i.type?a.data[i.name]+"%":"100%",x:"Vertical"===i.type?0:"Left"===i.dir?d-d*a.data[i.name]/100:0,y:"Vertical"===i.type&&"Top"===i.dir?b-b*a.data[i.name]/100:0};h.append("rect").attr(e);for(var k=0;10>k;k++)k>0&&10>k&&h.append("rect").attr({fill:"#fff",x:"Vertical"===i.type?0:d/10*k,y:"Vertical"===i.type?b/10*k:0,width:"Vertical"===i.type?"100%":1,height:"Vertical"===i.type?1:"100%"})}if(Object.keys(a.data).length){jQuery(c[0]).find("svg").remove();var f,g,h,i=JSON.parse(a.barConfig.toString()),j={Vertical:["#69519D","#BBB1E5"],Horizantal:["#26A6C3","#AAE3E8"]},k=null;k=b(e,0)}}}}angular.module("spApp").directive("barInfoGraph",barInfoGraph),barInfoGraph.$inject=["$rootScope","$timeout"];
function decisionInfoGraph(a,b){return{restrict:"A",scope:{data:"=dmKeys"},link:function(a,c,d){function e(){f="#"+jQuery(c[0]).attr("id"),g=d3.select(f),h=g.insert("svg","div.on-graph-labels"),h=g.select("svg").attr({width:j?190:jQuery(c[0]).width(),height:j?190:jQuery(c[0]).width(),viewBox:j?"0 0 190 190":"0 0 "+jQuery(c[0]).width()+" "+jQuery(c[0]).width(),perserveAspectRatio:"none"}),j&&jQuery(c[0]).find(".on-graph-labels").css({width:190,height:190});var b=jQuery(c[0]).find("svg").width(),d=jQuery(c[0]).find("svg").width(),e=b/2,i=d/2;h.append("rect").attr({fill:"#E8E8E8",x:0,y:0,width:"100%",height:"100%"});var k=b/2/100*a.data.Rapid,l=d/2/100*a.data.Inward,m=0,n=["#57AE52","#E7DF18","#D0362E"],o=n[0];for(var p in a.data)a.data[p]>m&&(m=a.data[p]);m>80&&(o=n[1]),m>90&&(o=n[2]),h.append("rect").attr({fill:o,x:k,y:l,width:b/2,height:d/2}),h.append("line").attr({x1:e,y1:0,x2:e,y2:d,"stroke-width":1,stroke:"#fff"}),h.append("line").attr({x1:0,y1:i,x2:b,y2:i,"stroke-width":1,stroke:"#fff"});for(var q=20,r=d/q,s=b/q,t=0;q>t;t++)t>0&&q>t&&10!==t&&(h.append("rect").attr({fill:"#fff",x:t%5===0?e-8:e-5,y:r*t,width:t%5===0?16:10,height:1}),h.append("rect").attr({fill:"#fff",x:s*t,y:t%5===0?i-8:i-5,width:1,height:t%5===0?16:10}))}if(Object.keys(a.data).length){jQuery(c[0]).find("svg").remove();var f,g,h,i=null,j="undefined"!=typeof jQuery(c[0]).attr("data-pdf")?!0:!1;i=b(e,0)}}}}angular.module("spApp").directive("decisionInfoGraph",decisionInfoGraph),decisionInfoGraph.$inject=["$rootScope","$timeout"];
function personalityInfoGraph(a,b){return{restrict:"A",scope:{data:"=personalityScore"},link:function(a,c,d){function e(){var b=a.data.Primary.segmentScore.toString(),d=a.data.UnderPressure.segmentScore.toString(),e=jQuery(c[0]).find("svg").width(),f=jQuery(c[0]).find("svg").height(),g={x:Math.floor(e/2),y:Math.floor(f/2)};return{c:g,p:{powerful:{x:Math.floor(g.x-b.substr(0,1)*k*(e/2)),y:Math.floor(g.y-b.substr(0,1)*k*(f/2))},versatile:{x:Math.floor(g.x+b.substr(1,1)*k*(e/2)),y:Math.floor(g.y-b.substr(1,1)*k*(f/2))},adaptable:{x:Math.floor(g.x+b.substr(2,1)*k*(e/2)),y:Math.floor(g.y+b.substr(2,1)*k*(f/2))},precise:{x:Math.floor(g.x-b.substr(3,1)*k*(e/2)),y:Math.floor(g.y+b.substr(3,1)*k*(f/2))}},s:{powerful:{x:Math.floor(g.x-d.substr(0,1)*k*(e/2)),y:Math.floor(g.y-d.substr(0,1)*k*(f/2))},versatile:{x:Math.floor(g.x+d.substr(1,1)*k*(e/2)),y:Math.floor(g.y-d.substr(1,1)*k*(f/2))},adaptable:{x:Math.floor(g.x+d.substr(2,1)*k*(e/2)),y:Math.floor(g.y+d.substr(2,1)*k*(f/2))},precise:{x:Math.floor(g.x-d.substr(3,1)*k*(e/2)),y:Math.floor(g.y+d.substr(3,1)*k*(f/2))}}}}function f(){g="#"+jQuery(c[0]).attr("id"),h=d3.select(g),i=h.append("svg").attr({width:"100%",height:"100%",viewBox:"0 0 "+jQuery(c[0]).width()+" "+jQuery(c[0]).width(),perserveAspectRatio:"none"});var a=jQuery(c[0]).find("svg").width(),b=jQuery(c[0]).find("svg").height(),d=e();i.append("rect").attr({fill:"#D3D3D3",width:Math.floor(57*a/100),height:Math.floor(57*b/100),x:Math.floor((a-57*a/100)/2),y:Math.floor((b-57*b/100)/2)});for(var f in d.s)0===d.s[f].x&&(d.s[f].x=3),0===d.s[f].y&&(d.s[f].y=3);i.append("path").attr({"fill-opacity":.6,fill:"#E8C80F","stroke-width":0,d:"M "+d.p.powerful.x+" "+d.p.powerful.y+" L "+d.p.versatile.x+" "+d.p.versatile.y+" L "+d.p.adaptable.x+" "+d.p.adaptable.y+" L "+d.p.precise.x+" "+d.p.precise.y+" L "+d.p.powerful.x+" "+d.p.powerful.y}),i.append("path").attr({"stroke-width":1,stroke:"#fefdf8",d:"M 0 "+b+" L "+a+" 0 M 0 0 L "+a+" "+b}),i.append("path").attr({"stroke-width":4,stroke:"#df4825","stroke-linecap":"round","stroke-linejoin":"round",fill:"transparent",d:"M "+d.s.powerful.x+" "+d.s.powerful.y+" L "+d.s.versatile.x+" "+d.s.versatile.y+" L "+d.s.adaptable.x+" "+d.s.adaptable.y+" L "+d.s.precise.x+" "+d.s.precise.y+" L "+d.s.powerful.x+" "+d.s.powerful.y})}if(Object.keys(a.data).length){jQuery(c[0]).find("svg").remove();var g,h,i,j=null,k=.1428571;j=b(f,0)}}}}angular.module("spApp").directive("personalityInfoGraph",personalityInfoGraph),personalityInfoGraph.$inject=["$rootScope","$timeout"];
function piechartInfoGraph(a,b){return{restrict:"A",scope:{data:"=pieKeys"},link:function(c,d,e){function f(a,b){return a[1]<b[1]?1:a[1]>b[1]?-1:0}function g(){var a="";return jQuery.each(p,function(b){a+="conflictManagement"===i&&2===b?'<span class="split-labels"></span><span class="pie-legend-'+b+'"><span class="lColor"></span><span class="lText">'+p[b][0]+"</span></span>":"fundamentalNeeds"===i&&1===b?'<span class="split-labels"></span><span class="pie-legend-'+b+'"><span class="lColor"></span><span class="lText">'+p[b][0]+"</span></span>":'<span class="pie-legend-'+b+'"><span class="lColor"></span><span class="lText">'+p[b][0]+"</span></span>"}),'<p class="pieChartLegends '+i+'">'+a+"</p>"}function h(){var a=(c3.generate({bindto:k,size:{width:j?250:void 0,height:j?250:void 0},data:{columns:p,type:"pie"},color:{pattern:m[i]},legend:{show:!1,item:{onclick:function(a){}}}}),g());jQuery(k).append(a)}if(Object.keys(c.data).length){var i=jQuery(d[0]).attr("data-piename"),j="undefined"!=typeof jQuery(d[0]).attr("data-pdf")?!0:!1,k="#"+jQuery(d[0]).attr("id"),l=c.data,m={conflictManagement:["#eb5a2c","#eb7b21","#f59f13","#ffe299","#ffffd1"],fundamentalNeeds:["#ac3caf","#ce75d3","#eeaaf2"],learningStyle:["#dd66b3","#b21b6e"]},n=[],o=null,p=[];for(var q in l)n.push(a.pullInterNationalization("profileKeys."+q),l[q]),p.push(n),n=[];p=p.sort(f),o=b(h,0)}}}}angular.module("spApp").directive("piechartInfoGraph",piechartInfoGraph),piechartInfoGraph.$inject=["$rootScope","$timeout"];
function accountDashboardController(a,b,c,d,e,f,g,h,i,j,k){a.stateCheck={},a.settings={},a.companyDetails={},a.disableCompanyEditing=!0,a.disableProfileEditing=!0,a.disableLinkedinEditing=!0,a.disableIndividualEditing=!0,a.disableUserProfileEditing=!0,a.formStatus={},a.accountInfo={},a.profile={},a.userGroupList=[],a.userTagList=[],a.groupDataSet={},a.dataWithFlags=[],a.allGroupListCounter=0,a.linkeDInFormStatus=!1,a.profilePic="",a.userInitials="",a.assessmentDetails={},a.feedbackDetails={},a.goalsDetails={},a.growthTeamDetails={},a.userPermissions={},a.profileSetings={},a.userPermissions.isAccountAdministrator=!1,a.userPermissions.isAdministrator=!1,a.userPermissions.isHiringToolAllowed=!1,a.userPermissions.isWorkspacePulseAllowed=!1,a.userPermissions.isSpectrumAllowed=!1,a.profileSetings.is360ProfileAllowed=!1,a.profileSetings.isHiringAccessAllowed=!1,a.profileToken={},a.userGroupListBusiness=[],a.dataWithFlagsBusiness=[],a.groupDataSetBusiness={},a.allGroupListCounterBusiness=0,a.updatedEmail="",a.dialogStatus={},a.accountPermissionOptions={show:!0},a.openView=!0,a.enableBtns=!1,a.serverError=!1,a.serverError1=!1,a.currentUser={},a.currentUser.groupList="default",a.glStatusUpdate=!1,a.serverError1=!1,a.priceFormatter=function(a){if("undefined"!=typeof a&&""!==a&&null!==a){var b="$"+a.toFixed(2);return b}},null!==k.get("spProfileTab")&&(a.setTab=!0,j.callSwitchChange("spProfile")),a.apiConfig={urls:{company:{saveUpdate:"/sp/admin/account/updateCompany"},adminView:{saveUpdate:"/sp/admin/user/update/profile"},individual:{saveUpdate:"/sp/updateProfile"},userView:{saveUpdate:"/sp/updateProfile"},businessAccountDetails:"/sp/admin/account/businessAccountDetails",getCompanyDetails:"/sp/admin/account/getCompanyDetails",blockAllMembers:"/sp/admin/account/blockAllMembers",updateCompany:"/sp/admin/account/updateCompany",cancelAccount:"/sp/admin/account/cancel",updateLinkedIn:"/sp/admin/updateLinkedIn"}},a.setOptions=function(b){a.settings.currentPage=b,k.set("account_type",b)},a.enableEdit=function(b){"company"===b&&(a.disableCompanyEditing=!1),"profile"===b&&(a.disableProfileEditing=!1),"linkedin"===b&&(a.disableLinkedinEditing=!1),"individual"===b&&(a.disableIndividualEditing=!1),"userProfile"===b&&(a.disableUserProfileEditing=!1)},a.disableEdit=function(b){"company"===b&&(a.disableCompanyEditing=!0,a.getCompanyDetails()),"profile"===b&&(a.disableProfileEditing=!0,a.getUserDetails()),"linkedin"===b&&(a.disableLinkedinEditing=!0),"individual"===b&&(a.disableIndividualEditing=!0,a.getIndividualUserDetails()),"userProfile"===b&&(a.disableUserProfileEditing=!0,a.getUserDetailsBusiness()),a.formStatus.sumbit=!1,a.linkeDInFormStatus=!1},a.saveAndUpdate=function(b,c){var d;d="undefined"!=typeof b.numberOfEmployees&&b.numberOfEmployees<1?!1:!0;var e=a.apiConfig.urls[a.settings.currentPage].saveUpdate,f=0;a.formStatus.sumbit=!1;for(var g in b)if("object"==typeof b[g])for(var h in b[g])("default"===b[g][h]||"default1"===b[g][h])&&f++;else("default"===b[g]||"default1"===b[g])&&f++;this[c].$valid&&0===f&&d?(a.disableCompanyEditing=!0,a.disableProfileEditing=!0,a.disableIndividualEditing=!0,a.disableUserProfileEditing=!0,i.getAjaxResponse({url:e,data:$.param(b).replace(/address%5B/g,"").replace(/%5D/g,"").replace(/%2C/g,",")}).then(function(b){"true"===b.Success&&("company"===a.settings.currentPage&&a.getCompanyDetails(),"adminView"===a.settings.currentPage&&a.getUserDetails(),"individual"===a.settings.currentPage&&(k.remove("loggegdInProfile"),window.location.reload()),"userView"===a.settings.currentPage&&(k.remove("loggegdInProfile"),window.location.reload()))})):a.formStatus.sumbit=!0},a.getCompanyDetails=function(){i.getAjaxResponse({url:a.apiConfig.urls.getCompanyDetails}).then(function(b){"true"===b.Success&&(a.companyDetail=b.company,a.companyDetail.address1=b.company.address.addressLine1,a.companyDetail.address2=b.company.address.addressLine2,a.companyDetail.zip=b.company.address.zipCode,a.stateCheck.forSelectedCountry=b.company.address.country)})},a.getAccountInfo=function(){i.getAjaxResponse({url:a.apiConfig.urls.businessAccountDetails}).then(function(b){"true"===b.Success?(a.accountDetailsServerException=!1,a.accountDetailsServerException.message="",a.accountInfo=b):(a.accountDetailsServerException=!0,"undefined"!=typeof b.error.InvalidRequestException?a.accountDetailsExceptionMessage=b.error.InvalidRequestException:a.accountDetailsExceptionMessage="Error occured on server.")})},a.blockAllMembers=function(b,c){var d,e={};d=b===!1?!0:!1,e.isBlockAllUsers=d,i.getAjaxResponse({url:a.apiConfig.urls.blockAllMembers,data:$.param(e)})},a.showCancelDialog=function(b){"undefined"!=typeof b&&""!==b&&null!==b&&"individual"===b?a.individualCancel=!0:a.individualCancel=!1,a.dialogStatus.title="Cancel Subscription",a.dialogStatus.content="Subscription cancelled successfully.",f.open({template:"/sp/resources/html/admin/account/cancel-subscription-dialog.html",scope:a})},a.showDetailsDialog=function(b){"members"===b?(a.showDetails={title:"Member account details",total:'Total member accounts purchased : <span class="b-700">'+parseInt(a.accountInfo.account.productInfo.numActive+a.accountInfo.account.productInfo.availalbeMemberSubscriptions+a.accountInfo.account.productInfo.numDeleted)+"</span>",active:a.accountInfo.account.productInfo.numActive,deleted:a.accountInfo.account.productInfo.numDeleted,available:a.accountInfo.account.productInfo.availalbeMemberSubscriptions},f.open({template:"/sp/resources/html/admin/account/show-details-dialog.html",scope:a})):(a.showDetails={title:"Candidate account details",total:'Total candidate accounts purchased : <span class="b-700">'+parseInt(a.accountInfo.account.hiringProduct.availableHiringSubscripitons+a.accountInfo.account.hiringProduct.usedHiringSubscriptions)+"</span>",active:a.accountInfo.account.hiringProduct.usedHiringSubscriptions,deleted:a.accountInfo.account.hiringProduct.availableHiringSubscripitons+a.accountInfo.account.hiringProduct.usedHiringSubscriptions-a.accountInfo.account.hiringProduct.availableHiringSubscripitons-a.accountInfo.account.hiringProduct.usedHiringSubscriptions,available:a.accountInfo.account.hiringProduct.availableHiringSubscripitons},f.open({template:"/sp/resources/html/admin/account/show-details-dialog.html",scope:a}))},a.cancelSubscription=function(){i.getAjaxResponse({url:a.apiConfig.urls.cancelAccount}).then(function(b){"true"===b.Success?(f.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Subscription cancelled successfully "}),g(function(){a.individualCancel===!0?a.getIndividualAccountInfo():a.getAccountInfo()},300)):(f.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Server </strong> ",message:Error}),g(function(){a.individualCancel===!0?a.getIndividualAccountInfo():a.getAccountInfo()},300))})},a.showReactivateDialog=function(b){"undefined"!=typeof b&&""!==b&&null!==b&&"individual"===b?a.individualReactivate=!0:a.individualReactivate=!1,i.getAjaxResponse({url:"/sp/admin/account/reActivate"}).then(function(b){"true"===b.Success&&(a.individualReactivate===!0?a.getIndividualAccountInfo():a.getAccountInfo(),$.growl({icon:"glyphicon glyphicon-ok",message:" Subscription renewal activated successfully"}))})},a.cancelRedirect=function(){"company"===a.settings.currentPage&&(window.location="/sp/admin/account/business"),"individual"===a.settings.currentPage&&(window.location="/sp/admin/account/individual")},a.initBusinessDashboard=function(){a.getCompanyDetails(),a.getAccountInfo()},a.goBack=function(a){window.location.href=a},a.getUserDetails=function(){a.signedInUser=e.retrive();var b={userEmail:null!==k.get("memEmail")?k.get("memEmail"):a.signedInUser.member.email};a.updatedEmail=null!==k.get("memEmail")?k.get("memEmail"):a.signedInUser.member.email,a.userGroupList=[],i.getAjaxResponse({url:"/sp/admin/user",data:$.param(b).replace(/%40/g,"@")}).then(function(b){"true"===b.Success&&(a.profile=b.profileForm,a.userGroupList=b.groupList,a.profilePic=b.userSummary.smallProfileImage,a.userInitials=b.userSummary.userInitials,a.profile.name=b.userSummary.name,null!==b.tagList&&(a.userTagList=b.tagList,a.existingTags=a.userTagList.join()),null!==b.address?(a.profile.country="USA"===b.address.country?"United States":b.address.country,a.stateCheck.forSelectedCountry=b.address.country,a.profile.address1=b.address.addressLine1,a.profile.address2=b.address.addressLine2,a.profile.city=b.address.city,a.profile.state=b.address.state,a.profile.zip=b.address.zipCode,g(function(){a.profile.state=b.address.state},200)):(a.profile.country="default",a.stateCheck.forSelectedCountry="default",a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.state=null,a.profile.zip=null),null===a.profile.gender&&(a.profile.gender="default"),0===a.profile.year&&(a.profile.year="default"),0===a.profile.month&&(a.profile.month="default"),0===a.profile.day&&(a.profile.day="default"),null===a.profile.linkedInUrl||"undefined"==typeof a.profile.linkedInUrl?a.disableLinkedinEditing=!1:a.disableLinkedinEditing=!0,a.goalsDetails.percentage=0,a.growthTeamDetails.percentage=0,a.permissions=b.roles,a.userPermissions.isAccountAdministrator=!1,a.userPermissions.isAdministrator=!1,a.userPermissions.isHiringToolAllowed=!1,a.userPermissions.isWorkspacePulseAllowed=!1,a.userPermissions.isSpectrumAllowed=!1,jQuery.each(a.permissions,function(b,c){"AccountAdministrator"===a.permissions[b]&&(a.userPermissions.isAccountAdministrator=!0),"Administrator"===a.permissions[b]&&(a.userPermissions.isAdministrator=!0),"Hiring"===a.permissions[b]&&(a.userPermissions.isHiringToolAllowed=!0),"Pulse"===a.permissions[b]&&(a.userPermissions.isWorkspacePulseAllowed=!0),"Spectrum"===a.permissions[b]&&(a.userPermissions.isSpectrumAllowed=!0)}),g(function(){a.setupAccountAccess(a.signedInUser.member.email,a.signedInUser.member.roles,a.profile.email,b.roles)},300),a.assessmentStatus=b.userSummary.userStatus)})},a.setupAccountAccess=function(b,c,d,e){var f,g,h=b,i=d,j=c.sort(),k=e.sort();$.each(j,function(a){return"AccountAdministrator"===j[a]?(f="AccountAdministrator",!1):"Administrator"===j[a]?(f="Administrator",!1):void 0}),$.each(k,function(a){return"AccountAdministrator"===k[a]?(g="AccountAdministrator",!1):"Administrator"===k[a]?(g="Administrator",!1):"GroupLead"===k[a]?(g="GroupLead",!1):"User"===k[a]?(g="User",!1):(g="None",!1)}),"AccountAdministrator"===f?h!==i?(a.accountPermissionOptions.adminAccess=!0,a.accountPermissionOptions.show=!0):a.accountPermissionOptions.show=!1:"Administrator"===f?(a.accountPermissionOptions.adminAccess=!1,h!==i&&"AccountAdministrator"!==g&&"Administrator"!==g?a.accountPermissionOptions.show=!0:a.accountPermissionOptions.show=!1):"GroupLead"===f?(a.accountPermissionOptions.adminAccess=!1,a.accountPermissionOptions.show=!1):(a.accountPermissionOptions.adminAccess=!1,a.accountPermissionOptions.show=!1)},a.getGroupList=function(){a.getUserDetails(),a.groupsDataReady=!1,i.getAjaxResponse({url:"/sp/admin/group/all",delay:100,maximum:1500}).then(function(b){if("true"===b.Success){a.dataWithFlags=[];var c=0;a.groupDataSet=b.groupInfoList,jQuery.each(a.groupDataSet,function(b,c){a.dataWithFlags.push(jQuery.extend({},a.groupDataSet[b],{selectedGroup:!1,selectedGroupLead:!1,alreadyGroupLead:!1}))}),a.allGroupListCounter=a.dataWithFlags.length,jQuery.each(a.dataWithFlags,function(b,d){jQuery.each(a.userGroupList,function(c,d){a.dataWithFlags[b].name===a.userGroupList[c].name&&(a.dataWithFlags[b].selectedGroup=!0,a.allGroupListCounter-=1,a.userGroupList[c].groupLead===!0&&(a.dataWithFlags[b].alreadyGroupLead=!0,a.dataWithFlags[b].selectedGroupLead=!0))}),c++}),a.currentUser.groupList="default",c===a.dataWithFlags.length&&(jQuery("html").hasClass("ie")?g(function(){a.groupsDataReady=!0},500):a.groupsDataReady=!0)}})},a.changeGroup=function(b){if("default"!==b)if("createGroupCall_custom"===b)a.errornewEmptyGroup=!1,a.errornewGroup=!1,f.open({template:"/sp/admin/group/createGroup",scope:a}),a.currentUser.groupList="default";else{var c={name:a.dataWithFlags[b].name,memberEmail:a.profile.email,isGroupLead:a.dataWithFlags[b].alreadyGroupLead};i.getAjaxResponse({url:"/sp/admin/group/addMember",data:$.param(c).replace(/%40/g,"@"),delay:100,maximum:1500}).then(function(c){if("true"===c.Success)a.serverError=!1,a.serverError1=!1,a.dataWithFlags[b].selectedGroup=!0,a.allGroupListCounter-=1,a.currentUser.groupList="default";else{a.currentUser.groupList="default",a.serverError=!0;for(var d in c.error)a.errorMessage=c.error[d]}})}},a.processRemoveGroup=function(b){var c={name:a.dataWithFlags[b].name,memberEmail:a.profile.email,isGroupLead:!1};i.getAjaxResponse({url:"/sp/admin/group/removeMember",data:$.param(c).replace(/%40/g,"@"),delay:10,maximum:1500}).then(function(c){if("true"===c.Success)a.serverError1=!1,g(function(){a.dataWithFlags[b].selectedGroup=!1,a.flagCounter+=1},300);else{a.serverError1=!0;for(var d in c.error)a.errorMessage=c.error[d]}})},a.removeGroup=function(b){"default"!==b&&(a.dataWithFlags[b].alreadyGroupLead===!0?(a.updateGroupLeadStatus(b,!1),a.glStatusUpdate===!0&&(jQuery("html").hasClass("ie")?g(function(){a.processRemoveGroup(b)},500):a.processRemoveGroup(b))):a.processRemoveGroup(b))},a.updateGroupLeadStatus=function(b,c){var d={name:a.dataWithFlags[b].name,memberEmail:a.profile.email,isGroupLead:c===!1?!1:!0};i.getAjaxResponse({url:"/sp/admin/group/addMember",data:$.param(d).replace(/%40/g,"@"),delay:100,maximum:1500}).then(function(c){if("true"===c.Success)a.serverError=!1,a.serverError1=!1,a.dataWithFlags[b].alreadyGroupLead=!a.dataWithFlags[b].alreadyGroupLead,a.dataWithFlags[b].alreadyGroupLead===!1&&null!==a.dataWithFlags[b].groupLEad&&(a.dataWithFlags[b].groupLead=null),a.glStatusUpdate=!0;else{a.serverError=!0,a.glStatusUpdate=!1;for(var d in c.error)a.errorMessage=c.error[d]}})},a.saveNewGroup=function(b,c){if(a.errornewEmptyGroup=!1,a.errornewGroup=!1,""===b||"undefined"==typeof b)return a.errornewEmptyGroup=!0,!1;var d={name:b},e={url:"/sp/admin/group/create",data:$.param(d)};i.getAjaxResponse(e).then(function(c){if("true"===c.Success){f.close("ngdialog1");var d={name:b,memberEmail:a.profile.email,isGroupLead:!1};i.getAjaxResponse({url:"/sp/admin/group/addMember",data:$.param(d).replace(/%40/g,"@"),delay:100,maximum:1500}).then(function(c){if("true"===c.Success)a.serverError=!1,a.serverError1=!1,a.dataWithFlags.push({name:b,groupLead:null,numOfMembers:1,memberSummaryList:null,selectedGroup:!0,selectedGroupLead:!1,alreadyGroupLead:!1}),a.currentUser.groupList="default";else{a.currentUser.groupList="default",a.errornewGroup=!0,a.serverError=!0;for(var d in c.error)a.errorMessage=c.error[d]}})}else null!=c.error&&(a.errornewGroup=!0)})},a.closeGroup=function(){a.currentUser.groupList="default",f.close("ngdialog1")},a.updateLinkedURL=function(b,c){var d="";if(d="individual"===c||"bindividual"===c?"/sp/updateLinkedIn":a.apiConfig.urls.updateLinkedIn,this.linkedinUpdate.$valid){a.disableLinkedinEditing=!0;var e=$.extend({},{userEmail:a.updatedEmail},b);i.getAjaxResponse({url:d,data:$.param(e)}).then(function(b){"true"===b.Success&&("individual"===c?a.getIndividualUserDetails():"bindividual"===c?a.getUserDetailsBusiness():a.getUserDetails())})}else a.linkeDInFormStatus=!0},a.updatePermissions=function(b,c){var d={userEmail:a.profile.email};"admin"===c&&(b===!0?$.extend(d,{isAdministrator:!1,isAccountAdministrator:!1,isHiringToolAllowed:a.userPermissions.isHiringToolAllowed,isWorkspacePulseAllowed:a.userPermissions.isWorkspacePulseAllowed,isSpectrumAllowed:a.userPermissions.isSpectrumAllowed}):$.extend(d,{isAdministrator:!0,isAccountAdministrator:a.userPermissions.isAccountAdministrator,isHiringToolAllowed:a.userPermissions.isHiringToolAllowed,isWorkspacePulseAllowed:a.userPermissions.isWorkspacePulseAllowed,isSpectrumAllowed:a.userPermissions.isSpectrumAllowed})),"account"===c&&(b===!0?$.extend(d,{isAdministrator:a.userPermissions.isAdministrator,isAccountAdministrator:!1,isHiringToolAllowed:a.userPermissions.isHiringToolAllowed,isWorkspacePulseAllowed:a.userPermissions.isWorkspacePulseAllowed,isSpectrumAllowed:a.userPermissions.isSpectrumAllowed}):$.extend(d,{isAdministrator:a.userPermissions.isAdministrator,isAccountAdministrator:!0,isHiringToolAllowed:!0,isWorkspacePulseAllowed:!0,isSpectrumAllowed:!0})),"hiring"===c&&$.extend(d,{isAdministrator:a.userPermissions.isAdministrator,isAccountAdministrator:a.userPermissions.isAccountAdministrator,isHiringToolAllowed:!a.userPermissions.isHiringToolAllowed,isWorkspacePulseAllowed:a.userPermissions.isWorkspacePulseAllowed,isSpectrumAllowed:a.userPermissions.isSpectrumAllowed}),"pulse"===c&&$.extend(d,{isAdministrator:a.userPermissions.isAdministrator,isAccountAdministrator:a.userPermissions.isAccountAdministrator,isHiringToolAllowed:a.userPermissions.isHiringToolAllowed,isWorkspacePulseAllowed:!a.userPermissions.isWorkspacePulseAllowed,isSpectrumAllowed:a.userPermissions.isSpectrumAllowed}),"spectrum"===c&&$.extend(d,{isAdministrator:a.userPermissions.isAdministrator,isAccountAdministrator:a.userPermissions.isAccountAdministrator,isHiringToolAllowed:a.userPermissions.isHiringToolAllowed,isWorkspacePulseAllowed:a.userPermissions.isWorkspacePulseAllowed,isSpectrumAllowed:!a.userPermissions.isSpectrumAllowed}),i.getAjaxResponse({url:"/sp/admin/user/updatePermissions",data:$.param(d)}).then(function(b){"true"===b.Success&&a.getUserDetails()})},a.initAdminViewDashboard=function(){a.getUserDetails(),g(function(){a.getGroupList()},200)},window.location.origin?a.siteName=window.location.origin+"/sp/":a.siteName=window.location.protocol+"//"+window.location.hostname+"/sp/",a.getIndividualUserDetails=function(){i.getAjaxResponse({url:"/sp/admin/user"}).then(function(b){"true"===b.Success&&(a.profile=b.profileForm,a.certificate=b.userCertificate,a.certificateNo=parseInt(b.userCertificate.split("SP")[1]),a.certificateIssue=b.createdOn,a.profilePic=b.userSummary.smallProfileImage,a.userInitials=b.userSummary.userInitials,a.assessmentStatus=b.userSummary.userStatus,null!==b.address?(a.profile.country="USA"===b.address.country?"United States":b.address.country,a.stateCheck.forSelectedCountry=b.address.country,a.profile.address1=b.address.addressLine1,a.profile.address2=b.address.addressLine2,a.profile.city=b.address.city,a.profile.state=b.address.state,a.profile.zip=b.address.zipCode):(a.profile.country="default",a.stateCheck.forSelectedCountry="default",a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.state=null,a.profile.zip=null),null===a.profile.gender&&(a.profile.gender="default"),0===a.profile.year&&(a.profile.year="default"),0===a.profile.month&&(a.profile.month="default"),0===a.profile.day&&(a.profile.day="default"),null===a.profile.linkedInUrl||"undefined"==typeof a.profile.linkedInUrl?a.disableLinkedinEditing=!1:a.disableLinkedinEditing=!0)})},a.getIndividualAccountInfo=function(){i.getAjaxResponse({url:"/sp/admin/account/individualAccountDetails"}).then(function(b){"true"===b.Success&&(a.accountInfo=b,a.profileSetings.is360ProfileAllowed=b.profileSettings.is360ProfileAccessAllowed,a.profileSetings.isHiringAccessAllowed=b.profileSettings.hiringAccessAllowed,a.profileSetings.isCertificateProfilePublicViewAllowed=b.profileSettings.certificateProfilePublicView,a.profileToken=b.profileSettings.token)})},a.updateProfileSettings=function(b,c){var d={isHiringAccessAllowed:"h"===c?!a.profileSetings.isHiringAccessAllowed:a.profileSetings.isHiringAccessAllowed,is360ProfileAllowed:"360"===c?!a.profileSetings.is360ProfileAllowed:a.profileSetings.is360ProfileAllowed};i.getAjaxResponse({url:"/sp/admin/account/updateIndividualProfile",data:$.param(d)}).then(function(b){"true"===b.Success&&a.getIndividualUserDetails()})},a.spcDate=function(a){if("undefined"!=typeof a){var b={January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"},c=b[a.split(",")[0].split(" ")[0]],d=a.split(",")[1].split(" ")[1];return d+c}},a.updateCertificateAccess=function(){i.getAjaxResponse({url:"/sp/admin/account/updateIndividualProfile/spCertificate",method:"post",data:$.param({isCertificateProfilePublicViewAllowed:!a.profileSetings.isCertificateProfilePublicViewAllowed})})},a.generateProfileToken=function(){i.getAjaxResponse({url:"/sp/admin/account/individualGenerateToken"}).then(function(b){"true"===b.Success&&(a.getIndividualAccountInfo(),$.growl({icon:"glyphicon glyphicon-ok",message:"New link is generated successfully"}))})},a.initIndividualDashboard=function(){a.getIndividualUserDetails(),a.getIndividualAccountInfo()},a.getUserDetailsBusiness=function(){a.userGroupListBusiness=[];var b=k.get("loggegdInProfile"),c=b.member.email;i.getAjaxResponse({url:"/sp/admin/user",data:$.param({userEmail:c})}).then(function(b){"true"===b.Success&&(a.profile=b.profileForm,a.userGroupListBusiness=b.groupList,a.profilePic=b.userSummary.smallProfileImage,a.userInitials=b.userSummary.userInitials,a.profile.name=b.userSummary.name,null!==b.address?(a.profile.country="USA"===b.address.country?"United States":b.address.country,a.stateCheck.forSelectedCountry=b.address.country,a.profile.address1=b.address.addressLine1,a.profile.address2=b.address.addressLine2,a.profile.city=b.address.city,a.profile.state=b.address.state,a.profile.zip=b.address.zipCode,g(function(){a.profile.state=b.address.state},200)):(a.profile.country="default",a.stateCheck.forSelectedCountry="default",a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.state=null,a.profile.zip=null),null===a.profile.gender&&(a.profile.gender="default"),0===a.profile.year&&(a.profile.year="default"),0===a.profile.month&&(a.profile.month="default"),0===a.profile.day&&(a.profile.day="default"),null===a.profile.linkedInUrl||"undefined"==typeof a.profile.linkedInUrl?a.disableLinkedinEditing=!1:a.disableLinkedinEditing=!0)})},a.initUserViewDashboard=function(){a.getUserDetailsBusiness()},"undefined"!=typeof a.settings.currentPage?"company"===a.settings.currentPage?a.initBusinessDashboard():"adminView"===a.settings.currentPage?a.initAdminViewDashboard():"individual"===a.settings.currentPage?a.initIndividualDashboard():"userView"===a.settings.currentPage&&a.initUserViewDashboard():g(function(){"company"===a.settings.currentPage?a.initBusinessDashboard():"adminView"===a.settings.currentPage?a.initAdminViewDashboard():"individual"===a.settings.currentPage?a.initIndividualDashboard():"userView"===a.settings.currentPage&&a.initUserViewDashboard()},250),a.addressFormReset=function(b){"business"===b&&(a.companyDetail.address1=null,a.companyDetail.address2=null,a.companyDetail.zip=null,a.companyDetail.address.city=null,"United States"!==a.stateCheck.forSelectedCountry?a.companyDetail.address.state=null:a.companyDetail.address.state="default"),("individual"===b||"buser"===b||"member"===b)&&(a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.zip=null,"United States"===a.stateCheck.forSelectedCountry?a.profile.state="default":a.profile.state=null)},a.uploadPicture=function(){f.open({template:"/sp/resources/html/admin/account/upload-pic.html",scope:a})},a.openList=function(a,b){b?$(a.currentTarget).closest(".profile-cont").find(".js_desk").removeClass("desktopShow"):$(a.currentTarget).closest(".profile-cont").find(".js_desk").addClass("desktopShow")},a.resetFlags=function(){a.disableEdit("profile")},a.resetPwdError=!1,a.resetPwdForm={},a.resetPwdForm.validationErrors=!1,a.resetPwd={},a.resetPasswordForm=function(){f.open({template:"/sp/resources/html/admin/account/resetPassword.html",scope:a}),j.$on("ngDialog.opened",function(b,c){g(function(){a.resetPwdError=!1,a.resetPwdForm.validationErrors=!1,jQuery("body").find('form[name="resetPwdForm"]')[0].reset()},100)})},a.processPasswordReset=function(b){this.resetPwdForm.validationErrors=!1,a.resetPwdError=!1,this.resetPwdForm.$valid?i.getAjaxResponse({url:"/sp/changePassword",data:$.param({oldPassword:b.oldPassword,newPassword:b.newPassword})}).then(function(b){if("true"===b.Success)a.resetPwdError=!1,jQuery("body").find('form[name="resetPwdForm"]')[0].reset(),f.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Password changed successfully"});else{a.resetPwdForm.validationErrors=!1,a.resetPwdError=!0;for(var c in b.error)a.resetPwdErrorMsg=b.error[c]}}):(a.resetPwdError=!1,this.resetPwdForm.validationErrors=!0)}}angular.module("spApp").controller("accountDashboardController",accountDashboardController),accountDashboardController.$inject=["$scope","$element","$attrs","$http","userDataService","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage"];
function memberListController(a,b,c,d,e,f,g,h,i,j){function k(){var a=null!==i.get("loggegdInProfile")?i.get("loggegdInProfile").member.roles:[];R.iamaccountadmin=-1!==a.indexOf("AccountAdministrator")?!0:!1,c.getAjaxResponse({url:R.config.getMembersData}).then(function(a){if("true"===a.Success){R.masterMemberList=a.memberList.length?a.memberList:[],R.memberList=angular.copy(R.masterMemberList),R.responseRecieved=!0,R.returnMemberList(R.pageSetting.pageSize);var b=[];angular.forEach(R.masterMemberList,function(a,c){R.allMembersEmailId.push({email:a.email}),null!==a.tagList&&(R.tagListArray=a.tagList.concat(R.tagListArray).unique()),null!==a.userStatus&&b.push(a.userStatus)}),R.tagListArray=R.autoCompleteType(R.tagListArray),R.userStatus=b.unique(),R.getHiringCandidateList()}else if(null!=a.error){R.responseRecieved=!0;var c="";for(var d in a.error)c=a.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function l(a){for(var b=[],c=0;c<a.length;c++)b.push({text:a[c]});return b}function m(){c.getAjaxResponse({url:R.config.getHiringCandidateList}).then(function(a){"true"===a.Success&&(R.newHiresList=a.hiring,R.newHiresList.length&&(R.showAddHireList=!0))})}function n(){var a={url:"/sp/admin/group/all"};c.getAjaxResponse(a).then(function(a){if("true"===a.Success&&(R.mainGroupInfoList=a.groupInfoList,!R.groupModule.length))for(var b=0;b<a.groupInfoList.length;b++)R.groupModule.push(a.groupInfoList[b].name)})}function o(a){R.returnMemberList(a)}function p(a){if(!R.masterMemberList.length)return!0;var b=R.masterCopy?R.masterMemberList:R.memberList;R.memberList=b.filter(function(a){return(null!==R.pageSetting.userStatusSelected&&a.userStatus===R.pageSetting.userStatusSelected||null===R.pageSetting.userStatusSelected&&a)&&(R.pageSetting.statusInclude.length&&v(null===a.roles?[]:a.roles,R.pageSetting.statusInclude).length===R.pageSetting.statusInclude.length||!R.pageSetting.statusInclude.length&&a)&&(R.pageSetting.searchTag.length&&v(null===a.tagList?[]:a.tagList,R.pageSetting.searchTag).length===R.pageSetting.searchTag.length||!R.pageSetting.searchTag.length&&a)&&f.singleElementSearch(R.pageSetting.textSearching,a,2)}),R.pageSetting.pageSize=a,a>=R.masterMemberList.length&&(R.pageSetting.disabledInfinite=!0,R.pageSetting.pageSize=R.masterMemberList.length),R.order(R.pageSetting.lastPredicate,R.pageSetting.lastReverse),!R.alltoggle&&(R.negative=!1,R.pageSetting.userEmail.email=[]),R.negative&&R.checkAll(),R.masterCopy=!0}function q(a){var b=$.inArray(a,R.pageSetting.statusInclude);b>-1?R.pageSetting.statusInclude.splice(b,1):(R.pageSetting.statusInclude.push(a),R.masterCopy=!1),R.returnMemberList(R.pageSetting.pageSize)}function r(a){R.pageSetting.userStatusSelected=a,R.returnMemberList(R.pageSetting.pageSize)}function s(a){var c=b.defer(),d=R.tagListArray.filter(function(b){return-1!==b.text.toLowerCase().indexOf(a.toLowerCase())});return c.resolve(d),c.promise}function t(a){R.pageSetting.searchTag.push(a.text),R.masterCopy=!1,R.returnMemberList(R.pageSetting.pageSize)}function u(a){R.pageSetting.searchTag.splice(R.pageSetting.searchTag.indexOf(a.text),1),R.returnMemberList(R.pageSetting.pageSize)}function v(a,b){var c=[],d=0,e=0;for(a.sort(),b.sort();a.length>d&&b.length>e;)a[d]<b[e]?d++:a[d]>b[e]?e++:(c.push(a[d]),d++,e++);return c}function w(a,b){R.pageSetting.lastPredicate=a,R.pageSetting.lastReverse=b,R.memberList=d("orderBy")(R.memberList,R.pageSetting.lastPredicate,R.pageSetting.lastReverse)}function x(a){R.masterCopy=a.length<R.pageSetting.textSearching.length,R.pageSetting.textSearching=a,R.returnMemberList(R.pageSetting.pageSize)}function y(){R.pageSetting.textSearching.length&&(R.pageSetting.textSearching="",R.pageSetting.searchText="",R.returnMemberList(R.pageSetting.pageSize))}function z(a,b){R.pageSetting.lastPredicate=b.predicate,R.pageSetting.lastReverse=b.reverse,f.toggleFilterClick(a,R.pageSetting.lastPredicate),R.order(R.pageSetting.lastPredicate,R.pageSetting.lastReverse)}function A(a){R.pageSetting=angular.copy(R.originalpageSetting),R.checkUncheck(),angular.element($(".tags").find("input")).scope().newTag.text="",h.$broadcast("$scrollStart"),R.returnMemberList(R.pageSetting.pageSize);var b=$(".memberHolder");b.find(".heading h4").removeClass("reverseon").removeClass("on"),b.find(".heading h4:eq(0)").addClass("on")}function B(){R.checkedAll=!R.checkedAll,R.negative?R.pageSetting.userEmail.email=R.memberList.map(function(a){return{email:a.email,name:a.name,title:a.title}}):R.pageSetting.userEmail.email=[]}function C(){R.alltoggle=!1,R.checkedAll&&(R.negative=!R.negative,R.checkedAll=!R.checkedAll)}function D(b){if("createGroupCall_custom"===b){a.errornewGroup=!1,a.errornewEmptyGroup=!1,a.savenewGroup=!1;var c=e.open({template:"/sp/admin/group/createGroup",scope:a});c.closePromise.then(function(a){R.groupModuleSelected=""})}}function E(a,b){i.set("memEmail",a),b===!0&&i.set("spProfileTab",!0),window.location.href="/sp/admin/account/member/details?email="+a}function F(b,c){R.oneTime&&(R.getGroupsData(),R.oneTime=!1),R.setEditMode=!0,R.EditGroupEmail=b,R.indexToChange=c,R.groupEditSection=angular.copy(R.memberList[c]),R.groupSelectOption=[];for(var d=0;d<R.groupEditSection.groupAssociationList.length;d++)R.groupSelectOption.push(R.groupEditSection.groupAssociationList[d].name);e.open({template:"/sp/admin/member/editGroup",scope:a})}function G(a,b){R.classActivate=[];for(var c=0;c<R.mainGroupInfoList.length;c++)if(a===R.mainGroupInfoList[c].name&&null!==R.mainGroupInfoList[c].groupLead&&R.mainGroupInfoList[c].groupLead.email!==R.EditGroupEmail){g(function(){$("#mode_"+b).addClass("disabled"),$("#modeprop_"+b).addClass("disabled")},0);break}}function H(a,b,c){for(var d=0;d<R.mainGroupInfoList.length;d++)if(c===R.mainGroupInfoList[d].name){if(null!==R.mainGroupInfoList[d].groupLead&&R.mainGroupInfoList[d].groupLead.email!==R.EditGroupEmail)return!1;R.groupEditSection.groupAssociationList[b].groupLead=!a}}function I(a){if(R.setEditMode){var b=!0;return-1!==R.groupSelectOption.indexOf(a)&&(b=!1),b}return!1}function J(a,b){return R.selectedGroup=a,"default"===a?!1:(R.groupEditSection.groupAssociationList.length&&""===R.groupEditSection.groupAssociationList[0].name&&R.groupEditSection.groupAssociationList.splice(0,1),R.groupEditSection.groupAssociationList.push({name:a,groupLead:!1}),R.groupSelectOption.push(a),void(R.memberGroup="default"))}function K(a){for(var b="",d=0;d<R.groupEditSection.groupAssociationList.length;d++)if(b.length)b=b+","+R.groupEditSection.groupAssociationList[d].name+":"+R.groupEditSection.groupAssociationList[d].groupLead;else{if(""===R.groupEditSection.groupAssociationList[d].name)return e.close("ngdialog1"),!1;b=R.groupEditSection.groupAssociationList[d].name+":"+R.groupEditSection.groupAssociationList[d].groupLead}var f={url:R.config.saveGroupToModule,data:$.param({groupAssociationList:b,memberEmail:R.groupEditSection.email})};c.getAjaxResponse(f).then(function(a){if("true"===a.Success){R.groupEditSection.groupAssociationList.length?R.memberList[R.indexToChange]=R.groupEditSection:(R.groupEditSection.groupAssociationList.push({name:"",groupLead:!1}),R.memberList[R.indexToChange]=R.groupEditSection);for(var b=0;b<R.masterMemberList.length;b++)R.masterMemberList[b].email===R.memberList[R.indexToChange].email&&(R.masterMemberList[b]=R.groupEditSection);R.getGroupsData(),e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Group status updated successfully"})}else if(null!=a.error){e.close("ngdialog1");var c="";for(var d in a.error)c=a.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:c})}})}function L(a,b){for(var c=a.target,d=($(c).closest(".blockGroup").remove(),""),e=0;e<R.groupEditSection.groupAssociationList.length;e++)R.groupEditSection.groupAssociationList[e].name===b.name&&(R.groupEditSection.groupAssociationList.splice(e,1),d=e);R.groupSelectOption.splice(d,1)}function M(a,b){b=b;var d=angular.element(a.currentTarget),e={url:R.config.confirmDelete,data:$.param({memberEmail:b})};c.getAjaxResponse(e).then(function(a){if("true"===a.Success)f.spilceIndexWithBreak(R.masterMemberList,"email",b),f.spilceIndexWithBreak(R.memberList,"email",b),d.scope().moreadvance=!d.scope().moreadvance,!R.alltoggle&&(R.negative=!1,R.pageSetting.userEmail.email=[]),R.negative&&R.checkAll(),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.member.deleteMessage")});else if(null!==a.error){var c="";for(var e in a.error)c=a.error[e];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function N(a,b,c,d){R.showHiringList=!1;var e={firstName:a,lastName:b,email:c,candidateId:d};i.set("newHireDetails",e).set("newHireCheck",!0),g(function(){window.location.href=R.config.addSingle},100)}function O(a){c.getAjaxResponse({url:R.config.updateHiredAndMovedToMember,data:$.param({candidateId:R.hiringCandidateId})}).then(function(a){"true"===a.Success&&(e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:"Candidate Removed"}),R.showHiringList=!1,g(function(){R.getHiringCandidateList()},0))})}function P(b){R.hiringCandidateId=b,e.open({template:"/sp/resources/html/admin/member/deleteHiringConfirmation.html",scope:a})}function Q(){R.showHiringList=!R.showHiringList}var R=this;R.memberList=[],R.masterMemberList=[],R.filterationRequired=!1,R.showHiringList=!1,R.tagListArray=[],R.userStatus=[],R.allMembersEmailId=[],R.newHiresList=[],R.checkedAll=!1,R.negative=!1,R.oneTime=!0,R.updateGroup=!1,R.groupModule=[],R.mainGroupInfoList=[],R.EditGroupEmail="",R.setEditMode=!1,R.showAddHireList=!1,R.iamaccountadmin=!1,R.masterCopy=!0,R.responseRecieved=!1,R.config={getMembersData:"/sp/admin/member",getHiringCandidateList:"/sp/admin/membersWithHired",getGroupsData:"/sp/admin/group/all",saveNewGroup:"/sp/admin/group/create",saveGroupToModule:"/sp/admin/group/memberGroupUpdate",confirmDelete:"/sp/admin/member/delete",updateHiredAndMovedToMember:"/sp/admin/member/updateHiredAndMovedToMember",addSingle:"/sp/admin/member/add/single"},R.pageSetting={pageSize:10,intialPageSize:10,searchTag:[],filter:{},tags:[],userEmail:{email:[]},checkBox:[],statusInclude:[],userStatusSelected:null,lastPredicate:"name",lastReverse:!1,textSearching:"",disabledInfinite:!1,adminc:!1,leadC:!1},R.originalpageSetting=angular.copy(R.pageSetting),R.getMembersData=k,R.returnMemberList=p,R.autoCompleteType=l,R.getHiringCandidateList=m,R.getGroupsData=n,R.loadTags=s,R.tagAdded=t,R.tagRemoved=u,R.includeCheck=q,R.userStatusSelected=r,R.infinteScroll=o,R.order=w,R.searchTextFilter=x,R.clearSearch=y,R.active=z,R.resetfilter=A,R.checkAll=B,R.checkUncheck=C,R.createGroupCall=D,R.memberTakeAway=E,R.editGroupSection=F,R.isItEnabled=G,R.enableLeadDialog=H,R.createSelect=I,R.addGroupToModule=J,R.saveGroupToModule=K,R.removeGroupDialog=L,R.confirmDelete=M,R.converToMember=N,R.showRemoveDialog=P,R.removeFromList=O,R.toggleAddNewHiresList=Q,function(){var a=i.get("gNotify");null!==a&&$.growl({icon:"glyphicon glyphicon-ok",title:"single"===a?"<strong> Member</strong>":"<strong> Members</strong>",message:" added successfully"}),i.remove("newHireDetails","newHireCheck","gNotify","spProfileTab")}(),a.saveNewGroup=function(b,d){return a.errornewGroup=!1,a.errornewEmptyGroup=!1,a.savenewGroup=!1,""===b||"undefined"==typeof b?(a.errornewEmptyGroup=!0,!1):void c.getAjaxResponse({url:R.config.saveNewGroup,data:$.param({name:b})}).then(function(b){"true"===b.Success?(R.mainGroupInfoList.push(b.groupInfo),R.groupModule.push(b.groupInfo.name),g(function(){R.groupModuleSelected=b.groupInfo.name},0),e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.saveMessage")})):null!==b.error&&(a.errornewGroup=!0,g(function(){R.groupModuleSelected=""},0))})},a.closeGroup=function(){e.close("ngdialog1")}}angular.module("spApp").controller("memberListController",memberListController),memberListController.$inject=["$scope","$q","ajaxService","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage","$state"];
function addMemberController(a,b,c,d,e,f,g,h){a.subscriptionStatus=0,a.subscriptionStatus.error=!1,a.groupDataSet={},a.groupDataSetBackup={},a.previousGroup=[],a.dataWithFlags=[],a.dataWithOrder=[],a.tagList=[],a.flagCounter=0,a.addMemberStatus={},a.addMemberStatus.serverError=!1,a.subscriptionStatus.error=!1,a.addMemberStatus.existingEmailError=!1,a.addMemberStatus.exceedEmailError=!1,a.addMemberEmailCount=0,a.emailCountError=!1,a.newOrderFlag=0,a.failedEmailList=[],a.failedEmailFlag=!1,a.addMemberStatus.inValidEmailError=!1,a.addMemberStatus.requiredError=!1,a.member={},a.newHireCheck=!1,a.errornewGroup=!1;var i=h.get("loggegdInProfile"),j=i.member.roles.sort();if(a.isAccountAdmin=0===jQuery.inArray("AccountAdministrator",j)?!0:!1,null!==h.get("newHireDetails")){var k=h.get("newHireDetails");a.member.firstName=k.firstName,a.member.lastName=k.lastName}null!==h.get("newHireCheck")?a.newHireCheck=!0:a.newHireCheck=!1,a.getSubscriptionStatus=function(){f.getAjaxResponse({url:"/sp/admin/member/availalbeMemberSubscriptions"}).then(function(b){if("true"===b.Success)a.subscriptionStatus=b.availalbeMemberSubscriptions,0===a.subscriptionStatus&&(a.subscriptionStatusError=!0);else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getSubscriptionStatus(),a.getGroupList=function(){f.getAjaxResponse({url:"/sp/admin/group/all"}).then(function(b){if("true"===b.Success)a.groupDataSet=b.groupInfoList,a.groupDataSetBackup=b.groupInfoList,jQuery.each(a.groupDataSet,function(b,c){a.dataWithFlags.push(jQuery.extend({},a.groupDataSet[b],{selectedFlag:!1,isGroupLead:!1}))}),a.flagCounter=a.dataWithFlags.length;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getGroupList(),a.callCancel=function(){window.location="/sp/admin/memberListing#/member"},a.callRedirect=function(a){a===!0&&(window.location="/sp/admin/memberListing#/member")},a.updateTagList=function(b,c){a.member.groupAssociationList=null,a.tagList=[],jQuery.each(a.dataWithFlags,function(d,e){a.dataWithFlags[d].selectedFlag===!0&&c===!0?a.tagList.push(a.dataWithFlags[d].name):a.dataWithFlags[d].selectedFlag===!0&&b===!0&&(a.dataWithFlags[d].isGroupLead===!0?a.tagList.push(a.dataWithFlags[d].name+":true"):a.tagList.push(a.dataWithFlags[d].name+":false")),a.member.groupAssociationList=a.tagList.join()})},a.updateGroupLeadStatus=function(b,c,d,e){"undefined"!=typeof a.dataWithFlags[b]&&null===c&&(a.dataWithFlags[b].isGroupLead===!0?a.dataWithFlags[b].isGroupLead=!1:a.dataWithFlags[b].isGroupLead=!0,a.updateTagList(d,e))},a.changeGroup=function(b,c,d){"default"!==b&&("createGroupCall_custom"===b?(a.params={p1:c,p2:d},a.errornewEmptyGroup=!1,a.errornewGroup=!1,e.open({template:"/sp/admin/group/createGroup",scope:a}),a.member.gList="default"):(a.dataWithFlags[b].selectedFlag=!0,a.flagCounter-=1,a.updateTagList(c,d),a.member.gList="default",a.dataWithFlags[b].newOrder=a.newOrderFlag++,a.dataWithFlags[b].originalIndex=b))},a.removeGroup=function(b,c,d){"default"!==b&&(a.dataWithFlags[b].selectedFlag=!1,a.dataWithFlags[b].isGroupLead=!1,a.flagCounter+=1,a.updateTagList(c,d))},a.addSingleMember=function(b){a.addMember.submitted=!1,a.addMemberStatus={},a.addMember.$valid?f.getAjaxResponse({url:"/sp/admin/member/addSingle",data:$.param(b).replace(/%2C/g,",")}).then(function(b){"true"===b.Success?(a.addMemberStatus=b,a.addMemberStatus.title="Add Member",h.remove("newHireDetails","newHireCheck"),h.set("gNotify","single"),setTimeout(function(){window.location="/sp/admin/memberListing#/member"},100)):(a.addMemberStatus.serverError=!0,a.addMemberStatus.content=b.error)}):a.addMember.submitted=!0},a.highlightTags=function(a){var b=jQuery("body").find(".add-member").find("p.emailTags").find(".tagsinput"),c=a;jQuery.each(jQuery(b).find("span.tag"),function(a,b){var d=jQuery(this).find("span").attr("data-email"),e=jQuery.inArray(d,c);-1!==e&&jQuery(b).addClass("error-email")})},a.searchExistingEmailList=function(b){a.addMemberStatus.requiredError=!1;var c=b.memberList.split(",").unique(),d={memberList:c.toString()};"undefined"!=typeof b.memberList?f.getAjaxResponse({url:"/sp/signup/validateEmails",data:$.param(d).replace(/%2C/g,",").replace(/%40/g,"@")}).then(function(c){if("true"===c.Success&&0===c.failureList.length)a.failedEmailList=[],a.failedEmailFlag=!1,a.addMemberStatus.existingEmailError=!1,a.addMultipleMembers(b);else if("true"===c.Success&&c.failureList.length>0)a.addMemberStatus.existingEmailError=!0,a.failedEmailList=c.failureList,a.failedEmailFlag=!0,a.highlightTags(a.failedEmailList);else{a.serverError=!0;for(var d in c.error)a.errorMessage=c.error[d]}}):a.addMemberStatus.requiredError=!0},a.addMultipleMembers=function(b){var c=b.memberList.split(",").unique();b.memberList=c.toString(),a.addMember.submitted=!1,a.emailCountError=!1,a.getSubscriptionStatus(),a.addMemberEmailCount>a.subscriptionStatus?a.emailCountError=!0:a.addMember.$valid?f.getAjaxResponse({url:"/sp/admin/member/addMultiple",data:$.param(b).replace(/%2C/g,",").replace(/%40/g,"@")}).then(function(b){if(a.addMemberStatus=b,a.addMemberStatus.title="Add members","true"===b.Success&&0===b.failureList.length)h.set("gNotify","multiple"),setTimeout(function(){window.location="/sp/admin/memberListing#/member"},100);else if("true"===b.Success&&b.failureList.length>0)a.serverError=!0,a.errorMessage="Server exception: Failed to add "+b.failureList.join(", ");else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}}):a.addMember.submitted=!0},a.saveNewGroup=function(b,c){if(a.errornewEmptyGroup=!1,a.errornewGroup=!1,""===b||"undefined"==typeof b)return a.errornewEmptyGroup=!0,!1;var d={name:b},g={url:"/sp/admin/group/create",data:$.param(d)};f.getAjaxResponse(g).then(function(c){"true"===c.Success?(e.close("ngdialog1"),a.dataWithFlags.push({name:b,groupLead:null,numOfMembers:0,memberSummaryList:null,selectedFlag:!0,originalIndex:a.dataWithFlags.length,newOrder:a.newOrderFlag}),a.flagCounter-=1,a.member.gList="default",a.newOrderFlag+=1,a.updateTagList(a.params.p1,a.params.p2)):null!=c.error&&(a.member.gList="default",a.errornewGroup=!0)})},a.closeGroup=function(){a.member.gList="default",e.close("ngdialog1")}}angular.module("spApp").controller("addMemberController",addMemberController),addMemberController.$inject=["$scope","$http","$element","$attrs","ngDialog","ajaxService","$timeout","$localStorage"];
function archiveListingController(a,b,c,d,e,f,g,h,i,j,k,l,m){a.memberList=[],a.masterMemberList=[],a.showfilter=!1,a.pageSize=20,a.intialPageSize=20,a.searchTag=[],a.hiringRoles=[],a.alldisplay=!1,a.filter={},a.tags=[],a.userEmail={email:[]},a.checkBox=[],a.allMembersEmailId=[],a.statusInclude=[],a.setEditMode=!1,a.userStatus=[],a.groupModule=[],a.masterGroupModule=[],a.textSearching="",a.mainGroupInfoList=[],a.checkedAll=!1,a.deleteUser=!1,a.deleteUserError=!1,a.updateGroup=!1,a.updateGroupError=!1,a.updateError="",a.EditGroupEmail="",a.archiveDialog={},a.archiveDialog.addHiring=!1,a.load=!0,a.formatDate=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split("-"),c={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},d=c[b[1].toString()]+" "+parseInt(b[2])+", "+parseInt(b[0]);return d}},a.getMembersData=function(){var b={url:"/sp/hiring/getAllArchivedCandidates"};e.getAjaxResponse(b).then(function(b){"true"===b.Success&&(m.remove("isCandidateArchived","archiveCandidateId","candidateEmail","candidateID"),a.masterMemberList=b["hiring-archived"].length?b["hiring-archived"]:[],a.returnMemberList(a.pageSize),a.tagListArray=[],a.mokroles=[],a.userRoles=[],angular.forEach(b["hiring-archived"],function(b,c){a.allMembersEmailId.push(b.email),null!=b.tagList&&(a.tagListArray=b.tagList.concat(a.tagListArray).unique()),null!=b.userStatusFormatted&&a.mokroles.push(b.userStatusFormatted),null!==b.hiringRoles&&(a.userRoles=b.hiringRoles.concat(a.userRoles).unique())}),a.tagListArray=a.autoCompleteType(a.tagListArray),a.userStatus=a.mokroles.unique().sort(),a.hiringRoles=a.userRoles.unique())})},a.intersection=function(a,b){var c=[],d=0,e=0;for(a.sort(),b.sort();a.length>d&&b.length>e;)a[d]<b[e]?d++:a[d]>b[e]?e++:(c.push(a[d]),d++,e++);return c},a.enableAdvanceSection=function(a){$(a.currentTarget).closest(".complete-profile").find(".editable-section").show()},a.autoCompleteType=function(a){for(var b=[],c=0;c<a.length;c++)b.push({text:a[c]});return b},a.order=function(b,c){a.memberList=h("orderBy")(a.memberList,b,c)},a.loadTags=function(c){var d=b.defer();return d.resolve(a.getLoadSuggestion(c)),d.promise},a.getLoadSuggestion=function(b){for(var c=[],d=0;d<a.tagListArray.length;d++)angular.lowercase(a.tagListArray[d].text).indexOf(angular.lowercase(b))>-1&&c.push(a.tagListArray[d]);return c.slice(0,5)},a.tagAdded=function(b){a.searchTag.push(b.text),a.refineSearch(a.searchTag)},a.tagRemoved=function(b){a.searchTag.splice(a.searchTag.indexOf(b.text),1),a.refineSearch(a.searchTag)},a.refineSearch=function(b){a.newArr=[],angular.forEach(a.masterMemberList,function(c,d){null!=c.tagList&&a.intersection(c.tagList,b).length===b.length&&a.newArr.push(c)}),a.checkboxFilter()},a.includeCheck=function(b){var c=$.inArray(b,a.statusInclude);c>-1?a.statusInclude.splice(c,1):a.statusInclude.push(b),a.checkboxFilter()},a.checkboxFilter=function(b){a.statusInclude.length>0&&(a.checkBox=[],angular.forEach(a.masterMemberList,function(b,c){for(var d=0;d<a.statusInclude.length;d++)for(var e=0;e<b.roles[d].length;e++)b.roles[e]===a.statusInclude[d]&&a.checkBox.push(b)})),a.returnMemberList(a.pageSize)},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.returnMemberList=function(b){if(a.searchTag.length&&!a.statusInclude.length&&(a.memberList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.memberList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.memberList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.memberList=angular.copy(a.masterMemberList)),a.memberList=j.searchModule(a.textSearching,a.memberList,2),b>=a.memberList.length?a.alldisplay=!0:a.alldisplay=!1,a.pageSize=b,a.memberList=a.memberList.slice(0,b),a.load&&(a.order("name","false"),a.load=!1)},a.checkAll=function(){a.checkedAll=!a.checkedAll,a.negative?a.userEmail.email=a.masterMemberList.map(function(a){return{email:a.email,name:a.name}}):a.userEmail.email=[]},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.userEmail.email=[],a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof a.selectedSearch&&(a.selectedSearch.userStatusFormatted="",a.selectedSearch.hiringRoles=""),a.memberList=angular.copy(a.masterMemberList),"undefined"!=typeof b&&(a.pageSize=a.masterMemberList.length),a.returnMemberList(a.pageSize),a.order("name","false");var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.certainDelete=function(){i.open({template:"/sp/resources/html/tools/hiring/deleteConfirmation.html",scope:a})},a.deleteButton=function(){},a.confirmDelete=function(b){var c=$(b.target).closest(".complete-profile").find(".email").html(),d=(angular.element(b.currentTarget),{url:"/sp/hiring/deleteArchiveCandidate",data:$.param({candidateEmail:c})});e.getAjaxResponse(d).then(function(b){"true"===b.Success?(a.getMembersData(),$.growl({icon:"glyphicon glyphicon-ok",message:"Candidate(s) deleted successfully"})):$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"Server Error"})})},a.deleteUsers=function(b){var c=[];jQuery.each(b,function(a,d){c.push(b[a].email)});var d={url:"/sp/hiring/deleteArchiveCandidate",data:$.param({candidateEmail:c.toString()})};e.getAjaxResponse(d).then(function(b){"true"===b.Success&&(a.userEmail.email=[],a.alltoggle=!1,a.checkedAll&&(a.negative=!a.negative),i.close("ngdialog1"),a.getMembersData(),$.growl({icon:"glyphicon glyphicon-ok",message:"Candidate(s) deleted successfully"}))})},a.addClassActive=function(){a.dropUp=!a.dropUp},a.notificationEmail=function(b){b.length&&(j.setEmail(b),j.setObject(a.memberList),i.open({template:"return-visitor.html"}))},a.profileRoute=function(a){var b=$(a.currentTarget).data("routeparam");m.set("groupname",b),window.location.href="/sp/admin/group/#profile"},a.showFullList=function(){a.resetfilter("full")},a.editGroupSection=function(b){a.EditGroupEmail=this.memberList.email;for(var c=this.memberList.email,d=0;d<a.memberList.length;d++)c===a.memberList[d].email&&(b=d);a.setEditMode=!0,a.indexToChange=b,a.groupEditSection=angular.copy(a.memberList[b]),a.groupSelectOption=[];for(var e=0;e<a.groupEditSection.groupAssociationList.length;e++)a.groupSelectOption.push(a.groupEditSection.groupAssociationList[e].name);i.open({template:"/sp/admin/member/editGroup",scope:a})},a.enableLeadDialog=function(b,c,d){for(var e=0;e<a.mainGroupInfoList.length;e++)if(d===a.mainGroupInfoList[e].name){if(null!==a.mainGroupInfoList[e].groupLead&&a.mainGroupInfoList[e].groupLead.email!==a.EditGroupEmail)return!1;a.groupEditSection.groupAssociationList[c].groupLead=!b}},a.setStyle=function(b){return a.viewMode(),b===!0?!0:!1},a.isItEnabled=function(b,c){a.classActivate=[];for(var d=0;d<a.mainGroupInfoList.length;d++)b===a.mainGroupInfoList[d].name&&null!==a.mainGroupInfoList[d].groupLead&&a.mainGroupInfoList[d].groupLead.email!==a.EditGroupEmail&&(a.classActivate.push("#mode_"+c),a.classActivate.push("#modeprop_"+c))},a.viewMode=function(){if(a.classActivate.length)for(var b=0;b<a.classActivate.length;b++)$(a.classActivate[b]).addClass("disabled")},a.addGroupToModule=function(b,c){return a.selectedGroup=b,"default"===b?!1:(""===a.groupEditSection.groupAssociationList[0].name&&a.groupEditSection.groupAssociationList.splice(0,1),a.groupEditSection.groupAssociationList.push({name:b,groupLead:!1}),void a.groupSelectOption.push(b))},a.addGroupMember=function(a){return""===a?!1:!0},a.removeGroupDialog=function(b,c){for(var d=b.target,e=($(d).closest(".blockGroup").remove(),""),f=0;f<a.groupEditSection.groupAssociationList.length;f++)a.groupEditSection.groupAssociationList[f].name===c.name&&(a.groupEditSection.groupAssociationList.splice(f,1),e=f);a.groupSelectOption.splice(e,1)},a.saveGroupToModule=function(b){for(var c="",d=0;d<a.groupEditSection.groupAssociationList.length;d++)c=c.length?c+","+a.groupEditSection.groupAssociationList[d].name+":"+a.groupEditSection.groupAssociationList[d].groupLead:a.groupEditSection.groupAssociationList[d].name+":"+a.groupEditSection.groupAssociationList[d].groupLead;var f={url:"/sp/admin/group/memberGroupUpdate",data:$.param({groupAssociationList:c,memberEmail:a.groupEditSection.email})};e.getAjaxResponse(f).then(function(b){if("true"===b.Success){a.groupEditSection.groupAssociationList.length?a.memberList[a.indexToChange]=a.groupEditSection:(a.groupEditSection.groupAssociationList.push({name:"",groupLead:!1}),a.memberList[a.indexToChange]=a.groupEditSection);for(var c=0;c<a.masterMemberList.length;c++)a.masterMemberList[c].email===a.memberList[a.indexToChange].email&&(a.masterMemberList[c]=a.groupEditSection);i.close("ngdialog1"),i.open({template:"/sp/admin/member/confirmation"})}else i.close("ngdialog1"),i.open({template:"/sp/admin/member/errorGroup"})})},a.memberTakeAway=function(a,b){m.set("archiveCandidateId",b).set("isCandidateArchived",!0),window.location.href="/sp/tools/hiring/profile?cemail="+a},a.calltoAction=function(a){return""===a?!1:void(window.location.href=a)},a.archiveDialog=function(b,c,d){a.archiveCandidate={name:c,email:b,roles:d},i.open({template:"/sp/resources/html/tools/hiring/archive-candidate.html",scope:a})},a.moveAllCandidate=function(b){var c=[];jQuery.each(b,function(a,d){c.push(b[a].email)});var d={url:"/sp/hiring/moveToCandidate",data:$.param({candidateEmail:c.toString()})};e.getAjaxResponse(d).then(function(b){"true"===b.Success&&(i.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" archived successfully"}),a.getMembersData())})},a.moveToCandidateList=function(b){var c={url:"/sp/hiring/moveToCandidate",data:$.param({candidateEmail:b})};e.getAjaxResponse(c).then(function(b){"true"===b.Success&&($.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" added to list successfully"}),a.getMembersData())})},a.formatName=function(a){if(null!==a||"undefined"!==a){var b=a.split(", "),c=b[1]+" "+b[0];return c}},a.moveAllDialog=function(b){a.archiveCandidateAll={emails:b},i.open({template:"/sp/resources/html/tools/hiring/move-candidate-list.html",scope:a})},a.sendViewProfileRequest=function(b,c){a.profileRequest={email:b,name:c,heading:"Request Access"},i.open({template:"/sp/resources/html/tools/hiring/send-profile-invite.html",scope:a}),a.sendRequest=function(a){var b={url:"/sp/notifications/sendNotification",data:$.param({memberEmail:a,type:""}).replace(/%40/g,"@")};e.getAjaxResponse(b).then(function(a){"true"!==a.Success&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:"Not able to send invite"})})}},a.sendReminder=function(b,c){a.profileRequest={email:b,name:c,heading:"Reminder"},i.open({template:"/sp/resources/html/tools/hiring/send-profile-invite.html",scope:a}),a.sendRequest=function(a){var b={url:"/sp/notifications/sendNotification",data:$.param({memberEmail:a,type:""}).replace(/%40/g,"@")};e.getAjaxResponse(b).then(function(a){"true"!==a.Success&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:"Not able to send invite"})})}}}function notification(a,b){a.name=[];var c=b.getObject(),d=b.getEmail();a.emailId=d,angular.forEach(c,function(b,c){for(var e=0;e<d.length;e++)d[e]===b.email&&a.name.push(b.name)})}angular.module("spApp").controller("archiveListingController",archiveListingController),angular.module("spApp").controller("notification",notification),archiveListingController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"],notification.$inject=["$scope","sharedProperties"];
function assessmentCompleted(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.isProfileLoaded=!1,a.getUserRole=function(){e.getAjaxResponse({url:"/sp/signedIn/getProfile"}).then(function(b){if("true"===b.Success){var c=b.member.roles.sort();a.isProfileLoaded=!0,a.isIndividualUser=-1===jQuery.inArray("IndividualAccountAdministrator",c)?!1:!0}})},a.getUserRole()}angular.module("spApp").controller("assessmentCompleted",assessmentCompleted),assessmentCompleted.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","userDataService","$localStorage"];
function assessmentController(a,b,c,d,e,f,g,h){function i(){var b=[];a.enableNextBtn=!1,a.assessment.flags.enablePrev=!1,a.assessment.flags.prevClicked=!0;var c=jQuery("#drag-list").find("div"),d=0;jQuery.each(c,function(a,c){"undefined"!=typeof jQuery(this).attr("data-opt").split("-")[1]&&(b.push(jQuery(this).attr("data-opt").split("-")[1]),d++)}),d===c.length&&("personalityrating"===jQuery("#drag-list").attr("data-type").toLowerCase()?a.assessment.answerOptions.a=b[0]+","+b[3]:a.assessment.answerOptions.a=b.join(),"undefined"!=typeof jQuery("#drag-list").attr("data-la")?(a.assessment.flags.enablePrev=!1,a.assessment.flags.prevClicked=!0,f(function(){a.enableNextBtn=!0},300)):(a.assessment.flags.enablePrev=!0,a.assessment.flags.prevClicked=!1,f(function(){a.enableNextBtn=!0},300)))}function j(){var a,b,c=[],d=[],e=jQuery("#drag-list").prev(),f=jQuery("#drag-list"),g=jQuery("#drag-list").next();jQuery.each(f.find("div"),function(a,b){c.push(jQuery(this).outerHeight()),d.push(jQuery(this).outerWidth()),jQuery(this).attr("style","").removeClass("active")}),a=Math.max.apply(Math,c),b=Math.max.apply(Math,d),jQuery.each(f.find("div"),function(b,c){jQuery(this).find("p").css({height:a})}),jQuery.each(e.find("div"),function(b,c){jQuery(this).attr("style","").removeClass("active"),jQuery(this).css({height:a}),jQuery(this).find("p").css({height:a-1})}),jQuery.each(g.find("div.sp-btn-wrapper"),function(b,c){jQuery(this).attr("style",""),jQuery(this).css({height:a})})}var k,l;a.serverError=!1,a.assessment={},a.assessment.flags={initAssessment:!0,enableNext:!1,prevClicked:!1},a.prevHide=!1,a.assessmentType="default",a.userId=null,a.assessmentLoaded=!1,a.trackAns=[],a.trackAnsTemp=[],a.enableNextBtn=!1,a.nextBtnText="Next",a.diableOptions=!1,a.setAnswer=!1,a.assessmentUrl={"default":{start:"/sp/assessment/start",next:"/sp/assessment/process",previous:"/sp/assessment/previous"},hiringUser:{start:"/sp/assessment/start",next:"/sp/assessment/process",previous:"/sp/assessment/previous"},assessment360:{start:"/sp/assessment360/start",next:"/sp/assessment360/process",previous:"/sp/assessment360/previous"}},a.setOptions=function(b){if("assessment360"===b){a.assessmentType="assessment360";var c=window.location.href.split("/");a.userId=c[c.length-1]}else"hiringUser"===b?a.assessmentType="hiringUser":a.assessmentType="default";a.initAssessment()},a.initLoadAssessmentData=function(){h.flush(),a.serverError=!1;var b={url:"assessment360"===a.assessmentType?a.assessmentUrl[a.assessmentType].start+"/"+a.userId:a.assessmentUrl[a.assessmentType].start,delay:600,maximum:1200};e.getAjaxResponse(b).then(function(b){if("true"===b.Success)if(a.assessmentLoaded=!1,"undefined"!=typeof b.question){var c=b;if(a.assessment={section:{number:c.question.categoryNumber,total:c.categories.totalCategories,instruction:c.categories.categoriesList[c.question.categoryNumber].instruction,totalQuestions:c.categories.categoriesList[c.question.categoryNumber].totalQuestions,currentNo:c.question.categoryNumber+1,nextNo:c.question.categoryNumber+2},question:{number:c.question.number,type:c.question.type,description:c.question.description,optionList:c.question.optionsList},answerOptions:{c:c.question.categoryNumber,q:c.question.number},flags:{initAssessment:!1},_d:b,progress:function(b,d){for(var e=b,f=0,g=0,h=0,i=0;d>i;i++)f+=c.categories.categoriesList[i].totalQuestions;if(e>0&&e<c.categories.totalCategories)for(var j=0;e>j;j++)g+=c.categories.categoriesList[j].totalQuestions;return g+=c.question.number+1,0===c.question.number&&0===c.question.categoryNumber?h=0:(h=g/f*100,99.5===h&&(h=99),100===h?a.nextBtnText="Finish":a.nextBtnText="Next"),h.toFixed()}(c.question.categoryNumber,c.categories.totalCategories)},0===c.question.number&&0===c.question.categoryNumber?(a.prevHide=!0,a.assessment.flags.enablePrev=!1,a.enableNextBtn=!1):(a.assessment.flags.enablePrev=!0,a.assessment.flags.prevClicked=!1,a.prevHide=!1),f(function(){a.assessmentLoaded=!0},100),jQuery("body").find(".drag-answer-template").length>0){if("multiplechoice"!==c.question.type.toLowerCase()){jQuery("body").find(".drag-answer-template").html("");var d=0;jQuery.each(a.assessment.question.optionList,function(b,c){jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+b+'" class="draggable-wrapper"><p><span>'+a.assessment.question.optionList[b]+"</span></p></div>"),d++}),d===a.assessment.question.optionList.length&&("undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500))}}else f(function(){if("multiplechoice"!==c.question.type.toLowerCase()){jQuery("body").find(".drag-answer-template").html("");var b=0;jQuery.each(a.assessment.question.optionList,function(c,d){jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+c+'" class="draggable-wrapper"><p><span>'+a.assessment.question.optionList[c]+"</span></p></div>"),b++}),b===a.assessment.question.optionList.length&&("undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500))}},500)}else"default"===a.assessmentType?window.location="/sp/assessment/completed":"assessment360"===a.assessmentType?window.location="/sp/external/thankyou":"hiringUser"===a.assessmentType&&(window.location="/sp/candidateThankYou");else{a.serverError=!0,a.errorMessage=g.pullInterNationalization("assessment.refreshError");for(var e in b.error)window.console&&console.log(b.error[e])}})},a.initAssessment=function(){a.assessment.flags.initAssessment===!0&&a.initLoadAssessmentData()},a.updateAns=function(b,c){if(a.diableOptions!==!1)return!1;var d=b,e="."+c,g=jQuery(e).find(".sp-btn-wrapper");jQuery.each(g,function(a,b){jQuery(this).removeClass("sp-light-red")}),jQuery(e).find(".sp-btn-wrapper:eq("+b+")").addClass("sp-light-red"),f(function(){a.assessment.answerOptions.a=d,a.assessment.flags.enableNext=!0},150)},a.processPrevAnswer=function(){if(a.assessment.flags.prevClicked===!1){f.cancel(),a.assessment.flags.initAssessment=!1,a.assessment.flags.prevClicked=!0,a.assessment.flags.enableNext=!1,a.assessment.flags.enablePrev=!1,a.enableNextBtn=!1,a.serverError=!1,a.diableOptions=!1;var b={url:"assessment360"===a.assessmentType?a.assessmentUrl[a.assessmentType].previous+"/"+a.userId:a.assessmentUrl[a.assessmentType].previous,delay:600,maximum:1200};e.getAjaxResponse(b).then(function(b){if("true"===b.Success){if("undefined"!=typeof b.question){var c=b,d=a.assessment._d,e="c"+c.question.categoryNumber+"q"+c.question.number,h=jQuery.inArray(e,a.trackAns);if(a.assessment.answerOptions.a=c.lastAnswer,h>-1&&(a.trackAns.splice(h,1),a.trackAnsTemp.splice(h,1)),a.assessment.progress=function(b,e){for(var f=b,g=0,h=0,i=0,j=0;e>j;j++)g+=d.categories.categoriesList[j].totalQuestions;if(f>0&&f<d.categories.totalCategories)for(var k=0;f>k;k++)h+=d.categories.categoriesList[k].totalQuestions;return h+=c.question.number+1,0===c.question.number&&0===c.question.categoryNumber?i=0:(i=h/g*100,99.5===i&&(i=99),100===i?a.nextBtnText="Finish":a.nextBtnText="Next"),i.toFixed()}(c.question.categoryNumber,d.categories.totalCategories),a.assessment.question.number=c.question.number,a.assessment.question.type=c.question.type,a.assessment.question.description=c.question.description,"multiplechoice"===c.question.type.toLowerCase()){a.assessment.question.optionList=c.question.optionsList;var i=jQuery("body").find(".assessment-template-wrapper").find(".answer-template.template-1");jQuery.each(i.find(".answer-options"),function(){jQuery(this).find(".sp-btn-wrapper").removeClass("sp-light-red")}),setTimeout(function(){var a=jQuery("body").find(".assessment-template-wrapper").find(".answer-template.template-1");jQuery(a).find(".answer-options:eq("+c.lastAnswer[0]+")").trigger("click")},100)}else f(function(){var b=jQuery("body").find(".assessment-template-wrapper").find(".answer-template-2").find(".draggable-content");if("undefined"!=typeof b&&b.addClass("previous-mode").attr("data-la",c.lastAnswer),a.assessment.question.optionList=c.question.optionsList,jQuery("body").find(".drag-answer-template").length>0)if(jQuery("body").find(".drag-answer-template").html(""),"personalityrating"!==c.question.type.toLowerCase()){var d=0;jQuery.each(c.lastAnswer,function(a,b){var e=c.lastAnswer[a];jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+e+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(e)]+"</span></p></div>"),d++}),d===c.question.optionsList.length&&("undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500))}else{var e=[0,1,2,3],g=[];jQuery.each(e,function(a,b){var d=jQuery.inArray(e[a],c.lastAnswer);0>d&&g.push(a)}),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+c.lastAnswer[0]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(c.lastAnswer[0])]+"</span></p></div>"),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+g[0]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(g[0])]+"</span></p></div>"),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+g[1]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(g[1])]+"</span></p></div>"),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+c.lastAnswer[1]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(c.lastAnswer[1])]+"</span></p></div>"),"undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500)}else f(function(){if(jQuery("body").find(".drag-answer-template").html(""),"personalityrating"!==c.question.type.toLowerCase()){var b=0;jQuery.each(c.lastAnswer,function(a,d){var e=c.lastAnswer[a];jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+e+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(e)]+"</span></p></div>"),b++}),b===c.question.optionsList.length&&("undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500));var d=[0,1,2,3],e=[];jQuery.each(d,function(a,b){var f=jQuery.inArray(d[a],c.lastAnswer);0>f&&e.push(a)}),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+c.lastAnswer[0]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(c.lastAnswer[0])]+"</span></p></div>"),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+e[0]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(e[0])]+"</span></p></div>"),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+e[1]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(e[1])]+"</span></p></div>"),jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+c.lastAnswer[1]+'" class="draggable-wrapper"><p><span>'+c.question.optionsList[parseInt(c.lastAnswer[1])]+"</span></p></div>"),"undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500)}},500)},200);a.assessment.section.number=c.question.categoryNumber,a.assessment.section.totalQuestions=d.categories.categoriesList[c.question.categoryNumber].totalQuestions,a.assessment.section.instruction=d.categories.categoriesList[c.question.categoryNumber].instruction,a.assessment.section.number+1<=a.assessment.section.total&&(a.assessment.section.currentNo=a.assessment.section.number+1,9===a.assessment.section.currentNo?a.assessment.section.nextNo="":a.assessment.section.nextNo=a.assessment.section.number+2),a.assessment.answerOptions.c=c.question.categoryNumber,a.assessment.answerOptions.q=c.question.number}}else{a.serverError=!0,a.errorMessage=g.pullInterNationalization("assessment.refreshError");for(var j in b.error)window.console&&console.log(b.error[j])}})}},a.processAnswer=function(b,c){if(f.cancel(),a.assessment.flags.enableNext=!1,a.assessment.flags.enablePrev=!1,a.assessment.flags.prevClicked=!0,a.enableNextBtn=!1,c===!0){a.diableOptions=!0,a.prevHide=!1;var d="c"+b.c+"q"+b.q;if(jQuery.inArray(d,a.trackAns)>-1)return!1;-1===jQuery.inArray(d,a.trackAnsTemp)&&a.trackAnsTemp.push(d);var h={url:"assessment360"===a.assessmentType?a.assessmentUrl[a.assessmentType].next+"/"+a.userId:a.assessmentUrl[a.assessmentType].next,data:$.param(b).replace(/%2C/g,","),delay:500,maximum:1200};e.getAjaxResponse(h).then(function(c){if("true"===c.Success)if(a.serverError=!1,"undefined"!=typeof c.question){var d=jQuery("body").find(".assessment-template-wrapper").find(".answer-template-2").find(".draggable-content");"undefined"!=typeof d&&d.hasClass("previous-mode")&&d.removeClass("previous-mode").removeAttr("data-la"),jQuery("body").find(".assessment-template-wrapper").find(".questions-wrapper").find(".question-content").removeClass("hide"),jQuery("body").find(".assessment-template-wrapper").find(".questions-wrapper").find(".answer-template").removeClass("hide");var e=c,h=a.assessment._d,i="c"+b.c+"q"+b.q;if(-1===jQuery.inArray(i,a.trackAns)&&a.trackAns.push(i),3===e.question.categoryNumber){var j=jQuery("body").find(".assessment-template-wrapper").find(".answer-template.template-1");jQuery.each(j.find(".answer-options"),function(){jQuery(this).find(".sp-btn-wrapper").removeClass("sp-light-red")})}if(a.assessment.progress=function(b,c){for(var d=b,f=0,g=0,i=0,j=0;c>j;j++)f+=h.categories.categoriesList[j].totalQuestions;if(d>0&&d<h.categories.totalCategories)for(var k=0;d>k;k++)g+=h.categories.categoriesList[k].totalQuestions;return g+=e.question.number+1,0===e.question.number&&0===e.question.categoryNumber?i=0:(i=g/f*100,99.5===i&&(i=99),100===i?a.nextBtnText="Finish":a.nextBtnText="Next"),i.toFixed()}(e.question.categoryNumber,h.categories.totalCategories),a.assessment.question.number=e.question.number,a.assessment.question.type=e.question.type,a.assessment.question.description=e.question.description,a.assessment.question.optionList=e.question.optionsList,a.assessment.section.number=e.question.categoryNumber,a.assessment.section.totalQuestions=h.categories.categoriesList[e.question.categoryNumber].totalQuestions,a.assessment.section.instruction=h.categories.categoriesList[e.question.categoryNumber].instruction,a.assessment.section.number+1<=a.assessment.section.total&&(a.assessment.section.currentNo=a.assessment.section.number+1,9===a.assessment.section.currentNo?a.assessment.section.nextNo="":a.assessment.section.nextNo=a.assessment.section.number+2),a.assessment.answerOptions.c=e.question.categoryNumber,a.assessment.answerOptions.q=e.question.number,jQuery("body").find(".drag-answer-template").length>0){if("multiplechoice"!==e.question.type.toLowerCase()){jQuery("body").find(".drag-answer-template").html("");var m=0;jQuery.each(a.assessment.question.optionList,function(b,c){jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+b+'" class="draggable-wrapper"><p><span>'+a.assessment.question.optionList[b]+"</span></p></div>"),m++}),m===a.assessment.question.optionList.length&&(a.enableNextBtn=!1,a.assessment.flags.enablePrev=!1,a.assessment.flags.prevClicked=!0,f.cancel(k),"undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500))}}else f(function(){if("multiplechoice"!==e.question.type.toLowerCase()){jQuery("body").find(".drag-answer-template").html("");var b=0;jQuery.each(a.assessment.question.optionList,function(c,d){jQuery("body").find(".drag-answer-template").append('<div data-opt="option-'+c+'" class="draggable-wrapper"><p><span>'+a.assessment.question.optionList[c]+"</span></p></div>"),b++}),b===a.assessment.question.optionList.length&&(a.enableNextBtn=!1,a.assessment.flags.enablePrev=!1,a.assessment.flags.prevClicked=!0,f.cancel(k),"undefined"!=typeof l&&l.destroy(),k=f(a.initSortable,500))}},500);a.assessment.flags.initAssessment=!1,a.assessment.flags.enableNext=!1,"multiplechoice"===e.question.type.toLowerCase()&&(a.assessment.flags.enablePrev=!0,a.assessment.flags.prevClicked=!1),f(function(){a.diableOptions=!1},300)}else"default"===a.assessmentType?window.location="/sp/assessment/completed":"assessment360"===a.assessmentType?window.location="/sp/external/thankyou":"hiringUser"===a.assessmentType&&(window.location="/sp/candidateThankYou");else{a.serverError=!0,a.errorMessage=g.pullInterNationalization("assessment.refreshError");for(var n in c.error)window.console&&console.log(c.error[n])}})}},a.initSortable=function(){if(!(jQuery("#drag-list").length>0&&"multiplechoice"!==jQuery("#drag-list").attr("data-type").toLowerCase()))return f.cancel(),!1;i(),j();var b=document.getElementById("drag-list");l=Sortable.create(b,{ghostClass:"is-dragging",onEnd:function(b){a.enableNextBtn=!1,a.assessment.flags.enablePrev=!1,a.assessment.flags.prevClicked=!0,f(function(){i()},300)}})}}angular.module("spApp").controller("assessmentController",assessmentController),assessmentController.$inject=["$scope","$http","$element","$attrs","ajaxService","$timeout","$rootScope","$localStorage"];
function candidateAdvisorController(a,b,c,d,e,f,g,h,i,j){a.selectedCandidate={},a.memberMasterList={},a.validMemberList=[],a.candidateMasterList={},a.validCandidateList=[],a.selectedMemberDetails={},a.candidateProfileDetails={},a.memberProfileDetails={},a.candidateAdvise={},a.memberAdvise={},a.candidateAvoidFormatted=[],a.resultTabs={},a.personalityFlags=[],a.cachedAdvisorData=[],a.showMemberListingWidget=!1,a.memberSelected=!1,a.showContent=!1,a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,a.mobileControls={},a.mobileControls.display=!1,a.viewMode={list:!0,chart:!1},a.switchToUser1=!0,a.cachedUSerEmails=null,a.winWidth=jQuery(window).width(),a.sResizeFlag=0,a.lResizeFlag=0,jQuery(window).resize(function(){a.winWidth=jQuery(window).width()}),a.returnBack=function(){window.history.back()},a.getSelectedCandidateDetails=function(){a.selectedCandidateEmailAddress=i.getParam("c");var b={url:"/sp/hiring/getProfileDetails",data:$.param({candidateEmail:a.selectedCandidateEmailAddress}).replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.selectedCandidate=b.userProfileForm,a.selectedCandidate.hiringRoles=b.hiring.hiringRoles,a.selectedCandidate.profilePic=b.hiring.smallProfileImage,a.selectedCandidate.userInitials=b.hiring.userInitials,a.candidateSelected=!0,a.winWidth<768&&e(function(){g.setBoxSizes("#dd-wrap",".dd","full")},300))})},a.getAllCandidateDetails=function(){var b={url:"/sp/hiring/getAllCandidates"};f.getAjaxResponse(b).then(function(b){if("true"===b.Success){var c=0,d=[];a.candidateMasterList=b.hiring,jQuery.each(a.candidateMasterList,function(b,e){"VALID"===a.candidateMasterList[b].userStatus&&(null===a.candidateMasterList[b].spUserId?(d=jQuery.extend({},a.candidateMasterList[b],{selectedCandidateFromList:!1}),a.validCandidateList.push(d)):a.candidateMasterList[b].profileSettings.hiringAccessAllowed===!0&&(d=jQuery.extend({},a.candidateMasterList[b],{selectedCandidateFromList:!1}),a.validCandidateList.push(d))),c++}),c===a.candidateMasterList.length&&$.each(a.validCandidateList,function(b){a.validCandidateList[b].email===i.getParam("c")&&(a.validCandidateList[b].selectedCandidateFromList=!0)})}})},a.getAllMemberDetails=function(){var b={url:"/sp/relationship/getMembers",data:$.param({candidateEmail:i.getParam("c")}).replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.memberMasterList=b.memberList,jQuery.each(a.memberMasterList,function(b,c){var d=jQuery.extend({},a.memberMasterList[b],{selectedMember:!1});a.validMemberList.push(d)}))})},a.showDropdownWidget=function(b){"right"===b?(a.showMemberListingWidget=!a.showMemberListingWidget,a.showCandidateListingWidget=!1):(a.showCandidateListingWidget=!a.showCandidateListingWidget,a.showMemberListingWidget=!1)},a.compareToolReset=function(){a.cachedUSerEmails=null,a.resultTabs={},a.personalityFlags=[],a.cachedAdvisorData=[],a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,a.showContent=!1,a.showMemberListingWidget=!1,a.memberSelected=!1,a.showCandidateListingWidget=!1,a.candidateSelected=!1,a.selectedCandidateEmailAddress=null,a.selectedMemberEmailAddress=null,jQuery.each(a.validMemberList,function(b){a.validMemberList[b].selectedMember=!1}),jQuery.each(a.validCandidateList,function(b){a.validCandidateList[b].selectedCandidateFromList=!1}),a.mobileControls.display=!1,a.viewMode={list:!0,chart:!1},a.switchToUser1=!0},a.updateCompareMember=function(b){a.cachedUSerEmails=null,a.showMemberListingWidget=!1,a.personalityFlags=[],a.cachedAdvisorData=[],a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,jQuery.each(a.validMemberList,function(b){a.validMemberList[b].selectedMember=!1}),jQuery.each(a.validMemberList,function(c){return a.validMemberList[c].email===b?(a.validMemberList[c].selectedMember=!0,a.memberSelected=!0,a.selectedMemberDetails=a.validMemberList[parseInt(c)],a.selectedMemberEmailAddress=a.validMemberList[parseInt(c)].email,void(a.viewMode.list===!0?a.compareCandidate(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress,{candidatePersonalityType:"Primary",memberPersonalityType:"Primary"}):a.getCompareCharts(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress))):void 0})},a.updateCompareCandidate=function(b){a.cachedUSerEmails=null,a.showCandidateListingWidget=!1,a.personalityFlags=[],a.cachedAdvisorData=[],a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,jQuery.each(a.validCandidateList,function(b){a.validCandidateList[b].selectedCandidateFromList=!1}),jQuery.each(a.validCandidateList,function(c){a.validCandidateList[c].email===b&&(a.validCandidateList[parseInt(c)].selectedCandidateFromList=!0,a.candidateSelected=!0,a.selectedCandidate=a.validCandidateList[parseInt(c)],a.selectedCandidateEmailAddress=a.validCandidateList[parseInt(c)].email,a.viewMode.list===!0?a.compareCandidate(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress,{candidatePersonalityType:"Primary",memberPersonalityType:"Primary"}):a.getCompareCharts(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress))}),a.winWidth<768&&e(function(){g.setBoxSizes("#dd-wrap",".dd","full")},300)},a.getCompareCharts=function(b,c){if(a.candidateSelected&&a.memberSelected&&null===a.cachedUSerEmails){var d={url:"/sp/hiring/compareProfile",data:$.param({candidateEmail:b,memberEmail:c}).replace(/%40/g,"@")};a.cachedUSerEmails=b+c,f.getAjaxResponse(d).then(function(b){"true"===b.Success&&(a.compareProfileData=b,a.candidateProfileDetails=b.candidateAnalysis,a.memberProfileDetails=b.memberAnalysis,a.cacheCompareResponse=b,a.winWidth>767?(a.showContent=!0,a.mobileControls.display=!1,a.cachedUSerEmails=null):(a.showContent=!1,a.mobileControls.display=!0,a.switchToUser1=!0,setTimeout(function(){g.setBoxSizes(".mobile-tabs",".mtabs")},200)),a.personalityFormatted={candidate:{primary:g.pullInterNationalization("profileKeys."+a.candidateProfileDetails.personality.Primary.personalityType.trim()),pressure:g.pullInterNationalization("profileKeys."+a.candidateProfileDetails.personality.UnderPressure.personalityType.trim())},member:{primary:g.pullInterNationalization("profileKeys."+a.memberProfileDetails.personality.Primary.personalityType.trim()),pressure:g.pullInterNationalization("profileKeys."+a.memberProfileDetails.personality.UnderPressure.personalityType.trim())}},e(function(){a.dataAvailablity=!0},300))})}},a.changeViewMode=function(b){a.showMemberListingWidget=!1,a.showCandidateListingWidget=!1,"list"===b?(a.viewMode.list=!0,a.viewMode.chart=!1,a.compareCandidate(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress,{candidatePersonalityType:"Primary",memberPersonalityType:"Primary"})):(a.viewMode.list=!1,a.viewMode.chart=!0,a.getCompareCharts(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress))},a.compareCandidate=function(b,c,d){if(a.candidateSelected&&a.memberSelected){var e=$.extend({},{candidateEmail:b,memberEmail:c},d),h={url:"/sp/hiring/compareRelation",data:$.param(e).replace(/%40/g,"@")};f.getAjaxResponse(h).then(function(b){"true"===b.Success&&(a.cacheResults(e,b),a.winWidth>767?(a.showContent=!0,a.mobileControls.display=!1,a.cachedUSerEmails=null):(a.showContent=!1,a.mobileControls.display=!0,a.switchToUser1=!0,setTimeout(function(){g.setBoxSizes(".mobile-tabs",".mtabs")},200)),setTimeout(function(){g.setBoxSizes(".results-wrapper",".results-content")},500))})}},a.cacheResults=function(b,c){var d=b.candidatePersonalityType.charAt(0)+b.memberPersonalityType.charAt(0),e=$.inArray(d,a.personalityFlags);-1===e&&(a.personalityFlags.push(d),a.cachedAdvisorData[d]=c,a.candidateAdvise=a.cachedAdvisorData[d].primary,a.memberAdvise=a.cachedAdvisorData[d].secondary)},a.formatList=function(a){if("undefined"!=typeof a){var b=a.split("</p>"),c="",d=0;if(jQuery.each(b,function(a){"undefined"!=typeof b[a].split("<p>")[1]&&(c+="<li>"+b[a].split("<p>")[1]+"</li>"),d++}),d===b.length)return c}},a.changeContentTabs=function(b,c){"left"===b?a.resultTabs.leftSelected=parseInt(c):a.resultTabs.rightSelected=parseInt(c);var d=0===a.resultTabs.leftSelected?"Primary":"UnderPressure",f=0===a.resultTabs.rightSelected?"Primary":"UnderPressure",g=d.charAt(0)+f.charAt(0),h=$.inArray(g,a.personalityFlags);-1===h?e(function(){a.compareCandidate(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress,{candidatePersonalityType:d,memberPersonalityType:f})},100):(a.candidateAdvise=a.cachedAdvisorData[g].primary,a.memberAdvise=a.cachedAdvisorData[g].secondary)},a.initCandiateCompare=function(){a.getSelectedCandidateDetails(),a.getAllMemberDetails(),a.getAllCandidateDetails()},a.printPage=function(a){a===!0&&setTimeout(function(){window.print()},500)},a.getMobileReport=function(b){a.winScreenHeight=jQuery(window).height()+"px",b===!0?j.open({template:"/sp/resources/html/tools/hiring/mobile-report.html",scope:a}):j.open({template:"/sp/resources/html/tools/hiring/mobile-charts.html",scope:a})},jQuery(window).resize(function(){a.winWidth<768?(a.candidateSelected&&a.memberSelected&&0===a.sResizeFlag&&a.mobileControls.display===!1&&(a.showContent=!1,e(function(){a.mobileControls.display=!0},500),a.sResizeFlag=1,a.lResizeFlag=0),g.setBoxSizes("#dd-wrap",".dd","full")):(a.candidateSelected&&a.memberSelected&&0===a.lResizeFlag&&(e(function(){a.mobileControls.display=!1,a.showContent=!0},500),a.sResizeFlag=0,a.lResizeFlag=1),j.close("ngdialog1"),jQuery("body").find("#dd-wrap").find(".dd").removeAttr("style"))}),a.initCandiateCompare()}angular.module("spApp").controller("candidateAdvisorController",candidateAdvisorController),candidateAdvisorController.$inject=["$scope","$element","$attrs","$http","$timeout","ajaxService","$rootScope","$localStorage","sharedProperties","ngDialog"];
function candidateCompareController(a,b,c,d,e,f,g,h,i){a.selectedCandidate={},a.memberMasterList={},a.validMemberList=[],a.candidateMasterList={},a.validCandidateList=[],a.selectedMemberDetails={},a.candidateProfileDetails={},a.memberProfileDetails={},a.showMemberListingWidget=!1,a.memberSelected=!1,a.returnBack=function(){window.history.back()},a.getSelectedCandidateDetails=function(){a.selectedCandidateEmailAddress=i.get("candidateEmail");var b={url:"/sp/hiring/getProfileDetails",data:$.param({candidateEmail:a.selectedCandidateEmailAddress}).replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.selectedCandidate=b.userProfileForm,a.selectedCandidate.hiringRoles=b.hiring.hiringRoles,a.selectedCandidate.profilePic=b.hiring.smallProfileImage,a.selectedCandidate.userInitials=b.hiring.userInitials,a.candidateSelected=!0)})},a.getAllMemberDetails=function(){var b={url:"/sp/relationship/getMembers",data:$.param({candidateEmail:i.get("candidateEmail")}).replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.memberMasterList=b.memberList,jQuery.each(a.memberMasterList,function(b,c){var d=jQuery.extend({},a.memberMasterList[b],{selectedMember:!1});a.validMemberList.push(d)}))})},a.getAllCandidateDetails=function(){var b={url:"/sp/hiring/getAllCandidates"};f.getAjaxResponse(b).then(function(b){if("true"===b.Success){var c=0,d=[];a.candidateMasterList=b.hiring,jQuery.each(a.candidateMasterList,function(b,e){"VALID"===a.candidateMasterList[b].userStatus&&(null===a.candidateMasterList[b].spUserId?(d=jQuery.extend({},a.candidateMasterList[b],{selectedCandidateFromList:!1}),a.validCandidateList.push(d)):a.candidateMasterList[b].profileSettings.hiringAccessAllowed===!0&&(d=jQuery.extend({},a.candidateMasterList[b],{selectedCandidateFromList:!1}),a.validCandidateList.push(d))),c++}),c===a.candidateMasterList.length&&$.each(a.validCandidateList,function(b){a.validCandidateList[b].email===i.get("candidateEmail")&&(a.validCandidateList[b].selectedCandidateFromList=!0)})}})},a.showDropdownWidget=function(b){"right"===b?(a.showMemberListingWidget=!a.showMemberListingWidget,a.showCandidateListingWidget=!1):(a.showCandidateListingWidget=!a.showCandidateListingWidget,a.showMemberListingWidget=!1)},a.compareToolReset=function(){a.showContent=!1,a.showMemberListingWidget=!1,a.memberSelected=!1,a.showCandidateListingWidget=!1,a.candidateSelected=!1,a.selectedCandidateEmailAddress=null,a.selectedMemberEmailAddress=null,jQuery.each(a.validMemberList,function(b){a.validMemberList[b].selectedMember=!1}),jQuery.each(a.validCandidateList,function(b){a.validCandidateList[b].selectedCandidateFromList=!1})},a.updateCompareMember=function(b){a.showMemberListingWidget=!1,jQuery.each(a.validMemberList,function(b){a.validMemberList[b].selectedMember=!1}),jQuery.each(a.validMemberList,function(c){return a.validMemberList[c].email===b?(a.validMemberList[c].selectedMember=!0,a.memberSelected=!0,a.selectedMemberDetails=a.validMemberList[parseInt(c)],a.selectedMemberEmailAddress=a.validMemberList[parseInt(c)].email,void a.compareCandidate(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress)):void 0})},a.updateCompareCandidate=function(b){a.showCandidateListingWidget=!1,jQuery.each(a.validCandidateList,function(b){a.validCandidateList[b].selectedCandidateFromList=!1}),jQuery.each(a.validCandidateList,function(c){a.validCandidateList[c].email===b&&(a.validCandidateList[parseInt(c)].selectedCandidateFromList=!0,a.candidateSelected=!0,a.selectedCandidate=a.validCandidateList[parseInt(c)],a.selectedCandidateEmailAddress=a.validCandidateList[parseInt(c)].email,a.compareCandidate(a.selectedCandidateEmailAddress,a.selectedMemberEmailAddress))})},a.compareCandidate=function(b,c){if(a.candidateSelected&&a.memberSelected){var d={url:"/sp/hiring/compareProfile",data:$.param({candidateEmail:b,memberEmail:c}).replace(/%40/g,"@")};f.getAjaxResponse(d).then(function(b){"true"===b.Success&&(a.compareProfileData=b,a.candidateProfileDetails=b.candidateAnalysis,a.memberProfileDetails=b.memberAnalysis,a.personalityFormatted={candidate:{primary:g.pullInterNationalization("profileKeys."+a.candidateProfileDetails.personality.Primary.personalityType.trim()),pressure:g.pullInterNationalization("profileKeys."+a.candidateProfileDetails.personality.UnderPressure.personalityType.trim())},member:{primary:g.pullInterNationalization("profileKeys."+a.memberProfileDetails.personality.Primary.personalityType.trim()),pressure:g.pullInterNationalization("profileKeys."+a.memberProfileDetails.personality.UnderPressure.personalityType.trim())}},h.saveCandidate(b),h.saveMember(b),e(function(){a.dataAvailablity=!0},300))})}},a.initCandiateCompare=function(){a.getSelectedCandidateDetails(),a.getAllMemberDetails(),a.getAllCandidateDetails()},a.printPage=function(a){a===!0&&setTimeout(function(){window.print()},500)},a.initCandiateCompare()}angular.module("spApp").controller("candidateCompareController",candidateCompareController),candidateCompareController.$inject=["$scope","$element","$attrs","$http","$timeout","ajaxService","$rootScope","ProfileDataService","$localStorage"];
function candidateIncompleteProfile(a,b,c,d,e,f){a.candidateProfile={},a.candidateProfileDetails={},a.processCandidateProfile=function(b){if(a.candidateProfileDetails.submitted=!1,a.candidateProfileDetails.$valid){var c={url:"/sp/hiring/updateProfile",data:$.param(b).replace(/%40/g,"@").replace(/%2C/g,",")};e.getAjaxResponse(c).then(function(a){"true"===a.Success&&window.location.reload()})}else a.candidateProfileDetails.submitted=!0},a.initCandidateProfile=function(){var b={url:"/sp/hiring/getProfileDetails",data:$.param({candidateEmail:f.get("candidateEmail")}).replace(/%40/g,"@")};e.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.candidateProfile=b.userProfileForm,0===a.candidateProfile.month&&(a.candidateProfile.month="default"),0===a.candidateProfile.day&&(a.candidateProfile.day="default"),0===a.candidateProfile.year&&(a.candidateProfile.year="default"),("undefined"==typeof a.candidateProfile.address||null===a.candidateProfile.address)&&(a.candidateProfile.country="default",a.candidateProfile.state=null))})},a.initCandidateProfile()}angular.module("spApp").controller("candidateIncompleteProfile",candidateIncompleteProfile),candidateIncompleteProfile.$inject=["$scope","$http","$element","$attrs","ajaxService","$localStorage"];
function candidateListingController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.memberList=[],a.masterMemberList=[],a.backupMasterMemberList=[],a.showfilter=!1,a.pageSize=10,a.intialPageSize=10,a.searchTag=[],a.hiringRoles=[],a.alldisplay=!1,a.filter={},a.tags=[],a.userEmail={email:[]},a.checkBox=[],a.allMembersEmailId=[],a.statusInclude=[],a.setEditMode=!1,a.userStatus=[],a.groupModule=[],a.masterGroupModule=[],a.textSearching="",a.mainGroupInfoList=[],a.checkedAll=!1,a.deleteUser=!1,a.deleteUserError=!1,a.updateGroup=!1,a.updateGroupError=!1,a.updateError="",a.EditGroupEmail="",a.archiveDialog={},a.archiveDialog.addHiring=!1,a.showArchive=!1,a.load=!0,a.showIntro=!1,a.member={},a.dataWithFlags=[],a.memCountCheck=!1,a.newOrderFlag=0,a.addNewMember={},a.addNewMember.submitted=!1;var o=n.get("loggegdInProfile"),p=o.member.roles.sort();a.isAccountAdmin=0===jQuery.inArray("AccountAdministrator",p)?!0:!1,a.isAdmin=0===jQuery.inArray("Administrator",p)?!0:!1,n.remove("showProfileTab"),a.formatDate=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split("-"),c={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},d=c[b[1].toString()]+" "+parseInt(b[2])+", "+parseInt(b[0]);return d}},a.formatName=function(a){if(null!==a||"undefined"!==a){var b=a.split(", "),c=b[1]+" "+b[0];return c}},a.getMembersData=function(){var b=n.get("gNotify");null!==b&&"undefined"!=typeof b&&("AddSingle"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" added successfully"}),"AddHire"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member</strong>",message:" added successfully"}),"import"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate(s)</strong>",message:" imported successfully"}),"moved"===b&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" added to list successfully"}),"deleted"===b&&$.growl({icon:"glyphicon glyphicon-ok",message:"Candidate deleted successfully"}),"profileError"===b&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:n.get("profileError")}),setTimeout(function(){n.remove("gNotify"),n.remove("profileError")},300));var c={url:"/sp/hiring/getAllCandidates"};e.getAjaxResponse(c).then(function(b){if("true"===b.Success){a.getArchiveCandidateList(),n.remove("isCandidateArchived","archiveCandidateId","candidateEmail","candidateID");var c,d=0;a.backupMasterMemberList=b.hiring.length?b.hiring:[],a.newList=[],a.backupMasterMemberList.length>0?a.showIntro=!1:a.showIntro=!0,$.each(a.backupMasterMemberList,function(b){"VALID"===a.backupMasterMemberList[b].userStatus?null===a.backupMasterMemberList[b].spUserId?(c=$.extend({},a.backupMasterMemberList[b],{btnFlags:{sendReminder:!1,archiveBtn:!0,SendInvite:!1,viewProfile:!0,viewCompare:!0,viewAdvisor:!0,requestAccess:!1}}),a.newList.push(c)):a.backupMasterMemberList[b].profileSettings.hiringAccessAllowed===!0?(c=$.extend({},a.backupMasterMemberList[b],{btnFlags:{sendReminder:!1,archiveBtn:!0,SendInvite:!1,viewProfile:!0,viewCompare:!0,viewAdvisor:!0,requestAccess:!1}}),a.newList.push(c)):(c=$.extend({},a.backupMasterMemberList[b],{btnFlags:{sendReminder:!1,archiveBtn:!0,SendInvite:!1,viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!0}}),a.newList.push(c)):"INVITATION_SENT"===a.backupMasterMemberList[b].userStatus||"ASSESSMENT_PROGRESS"===a.backupMasterMemberList[b].userStatus||"ASSESSMENT_PENDING"===a.backupMasterMemberList[b].userStatus||"ADD_REFERENCES"===a.backupMasterMemberList[b].userStatus||"PROFILE_INCOMPLETE"===a.backupMasterMemberList[b].userStatus?(c=$.extend({},a.backupMasterMemberList[b],{btnFlags:{sendReminder:!0,archiveBtn:!1,SendInvite:!1,viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1}}),a.newList.push(c)):("INVITATION_NOT_SENT"===a.backupMasterMemberList[b].userStatus||"INVITATION_EXPIRED"===a.backupMasterMemberList[b].userStatus)&&(c=$.extend({},a.backupMasterMemberList[b],{btnFlags:{sendReminder:!1,archiveBtn:!1,SendInvite:!0,viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1}}),a.newList.push(c)),d++}),d===a.backupMasterMemberList.length&&(a.masterMemberList=a.newList,a.returnMemberList(a.pageSize),a.tagListArray=[],a.mokroles=[],a.userRoles=[],angular.forEach(a.backupMasterMemberList,function(b,c){a.allMembersEmailId.push(b.email),null!=b.tagList&&(a.tagListArray=b.tagList.concat(a.tagListArray).unique()),null!=b.userStatusFormatted&&a.mokroles.push(b.userStatusFormatted),null!==b.hiringRoles&&(a.userRoles=b.hiringRoles.concat(a.userRoles).unique())}),a.tagListArray=a.autoCompleteType(a.tagListArray),a.userStatus=a.mokroles.unique().sort(),a.hiringRoles=a.userRoles.unique(),a.listLoaded=!0)}})},a.intersection=function(a,b){var c=[],d=0,e=0;for(a.sort(),b.sort();a.length>d&&b.length>e;)a[d]<b[e]?d++:a[d]>b[e]?e++:(c.push(a[d]),d++,e++);return c},a.enableAdvanceSection=function(a){$(a.currentTarget).closest(".complete-profile").find(".editable-section").show()},a.autoCompleteType=function(a){for(var b=[],c=0;c<a.length;c++)b.push({text:a[c]});return b},a.order=function(b,c){a.lastPredicate=b,a.lastReverse=c,a.memberList=i("orderBy")(a.memberList,b,c)},a.loadTags=function(c){var d=b.defer();return d.resolve(a.getLoadSuggestion(c)),d.promise},a.getLoadSuggestion=function(b){for(var c=[],d=0;d<a.tagListArray.length;d++)angular.lowercase(a.tagListArray[d].text).indexOf(angular.lowercase(b))>-1&&c.push(a.tagListArray[d]);return c.slice(0,5)},a.tagAdded=function(b){a.searchTag.push(b.text),a.refineSearch(a.searchTag)},a.tagRemoved=function(b){a.searchTag.splice(a.searchTag.indexOf(b.text),1),a.refineSearch(a.searchTag)},a.refineSearch=function(b){a.newArr=[],angular.forEach(a.masterMemberList,function(c,d){null!=c.tagList&&a.intersection(c.tagList,b).length===b.length&&a.newArr.push(c)}),a.checkboxFilter()},a.includeCheck=function(b){var c=$.inArray(b,a.statusInclude);c>-1?a.statusInclude.splice(c,1):a.statusInclude.push(b),a.checkboxFilter()},a.checkboxFilter=function(b){a.statusInclude.length>0&&(a.checkBox=[],angular.forEach(a.masterMemberList,function(b,c){for(var d=0;d<a.statusInclude.length;d++)for(var e=0;e<b.roles[d].length;e++)b.roles[e]===a.statusInclude[d]&&a.checkBox.push(b)})),a.returnMemberList(a.pageSize)},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.returnMemberList=function(b){if(a.searchTag.length&&!a.statusInclude.length&&(a.memberList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.memberList=angular.copy(a.combineArray)}!a.searchTag.length&&a.statusInclude.length&&(a.memberList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.memberList=angular.copy(a.masterMemberList)),a.memberList=k.searchModule(a.textSearching,a.memberList,2),a.pageSize=b,b>=a.masterMemberList.length&&(a.disabledInfinite=!0,a.pageSize=a.masterMemberList.length),a.load&&(a.lastPredicate="name",a.lastReverse=!1,a.loadBtnCLicked=!1,a.load=!1),a.loadBtnCLicked&&(a.loadBtnCLicked=!1),a.order(a.lastPredicate,a.lastReverse),a.memberList=a.memberList},a.checkAll=function(){a.checkedAll=!a.checkedAll,this.negative?a.userEmail.email=a.masterMemberList.map(function(a){return{email:a.email,name:a.name}}):a.userEmail.email=[]},a.checkUncheck=function(){a.alltoggle=!1,a.checkedAll&&(a.negative=!a.negative,a.checkedAll=!a.checkedAll)},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.userEmail.email=[],a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof this.selectedSearch&&(this.selectedSearch.userStatusFormatted="",this.selectedSearch.hiringRoles=""),a.memberList=angular.copy(a.masterMemberList),"undefined"!=typeof b&&(a.pageSize=a.masterMemberList.length),a.checkUncheck(),angular.element($(".tags").find("input")).scope().newTag.text="",a.load=!0,a.disabledInfinite=!1,m.$broadcast("$scrollStart"),a.returnMemberList(a.pageSize);var c=$(".memberHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")},a.confirmDelete=function(b){var c=$(b.target).closest(".complete-profile").find(".email").html(),d=(angular.element(b.currentTarget),{url:"/sp/hiring/deleteCandidate",data:$.param({candidateEmail:c})});e.getAjaxResponse(d).then(function(b){"true"===b.Success?(a.getMembersData(),a.userEmail.email=[],a.alltoggle=!1,a.checkedAll&&(a.negative=!a.negative),$.growl({icon:"glyphicon glyphicon-ok",message:"Candidate(s) deleted successfully"})):$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"Server Error"})})},a.certainDelete=function(){j.open({template:"/sp/resources/html/tools/hiring/deleteConfirmation.html",scope:a})},a.deleteUsers=function(b){var c=[];jQuery.each(b,function(a,d){c.push(b[a].email)});var d={url:"/sp/hiring/deleteCandidate",data:$.param({candidateEmail:c.toString()})};e.getAjaxResponse(d).then(function(b){"true"===b.Success&&(a.getMembersData(),a.userEmail.email=[],a.alltoggle=!1,a.checkedAll&&(a.negative=!a.negative),j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:"Candidate(s) deleted successfully"}))})},a.addClassActive=function(){a.dropUp=!a.dropUp},a.notificationEmail=function(b){b.length&&(k.setEmail(b),k.setObject(a.memberList),j.open({template:"return-visitor.html"}))},a.profileRoute=function(a){var b=$(a.currentTarget).data("routeparam");n.set("groupname",b),window.location.href="/sp/admin/group/#profile"},a.showFullList=function(){a.resetfilter("full")},a.editGroupSection=function(b){a.EditGroupEmail=this.memberList.email;for(var c=this.memberList.email,d=0;d<a.memberList.length;d++)c===a.memberList[d].email&&(b=d);a.setEditMode=!0,a.indexToChange=b,a.groupEditSection=angular.copy(a.memberList[b]),a.groupSelectOption=[];for(var e=0;e<a.groupEditSection.groupAssociationList.length;e++)a.groupSelectOption.push(a.groupEditSection.groupAssociationList[e].name);j.open({template:"/sp/admin/member/editGroup",scope:a})},a.enableLeadDialog=function(b,c,d){for(var e=0;e<a.mainGroupInfoList.length;e++)if(d===a.mainGroupInfoList[e].name){if(null!==a.mainGroupInfoList[e].groupLead&&a.mainGroupInfoList[e].groupLead.email!==a.EditGroupEmail)return!1;a.groupEditSection.groupAssociationList[c].groupLead=!b}},a.setStyle=function(b){return a.viewMode(),b===!0?!0:!1},a.isItEnabled=function(b,c){a.classActivate=[];for(var d=0;d<a.mainGroupInfoList.length;d++)b===a.mainGroupInfoList[d].name&&null!==a.mainGroupInfoList[d].groupLead&&a.mainGroupInfoList[d].groupLead.email!==a.EditGroupEmail&&(a.classActivate.push("#mode_"+c),a.classActivate.push("#modeprop_"+c))},a.viewMode=function(){if(a.classActivate.length)for(var b=0;b<a.classActivate.length;b++)$(a.classActivate[b]).addClass("disabled")},a.addGroupToModule=function(b,c){return a.selectedGroup=b,"default"===b?!1:(""===a.groupEditSection.groupAssociationList[0].name&&a.groupEditSection.groupAssociationList.splice(0,1),a.groupEditSection.groupAssociationList.push({name:b,groupLead:!1}),void a.groupSelectOption.push(b))},a.addGroupMember=function(a){return""===a?!1:!0},a.removeGroupDialog=function(b,c){for(var d=b.target,e=($(d).closest(".blockGroup").remove(),""),f=0;f<a.groupEditSection.groupAssociationList.length;f++)a.groupEditSection.groupAssociationList[f].name===c.name&&(a.groupEditSection.groupAssociationList.splice(f,1),e=f);a.groupSelectOption.splice(e,1)},a.saveGroupToModule=function(b){for(var c="",d=0;d<a.groupEditSection.groupAssociationList.length;d++)c=c.length?c+","+a.groupEditSection.groupAssociationList[d].name+":"+a.groupEditSection.groupAssociationList[d].groupLead:a.groupEditSection.groupAssociationList[d].name+":"+a.groupEditSection.groupAssociationList[d].groupLead;var f={url:"/sp/admin/group/memberGroupUpdate",data:$.param({groupAssociationList:c,memberEmail:a.groupEditSection.email})};e.getAjaxResponse(f).then(function(b){if("true"===b.Success){a.groupEditSection.groupAssociationList.length?a.memberList[a.indexToChange]=a.groupEditSection:(a.groupEditSection.groupAssociationList.push({name:"",groupLead:!1}),a.memberList[a.indexToChange]=a.groupEditSection);for(var c=0;c<a.masterMemberList.length;c++)a.masterMemberList[c].email===a.memberList[a.indexToChange].email&&(a.masterMemberList[c]=a.groupEditSection);j.close("ngdialog1"),j.open({template:"/sp/admin/member/confirmation"})}else j.close("ngdialog1"),j.open({template:"/sp/admin/member/errorGroup"})})},a.memberTakeAway=function(a,b,c){n.set("candidateEmail",a).set("candidateID",b),c===!0&&n.set("showProfileTab",!0),window.location.href="/sp/tools/hiring/profile?cemail="+a},a.candidateCompare=function(a,b){n.set("candidateEmail",a).set("candidateID",b),window.location.href="/sp/tools/hiring/compare"},a.candidateAdvisor=function(a,b){n.set("candidateEmail",a).set("candidateID",b),window.location.href="/sp/tools/hiring/advisor?c="+a},a.calltoAction=function(a){return""===a?!1:void(window.location.href=a)},a.archiveDialog=function(b,c,d){a.archiveCandidate={name:c,email:b,roles:d},j.open({template:"/sp/resources/html/tools/hiring/archive-candidate.html",scope:a})},a.archiveAllCandidate=function(b,c,d){var f=[];d!==!0?jQuery.each(b,function(a,c){f.push(b[a].email)}):f=b;var g={url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:f.toString(),isHired:!1})};e.getAjaxResponse(g).then(function(b){"true"===b.Success&&(j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate(s)</strong>",message:" archived successfully"}),a.getMembersData(),a.negative=!a.negative,a.archiveDialog.addHiring=!1)})},a.archiveAllDialog=function(b){b.length>0&&(a.archiveCandidateAll={emails:b},j.open({template:"/sp/resources/html/tools/hiring/archive-candidate-list.html",scope:a}),a.userEmail.email=[],a.alltoggle=!1,a.checkedAll&&(a.negative=!a.negative))},a.sendViewProfileRequest=function(b,c){a.profileRequest={email:b,name:c,heading:"Request Access"},j.open({template:"/sp/resources/html/tools/hiring/send-profile-invite.html",scope:a}),a.sendRequest=function(a){var b={url:"/sp/notifications/sendNotification",data:$.param({memberEmail:a,type:""}).replace(/%40/g,"@")};e.getAjaxResponse(b).then(function(a){"true"!==a.Success&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:"Not able to send invite"})})}},a.getArchiveCandidateList=function(){var b={url:"/sp/hiring/getAllArchivedCandidates"};e.getAjaxResponse(b).then(function(b){"true"===b.Success&&(b["hiring-archived"].length>0?a.showArchive=!0:a.showArchive=!1)})},a.sendReminder=function(b,c){a.profileRequest={email:b,name:c,heading:"Reminder"},j.open({template:"/sp/resources/html/tools/hiring/send-profile-invite.html",scope:a}),a.sendRequest=function(a){var b={url:"/sp/notifications/sendNotification",data:$.param({memberEmail:a,type:""}).replace(/%40/g,"@")};e.getAjaxResponse(b).then(function(a){"true"!==a.Success&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:"Not able to send invite"})})}},a.hireCandidate=function(b,c,d){a.hireCandidateDetails={name:c,email:b,roles:d},a.member={},a.member.firstName=a.hireCandidateDetails.name.split(" ")[0],a.member.lastName=a.hireCandidateDetails.name.split(" ")[1],a.isAdmin||a.isAccountAdmin?e.getAjaxResponse({url:"/sp/admin/member/availalbeMemberSubscriptions"}).then(function(b){"true"===b.Success&&(a.memberAccountsCount=b.availalbeMemberSubscriptions,a.memberAccountsCount>0?(a.getGroupList(),j.open({template:"/sp/resources/html/tools/hiring/hire-candidate.html",scope:a})):j.open({template:"/sp/resources/html/tools/hiring/hire-candidate-no-members.html",scope:a}))}):j.open({template:"/sp/resources/html/tools/hiring/hire-candidate-not-admin.html",scope:a}),a.hireCandidateArchive=function(){e.getAjaxResponse({url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:a.hireCandidateDetails.email,isHired:!0})}).then(function(b){if("true"===b.Success)a.getMembersData(),j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" status changed to 'Hired' and archived successfully"});else{for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.addMember=function(b){this.addNewMember.submitted=!1,this.addNewMember.$valid?e.getAjaxResponse({url:"/sp/admin/member/addSingle",data:$.param(b).replace(/%2C/g,",")}).then(function(b){if("true"===b.Success)e.getAjaxResponse({url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:a.hireCandidateDetails.email,isHired:!0})}).then(function(b){if("true"===b.Success)a.getMembersData(),j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member</strong>",message:" added successfully"});else{j.close("ngdialog1");for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}});else{j.close("ngdialog1");for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}}):this.addNewMember.submitted=!0}},a.getGroupList=function(){a.groupDataSet=[],a.groupDataSetBackup=[],a.dataWithFlags=[],e.getAjaxResponse({url:"/sp/admin/group/all"}).then(function(b){if("true"===b.Success)a.groupDataSet=b.groupInfoList,a.groupDataSetBackup=b.groupInfoList,jQuery.each(a.groupDataSet,function(b,c){a.dataWithFlags.push(jQuery.extend({},a.groupDataSet[b],{selectedFlag:!1,isGroupLead:!1}))}),a.flagCounter=a.dataWithFlags.length;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.updateTagList=function(b,c){a.member.groupAssociationList=null,a.tagList=[],jQuery.each(a.dataWithFlags,function(d,e){a.dataWithFlags[d].selectedFlag===!0&&c===!0?a.tagList.push(a.dataWithFlags[d].name):a.dataWithFlags[d].selectedFlag===!0&&b===!0&&(a.dataWithFlags[d].isGroupLead===!0?a.tagList.push(a.dataWithFlags[d].name+":true"):a.tagList.push(a.dataWithFlags[d].name+":false")),a.member.groupAssociationList=a.tagList.join()})},a.updateGroupLeadStatus=function(b,c,d,e,f){var g=jQuery("body").find("a#gl_"+f);"undefined"!=typeof a.dataWithFlags[b]&&null===c&&(a.dataWithFlags[b].isGroupLead===!0?(a.dataWithFlags[b].isGroupLead=!1,g.removeClass("on")):(a.dataWithFlags[b].isGroupLead=!0,g.addClass("on")),a.updateTagList(d,e))},a.changeGroup=function(b,c,d){"default"!==b&&("createGroupCall_custom"===b?(a.params={p1:c,p2:d},a.errornewEmptyGroup=!1,a.errornewGroup=!1,j.open({template:"/sp/admin/group/createGroup",scope:a}),a.member.gList="default"):(a.dataWithFlags[b].selectedFlag=!0,a.flagCounter-=1,a.updateTagList(c,d),a.member.gList="default",a.dataWithFlags[b].newOrder=a.newOrderFlag++,a.dataWithFlags[b].originalIndex=b))},a.removeGroup=function(b,c,d){"default"!==b&&(a.dataWithFlags[b].selectedFlag=!1,a.dataWithFlags[b].isGroupLead=!1,a.flagCounter+=1,a.updateTagList(c,d))},a.saveNewGroup=function(b,c){var d=this;if(a.errornewEmptyGroup=!1,a.errornewGroup=!1,""===b||"undefined"==typeof b)return a.errornewEmptyGroup=!0,!1;var f={name:b},g={url:"/sp/admin/group/create",data:$.param(f)};e.getAjaxResponse(g).then(function(c){"true"===c.Success?(d.closeThisDialog(),a.dataWithFlags.push({name:b,groupLead:null,numOfMembers:0,memberSummaryList:null,selectedFlag:!0,originalIndex:a.dataWithFlags.length,newOrder:a.newOrderFlag}),a.flagCounter-=1,a.member.gList="default",a.newOrderFlag+=1,a.updateTagList(a.params.p1,a.params.p2)):null!=c.error&&(a.member.gList="default",a.errornewGroup=!0)})},a.closeGroup=function(){a.member.gList="default",this.closeThisDialog()}}function notification(a,b){a.name=[];var c=b.getObject(),d=b.getEmail();a.emailId=d,angular.forEach(c,function(b,c){for(var e=0;e<d.length;e++)d[e]===b.email&&a.name.push(b.name)})}angular.module("spApp").controller("candidateListingController",candidateListingController),angular.module("spApp").controller("notification",notification),candidateListingController.$inject=["$scope","$q","$element","$attrs","ajaxService","$location","$http","$state","$filter","ngDialog","sharedProperties","$timeout","$rootScope","$localStorage"],notification.$inject=["$scope","sharedProperties"];
function candidateProfileDetails(a,b,c,d,e,f,g,h,i,j,k){a.formStatus={},a.profile={},a.linkedinUpdate={},a.profileCommentswithFlags=[],a.commentBoxes={},a.newDate={},a.loggedInUser={},a.disableLinkedinEditing=!0,a.disableUserProfileEditing=!0,a.linkeDInFormStatus=!1,a.commentEditEnabled=!1,a.loggedInUser.first="",a.loggedInUser.last="",a.url={},a.userProfile={},a.comments={},a.stateCheck={},a.member={},a.dataWithFlags=[],a.memCountCheck=!1,a.newOrderFlag=0,a.addNewMember={},a.addNewMember.submitted=!1,a.emailFromParam=h.getParam("cemail"),a.commentSection={};var l=k.get("loggegdInProfile"),m=l.member.roles.sort();a.isAccountAdmin=0===jQuery.inArray("AccountAdministrator",m)?!0:!1,a.isAdmin=0===jQuery.inArray("Administrator",m)?!0:!1;var n=k.get("showProfileTab");"undefined"!=typeof n&&null!==n?(a.defaultTab=!1,g(function(){j.callSwitchChange("spProfile1")},100)):a.defaultTab=!0,a.newDate.currentDay=new Date,null!==k.get("isCandidateArchived")&&k.get("isCandidateArchived")!==!1&&(a.isCandidateArchived=!0,i.getAjaxResponse({url:"/sp/hiring/getArchivedUserProfileDetails",data:$.param({candidateId:k.get("archiveCandidateId")})}).then(function(b){if("true"===b.Success){a.profile=b.hiring,a.hiringInfo=b.hiring,"VALID"===a.hiringInfo.userStatus?null===a.hiringInfo.spUserId?a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}}):a.hiringInfo.profileSettings.hiringAccessAllowed===!0?a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}}):a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!0,deleteBtn:!0,moveBtn:!0}}):"INVITATION_SENT"===a.hiringInfo.userStatus||"ASSESSMENT_PROGRESS"===a.hiringInfo.userStatus||"ASSESSMENT_PENDING"===a.hiringInfo.userStatus||"ADD_REFERENCES"===a.hiringInfo.userStatus?a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}}):("INVITATION_NOT_SENT"===a.hiringInfo.userStatus||"INVITATION_EXPIRED"===a.hiringInfo.userStatus)&&(a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,deleteBtn:!0,moveBtn:!0}})),null!==b.address?(a.profile.address1=b.address.addressLine1,a.profile.address2=b.address.addressLine2,a.profile.city=b.address.city,a.profile.state=b.address.state,a.profile.country=b.address.country,a.profile.zip=b.address.zipCode):(a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.state="default",a.profile.country="default",a.profile.zip=null),null===a.profile.gender&&(a.profile.gender="default"),0===a.profile.dob.monthValue?a.profile.month="default":a.profile.month=a.profile.dob.monthValue,0===a.profile.dob.dayOfMonth?a.profile.day="default":a.profile.day=a.profile.dob.dayOfMonth,0===a.profile.dob.year?a.profile.year="default":a.profile.year=a.profile.dob.year,a.profile.phone=a.profile.phoneNumber,a.profilePic=b.hiring.smallProfileImage,a.userInitials=b.hiring.userInitials,a.profilePicSmall=b.hiring.smallProfileImage,"undefined"!=typeof b.hiring.tagList&&null!==b.hiring.tagList?a.existingCandidateTags=b.hiring.tagList.join():a.existingCandidateTags="","undefined"!=typeof b.hiring.hiringRoles||null!==b.hiring.hiringRoles?a.existingCandidateRoles=b.hiring.hiringRoles.join(", "):a.existingCandidateRoles="",a.totalComments=b.hiring.comments.length,a.userStatus=b.hiring.userStatusFormatted,a.assessmentStatus=b.hiring.userStatus,a.profileCommentswithFlags=[];var c=b.hiring.comments;jQuery.each(c,function(b,d){var e=jQuery.extend({},c[b],{mName:"commentBox_"+b,showOptions:!1});a.profileCommentswithFlags.push(e)}),a.referencesDetails=b.hiring.referencesDetails,null!==a.hiringInfo.linkedInUrl&&"undefined"!=typeof a.hiringInfo.linkedInUrl?a.url.linkedInUrl=a.hiringInfo.linkedInUrl:null!==a.hiringInfo.url&&"undefined"!=typeof a.hiringInfo.url&&(a.url.linkedInUrl=a.hiringInfo.url)}})),a.newDate={year:a.newDate.currentDay.getFullYear(),month:a.newDate.currentDay.getMonth()+1,day:a.newDate.currentDay.getDate()},a.addressFormReset=function(b){a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.zip=null,"United States"===a.stateCheck.forSelectedCountry?a.profile.state="default":a.profile.state=null},a.enableEdit=function(b){"linkedin"===b&&(a.disableLinkedinEditing=!1),"userProfile"===b&&(a.disableUserProfileEditing=!1)},a.disableEdit=function(b){"linkedin"===b&&(a.disableLinkedinEditing=!0),"userProfile"===b&&(a.disableUserProfileEditing=!0,a.getProfileDetails()),a.formStatus.sumbit=!1,a.linkeDInFormStatus=!1},a.formatDate=function(a){if(null!==a&&"undefined"!=typeof a){var b=a.split("-"),c={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},d=parseInt(b[1])<9?"0"+b[1]:b[1],e=c[d.toString()]+" "+parseInt(b[2])+", "+parseInt(b[0]);return e}},a.today=a.formatDate(a.newDate.year+"-"+a.newDate.month+"-"+a.newDate.day),a.getProfileDetails=function(){var b={url:"/sp/hiring/getProfileDetails",data:$.param({candidateEmail:a.emailFromParam}).replace(/%40/g,"@")};i.getAjaxResponse(b).then(function(b){if("true"===b.Success){a.profile=b.userProfileForm,a.hiringInfo=b.hiring,k.set("candidateEmail",a.emailFromParam).set("candidateID",b.hiring.id),"VALID"===a.hiringInfo.userStatus?null===a.hiringInfo.spUserId?a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!0,viewCompare:!0,viewAdvisor:!0,requestAccess:!1,archiveBtn:!0}}):a.hiringInfo.profileSettings.hiringAccessAllowed===!0?a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!0,viewCompare:!0,viewAdvisor:!0,requestAccess:!1,archiveBtn:!0}}):a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!0,archiveBtn:!0}}):"INVITATION_SENT"===a.hiringInfo.userStatus||"ASSESSMENT_PROGRESS"===a.hiringInfo.userStatus||"ASSESSMENT_PENDING"===a.hiringInfo.userStatus||"ADD_REFERENCES"===a.hiringInfo.userStatus?a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,archiveBtn:!1}}):("INVITATION_NOT_SENT"===a.hiringInfo.userStatus||"INVITATION_EXPIRED"===a.hiringInfo.userStatus)&&(a.hiringInfo=$.extend({},a.hiringInfo,{btnFlags:{viewProfile:!1,viewCompare:!1,viewAdvisor:!1,requestAccess:!1,archiveBtn:!1}})),null!==b.address?(a.profile.address1=b.address.addressLine1,a.profile.address2=b.address.addressLine2,a.profile.city=b.address.city,a.profile.state=b.address.state,a.profile.country=b.address.country,a.profile.zip=b.address.zipCode):(a.profile.address1=null,a.profile.address2=null,a.profile.city=null,a.profile.state="default",a.profile.country="default",a.profile.zip=null),null===a.profile.gender&&(a.profile.gender="default"),0===a.profile.month&&(a.profile.month="default"),0===a.profile.day&&(a.profile.day="default"),0===a.profile.year&&(a.profile.year="default"),a.profilePic=b.hiring.smallProfileImage,a.userInitials=b.hiring.userInitials,a.profilePicSmall=b.hiring.smallProfileImage,"undefined"!=typeof b.hiring.tagList&&null!==b.hiring.tagList?a.existingCandidateTags=b.hiring.tagList.join():a.existingCandidateTags="","undefined"!=typeof b.hiring.hiringRoles||null!==b.hiring.hiringRoles?a.existingCandidateRoles=b.hiring.hiringRoles.join(", "):a.existingCandidateRoles="",a.totalComments=b.hiring.comments.length,a.userStatus=b.hiring.userStatusFormatted,a.assessmentStatus=b.hiring.userStatus,a.profileCommentswithFlags=[];var c=b.hiring.comments;jQuery.each(c,function(b,d){var e=jQuery.extend({},c[b],{mName:"commentBox_"+b,showOptions:c[b].by.email===a.loggedInUser.email?!0:!1});a.profileCommentswithFlags.push(e)}),a.referencesDetails=b.hiring.referencesDetails,null!==a.hiringInfo.linkedInUrl&&"undefined"!=typeof a.hiringInfo.linkedInUrl?(a.url.linkedInUrl=a.hiringInfo.linkedInUrl,a.disableLinkedinEditing=!0,a.linkedinIcon=!0):null!==a.hiringInfo.url&&"undefined"!=typeof a.hiringInfo.url?(a.hiringInfo.linkedInUrl=a.hiringInfo.url,a.url.linkedInUrl=a.hiringInfo.url,a.disableLinkedinEditing=!0,a.linkedinIcon=!1):a.disableLinkedinEditing=!1}else{k.remove("candidateEmail","candidateID");for(var d in b.error)a.errorMessage=b.error[d];k.set("gNotify","profileError"),k.set("profileError",a.errorMessage),setTimeout(function(){window.location="/sp/tools/hiring/"},100)}})},"undefined"==typeof e.retrive()?g(function(){a.loggedInUser=e.retrive(),a.loggedInUser.first=a.loggedInUser.member.firstName,a.loggedInUser.last=a.loggedInUser.member.lastName,a.loggedInUser.email=a.loggedInUser.member.email},500):(a.loggedInUser=e.retrive(),a.loggedInUser.first=a.loggedInUser.member.firstName,a.loggedInUser.last=a.loggedInUser.member.lastName,a.loggedInUser.email=a.loggedInUser.member.email),a.saveAndUpdate=function(b,c){var d={url:"/sp/hiring/updateProfile",data:$.param({firstName:b.firstName,lastName:b.lastName,title:b.title,email:b.email,gender:b.gender,day:b.day,month:b.month,year:b.year,phone:b.phone,address1:b.address1,address2:b.address2,city:b.city,state:b.state,country:b.country,zip:b.zip}).replace(/%2C/g,",").replace(/%40/g,"@")},e=0;a.formStatus.sumbit=!1;for(var f in b)("default"===b[f]||"default1"===b[f])&&e++;this.userProfile.$valid&&0===e?(a.disableUserProfileEditing=!0,i.getAjaxResponse(d).then(function(b){"true"===b.Success&&a.getProfileDetails()})):a.formStatus.sumbit=!0},a.comments={add:function(b,c){if(a.commentSection.submitted=!1,""!==b&&null!==b&&"undefined"!=typeof b){var d={url:"/sp/hiring/addComment",data:$.param({candidateEmail:a.emailFromParam,comment:b}).replace(/%40/g,"@").replace(/%2C/g,",")};i.getAjaxResponse(d).then(function(b){"true"===b.Success&&(a.commentSection.comment=null,jQuery('textarea[name="comment"]').val(null),a.getProfileDetails())})}else a.commentSection.submitted=!0},update:function(b){var c="commentBox_"+b,d=jQuery("body").find("span.error_msg_"+b);if(a.commentEditEnabled=!1,jQuery(d).hasClass("hide")||jQuery(d).addClass("hide"),"undefined"!=typeof a.commentBoxes[c]){var e={url:"/sp/hiring/updateComment",data:$.param({candidateEmail:a.emailFromParam,comment:a.commentBoxes[c],index:b}).replace(/%40/g,"@").replace(/%2C/g,",")};i.getAjaxResponse(e).then(function(b){"true"===b.Success&&(a.comment=null,a.getProfileDetails())})}else jQuery(d).removeClass("hide")},"delete":function(b){var c={url:"/sp/hiring/removeComment",data:$.param({candidateEmail:a.emailFromParam,index:b}).replace(/%40/g,"@").replace(/%2C/g,",")};i.getAjaxResponse(c).then(function(b){"true"===b.Success&&(a.comment=null,a.getProfileDetails())})},edit:function(b){var c=jQuery("body").find("form[name=commentBoxForm_"+b+"]"),d=jQuery("body").find("p.user-comment[data-comment=cBox_"+b+"]"),e="commentBox_"+b,f=jQuery(c).find("textarea").attr("data-comments"),g=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+b+"]"),h=jQuery("body").find("a[data-cancel=cancelBtn_"+b+"]");jQuery(g).addClass("hide"),jQuery(h).addClass("show"),jQuery(c).removeClass("hide"),jQuery(d).addClass("hide"),a.commentBoxes[e]=f,a.commentEditEnabled=!0},cancel:function(b){var c=jQuery("body").find("form[name=commentBoxForm_"+b+"]"),d=jQuery("body").find("p.user-comment[data-comment=cBox_"+b+"]"),e=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+b+"]"),f=jQuery("body").find("a[data-cancel=cancelBtn_"+b+"]");jQuery(e).removeClass("hide"),jQuery(f).removeClass("show").addClass("hide"),jQuery(c).addClass("hide"),jQuery(d).removeClass("hide"),a.commentEditEnabled=!1}},a.archiveDialog=function(b,c,d){a.archiveCandidate={name:c,email:b,roles:d},f.open({template:"/sp/resources/html/tools/hiring/archive-candidate.html",scope:a})},a.archiveAllCandidate=function(b,c,d){var e=[];d!==!0?jQuery.each(b,function(a,c){e.push(b[a].email)}):e=b;var g={url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:e.toString(),isHired:c})};i.getAjaxResponse(g).then(function(b){"true"===b.Success&&(f.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" archived successfully"}),a.getProfileDetails(),a.negative=!a.negative,setTimeout(function(){window.location.href="/sp/tools/hiring"},1e3))})},a.moveToCandidateList=function(a){var b={url:"/sp/hiring/moveToCandidate",data:$.param({candidateEmail:a})};i.getAjaxResponse(b).then(function(a){"true"===a.Success&&(k.set("gNotify","moved"),setTimeout(function(){window.location="/sp/tools/hiring/"},100))})},a.confirmDelete=function(a){var b={url:"/sp/hiring/deleteArchiveCandidate",data:$.param({candidateEmail:a})};i.getAjaxResponse(b).then(function(a){"true"===a.Success?(k.set("gNotify","deleted"),setTimeout(function(){window.location="/sp/tools/hiring/"},100)):$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:"Server Error"})})},a.updateLinkedURL=function(b){if(a.linkeDInFormStatus=!1,this.linkedinUpdate.$valid){var c={url:"/sp/hiring/updateWebUrl",data:$.param({candidateEmail:a.emailFromParam,webUrl:b.linkedInUrl}).replace(/%40/g,"@").replace(/%2C/g,",")};a.disableLinkedinEditing=!0,i.getAjaxResponse(c).then(function(b){"true"===b.Success&&a.getProfileDetails()})}else a.linkeDInFormStatus=!0},a.hireCandidate=function(b,c,d){a.hireCandidateDetails={name:c,email:b,roles:d},a.member.firstName=a.hireCandidateDetails.name.split(" ")[0],a.member.lastName=a.hireCandidateDetails.name.split(" ")[1],a.isAdmin||a.isAccountAdmin?i.getAjaxResponse({url:"/sp/admin/member/availalbeMemberSubscriptions"}).then(function(b){"true"===b.Success&&(a.memberAccountsCount=b.availalbeMemberSubscriptions,a.memberAccountsCount>0?(a.getGroupList(),f.open({template:"/sp/resources/html/tools/hiring/hire-candidate.html",scope:a})):f.open({template:"/sp/resources/html/tools/hiring/hire-candidate-no-members.html",scope:a}))}):f.open({template:"/sp/resources/html/tools/hiring/hire-candidate-not-admin.html",scope:a}),a.hireCandidateArchive=function(){i.getAjaxResponse({url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:a.hireCandidateDetails.email,isHired:!0})}).then(function(b){if("true"===b.Success)f.close("ngdialog1"),k.set("gNotify","AddHire"),setTimeout(function(){window.location="/sp/tools/hiring/"},500);else{for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.addMember=function(b){this.addNewMember.submitted=!1,this.addNewMember.$valid?i.getAjaxResponse({url:"/sp/admin/member/addSingle",data:$.param(b).replace(/%2C/g,",")}).then(function(b){if("true"===b.Success)i.getAjaxResponse({url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:a.hireCandidateDetails.email,isHired:!0})}).then(function(b){if("true"===b.Success)f.close("ngdialog1"),k.set("gNotify","AddHire"),setTimeout(function(){window.location="/sp/tools/hiring/"},500);else{f.close("ngdialog1");for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}});else{f.close("ngdialog1");for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}}):this.addNewMember.submitted=!0}},a.getGroupList=function(){i.getAjaxResponse({url:"/sp/admin/group/all"}).then(function(b){if("true"===b.Success)a.groupDataSet=b.groupInfoList,a.groupDataSetBackup=b.groupInfoList,jQuery.each(a.groupDataSet,function(b,c){a.dataWithFlags.push(jQuery.extend({},a.groupDataSet[b],{selectedFlag:!1,isGroupLead:!1}))}),a.flagCounter=a.dataWithFlags.length;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.updateTagList=function(b,c){a.member.groupAssociationList=null,a.tagList=[],jQuery.each(a.dataWithFlags,function(d,e){a.dataWithFlags[d].selectedFlag===!0&&c===!0?a.tagList.push(a.dataWithFlags[d].name):a.dataWithFlags[d].selectedFlag===!0&&b===!0&&(a.dataWithFlags[d].isGroupLead===!0?a.tagList.push(a.dataWithFlags[d].name+":true"):a.tagList.push(a.dataWithFlags[d].name+":false")),a.member.groupAssociationList=a.tagList.join()})},a.updateGroupLeadStatus=function(b,c,d,e,f){var g=jQuery("body").find("a#gl_"+f);"undefined"!=typeof a.dataWithFlags[b]&&null===c&&(a.dataWithFlags[b].isGroupLead===!0?(a.dataWithFlags[b].isGroupLead=!1,g.removeClass("on")):(a.dataWithFlags[b].isGroupLead=!0,g.addClass("on")),a.updateTagList(d,e))},a.changeGroup=function(b,c,d){"default"!==b&&("createGroupCall_custom"===b?(a.params={p1:c,p2:d},f.open({template:"/sp/admin/group/createGroup",scope:a})):(a.dataWithFlags[b].selectedFlag=!0,a.flagCounter-=1,a.updateTagList(c,d),a.member.gList="default",a.dataWithFlags[b].newOrder=a.newOrderFlag++,a.dataWithFlags[b].originalIndex=b))},a.removeGroup=function(b,c,d){"default"!==b&&(a.dataWithFlags[b].selectedFlag=!1,a.dataWithFlags[b].isGroupLead=!1,a.flagCounter+=1,a.updateTagList(c,d))},a.saveNewGroup=function(b,c){if(""===b||"undefined"==typeof b)return!1;var d={name:b},e={url:"/sp/admin/group/create",data:$.param(d)};i.getAjaxResponse(e).then(function(c){"true"===c.Success&&(f.close("ngdialog1"),a.dataWithFlags.push({name:b,groupLead:null,numOfMembers:0,memberSummaryList:null,selectedFlag:!0,originalIndex:a.dataWithFlags.length,newOrder:a.newOrderFlag}),a.flagCounter-=1,a.member.gList="default",a.newOrderFlag+=1,a.updateTagList(a.params.p1,a.params.p2))})},a.initCandidateProfile=function(){a.isCandidateArchived!==!0&&a.getProfileDetails()},a.initCandidateProfile()}angular.module("spApp").controller("candidateProfileDetails",candidateProfileDetails),candidateProfileDetails.$inject=["$scope","$element","$attrs","$http","userDataService","ngDialog","$timeout","sharedProperties","ajaxService","$rootScope","$localStorage"];
function candidateReferenceController(a,b,c,d,e){a.candidateRefList={},a.candidateRef={},a.uniqueEmailError=!1,a.processRefList=function(b){if(a.candidateRefList.submitted=!1,a.uniqueEmailError=!1,a.candidateRefList.$valid){var c=[],d=[];if(c[0]=b.ref0.email,c[1]=b.ref1.email,c[2]=b.ref2.email,jQuery.each(c,function(a,b){-1===jQuery.inArray(b,d)&&d.push(b)}),3===d.length){var f,g=[];g[0]=b.ref0,g[1]=b.ref1,g[2]=b.ref2,f={url:"/sp/hiringCandidate/inviteReferences",data:g,headers:{"Content-Type":"application/json"}},e.getAjaxResponse(f).then(function(a){"true"===a.Success&&window.location.reload()})}else a.uniqueEmailError=d.length<3?!0:!1,jQuery("html, body").animate({scrollTop:0})}else a.candidateRefList.submitted=!0,jQuery("html, body").animate({scrollTop:0})}}angular.module("spApp").controller("candidateReferenceController",candidateReferenceController),candidateReferenceController.$inject=["$scope","$http","$element","$attrs","ajaxService"];
function changeSubscriptionController(a,b,c,d,e,f,g){a.priceFormatter=function(a){if("undefined"!=typeof a&&""!==a&&null!==a){var b="$"+a.toFixed(2);return b}},a.product={},a.promoApplied=!1,a.finalAmount=0,a.promo={},a.updatedPromoDetails={},a.updateCC={},a.activeMembers=0,a.renewBusiness={},a.account={},a.promoFormSubmitted=!1,a.promoError={},a.promoError.error=!1,a.dialogStatus={},a.timeout=0,a.submitDisabled=!1,a.getMemberCount=function(){g.getAjaxResponse({url:"/sp/admin/account/getActiveMemberCount"}).then(function(b){if("true"===b.Success)a.activeMembers=b.activeMembers,a.account.numAccounts=b.activeMembers;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getAcccountInfo=function(){g.getAjaxResponse({url:"/sp/admin/account/businessAccountDetails"}).then(function(b){if("true"===b.Success)a.accountDetails=b,a.renewalDate=b.account.productInfo.renewalDate;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getPlanInfo=function(){g.getAjaxResponse({url:"/sp/signup/getProducts",data:$.param({productType:"BUSINESS"})}).then(function(b){if("true"===b.Success)a.products=b.products,$.each(a.products,function(b){"YEARLY"===a.products[b].validityType&&(a.annualProduct=a.products[b],a.annulUnitPrice=a.products[b].unitPrice)});else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getProductInfo=function(){g.getAjaxResponse({url:"/sp/admin/account/getCurrentBusinessProductInfo"}).then(function(b){if("true"===b.Success){a.productInfoError=!1,a.submitDisabled=!1,a.product=b.product;var c=12;"undefined"!=typeof b.promotion&&"undefined"!=typeof b.promotion.unitPrice?(a.product.updatedUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.promoApplied=!0,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.activeMembers*c).toFixed(2)):(a.product.updatedUnitPrice=parseFloat(b.product.unitPrice).toFixed(2),a.promoApplied=!1,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.activeMembers*c).toFixed(2))}else a.productInfoError=!0,a.submitDisabled=!0,jQuery("html, body").animate({scrollTop:0})})},a.paymentCalculator=function(b,c,d,e){var g=parseInt(b),h=0,i="YEARLY"===d?12:1;"undefined"==typeof e?g>=20&&"add"===c?(h=parseInt(g+1),a.account.numAccounts=h,a.finalAmount=parseFloat(a.product.updatedUnitPrice*h*i).toFixed(2)):g>20&&"remove"===c?(h=parseInt(g-1),a.account.numAccounts=h,a.finalAmount=parseFloat(a.product.updatedUnitPrice*h*i).toFixed(2)):(a.account.numAccounts=parseInt(a.account.minEmployee),a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.account.numAccounts*i).toFixed(2)):/^[0-9\b]+$/g.test(b)&&b>=20?(a.account.numAccounts=b,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.account.numAccounts*i).toFixed(2),f.cancel(a.timeout)):(f.cancel(a.timeout),a.timeout=f(function(){a.account.numAccounts=20,a.finalAmount=parseFloat(20*a.product.updatedUnitPrice*i).toFixed(2)},1500))},a.activatePromo=function(b){if("undefined"!=typeof b){var c={code:b,productId:a.product.id};g.getAjaxResponse({url:"/sp/signup/promotion",data:$.param(c)}).then(function(b){"true"===b.Success?(a.updatedPromoDetails=b.promotion,a.product.updatedUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.promoApplied=!0,a.finalAmount=parseFloat(12*a.product.updatedUnitPrice).toFixed(2)):(a.promoError.error=!0,a.promoError.msg=b.error,a.promo.code=null,f(function(){a.promoError.error=!1},1500))})}else a.promoFormSubmitted=!0,a.promo.code=null},a.renewIndividualSubscription=function(b){var c,d={};d=a.promoApplied===!1?{productId:a.product.id}:{productId:a.product.id,promotionId:a.updatedPromoDetails.id},a.updateCC.$valid?(c=$.extend({},d,b),g.getAjaxResponse({url:"/sp/admin/account/renewAccount",data:$.param(c)}).then(function(b){if("true"===b.Success)a.dialogStatus.title="Subscription Renewal",a.dialogStatus.content="Subscription renewed successfully.",e.open({template:"/sp/resources/html/admin/account/success-dialog.html",scope:a});else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})):a.updateCC.submitted=!0},a.deactivatePromo=function(){a.product.updatedUnitPrice=parseFloat(a.product.unitPrice).toFixed(2),a.finalAmount=parseFloat(12*a.product.updatedUnitPrice).toFixed(2),a.promoApplied=!1,a.promo.code=null},a.cancelRedirect=function(){window.location="/sp/admin/account/business"},a.renewBusinessSubscription=function(b){var c,d={};d=a.promoApplied===!1?{numAccounts:a.account.numAccounts,productId:a.product.id}:{numAccounts:a.account.numAccounts,productId:a.product.id,promotionId:a.updatedPromoDetails.id},a.submitDisabled===!1&&(a.renewBusiness.$valid?(c=$.extend({},d,b),g.getAjaxResponse({url:"/sp/admin/account/renewAccount",data:$.param(c)}).then(function(b){"true"!==b.Success&&(a.submitException=!0,a.submitExceptionMsg="undefined"!=typeof b.error.InvalidRequestException?b.error.InvalidRequestException:"Error occured on server.",jQuery("html, body").animate({scrollTop:0}))})):(a.renewBusiness.submitted=!0,jQuery("html, body").animate({scrollTop:0})))},a.initRenewBusiness=function(){a.getMemberCount(),a.getProductInfo(),a.getAcccountInfo()},a.initRenewBusiness()}angular.module("spApp").controller("changeSubscriptionController",changeSubscriptionController),changeSubscriptionController.$inject=["$scope","$element","$attrs","$http","ngDialog","$timeout","ajaxService"];
function dashBoardController(a,b,c,d){function e(){"true"===d.get("pulseDone")&&$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> ThankYou</strong>",message:" for completing the PULSE."})&&d.remove("pulseDone")}function f(){b.getAjaxResponse({url:r.config.getTasks}).then(function(a){if("true"===a.Success)r.getTasks="undefined"!=typeof a.tasks?a.tasks:[],g(r.getTasks);else if(null!==a.error){var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function g(a){for(var b=0;b<a.length;b++)r.collaborativeTask[a[b].type]={pulseRequestId:a[b].params.pulseRequestId,endDate:a[b].params.endDate}}function h(){b.getAjaxResponse({url:r.config.getFeedBack,method:"get"}).then(function(a){if("true"===a.Success)r.feedBackResult=a.feedbackTeam;else if(null!==a.error){var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function i(){b.getAjaxResponse({url:r.config.getGrowth}).then(function(a){if("true"===a.Success)r.growthResult=a.growthTeam,r.pageSetting.growthAjaxDone=!0;else if(null!==a.error){var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function j(){b.getAjaxResponse({url:r.config.getNotification}).then(function(a){if("true"===a.Success)r.logTypes=a.logType,r.notifcationMessages=a.notifications;else if(null!==a.error){var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function k(){b.getAjaxResponse({url:r.config.getActivites}).then(function(a){if("true"===a.Success)r.activitiesMessages=a.activityMessages,r.pageSetting.activityAjaxDone=!0;else if(null!==a.error){var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function l(){b.getAjaxResponse({url:r.config.getRecentlyVisited,method:"get"}).then(function(b){if("true"===b.Success)r.recentlyVisited=b.trackingResponse,r.recentlyVisited.length||(r.getGoals(),r.pageSetting.pullRight=!0,a.tabSet0=1);else if(null!==b.error){var c="";for(var d in b.error)c=b.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function m(){b.getAjaxResponse({url:r.config.getGoals,method:"get"}).then(function(a){if("true"===a.Success){r.logName=[],r.goalResult=a.userGoal;for(var b=0;b<r.goalResult.length;b++)r.logName.push(r.goalResult[b].goal.name);r.pageSetting.goalAjaxDone=!0,r.selectSearch(r.logName[0])}else if(null!==a.error){var c="";for(var d in a.error)c=a.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function n(a){for(var b=0;b<r.goalResult.length;b++)if(r.goalResult[b].goal.name===a){r.goalResultModified=r.goalResult[b];break}}function o(){window.location.href="/sp/pulseUser/pulseStartAssessment?pulseRequestId="+r.getTasks[0].params.pulseRequestId}function p(a,b){switch(a){case"notification":r.pageSetting.pageSize=b;break;case"activity":r.pageSetting.activeSize=b}}function q(a,b){a||b()}var r=this;r.collaborativeTask={},r.pageSetting={pageSize:10,activeSize:10,activityAjaxDone:!1,growthAjaxDone:!1,goalAjaxDone:!1,pullRight:!1,pulseInactive:!1},r.config={getTasks:"/sp/dashboard/getTasks",getFeedBack:"/sp/dashboard/feedback/myrequests",getGrowth:"/sp/dashboard/growth/myrequests",getNotification:"/sp/logs/getDashboardNotificationLogs",getActivites:"/sp/logs/getDashboardActivityLogs",getRecentlyVisited:"/sp/tracking/recentVistedArticles",getGoals:"/sp/dashboard/getUserGoals"},r.feedBackResult=[],r.growthResult=[],r.activitiesMessages=[],r.logTypes=[],r.notifcationMessages=[],r.recentlyVisited=[],r.goalResult=[],r.getTasks=f,r.getFeedBack=h,r.getGrowth=i,r.getNotification=j,r.getActivites=k,r.getRecentlyVisited=l,r.getGoals=m,r.selectSearch=n,r.startPulseLink=o,r.moreNotification=p,r.callAjax=q,function(){e()}()}function dashBoardListing(a,b,c,d,e,f){function g(){var a={url:r.config.getMembersData};b.getAjaxResponse(a).then(function(a){if("true"===a.Success)r.masterMemberList=a.memberList.length?a.memberList:[],r.groupList=a.groupList,r.responseRecieved=!0,r.groupBasedResult(""),angular.forEach(a.memberList,function(a,b){r.allMembersEmailId.push({email:a.email})});else if(null!==a.error){var b="";r.responseRecieved=!0;for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function h(a){""===a||null===a?r.memberList=angular.copy(r.masterMemberList):r.memberList=r.masterMemberList.filter(function(b){return-1!==b.groups.indexOf(a)}),!r.pageSetting.alltoggle&&(r.pageSetting.negative=!1,r.pageSetting.userEmail.email=[]),r.pageSetting.negative&&r.checkAll(),r.returnMemberList(r.pageSetting.pageSize)}function i(a){return r.masterMemberList.length?(r.pageSetting.pageSize=a,a>=r.masterMemberList.length&&(r.pageSetting.disabledInfinite=!0,r.pageSetting.pageSize=r.masterMemberList.length),void r.order(r.pageSetting.lastPredicate,r.pageSetting.lastReverse)):!0}function j(a,b){r.pageSetting.lastPredicate=a,r.pageSetting.lastReverse=b,r.memberList=e("orderBy")(r.memberList,r.pageSetting.lastPredicate,r.pageSetting.lastReverse)}function k(a,b){r.pageSetting.lastPredicate=b.predicate,r.pageSetting.lastReverse=b.reverse,c.toggleFilterClick(a,r.pageSetting.lastPredicate),r.order(r.pageSetting.lastPredicate,r.pageSetting.lastReverse)}function l(){r.pageSetting.checkedAll=!r.pageSetting.checkedAll,r.pageSetting.negative?r.pageSetting.userEmail.email=r.memberList.map(function(a){return{email:a.email,name:a.name,title:a.title}}):r.pageSetting.userEmail.email=[]}function m(){r.pageSetting.alltoggle=!1,r.pageSetting.checkedAll&&(r.pageSetting.negative=!r.pageSetting.negative,r.pageSetting.checkedAll=!r.pageSetting.checkedAll)}function n(a){r.pageSetting.textSearching=a}function o(){r.pageSetting.textSearching.length&&(r.pageSetting.textSearching="",r.pageSetting.searchText="")}function p(a){f.set("memEmail",a),window.location.href="/sp/dashboardUserAnalysis?email="+a}function q(){r.pageSetting=angular.copy(r.originalpageSetting),r.groupBasedResult(r.pageSetting.selectedSearch)}var r=this;r.memberList=[],r.masterMemberList=[],r.groupList=[],r.responseRecieved=!1,r.config={getMembersData:"/sp/groupLead/getMembersAndGroups"},r.pageSetting={pageSize:10,userEmail:{email:[]},lastPredicate:"name",lastReverse:!1,textSearching:"",disabledInfinite:!1,selectedSearch:"",negative:!1,alltoggle:!1},r.originalpageSetting=angular.copy(r.pageSetting),r.allMembersEmailId=[],r.getMembersData=g,r.groupBasedResult=h,r.returnMemberList=i,r.order=j,r.active=k,r.checkAll=l,r.searchTextFilter=n,r.clearSearch=o,r.memberTakeAway=p,r.resetfilter=q,r.checkUncheck=m}angular.module("spApp").controller("dashBoardController",dashBoardController),angular.module("spApp").controller("dashBoardListing",dashBoardListing),dashBoardController.$inject=["$scope","ajaxService","sharedProperties","$localStorage"],dashBoardListing.$inject=["$scope","ajaxService","sharedProperties","ngDialog","$filter","$localStorage"];
function feedbackController(a,b,c,d,e,f){a.feedbackTeam=!1,a.feedbackGrowth=[],a.current=5,a.getAllMembersToInvite=[],a.masterGetAllMembersToInvite=[],a.viewMember=!1,a.oldView="",a.textSearching="",a.listCreaator=[],a.getInviteMemberDetail=[],a.errorMessage="",a.showError=!1,a.initSet=!1,a.goalUser="",a.goals={selected:[]},a.inviteError=!1,a.dateError=!1,a.inviteMemNonMember=!0,a.inviteMember=!0,a.inviteNonMember=!1,a.howDoYouKnow=["Friend","Family","Work Colleague"],a.goalUserNon="",a.growthName="",a.growthTitle="",a.hideIt=!0,a.id="";var g=new Date;a.maxDate=g.setMonth(g.getMonth()+3),a.feedback={user:[]},a.viewDrop=!1,a.nootherequest=!1,a.showTheme=!1,a.matchCase=[],a.sendGrowthdetail=function(b,c){a.growthName=b,a.growthTitle=c,d.open({template:"/sp/growth/growthPop",scope:a})},a.redirectTo=function(a){"default"!==a&&(""===f.noSelf?window.location.href=a:f.callSwitchChange("feedArchiveDetail"))},a.pageSetup=function(){a.getfeedbackTeam()},a.getfeedbackTeam=function(){a.getAllMembersToInvitefn(),b.getAjaxResponse({url:"/sp/getFeedbackTeam?groupMemberEmail="+f.noSelf,method:"get"}).then(function(b){"true"===b.Success?(a.getfeedbackTeam=b,"undefined"!=typeof b.feedbackTeam?(angular.forEach(b.feedbackTeam,function(b,c){null!=b.email&&f.add(a.feedback.user,b.email)}),a.showTheme=b.themesPresent,a.feedbackGrowth=b.feedbackTeam,a.listCreaator=angular.copy(a.feedbackGrowth),a.currentActive=a.feedbackGrowth.length,a.viewDrop=!0,a.formatList("active")):(a.currentActive=a.feedbackGrowth.length,a.formatList(),a.feedbackTeam=!0)):null!=b.error&&(window.location.href="/sp")})},a.nonMemberGrowthCall=function(){b.getAjaxResponse({url:"/sp/getUserGrowthAreas",data:$.param({groupMemberEmail:f.noSelf})}).then(function(b){if("true"===b.Success)a.goalUserNon=b.goals;else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.formatList=function(b){if(a.currentActive<a.current){var c=a.current-a.listCreaator.length;if(0!==c)for(var d=0;c>d;d++)a.incrementList();else a.incrementList()}else if(a.feedbackTeam=!1,a.viewMember=!0,a.inviteMemberView=!1,"undefined"!=typeof b&&"first"===b){var e=$("ul.listSection").find("li:eq(0)");a.invitedMemberView(e,e.find("div").attr("data-email")),a.addUserFull=!1,$("ul.listSection").find("div").removeClass("selected"),$("ul.listSection").find("li:eq(0)").find("div").addClass("selected")}if("undefined"!=typeof b&&"first"!==b){a.oldView="";var f=a.feedbackGrowth.length;$("ul.listSection").find("div").removeClass("selected"),$("ul.listSection").find("li:eq("+f+")").find("div").addClass("selected")}},a.callSendArchivePopup=function(b){a.archiveMember=b,d.open({template:"/sp/feedback/archiveMemberScreen",scope:a})},a.sendToArchive=function(c,g,h){a.showError=!1,b.getAjaxResponse({url:"/sp/archiveFeedback",data:$.param({feedbackUserId:c})}).then(function(b){if("true"===b.Success)e.spliceIndex(a.listCreaator,"id",c),e.spliceIndex(a.feedbackGrowth,"id",c),f.remove(a.feedback.user,g),a.currentActive=a.feedbackGrowth.length,a.formatList("active"),a.getAllMembersToInvitefn(),a.inviteMemberView=!1,"undefined"!=typeof a.getAllMembersToInvite.userType?(a.viewMember=!0,a.inviteNonMember=a.inviteMember=a.hideIt=!1):a.viewMember=a.inviteNonMember=a.inviteMember=!0,d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member</strong>",message:" archived successfully"});else if(null!=b.error){for(var h in b.error)a.errorMessage=b.error[h];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage}),d.close("ngdialog1")}})},a.incrementList=function(){a.listCreaator.push({email:"invite"})},a.isActive=function(b){return b===a.currentActive?!0:!1},a.filteredFeedback=function(b){return f.contains(a.feedback.user,b)?!0:!1},a.invitationSended=function(b,c){a.inviteError=!1,a.dateError=!1,b.$valid?a.invitationDirtyCheckClear(c):a.inviteError=!0},a.invitationDirtyCheckClear=function(c){var g=$("form.imonly").serialize()+"&groupMemberEmail="+f.noSelf;b.getAjaxResponse({url:"/sp/submitFeedbackRequest",data:g}).then(function(b){if("true"===b.Success)a.feedbackGrowth.push(b.inviteCreated),a.listCreaator=angular.copy(a.feedbackGrowth),a.currentActive=a.feedbackGrowth.length,e.spliceIndex(a.getAllMembersToInvite.feedbackUsers,"email",c),e.spliceIndex(a.masterGetAllMembersToInvite.feedbackUsers,"email",c),a.currentActive>=a.current?a.formatList("first"):a.formatList("active"),window.scrollTo($(".listSection").offset().top,0),a.goals.selected=[],d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member </strong> ",message:"invited successfully"});else if(null!=b.error){for(var f in b.error)a.errorMessage=b.error[f];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.getAllMembersToInvitefn=function(){b.getAjaxResponse({url:"/sp/getAllFeedbackMembers",data:$.param({groupMemberEmail:f.noSelf})}).then(function(b){if("true"===b.Success)a.getAllMembersToInvite=b,a.masterGetAllMembersToInvite=angular.copy(a.getAllMembersToInvite);else if(null!=b.error)for(var c in b.error)a.errorMessage=b.error[c]})},a.callInitMember=function(b,c,d){var g="";if(!a.initSet){g=$("ul.listSection").find("li:eq("+b+")");var h=e.getParam("feeddbackMemberId");a.matchCase.length||(a.matchCase=a.listCreaator.filter(function(a){return a.id===h}),null===h||a.matchCase.length||$.growl({icon:"glyphicon glyphicon-ban-circle",message:f.pullInterNationalization("feedback.feedbackListing.noUserFound")})),null!==h&&a.matchCase.length?h===d&&(a.invitedMemberView(g,d),a.initSet=!0,g.find("div").addClass("selected")):(a.invitedMemberView(g,d),a.initSet=!0,g.find("div").addClass("selected"))}},a.callViewMember=function(b,c,d){var e=$(c.currentTarget);if(e.find("a").data("invite")){if(b!==a.currentActive&&!e.hasClass("active"))return!1;a.id="",a.feedbackTeam=a.inviteMemberView=!1,a.viewMember=!0,"undefined"!=typeof a.getAllMembersToInvite.userType?a.inviteNonMember=a.inviteMember=a.hideIt=!1:a.inviteNonMember=a.inviteMember=!0,a.inviteMemNonMember&&(e.hasClass("selected")||(e.closest(".listSection").find("div").removeClass("selected"),e.addClass("selected")),a.getAllMembersToInvite=angular.copy(a.masterGetAllMembersToInvite),a.searchText="",a.oldView=b),a.viewDrop=!0}else a.invitedMemberView(e,d)},a.invitedMemberView=function(c,d){return c.hasClass("selected")||(c.closest(".listSection").find("div").removeClass("selected"),c.addClass("selected")),d="undefined"==typeof c.data("email")?d:c.attr("data-email"),""!==a.id&&a.id===d?!1:(a.id=d,a.viewDrop=!0,a.feedbackTeam=a.inviteMemberView=a.viewMember=!1,a.oldView="",void b.getAjaxResponse({url:"/sp/getFeedbackDetails",data:$.param({feadbackUserId:d,groupMemberEmail:f.noSelf})}).then(function(b){if("true"===b.Success)a.getInviteMemberDetail=b,a.feedbackEnable=!1,a.sendreminderEnable=!1,"undefined"!=typeof b.feedbackGoals?a.feedbackEnable=!0:a.sendreminderEnable=!0,a.inviteMemberView=!0;else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}}))},a.searchTextFilter=function(b){a.textSearching=b,a.getAllMembersToInvite.feedbackUsers=e.searchModule(a.textSearching,a.masterGetAllMembersToInvite.feedbackUsers,2)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.getAllMembersToInvite.feedbackUsers=angular.copy(a.masterGetAllMembersToInvite.feedbackUsers))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.order=function(b,d){a.getAllMembersToInvite.feedbackUsers=c("orderBy")(a.getAllMembersToInvite.feedbackUsers,b,d)},a.callSelect=function(b,c){return a.inviteError=!1,$(c.currentTarget).hasClass("notActive")?!1:(a.addProfile=b,void d.open({template:"/sp/feedback/submitRequest",scope:a}))},a.invitationSendedNon=function(b){a.inviteNonMemberErr=!1,b.$valid?a.invitationDirtyCheckClearNon():a.inviteNonMemberErr=!0},a.invitationDirtyCheckClearNon=function(){var c=$(".inviteNonMember").find("form").serialize()+"&groupMemberEmail="+f.noSelf;return a.nootherequest?!1:(a.nootherequest=!0,void b.getAjaxResponse({url:"/sp/submitFeedbackRequest",data:c}).then(function(b){if("true"===b.Success)a.nootherequest=!1,a.feedbackGrowth.push(b.inviteCreated),a.listCreaator=angular.copy(a.feedbackGrowth),a.currentActive=a.feedbackGrowth.length,a.nonMemFirstName=a.nonMemLastName=a.nonMemMemberEmail=a.selectedDateAsNumber="",a.hdu="Friend",a.currentActive>=a.current?a.formatList("first"):a.formatList("active"),$(".externalText").val(f.pullInterNationalization("feedback.feedbackListing.growth.comment")),window.scrollTo($(".listSection").offset().top,0),a.getAllMembersToInvitefn(),$(".inviteNonMember").find(".squareBox").removeClass("active"),a.goals.selected=[],d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member </strong> ",message:"invited successfully"});else if(null!=b.error){a.nootherequest=!1;for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}}))},a.clearStuff=function(){a.nonMemFirstName=a.nonMemLastName=a.nonMemMemberEmail=a.selectedDateAsNumber="",a.hdu="Friend",a.inviteNonMemberErr=!1,a.dateNonError=!1,a.goals.selected=[]},a.disableCheck=function(a){var b=this.$index,c=$(".growthAreas").find(".style:eq("+b+")");c.find("input").attr("disabled",!0)},a.active=function(b){e.toggleFilterClick(b,a.currentPredicate)},a.sendReminder=function(b){a.reminderDetails=b,d.open({template:"/sp/reminder/feedsendReminder",scope:a})},a.sendReminderMailed=function(c){var e=$("form.sendReminder").serialize()+"&memberList="+c.email+"&feedbackUserId="+c.id+"&memberFirstName="+c.firstName+"&memberLastName="+c.lastName+"&type=FeedbackReminder";b.getAjaxResponse({url:"/sp/notifications/sendNotificationWithParams",data:e}).then(function(b){if("true"===b.Success)d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Reminder sent successfully "});else if(null!=b.error){d.close("ngdialog1");for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.goalRemove=function(c,d){b.getAjaxResponse({url:"/sp/goals/removeUserGoals",data:$.param({goalId:c})}).then(function(b){if("true"===b.Success)a.getInviteMemberDetail.feedbackGoals.GrowthAreas[d].goal.alreadyInvited=!1,$.growl({icon:"glyphicon glyphicon-ok",message:" Goal removed successfully "});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.goalAdd=function(c,d){b.getAjaxResponse({url:"/sp/goals/addToUserGoals",data:$.param({goalId:c})}).then(function(b){if("true"===b.Success)a.getInviteMemberDetail.feedbackGoals.GrowthAreas[d].selected=!0,$.growl({icon:"glyphicon glyphicon-ok",message:" Goal added successfully "});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})}}function feedBackarchiveController(a,b,c,d,e,f,g){a.archiveMembers=[],a.masterarchiveMembers=[],a.pageSize=10,a.initPageSize=10,a.viewArchive=!1,a.currentPredicate="name",a.lastReverse=!1,a.textSearching="",a.getAllArchiveRequests=function(){b.getAjaxResponse({url:"/sp/getAllArchiveFeedbacks",method:"get"}).then(function(b){if("true"===b.Success)a.masterarchiveMembers=b.feedbackRequest,a.archiveFilter=b.feedbackRequestFilter,a.loadMore(a.pageSize),a.viewArchive=!0;else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.loadMore=function(b){a.order(a.currentPredicate,a.lastReverse),a.pageSize=b,b>=a.masterarchiveMembers.length&&(a.disabledInfinite=!0,a.pageSize=a.masterarchiveMembers.length),""!==a.textSearching?a.searchTextFilter(a.textSearching):a.archiveMembers=angular.copy(a.masterarchiveMembers)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",this.searchText="",a.pageSize=a.pageStateSearch,a.archiveMembers=angular.copy(a.masterarchiveMembers))},a.searchTextFilter=function(b){a.textSearching=b,a.pageStateSearch=a.pageSize,a.archiveMembers=e.searchModule(a.textSearching,a.masterarchiveMembers,2,"feedbackUser")},a.order=function(b,d){a.currentPredicate=b,a.lastReverse=d,a.archiveMembers=c("orderBy")(a.archiveMembers,b,d)},a.active=function(b){e.toggleFilterClick(b,a.currentPredicate)},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.viewDetail=function(a,b){g.set("feedbackarchiveId",a),""===f.noSelf?window.location.href="/sp/feedback/archiveDetail":f.callSwitchChange("feedArchiveDetail")}}function feedbackArchiveDetailController(a,b,c,d,e,f){a.memberList=[],a.scopeName=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),a.myGoals={},a.myGoals.addToGoalsFlag=[],a.cancelBtnHide=!0,a.getArchivedMemberDetail=function(){var c="",g="",h="",i="post";if("/sp/feedback/themeView"===window.location.pathname||"/sp/goals/themeView"===window.location.pathname||"feedThemeView"===d.switchType||"goalThemeView"===d.switchType){a.viewArchive=!1;var j="false";c="/sp/goals/getAllGoals",i="get",("/sp/feedback/themeView"===window.location.pathname||"feedThemeView"===d.switchType)&&(j="true",c="/sp/getThemeView?goalTool="+j+"&groupMemberEmail="+d.noSelf)}else{if(a.viewArchive=!0,c="/sp/feedbackArchive/getRequestDetails",h=f.get("feedbackarchiveId"),null===h)return window.location.href="/sp/feedback/archive",!0;g=$.param({feedbackUserArchiveId:h,groupMemberEmail:d.noSelf})}b.getAjaxResponse({url:c,data:g,method:i}).then(function(b){if("true"===b.Success)a.memberList=b,e(function(){jQuery("body").find(".equalsSize").find(".squareBox.active").length>0?(a.cancelBtnHide=!1,a.btnText="UPDATE GOALS"):(a.cancelBtnHide=!0,a.btnText="CREATE GOALS")},200);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.validateAndAddToMyGoals=function(){a.goalsCountError=!1;var c=jQuery("body").find(".equalsSize").find(".squareBox.active"),d=[];c.length>=3?(a.goalsCountError=!1,$.each(c,function(a){d.push(jQuery(c[a]).attr("data-id"))}),b.getAjaxResponse({url:"/sp/goals/updateUserGoalsSelection",data:$.param({goalId:d.toString()})}).then(function(b){if("true"===b.Success)f.set("goalsNotify","goalsReview"),e(function(){window.location.href="/sp/goals"},200);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})):a.goalsCountError=!0},a.goBack=function(){""===d.noSelf?window.location.href="/sp/feedback/archive":d.callSwitchChange("feedArchive")},a.goBackGoal=function(){""===d.noSelf?window.location.href="/sp/goals":d.callSwitchChange("spGoals")},a.goalRemove=function(c,d,e){b.getAjaxResponse({url:"/sp/goals/removeUserGoals",data:$.param({goalId:c})}).then(function(b){if("true"===b.Success)"undefined"==typeof e?a.getInviteMemberDetail.feedbackGoals.GrowthAreas[d].goal.alreadyInvited=!1:a.memberList.userGoal.splice(d,1),$.growl({icon:"glyphicon glyphicon-ok",message:" Goal removed successfully "});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.goalAdd=function(c,d,e){b.getAjaxResponse({url:"/sp/goals/addToUserGoals",data:$.param({goalId:c})}).then(function(b){if("true"===b.Success)"undefined"==typeof e?a.getInviteMemberDetail.feedbackGoals.GrowthAreas[d].selected=!0:a.memberList.userGoal[d].selected=!0,$.growl({icon:"glyphicon glyphicon-ok",message:" Goal added successfully "});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.redirectTo=function(a){"default"!==a&&(""===d.noSelf?window.location.href=a:d.callSwitchChange(a))},a.allUnhide=function(a){var b=$(a.currentTarget).siblings("div.hideUnhide");b.is(":visible")?b.hide(500):($(".hideUnhide").each(function(a,b){$(this).hide(500)}),b.show(500))},a.closeIt=function(a){$(a.currentTarget).closest("div.hideUnhide").hide(500)}}angular.module("spApp").controller("feedbackController",feedbackController),angular.module("spApp").controller("feedBackarchiveController",feedBackarchiveController),angular.module("spApp").controller("feedbackArchiveDetailController",feedbackArchiveDetailController),feedbackController.$inject=["$scope","ajaxService","$filter","ngDialog","sharedProperties","$rootScope"],feedBackarchiveController.$inject=["$scope","ajaxService","$filter","ngDialog","sharedProperties","$rootScope","$localStorage"],feedbackArchiveDetailController.$inject=["$scope","ajaxService","sharedProperties","$rootScope","$timeout","$localStorage"];
function GoalsController(a,b,c,d,e,f,g){a.articleSize=10,a.defaultSize=10,a.getGoalsStatus=function(){var c=g.get("goalsNotify");null!==c&&"undefined"!=typeof c&&("goalsReview"===c&&$.growl({icon:"glyphicon glyphicon-ok",message:" Goals updated successfully"}),setTimeout(function(){g.remove("goalsNotify")},300)),b.getAjaxResponse({url:""===d.noSelf||null===d.noSelf||"undefined"==typeof d.noSelf?"/sp/goals/getUserGoals":"/sp/for/goals/getUserGoals?memberEmail="+d.noSelf,method:"get"}).then(function(b){if("true"===b.Success)""===d.noSelf||null===d.noSelf||"undefined"==typeof d.noSelf?(a.showNoGoalsMessage=!1,b.userGoal.length>0?(a.goalsStatus=b.userGoal,0===a.goalsStatus&&(a.goalsStatus=!0)):window.location.href="/sp/goals/themeView"):0===b.userGoal.length?a.showNoGoalsMessage=!0:(a.goalsStatus=b.userGoal,0===a.goalsStatus&&(a.goalsStatus=!0));else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},d.profileReady===!0?(a.getLoggedInUserEmail=g.get("loggegdInProfile"),a.defaultEmail=a.getLoggedInUserEmail.member.email,a.getGoalsStatus()):e(function(){a.getLoggedInUserEmail=g.get("loggegdInProfile"),a.defaultEmail=a.getLoggedInUserEmail.member.email,a.getGoalsStatus()},1e3),a.reviewGoals=function(){""===d.noSelf?window.location.href="/sp/goals/themeView":d.callSwitchChange("goalThemeView")},a.getRecentArtilesList=function(){b.getAjaxResponse({url:"/sp/tracking/recentVistedArticles",method:"get"}).then(function(b){"true"===b.Success?(a.showRecentArticles=!0,a.recentArticleList=b.trackingResponse):null!=b.error&&(a.showRecentArticles=!1)})},a.getRecentArtilesList(),a.getRecentBookmarkList=function(){b.getAjaxResponse({url:"/sp/tracking/getBookMarkedArticles",method:"get"}).then(function(b){"true"===b.Success?(a.showBookmarks=!0,a.recentBookmarkList=b.articles):null!=b.error&&(a.showBookmarks=!1)})},a.getRecentBookmarkList()}angular.module("spApp").controller("GoalsController",GoalsController),GoalsController.$inject=["$scope","ajaxService","ngDialog","$rootScope","$timeout","userDataService","$localStorage"];
function groupListController(a,b,c,d,e,f,g,h,i){function j(){b.getAjaxResponse({url:x.config.getGroupData}).then(function(a){if("true"===a.Success)x.groupList=a.groupInfoList.length?a.groupInfoList:[],x.responseRecieved=!0,x.pageCounter(x.pageSetting.pageSize);else if(null!=a.error){x.responseRecieved=!0;var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function k(a,b){"undefined"==typeof b&&x.order(x.pageSetting.currentPredicate,x.pageSetting.lastReverse),x.pageSetting.pageSize=a,a>=x.groupList.length&&(x.pageSetting.disabledInfinite=!0,x.pageSetting.pageSize=a)}function l(a,b){x.pageSetting.currentPredicate=a,x.pageSetting.lastReverse=b,x.groupList=c("orderBy")(x.groupList,x.pageSetting.currentPredicate,x.pageSetting.lastReverse)}function m(){x.pageSetting=angular.copy(x.originalPageSetting),x.order(x.pageSetting.currentPredicate,x.pageSetting.lastReverse);var a=$(".groupsHolder");a.find(".heading h4").removeClass("reverseon").removeClass("on"),a.find(".heading h4:eq(0)").addClass("on")}function n(a){i.set("groupname",a),d.go("profile")}function o(){x.pageSetting.oneTime&&(x.getAllMembers(),x.pageSetting.oneTime=!1)}function p(){b.getAjaxResponse({url:x.config.getAllMembers}).then(function(a){if("true"===a.Success){var b=a.memberList;angular.forEach(b,function(a,c){""===b[c].firstName&&""===b[c].lastName&&delete b[c]}),b=$.grep(b,function(a){return a}),x.allEmails=b}})}function q(){o(),a.errornewGroup=!1,a.errornewEmptyGroup=!1,a.savenewGroup=!1,e.open({template:x.config.createGroup,scope:a})}function r(a){b.getAjaxResponse({url:x.config.deleteGroup,data:$.param({name:a})}).then(function(b){if("true"===b.Success)g.spliceIndex(x.groupList,"name",a),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.deleteFullMessage")});else if(null!=b.error){var c="";for(var d in b.error)c=b.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function s(a,c){b.getAjaxResponse({url:x.config.removeMember,data:$.param({name:a,memberEmail:c,isGroupLead:!0})}).then(function(b){if("true"===b.Success){for(var c=0;c<x.groupList.length;c++)if(x.groupList[c].name===a){x.groupList[c].groupLead=null,x.groupList[c].numOfMembers=parseInt(x.groupList[c].numOfMembers)-parseInt(1);break}$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.deleteMessage")})}else if(null!=b.error){var d="";for(var e in b.error)d=b.error[e];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:d})}})}function t(a,b){x.pageSetting.currentPredicate=b.predicate,x.pageSetting.lastReverse=b.reverse,g.toggleFilterClick(a,x.pageSetting.currentPredicate),x.order(x.pageSetting.currentPredicate,x.pageSetting.lastReverse)}function u(){window.location.reload()}function v(a,c,d,e){x.errorNotification.updateGroupNameError=!1,x.errorNotification.updateGroupEmptyError=!1,x.errorNotification.saved=!1;var f=angular.element(d.currentTarget).scope(),g=e;return""===a||"undefined"==typeof a?(x.errorNotification.updateGroupEmptyError=!0,!1):a===c?(f.editenabled=!1,!1):void b.getAjaxResponse({url:x.config.updateName,data:$.param({name:a,oldName:c})}).then(function(a){"true"===a.Success?(x.errorNotification.saved=!0,x.errorNotification.updateGroupName=!0,x.groupList[g].name=a.groupInfoList[0].name,f.editenabled=!1,$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.updateGroupName")})):null!=a.error&&(x.errorNotification.updateGroupNameError=!0)})}function w(a){x.errorNotification.updateGroupNameError=!1,x.errorNotification.updateGroupEmptyError=!1;var b=angular.element(a.currentTarget).scope();b.editgroupsave=b.groupList.name}var x=this;x.groupList=[],x.responseRecieved=!1,x.pageSetting={pageSize:10,intialVal:10,lastReverse:!1,saved:!1,oneTime:!0,groupPage:!0,currentPredicate:"name",disabledInfinite:!1},x.originalPageSetting=angular.copy(x.pageSetting),x.errorNotification={updateGroupName:!1,updateGroupNameError:!1,updateGroupEmptyError:!1,errornewGroup:!1,errornewEmptyGroup:!1,savenewGroup:!1},x.config={getGroupData:"/sp/admin/group/all",getAllMembers:"/sp/admin/member",createGroup:"/sp/admin/group/createGroup",deleteGroup:"/sp/admin/group/delete",removeMember:"/sp/admin/group/removeMember",updateName:"/sp/admin/group/updateName",saveGroup:"/sp/admin/group/create"},x.allEmails=null,x.getGroupData=j,x.pageCounter=k,x.order=l,x.resetCounter=m,x.getListMember=o,x.confirmDelete=r,x.removeGroupLead=s,x.active=t,x.createNewGroup=q,x.profileRoute=n,x.saveGroupName=v,x.callreload=u,x.groupNameResult=w,x.getAllMembers=p,function(){i.remove("spProfileTab")}(),a.saveNewGroup=function(c,d){return a.errornewGroup=!1,a.errornewEmptyGroup=!1,a.savenewGroup=!1,""===c||"undefined"==typeof c?(a.errornewEmptyGroup=!0,!1):void b.getAjaxResponse({url:x.config.saveGroup,data:$.param({name:c,groupLead:d})}).then(function(b){"true"===b.Success?(a.savenewGroup=!0,a.errornewGroup=!1,a.errornewEmptyGroup=!1,x.groupList.unshift(b.groupInfo),x.pageCounter(x.groupList.length,"nosorting"),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.saveMessage")}),e.close("ngdialog1")):null!=b.error&&(a.errornewGroup=!0)})},a.closeGroup=function(){e.close("ngdialog1")}}angular.module("spApp").controller("groupListController",groupListController),groupListController.$inject=["$scope","ajaxService","$filter","$state","ngDialog","$timeout","sharedProperties","$rootScope","$localStorage"];
function growthController(a,b,c,d,e,f,g){a.getGrowthTeam="",a.growthTeam=!1,a.getAllMembersToInvite=[],a.masterGetAllMembersToInvite=[],a.viewMember=!1,a.current=5,a.oldView="",a.textSearching="",a.interateGrowth=[],a.listCreaator=[],a.getInviteMemberDetail=[],a.errorMessage="",a.showError=!1,a.initSet=!1,a.goalUser="",a.goals={selected:[]},a.inviteError=!1,a.dateError=!1,a.inviteMemNonMember=!0,a.inviteMember=!0,a.inviteNonMember=!1,a.howDoYouKnow=["Friend","Family","Work Colleague"],a.growthName="",a.growthTitle="",a.hideIt=!0,a.id="";var h=new Date;a.maxDate=h.setMonth(h.getMonth()+3),a.nonMemberGrowthCallStatus=!1,a.matchCase=[],a.masterExUser={firstName:"",lastName:"",memberEmail:"",hdu:"Friend"},a.sendGrowthdetail=function(b,c){a.growthName=b,a.growthTitle=c,d.open({template:"/sp/growth/growthPop",scope:a})},a.getGrowthTeam=function(){a.getAllMembersToInvitefn(),b.getAjaxResponse({url:"/sp/getGrowthTeam?groupMemberEmail="+g.noSelf,method:"get"}).then(function(b){if("true"===b.Success)a.getGrowthTeam=b,"undefined"!=typeof b.growthTeam?(a.interateGrowth=b.growthTeam,a.listCreaator=angular.copy(a.interateGrowth),a.currentActive=a.interateGrowth.length,a.formatList("active")):(a.currentActive=a.interateGrowth.length,a.formatList(),a.growthTeam=!0);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.nonMemberGrowth=function(){a.step=1,a.emailCheckFail=!1,a.nonMemberGrowthCallStatus||(a.nonMemberGrowthCall(),a.nonMemberGrowthCallStatus=!0)},a.nonMemberGrowthCall=function(){b.getAjaxResponse({url:"/sp/getUserGrowthAreas",data:$.param({groupMemberEmail:g.noSelf})}).then(function(b){if("true"===b.Success)a.goalUserNon=b.goals;else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.formatList=function(b){if(a.currentActive<a.current){var c=a.current-a.listCreaator.length;if(0!==c)for(var d=0;c>d;d++)a.incrementList();else a.incrementList()}else if(a.growthTeam=!1,a.viewMember=!0,a.inviteMemberView=!1,"undefined"!=typeof b&&"first"===b){var e=$("ul.listSection").find("li:eq(0)");a.invitedMemberView(e,e.find("div").data("email")),a.addUserFull=!1,$("ul.listSection").find("div").removeClass("selected"),$("ul.listSection").find("li:eq(0)").find("div").addClass("selected")}if("undefined"!=typeof b&&"first"!==b){a.oldView="";var f=a.interateGrowth.length;$("ul.listSection").find("div").removeClass("selected"),$("ul.listSection").find("li:eq("+f+")").find("div").addClass("selected")}},a.callSendArchivePopup=function(b){a.archiveMember=b,d.open({template:"/sp/growth/archiveMemberScreen",scope:a})},a.sendToArchive=function(c,e,g){a.showError=!1,b.getAjaxResponse({url:"/sp/archive",data:$.param({growthRequestId:c,memberEmail:e})}).then(function(b){if("true"===b.Success)f.spliceIndex(a.listCreaator,"id",c),f.spliceIndex(a.interateGrowth,"id",c),a.currentActive=a.interateGrowth.length,a.formatList("active"),a.getAllMembersToInvitefn(),a.inviteMemberView=!1,"undefined"!=typeof a.getAllMembersToInvite.userType?(a.viewMember=!0,a.inviteNonMember=a.inviteMember=a.hideIt=!1):a.viewMember=a.inviteNonMember=a.inviteMember=!0,d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member</strong>",message:" archived successfully"});else if(null!=b.error){for(var e in b.error)a.errorMessage=b.error[e];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage}),d.close("ngdialog1")}})},a.incrementList=function(){a.listCreaator.push({email:"inviteGrowth"})},a.isActive=function(b){return b===a.currentActive?!0:!1},a.filteredGrowth=function(b,c){g.contains(a.goals.selected,b)?(a.remove(a.goals.selected,b),$(c.currentTarget).removeClass("active")):(g.add(a.goals.selected,b),$(c.currentTarget).addClass("active")),a.dateError=!1,a.dateNonError=!1},a.invitationSended=function(b,c){a.inviteError=!1,a.dateError=!1,a.newArray=a.alreadyChecked.concat(a.goals.selected).unique(),a.newArray.length||(a.dateError=!0),a.newArray.sort().join(",")===a.alreadyChecked.sort().join(",")&&(a.dateError=!0),b.$valid&&a.newArray.length&&!a.dateError?a.invitationDirtyCheckClear(b,c):a.inviteError=!0},a.invitationDirtyCheckClear=function(c,e){c=$("form[name="+c.$name+"]").serialize()+"&groupMemberEmail="+g.noSelf,"external"===e&&(c=$.param(a.addProfile)+"&"+c,a.previousStep());for(var f=0;f<a.goals.selected.length;f++)c=c+"&goal="+encodeURIComponent(a.goalUser[a.goals.selected[f]].id);b.getAjaxResponse({url:"/sp/inviteMember",data:c}).then(function(b){if("true"===b.Success)a.interateGrowth.push(b.inviteCreated),a.listCreaator=angular.copy(a.interateGrowth),a.currentActive=a.interateGrowth.length,a.currentActive>=a.current?a.formatList("first"):a.formatList("active"),a.getAllMembersToInvitefn(),window.scrollTo($(".listSection").offset().top,0),d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Member </strong> ",message:"invited successfully"});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.getAllMembersToInvitefn=function(){b.getAjaxResponse({url:"/sp/getAllMembersToInvite",data:$.param({groupMemberEmail:g.noSelf})}).then(function(b){if("true"===b.Success)a.getAllMembersToInvite=b,"undefined"!=typeof a.getAllMembersToInvite.userType&&a.nonMemberGrowth(),a.masterGetAllMembersToInvite=angular.copy(a.getAllMembersToInvite);else if(null!=b.error)for(var c in b.error)a.errorMessage=b.error[c]})},a.callInitMember=function(b,c,d){var e="";if(!a.initSet){e=$("ul.listSection").find("li:eq("+b+")");var h=f.getParam("growthMemberId");a.matchCase.length||(a.matchCase=a.listCreaator.filter(function(a){return a.id===h}),null===h||a.matchCase.length||$.growl({icon:"glyphicon glyphicon-ban-circle",message:g.pullInterNationalization("growth.growthListing.noUserFound")})),null!==h&&a.matchCase.length?h===d&&(a.invitedMemberView(e,d),a.initSet=!0,e.find("div").addClass("selected")):(a.invitedMemberView(e,d),a.initSet=!0,e.find("div").addClass("selected"))}},a.callViewMember=function(b,c,d){var e=$(c.currentTarget);if(e.find("a").data("invite")){if(b!==a.currentActive&&!e.hasClass("active"))return!1;a.id="",a.growthTeam=a.inviteMemberView=!1,a.viewMember=!0,"undefined"!=typeof a.getAllMembersToInvite.userType?a.inviteNonMember=a.inviteMember=a.hideIt=!1:a.inviteNonMember=a.inviteMember=!0,a.inviteMemNonMember&&(e.hasClass("selected")||(e.closest(".listSection").find("div").removeClass("selected"),e.addClass("selected")),a.getAllMembersToInvite=angular.copy(a.masterGetAllMembersToInvite),a.searchText="",a.oldView=b)}else a.invitedMemberView(e,d)},a.invitedMemberView=function(c,d){return c.hasClass("selected")||(c.closest(".listSection").find("div").removeClass("selected"),c.addClass("selected")),d="undefined"==typeof c.data("email")?d:c.attr("data-email"),""!==a.id&&a.id===d?!1:(a.id=d,a.growthTeam=a.inviteMemberView=a.viewMember=!1,a.oldView="",void b.getAjaxResponse({url:"/sp/getInviteMemberDetail",data:$.param({growthRequestId:d})}).then(function(b){if("true"===b.Success)a.getInviteMemberDetail=b.inviteMember,a.feedbackEnable=!1,a.sendreminderEnable=!1,"undefined"!=typeof a.getInviteMemberDetail.feedbackIntervals[0]?a.feedbackEnable=!0:a.sendreminderEnable=!0,a.inviteMemberView=!0;else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}}))},a.searchTextFilter=function(b){a.textSearching=b,a.getAllMembersToInvite.growthUsers=f.searchModule(a.textSearching,a.masterGetAllMembersToInvite.growthUsers,2)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.getAllMembersToInvite.growthUsers=angular.copy(a.masterGetAllMembersToInvite.growthUsers))},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.order=function(b,d){a.getAllMembersToInvite.growthUsers=c("orderBy")(a.getAllMembersToInvite.growthUsers,b,d)},a.callAdd=function(c,e,f){return $(e.currentTarget).hasClass("notActive")?!1:(a.addProfile=c,a.inviteError=!1,a.dateError=!1,a.goals.selected=[],void b.getAjaxResponse({url:"/sp/getUserGrowthAreas",data:$.param({memberEmail:"pop"===f?c.email:c.memberEmail,groupMemberEmail:g.noSelf})}).then(function(b){if("true"===b.Success){a.alreadyChecked=[],a.goalUser=b.goals;for(var c=0;c<a.goalUser.length;c++)a.goalUser[c].alreadyInvited&&a.alreadyChecked.push(c);"pop"===f?d.open({template:"/sp/growth/addMemberScreen",scope:a}):b.allGoalsInvited?$.growl({icon:"glyphicon glyphicon-ban-circle",message:g.pullInterNationalization("growth.growthListing.allGoalAssigned")}):a.step++}else if(null!=b.error){for(var e in b.error)a.errorMessage=b.error[e];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}}))},a.nextStep=function(c,d){this.inviteNonMemberForm.$valid?(a.emailCheckFail=!1,b.getAjaxResponse({url:"/sp/isValidExternalUserRequest",data:$.param({externalUser:c.memberEmail})}).then(function(b){"true"===b.Success?a.callAdd(c,d,"normal"):null!=b.error&&(a.emailCheckFail=!0)})):a.inviteNonMemberErr=!0},a.previousStep=function(){a.clearNonMemberData(),a.step--},a.clearNonMemberData=function(){a.inviteNonMemberErr=!1,a.exuser=angular.copy(a.masterExUser)},a.disableCheck=function(a){var b=this.$index,c=$(".growthAreas").find(".style:eq("+b+")");c.find("input").attr("disabled",!0)},a.active=function(b){f.toggleFilterClick(b,a.currentPredicate)},a.sendReminder=function(b){a.reminderDetails=b,d.open({template:"/sp/reminder/sendReminder",scope:a})},a.sendReminderMailed=function(c){var e=$("form.sendReminder").serialize()+"&memberList="+c.user.email+"&growthRequestId="+c.id+"&memberFirstName="+c.user.firstName+"&memberLastName="+c.user.lastName+"&type=GrowthFeedbackReminder";b.getAjaxResponse({url:"/sp/notifications/sendNotificationWithParams",data:e}).then(function(b){if("true"===b.Success)d.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:" Reminder sent successfully "});else if(null!=b.error){d.close("ngdialog1");for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})}}function requestController(a,b,c,d,e,f,g,h){a.requestMemberList=[],a.masterRequestMemberList=[],a.pageSize=10,a.initPageSize=10,a.currentPredicate="user.name",a.lastReverse=!1,a.textSearching="",a.getAllFeedbackRequests=function(){b.getAjaxResponse({url:"/sp/getAllFeedbackRequests",method:"get"}).then(function(b){"true"===b.Success?(a.masterRequestMemberList=b.growthFeedbackRequest,a.requestFilter=b.requestStatusFilter,a.loadMore(a.pageSize)):window.location.href="/sp"})},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.loadMore=function(b){a.order(a.currentPredicate,a.lastReverse),a.pageSize=b,b>=a.masterRequestMemberList.length&&(a.disabledInfinite=!0,a.pageSize=a.masterRequestMemberList.length),""!==a.textSearching?a.searchTextFilter(a.textSearching):a.requestMemberList=angular.copy(a.masterRequestMemberList)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",this.searchText="",a.pageSize=a.pageStateSearch,a.requestMemberList=angular.copy(a.masterRequestMemberList))},a.searchTextFilter=function(b){a.textSearching=b,a.pageStateSearch=a.pageSize,a.requestMemberList=f.searchModule(a.textSearching,a.masterRequestMemberList,2,"user")},a.order=function(b,d){a.currentPredicate=b,a.lastReverse=d,a.requestMemberList=c("orderBy")(a.requestMemberList,b,d)},a.active=function(b){f.toggleFilterClick(b,a.currentPredicate)},a.requestDetail=function(a,b){h.set("memberRequestInitiated",a),"initiate"===b?window.location.href="/sp/growth/requestDetail":window.location.href="/sp/growth/requestDetailEdit"}}function requestDetailController(a,b,c,d,e,f,g){a.memberList=[],a.weekon=!0,a.monthon=!1,a.currentPredicate="1",a.feedBackCycle="",a.valueResponse="",a.keyResponse="",a.indexChange="",a.foundCurrent=!1,a.foundCurrentClass=!1,a.growthName="",a.growthTitle="",a.internal="internal",a.sendGrowthdetail=function(b,d){a.growthName=b,a.growthTitle=d,c.open({template:"/sp/growth/growthPop",scope:a})},a.getAllMemberDetail=function(){a.memberList=g.get("memberRequestInitiated")},a.goBack=function(){window.location.href="/sp/growth/request"},a.getExternalMembersProfileDetails=function(){var c=null!=g.get("externalRequestInitiated")?g.get("externalRequestInitiated").growthRequestId:"";b.getAjaxResponse({url:"/sp/growth/external/requestDetail",data:$.param({growthRequestId:c})}).then(function(b){"true"===b.Success&&(a.memberList=b.initiateRequestDate,a.type="external",a.getAllMemberDetailRequest("type"))})},a.getAllMemberDetailRequest=function(c){"undefined"==typeof c&&(a.memberList=g.get("memberRequestInitiated")),b.getAjaxResponse({url:"/sp/getGrowthFeedback",data:$.param({growthRequestId:a.memberList.id})}).then(function(b){"true"===b.Success&&(a.feedBackCycle=b)})},a.onClickActivate=function(b,c){var d=$(c.currentTarget);return a.currentPredicate===d.data("pick")?!1:(d.parent().find("h4").removeClass("reverseon"),d.find("h4").addClass("reverseon"),void(a.currentPredicate=d.data("pick")))},a.setFeedbackMode=function(){"weekly"===a.dropSearch?(a.weekon=!0,a.monthon=!1):(a.weekon=!1,a.monthon=!0)},a.feedBackSubmit=function(c,d){var e=$("form").serialize(),f="";f="undefined"==typeof d?"/sp/submitGrowthFeedback":"/sp/growth/external/submitGrowthFeedback",b.getAjaxResponse({url:f,data:e}).then(function(b){"true"===b.Success?(a.feedBackCycle.interval[a.keyResponse]=b,a.valueResponse=b,a.memberList.requestProgressStatus[a.indexChange]="true",g.set("memberRequestInitiated",a.memberList),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Feedback </strong> ",message:"submitted successfully"})):$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})})},a.callDetail=function(b,c,d,e){a.foundCurrent||("current"===b.state?(a.foundCurrent=!0,a.getDetail(b,c,d,e)):a.getDetail(b,c,d,e))},a.callActive=function(b,c){a.foundCurrentClass||"current"===b.state&&(a.foundCurrentClass=!0)},a.getDetail=function(b,c,d,e){var f=$(d.currentTarget);return a.indexChange=e.$index,f.length||($("ul.listSection").find("span.ic").removeClass("active"),$("ul.listSection").find("li:eq("+a.indexChange+")").find("span.ic").addClass("active")),f.find("span.ic").hasClass("active")?!1:(f.closest(".listSection").find("span.ic").removeClass("active"),f.find("span.ic").addClass("active"),a.valueResponse=b,a.keyResponse=c,void(a.enableFeedBack=!0))},a.quesansfn=function(a){return"No"===a?"Yes":"No"},a.declineRequest=function(b){var d="undefined"==typeof b?"/sp/growth/declineRequest":"/sp/growth/declineRequestExternal";c.open({template:d,scope:a})},a.acceptRequest=function(c,d){var e=(a.selectedCheckbox,""),f="undefined"==typeof d?"/sp/acceptRequest":"/sp/growth/external/acceptReject";e="single"===a.selectedCheckbox?{id:c.id,dateRepeatPattern:a.selectedCheckbox,accepted:"true",comment:""}:"weekly"===a.dropSearch?{id:c.id,dateRepeatPattern:"Weekly",dayOfWeek:a.currentPredicate,comment:"",accepted:"true"}:{id:c.id,dateRepeatPattern:"Monthly",dayOfWeek:a.dropmSearch,onMonthDay:a.dropdSearch,comment:"",accepted:"true"},b.getAjaxResponse({url:f,data:$.param(e)}).then(function(b){if("true"===b.Success)"undefined"==typeof d?window.location.href="/sp/growth/request":window.location.href="/sp/growth/requestDetailEditExternal";else{for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})},a.declined=function(c,d){var e="undefined"==typeof d?"/sp/acceptRequest":"/sp/growth/external/acceptReject";b.getAjaxResponse({url:e,data:$.param({id:c.id,comment:$("#commentBlock").val(),accepted:"false"})}).then(function(b){if("true"===b.Success)"undefined"==typeof d?window.location.href="/sp/growth/request":window.location.href="/?status=growthDecline";else{for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:a.errorMessage})}})}}function archiveController(a,b,c,d,e,f,g,h){a.archiveMembers=[],a.masterarchiveMembers=[],a.pageSize=10,a.initPageSize=10,a.archiveShow=!1,a.currentPredicate="user.name",a.lastReverse=!1,a.textSearching="",a.getAllArchiveRequests=function(){b.getAjaxResponse({url:"/sp/allArchivedRequest",method:"get"}).then(function(b){"true"===b.Success?(a.masterarchiveMembers=b.archivedGrowthRequest,a.archiveFilter=b.requestStatusFilter,a.archiveShow=!0,a.loadMore(a.pageSize)):window.location.href="/sp"})},a.loadMore=function(b){a.order(a.currentPredicate,a.lastReverse),a.pageSize=b,b>=a.masterarchiveMembers.length&&(a.disabledInfinite=!0,a.pageSize=a.masterarchiveMembers.length),""!==a.textSearching?a.searchTextFilter(a.textSearching):a.archiveMembers=angular.copy(a.masterarchiveMembers)},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",this.searchText="",a.pageSize=a.pageStateSearch,a.archiveMembers=angular.copy(a.masterarchiveMembers))},a.searchTextFilter=function(b){a.textSearching=b,a.pageStateSearch=a.pageSize,a.archiveMembers=f.searchModule(a.textSearching,a.masterarchiveMembers,2,"user")},a.order=function(b,d){a.currentPredicate=b,a.lastReverse=d,a.archiveMembers=c("orderBy")(a.masterarchiveMembers,b,d)},a.active=function(b){f.toggleFilterClick(b,a.currentPredicate)},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.viewDetail=function(a){h.set("archiveId",a),window.location.href="/sp/growth/archiveDetail"}}function archiveDetailController(a,b,c,d,e,f,g,h){a.memberList=[],a.userTypeImdi=!1,a.getArchivedMemberDetail=function(){var c=h.get("archiveId");b.getAjaxResponse({url:"/sp/getArchivedRequest",data:$.param({archivedId:c})}).then(function(b){"true"===b.Success?a.memberList=b.inviteMember:a.memberList=b.success.inviteMember})},a.goBack=function(){window.location.href="/sp/growth/archive"},a.sendGrowthdetail=function(b,d){a.growthName=b,a.growthTitle=d,c.open({template:"/sp/growth/growthPop",scope:a})}}function externalUserFlow(a,b,c,d){a.sfailure=!1,a.externalUserInfo=[],a.assessment360page=!1,a.setOptions=function(){a.assessment360page=!0},a.initExternalLogin=function(e){if(a.sfailure=!1,a.spExtLogin.submitted=!1,a.spExtLogin.$valid)c.getAjaxResponse({url:a.assessment360page===!0?"/sp/feedback/external/confirmProfileDetails":"/sp/growth/external/confirmProfileDetails",data:$("form").serialize()}).then(function(b){"true"===b.Success?a.assessment360page?window.location.reload():(d.set("externalRequestInitiated",b),window.location.href="/sp/growth/requestDetailExternal"):(a.failure=b.error,a.sfailure=!0)});else{var f=angular.element(b);$("html,body").animate({scrollTop:$(f).find("form .ng-invalid:first").offset().top-20},300),a.spExtLogin.submitted=!0}}}angular.module("spApp").controller("growthController",growthController),angular.module("spApp").controller("requestController",requestController),angular.module("spApp").controller("requestDetailController",requestDetailController),angular.module("spApp").controller("archiveController",archiveController),angular.module("spApp").controller("archiveDetailController",archiveDetailController),angular.module("spApp").controller("externalUserFlow",externalUserFlow),growthController.$inject=["$scope","ajaxService","$filter","ngDialog","$timeout","sharedProperties","$rootScope"],requestController.$inject=["$scope","ajaxService","$filter","ngDialog","$timeout","sharedProperties","$rootScope","$localStorage"],requestDetailController.$inject=["$scope","ajaxService","ngDialog","$timeout","sharedProperties","$rootScope","$localStorage"],archiveController.$inject=["$scope","ajaxService","$filter","ngDialog","$timeout","sharedProperties","$rootScope","$localStorage"],archiveDetailController.$inject=["$scope","ajaxService","ngDialog","$timeout","userDataService","sharedProperties","$rootScope","$localStorage"],externalUserFlow.$inject=["$scope","$element","ajaxService","$localStorage"];
function LibraryController(a,b,c,d,e,f,g,h){a.searchKeys=[],a.search={},a.commentBox={},a.loggedInUser={},a.commentEditEnabled=!1,a.comments={},a.commentBoxes={},a.videoAvailable=!1,a.imageAvailable=!1,a.updateBtnDisabled=!1,a.newCommentBox={},a.topBox={},a.pageSize=20,a.existingKeys=[],a.searchKeywords={},a.btn={},a.searchPlaceHolderValue="e.g. Listening",a.commentsReady=!1,a.searchWithKeys={},a.newDate={},a.newDate.currentDay=new Date,a.newDate={year:a.newDate.currentDay.getFullYear(),month:a.newDate.currentDay.getMonth()+1,day:a.newDate.currentDay.getDate()},a.dd={},a.dd.hideDropDown=!1,a.searchTopic={},a.tab=0,a.showAddToGoalsBtn=!1,a.articlePageReady=!1,a.thanks=!1,a.emailMemberList=[],a.searchTag=[],a.inputRequired=!1,a.shortDescription=null,a.shareEnable=!1,a.formatDate=function(a){if(null!==a&&"undefined"!==a){var b=a.split("-"),c={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},d=parseInt(b[1])<9?"0"+b[1]:b[1],e=c[d.toString()]+" "+parseInt(b[2])+", "+parseInt(b[0]);return e}},a.today=a.formatDate(a.newDate.year+"-"+a.newDate.month+"-"+a.newDate.day),a.isArticleBookmarked=!1,a.recommendBtnDisabled=!0,a.articleBtnDisabled=!0,a.comments={add:function(c,d){if(a.newCommentBox.submitted=!1,null!==c&&""!==c&&"undefined"!=typeof c){var e={url:"/sp/trainingLibrary/addComment",data:$.param({comment:c,articleId:d})};b.getAjaxResponse(e).then(function(b){"true"===b.Success&&(a.topBox.newComment=null,a.getArticle())})}else a.newCommentBox.submitted=!0},update:function(c,d){var e="commentBox_"+c,f=jQuery("body").find("span.error_msg_"+c),g=jQuery("body").find("form[name=commentBoxForm_"+c+"]"),h=jQuery("body").find("p.user-comment[data-comment=cBox_"+c+"]"),i=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+c+"]"),j=jQuery("body").find("a[data-cancel=cancelBtn_"+c+"]");if(jQuery(f).hasClass("hide")||jQuery(f).addClass("hide"),"undefined"!=typeof a.commentBoxes[e]){var k={url:"/sp/trainingLibrary/updateComment",data:$.param({comment:a.commentBoxes[e],articleId:d,candidateEmail:a.loggedInUser.email,index:c}).replace(/%40/g,"@").replace(/%2C/g,",")};b.getAjaxResponse(k).then(function(b){"true"===b.Success&&(jQuery(i).removeClass("hide"),jQuery(j).removeClass("show").addClass("hide"),jQuery(g).addClass("hide"),jQuery(h).removeClass("hide"),a.getArticle())})}else jQuery(f).removeClass("hide")},"delete":function(c,d){var e="commentBox_"+c,f={url:"/sp/trainingLibrary/removeComment",data:$.param({comment:a.commentBoxes[e],articleId:d,commentorEmail:a.loggedInUser.email,index:c}).replace(/%40/g,"@").replace(/%2C/g,",")};b.getAjaxResponse(f).then(function(b){"true"===b.Success&&a.getArticle()})},edit:function(b){var c=jQuery("body").find("form[name=commentBoxForm_"+b+"]"),d=jQuery("body").find("p.user-comment[data-comment=cBox_"+b+"]"),e="commentBox_"+b,f=jQuery(c).find("textarea").attr("data-comments"),g=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+b+"]"),h=jQuery("body").find("a[data-cancel=cancelBtn_"+b+"]");jQuery(g).addClass("hide"),jQuery(h).addClass("show"),jQuery(c).removeClass("hide"),jQuery(d).addClass("hide"),a.commentBoxes[e]=f,a.commentEditEnabled=!0},cancel:function(b){var c=jQuery("body").find("form[name=commentBoxForm_"+b+"]"),d=jQuery("body").find("p.user-comment[data-comment=cBox_"+b+"]"),e=jQuery("body").find("p.comment-btns[data-btns=cBtns_"+b+"]"),f=jQuery("body").find("a[data-cancel=cancelBtn_"+b+"]");jQuery(e).removeClass("hide"),jQuery(f).removeClass("show").addClass("hide"),jQuery(c).addClass("hide"),jQuery(d).removeClass("hide"),a.commentEditEnabled=!1}},a.formattedAuthor=function(a){return"undefined"!=typeof a&&""!==a?a.join(", "):void 0},a.fetchSearchData=function(c){if(a.searchTopic.searchTopicValue=null,a.dd.hideDropDown=!0,"Themes"===c?a.searchPlaceHolderValue="e.g. Listening":a.searchPlaceHolderValue=null,-1===$.inArray(c,a.existingKeys))if(a.existingKeys.push(c),a.searchKeywords[c]=[],null===f.get("getTopics"+c)){var d={url:"/sp/trainingLibrary/getAllTopics",data:$.param({topic:c})};b.getAjaxResponse(d).then(function(b){if("true"===b.Success){f.set("getTopics"+c,b),a.searchKeys=[],a.searchWithKeys[c]=b.topics;var d=b.topics;for(var e in d)d.hasOwnProperty(e)&&a.searchKeywords[c].push(d[e]);a.searchKeys=a.searchKeywords[c].sort()}})}else{var e=f.get("getTopics"+c);a.searchKeys=[],a.searchWithKeys[c]=e.topics;var g=e.topics;for(var h in g)g.hasOwnProperty(h)&&a.searchKeywords[c].push(g[h]);a.searchKeys=a.searchKeywords[c].sort()}else a.searchKeys=a.searchKeywords[c]},a.searchResultSelected=function(b){a.searchTopic.searchTopicValue=b,a.dd.hideDropDown=!0},a.startSearch=function(b,c){var d;for(var e in a.searchWithKeys[a.search.topicCategory])a.searchWithKeys[a.search.topicCategory][e]===c&&(d=e);if(a.selectCategoryError=!1,"default"!==b){var f="/sp/trainingLibrary/results#topicCategory="+encodeURIComponent(b)+"&topicValue="+("undefined"==typeof d||null===d||""===d?"":encodeURIComponent(d)+":"+encodeURIComponent(c));window.location=f}else a.selectCategoryError=!0},a.refreshSearch=function(c,d,e){var f,g,h,i,j;if(e===!0){f=window.location.href,g=f.substring(f.indexOf("#")+1).replace(/\//g,"");var k=g.split("&"),l=k[0].split("=")[1],m=k[1].split("=")[1];null!==l&&""!==l&&"undefined"!=typeof l?(c=l.toString().replace(/\+/g," ").replace(/%20/g," "),i="Author"===c||"Source"===c?"s":"",a.search.topicCategory=c,a.fetchSearchData(c),a.dd.hideDropDown=!0,a.searchTerm="All "+c+i):(a.search.topicCategory="Themes",a.searchTerm="All Themes",a.fetchSearchData("All Themes")),null!==m&&""!==m&&"undefined"!=typeof m?(d=m.toString().split(":")[0].replace(/\+/g," ").replace(/%20/g," "),j=m.toString().split(":")[1].replace(/\+/g," ").replace(/%20/g," "),a.searchTopic.searchTopicValue=j,a.searchTerm=j):a.searchTopic.searchTopicValue=null}else if(null!==c&&""!==c&&"undefined"!=typeof c?(i="Author"===c||"Source"===c?"s":"",a.search.topicCategory=c,a.searchTerm="All "+c+i,"Themes"===c&&a.fetchSearchData(c),window.location.hash="topicCategory="+c+"&topicValue="):(a.search.topicCategory="Themes",a.searchTerm="All Themes",a.fetchSearchData("All Themes"),window.location.hash="topicCategory=Themes&topicValue="),null!==d&&""!==d&&"undefined"!=typeof d){for(var n in a.searchWithKeys[a.search.topicCategory])a.searchWithKeys[a.search.topicCategory][n]===d&&(j=d,d=n);"Themes"!==a.search.topicCategory?(a.searchTopic.searchTopicValue=d,a.searchTerm=d,window.location.hash="topicCategory="+c+"&topicValue="+d):(a.searchTopic.searchTopicValue=j,a.searchTerm=j,window.location.hash="topicCategory="+c+"&topicValue="+d+":"+j)}else a.searchTopic.searchTopicValue=null;h={url:"/sp/trainingLibrary/getResults",data:$.param({topicCategory:c,topicValue:d})},b.getAjaxResponse(h).then(function(b){if("true"===b.Success){a.trainingSpotlight(d),a.searchFilterVal=null,a.tab=0,a.pageSize=20,a.articleResultData=b,a.articleResultsBackup=b.articles,a.totalArticles=a.articleResultsBackup.length,a.articleResultsBackup.length>20?(a.articleResults=a.articleResultsBackup,a.btn.hideLoadMore=!1):(a.articleResults=a.articleResultsBackup,a.btn.hideLoadMore=!0),a.articleFilters=[];var c=[];$.each(a.articleResultsBackup,function(a,b){c.push(b.articleTypeFormatted)}),a.articleFilters=c.unique(),jQuery("html, body").animate({scrollTop:0})}})},a.loadMoreResults=function(){a.articleResultsBackup.length>a.pageSize&&(a.pageSize+=20,a.pageSize>a.articleResultsBackup.length&&(a.disabledInfinite=!0,a.pageSize=a.articleResultsBackup.length))},a.updateArticleLink=function(a){var b=a.split("/"),c=b[parseInt(b.length-1)],d="/sp/trainingLibrary/article?"+c;return d},a.trackArticle=function(a){var c={url:"/sp/tracking/trackArticles",data:$.param({articleId:a,trackingType:"ARTICLES"})};b.getAjaxResponse(c)},a.getArticle=function(){var c=window.location.href,f=c.substring(c.indexOf("?")+1).split("&")[0],g={url:"/sp/trainingLibrary/getArticleDetail/"+f,method:"GET"};b.getAjaxResponse(g).then(function(b){if("true"===b.Success){if(a.articlePageDetails=b.article,a.articlePageDetailsAuthors=b.article.author.join(", "),a.articleComments=b.article.comments,a.commentList=[],a.trainingSpotlight(a.articlePageDetails.goalIds[0]),a.relatedContent=b.relatedArticles,b.article.canAddToUserGoals===!0?a.showAddToGoalsBtn=!0:a.showAddToGoalsBtn=!1,b.article.articleForUser===!0&&"NOT_STARTED"===b.article.userArticleStatus?a.updateBtnDisabled=!1:a.updateBtnDisabled=!0,"COMPLETED"===b.article.userArticleStatus?a.articleCompletedBtn=!0:a.articleCompletedBtn=!1,"undefined"!=typeof b.article.articleBookmarked&&null!==b.article.articleBookmarked&&(a.isArticleBookmarked=b.article.articleBookmarked),"undefined"!=typeof b.article.imageUrl&&null!==b.article.imageUrl?(a.imageAvailable=!0,a.articleHeroImage=b.article.imageUrl):a.imageAvailable=!1,"undefined"!=typeof b.article.videoUrl&&null!==b.article.videoUrl){a.videoAvailable=!0,a.articleVideo=b.article.videoUrl;var c;if(/youtube/g.test(b.article.videoUrl))c="youtube";else if(/vimeo/g.test(b.article.videoUrl)){c="vimeo";var g=a.articleVideo.split("?")[0].split("/");a.articleVideo="https://vimeo.com/"+g[parseInt(g.length-1)]}else c="html5";setTimeout(function(){videojs(document.getElementById("vid1"),{autoplay:!1,techOrder:[c],src:a.articleVideo},function(){})},500)}else a.videoAvailable=!1;a.profileReady===!0&&(a.loggedInUser=e.retrive(),a.loggedInUser.first=a.loggedInUser.member.firstName,a.loggedInUser.last=a.loggedInUser.member.lastName,a.loggedInUser.email=a.loggedInUser.member.email,$.each(a.articleComments,function(b,c){var d=jQuery.extend({},a.articleComments[b],{mName:"commentBox_"+b,showOptions:a.articleComments[b].by.email===a.loggedInUser.email?!0:!1});a.commentList.push(d)}),d(function(){a.commentsReady=!0},200)),a.articlePageReady=!0,a.trackArticle(f);var h={},i=b.article.articleReadability,j=document.getElementById("readability");null!==i&&"undefined"!=typeof i&&(h.FleschKincaidReadingEase=i.fleschKincaidReadingEase,h.FleschKincaidGradeLevel=i.fleschKincaidGradeLevel,h.GunningFogScore=i.gunningFogScore,h.ColemanLiauIndex=i.colemanLiauIndex,h.SmogIndex=i.smogIndex,h.AutomatedReadabilityIndex=i.automatedReadabilityIndex,h.Average=i.average,j.setAttribute("data-readability-values",JSON.stringify(h)))}})},a.filterResults=function(b,c,e){e.preventDefault(),a.btn.hideLoadMore=!0,d(function(){a.pageSize>a.currentArticleCount.length?a.btn.hideLoadMore=!0:a.btn.hideLoadMore=!1},300),a.searchFilterVal=b,a.tab=c},a.updateDashboard=function(c){if(a.updateBtnDisabled===!1){var d={url:"/sp/trainingLibrary/udpateArticleToProfile",data:$.param({articleId:c})};b.getAjaxResponse(d).then(function(b){"true"===b.Success&&(a.updateBtnDisabled=!0,a.articleHelpFul=!0,$.growl({icon:"glyphicon glyphicon-ok",message:" Dashboard updated successfully"}))})}},a.recommendArtice=function(c,d){a.recommendBtnDisabled=!1;var e={url:"/sp/trainingLibrary/recommendArticle",data:$.param({articleId:c,doReccomend:!d})};b.getAjaxResponse(e).then(function(b){if("true"===b.Success){a.recommendBtnDisabled=!0,a.articlePageDetails.articleRecommendedByUser=!a.articlePageDetails.articleRecommendedByUser,a.articlePageDetails.recommendationCount=b.recommendationCount;var c=a.articlePageDetails.articleRecommendedByUser?"Article recommended":" Article recommendation removed";$.growl({icon:"glyphicon glyphicon-ok",message:c})}else if(null!=b.error){a.recommendBtnDisabled=!0;var d="";for(var e in b.error)d=b.error[e];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:d})}})},a.articleBookmark=function(c){a.isArticleBookmarked===!0&&"undefined"!=typeof a.isArticleBookmarked?a.sendArticleBookmark=!1:a.sendArticleBookmark=!0,a.articleBtnDisabled=!1;var d={url:"/sp/tracking/bookMarkArticle",data:$.param({articleId:c,trackingType:"ARTICLES",isBookMarked:a.sendArticleBookmark})};b.getAjaxResponse(d).then(function(b){"true"===b.Success?(a.articleBtnDisabled=!0,a.sendArticleBookmark===!0?$.growl({icon:"glyphicon glyphicon-ok",message:" Article Bookmarked"}):$.growl({icon:"glyphicon glyphicon-ok",message:" Bookmark Removed"}),a.isArticleBookmarked=!a.isArticleBookmarked):a.articleBtnDisabled=!0})},a.getAllBookmarks=function(){a.search.topicCategory="Themes",b.getAjaxResponse({url:"/sp/tracking/getAllBookMarkedArticles",method:"get"}).then(function(b){if("true"===b.Success){a.recentBookmarkList=b.articles,a.articleFilters=[];var c=[];$.each(a.recentBookmarkList,function(a,b){c.push(b.articleTypeFormatted)}),a.articleFilters=c.unique()}})},a.trendingTopRatedArticles=function(){if(null===f.get("tntArticles"))b.getAjaxResponse({url:"/sp/trainingLibrary/trendingAndTopRated"}).then(function(b){"true"===b.Success&&(f.set("tntArticles",b),a.trendingList=b.trendingArticles,a.topRatedList=b.topArticles)});else{var c=f.get("tntArticles");a.trendingList=c.trendingArticles,a.topRatedList=c.topArticles}},a.trainingSpotlight=function(c){b.getAjaxResponse({url:"/sp/trainingLibrary/trainingSpotlight",data:$.param({goalId:"undefined"!=typeof c?c:""})}).then(function(b){"true"===b.Success&&(a.trainingSpotlightContent=b.trainingSpotLight)})},a.addtoGoals=function(c,d){b.getAjaxResponse({url:"/sp/goals/addArticleToUserGoals",method:"post",data:$.param({articleId:c})}).then(function(b){"true"===b.Success&&(a.showAddToGoalsBtn=!1,a.updateBtnDisabled=!1,d===!0&&jQuery.each(a.articleResults,function(b){return a.articleResults[b].articleLinkUrl===c?(a.articleResults[b].canAddToUserGoals=!1,a.articleResults[b].userArticleStatus="NOT_STARTED",!1):void 0}),$.growl({icon:"glyphicon glyphicon-ok",message:" Article added successfully"}))})},a.shareArticle=function(c){a.inputRequired=!1,a.shareEnable=!0,a.shareArticleId=c,a.searchTag=[],!a.emailMemberList.length&&a.getMemberList(c),null===a.shortDescription?b.getAjaxResponse({url:"/sp/trainingLibrary/getShortDescription",data:$.param({articleId:c})}).then(function(b){"true"===b.Success&&(a.shortDescription=b.shortDescription,g.open({template:"/sp/trainingLibrary/share",scope:a}))}):g.open({template:"/sp/trainingLibrary/share",scope:a})},a.articleShared=function(c){return c.email.length?void b.getAjaxResponse({url:"/sp/trainingLibrary/shareArticle",data:$.param({articleId:c.articleId,comment:c.comment,toList:c.email.toString()})}).then(function(b){if("true"===b.Success)g.close("ngdialog1"),a.shareEnable=!1,$.growl({icon:"glyphicon glyphicon-ok",message:" Article shared successfully"});else{g.close("ngdialog1"),a.shareEnable=!1;for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}}):(a.inputRequired=!0,!0)},a.getMemberList=function(c){b.getAjaxResponse({url:"/sp/allUsers"}).then(function(b){if("true"===b.Success)a.emailMemberList=b.allMembers;else{for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.loadTags=function(b){var c=h.defer(),d=a.emailMemberList.filter(function(a){return-1!==a.name.toLowerCase().indexOf(b.toLowerCase())||-1!==a.email.toLowerCase().indexOf(b.toLowerCase())});return c.resolve(d),c.promise},a.tagAdded=function(b){a.searchTag.push(b.email),a.inputRequired=!1},a.tagRemoved=function(b){a.searchTag.splice(a.searchTag.indexOf(b.email),1)},a.useful=function(c){b.getAjaxResponse({url:"/sp/trainingLibrary/usefullArticle",data:$.param({articleId:c.articleId,isUseFull:c.isUseFull})}).then(function(b){if("true"===b.Success)a.thanks=!0,d(function(){a.articleHelpFul=!1,a.articleCompletedBtn=!0},3e3);else{for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.closeThis=function(){a.shareEnable=!1,this.closeThisDialog()},a.trainingLibraryControl=[],a.itemPositioned=[],a.fn=function(){var c=$(".dragZone"),d=c.find(".inputBox").outerHeight(),e=c.find(".inputBox").outerWidth();return this.init=function(a){this.getTrainingLibraryRecords(a)},this.getTrainingLibraryRecords=function(c){var d=f.get("trainingLibraryRecord");return null!=d&&d.Content.length?(a.trainingLibraryControl=d,!0):void b.getAjaxResponse({url:"/sp/trainingLibrary/homeArticles"}).then(function(b){if("true"===b.Success)a.trainingLibraryControl=b,f.set("trainingLibraryRecord",b);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},this.dragIt=function(){a.pckry=c.packery({handle:".handleMe",rowHeight:d,columnWidth:e});var b=a.pckry.packery("getItemElements");a.initialItem=b;for(var f=0,g=b.length;g>f;f++){var h=new Draggabilly(b[f],{axis:"y",containment:c,handle:".handle",grid:[0,78]});a.pckry.packery("bindDraggabillyEvents",h)}a.pckry.packery("on","dragItemPositioned",this.orderItems),a.pckry.packery("on","layoutComplete",this.orderItems)},this.orderItems=function(){for(var b=a.pckry.packery("getItemElements"),c=0;c<b.length;c++){var d=$(b[c]).attr("tabindex");a.itemPositioned[c]=d,$(b[c]).attr("data-module-index",c)}},this.callSaveInLoop=function(a){if(a.$valid)for(var b=0;b<c.find(".handleMe").length;b++){var d=$(c.find(".handleMe")[b]),e={articleId:d.find(".js_articleId").val(),shortDescription:d.find(".js_shtDesc").val(),position:d.attr("data-module-index")};this.saveTheRecord(e)}},this.saveTheRecord=function(c){b.getAjaxResponse({url:"/sp/trainingLibrary/admin/add/contentArticles",data:$.param(c)}).then(function(b){if("true"===b.Success)$.growl({icon:"glyphicon glyphicon-ok",message:"SAVED"});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},this},function(){a.callTraining=new a.fn}()}angular.module("spApp").controller("LibraryController",LibraryController),LibraryController.$inject=["$scope","ajaxService","sharedProperties","$timeout","userDataService","$localStorage","ngDialog","$q"];
function profileMainController(a,b,c,d,e,f,g,h,i,j,k,l){a.profile={},a.selectedTab=0,a.selectedTabText="Personality Profile",a.activeProfileSummary=0,a.activeProfileContent=0,a.profile.analysis="",a.profileContent="",a.publicProfile=!1,a.showHelpLink=!1,a.mobileHelpLink=!1,a.analysisError=!1,a.analysisErrorContent=null,i.analysisLoaded=!1,i.profileContentCharts=null,i.profileAnalysis=null,i.tabResizeFlag=0,a.currDate=new Date,a.personalityVideos={scientist:"https://www.youtube.com/watch?v=WJrEKUP0Rys&feature=youtu.be",ambassador:"https://www.youtube.com/watch?v=osIJWk6-m_4&feature=youtu.be",pioneer:"https://www.youtube.com/watch?v=MFQHpCjMx5g&feature=youtu.be",peacemaker:"https://www.youtube.com/watch?v=JOs4j017Sxw&feature=youtu.be",influencer:"https://www.youtube.com/watch?v=kn3E93nATro&feature=youtu.be",strategist:"https://www.youtube.com/watch?v=6jB8YzrIdAc&feature=youtu.be",instructor:"https://www.youtube.com/watch?v=bdMLEK8MxGk&feature=youtu.be",catalyst:"https://www.youtube.com/watch?v=mmT8iYVmd_Y&feature=youtu.be",navigator:"https://www.youtube.com/watch?v=-EVhn_BVhFQ&feature=youtu.be",pragmatist:"https://www.youtube.com/watch?v=a6_FbC2RSKw&feature=youtu.be",connector:"https://www.youtube.com/watch?v=lOSV-AN6al8&feature=youtu.be",architect:"https://www.youtube.com/watch?v=pYrRKr6YCts&feature=youtu.be",ally:"https://www.youtube.com/watch?v=owh4bv73_vk&feature=youtu.be",researcher:"https://www.youtube.com/watch?v=wJtx_x_hlUs&feature=youtu.be",toughtender:"https://www.youtube.com/watch?v=EBKYMYVoSjA&feature=youtu.be",visionary:"https://www.youtube.com/watch?v=l6EV0Q_sKhg&feature=youtu.be"},a.updateTab=function(b,c,d,e,f,g){a.selectedTab=b,a.selectedTabText=c,a.activeProfileSummary=d,a.activeProfileContent=d,jQuery("body").find('div[data-id="profile-tabs"]').removeClass("menuShow").addClass("menuHide"),e===!0&&jQuery("html, body").animate({scrollTop:$("body").find(".x-container.profile-tab-wrapper").position().top}),f===!0?a.showHelpLink=!0:a.showHelpLink=!1,g===!0&&(a.mobileHelpLink=!0),g===!1&&(a.mobileHelpLink=!1)};var m=window.location.href,n=(m.substring(m.indexOf("#")+1).replace(/\//g,"").split("?")[1],m.split("?")[0].split("/")),o=n[n.length-1];a.setOptions=function(c){a.page=c;var d=j.getParam("email"),e=j.getParam("cemail");null!=d&&(k.set("memEmail",d),a.page="adminProfileView"),null!=e?a.page="candidateProfileView":k.remove("candidateEmail","candidateID"),"adminProfileView"===a.page?(a.userEmail=k.get("memEmail"),a.getProfileAnalysis()):"candidateProfileView"===a.page?(a.userID=k.get("candidateID"),a.getProfileAnalysis()):"publicProfile"===a.page?(jQuery(window).width()<768?(a.selectedTab=0,a.mobileHelpLink=!0):a.selectedTab=8,a.getProfileAnalysisPublic()):"spCertificate"===a.page?(jQuery(window).width()<768?(a.selectedTab=0,a.mobileHelpLink=!0):a.selectedTab=8,a.getSpCertificateAnalysis()):i.profileReady===!0?(a.getLoggedInUserEmail=k.get("loggegdInProfile"),a.defaultEmail=a.getLoggedInUserEmail.member.email,a.getProfileAnalysis()):b(function(){a.getLoggedInUserEmail=k.get("loggegdInProfile"),a.defaultEmail=a.getLoggedInUserEmail.member.email,a.getProfileAnalysis()},1e3)},i.openPdfView=function(b,c,d){a.clickedItem=c,a.sp_profileName=d,l.open({template:b,scope:a,className:"ngdialog-theme-default ngdialog-clearBg"})};var p=jQuery("html").hasClass("ie")?!0:!1,q=p?2500:1e3;a.$on("ngDialog.opened",function(c,d){a.nameofUser=k.get("loggegdInProfile"),a.sp_name="undefined"==typeof a.sp_profileName||null==a.sp_profileName?a.nameofUser.member.name:a.sp_profileName,b(function(){j.printPdfProfile({holder:".printVersion",cssName:"sp-profile-pdf.css",url:"/sp/pdf/generatePdf",extraParam:"SP-Profile-"+a.sp_name.replace(" ","-"),obj:a.clickedItem})},q)}),i.$on("pdfGenerated",function(b,c){return"object"!=typeof c.obj?!1:(c.obj.generatingPdf=!1,a.urlRedirect=c.url,a.sp_profileName=null,void $(".ngdialog").removeClass("ngdialog-clearBg"))}),a.showInfoBox=function(a,c){var d=jQuery("body").find('div[data-box="'+a+'"]'),e="undefined"!=typeof jQuery("body").find('div[data-box="'+a+'"]').attr("data-extraheight")?!0:!1,f="undefined"!=typeof jQuery("body").find('div[data-box="'+a+'"]').attr("data-width")?!0:!1,g=jQuery("body").find('div[data-box="'+a+'"]').parent(),h=jQuery(g).outerHeight(),i=jQuery(g).outerWidth(),j=jQuery("body").find(".chart-box-cols:first-child").outerHeight(),k=parseInt(jQuery("body").find(".chart-box-cols.right .motivation-wrapper").outerHeight()+jQuery("body").find(".chart-box-cols.right .decision-making-wrapper").outerHeight());c===!0?b(function(){d.css({height:jQuery(window).width()>767&&e?h+parseInt(j-k):h,width:f?"auto":i})},300):d.css({height:jQuery(window).width()>767&&e?h+parseInt(j-k):h,width:f?"auto":i}).addClass("active-info-box").removeClass("hide").fadeIn()},jQuery(window).resize(function(){jQuery("body").find(".active-info-box").length>0&&a.showInfoBox(jQuery("body").find(".active-info-box").attr("data-box"),!0),jQuery(window).width()>767&&(jQuery("body").find(".videoPopDialog").length||l.close("ngdialog1"))}),a.hideInfoBox=function(a){jQuery("body").find('div[data-box="'+a+'"]').addClass("hide").removeClass("active-info-box")},a.getProfileAnalysis=function(){var b,c={url:"/sp/signedIn/getAnalysisFull",data:$.param({email:"undefined"==typeof a.userEmail||null===a.userEmail?a.defaultEmail:a.userEmail})},d={url:"/sp/hiring/getAnalysisFull",data:$.param({userId:a.userID})};b="candidateProfileView"===a.page?k.get(d.data.split("=")[1]):k.get(c.data.split("=")[1]),null===b?h.getAjaxResponse("candidateProfileView"===a.page?d:c).then(function(b){"true"===b.Success?("candidateProfileView"===a.page?k.set(d.data.split("=")[1],b):k.set(c.data.split("=")[1],b),a.profile.analysis=b.Analysis,a.profileContent=b,a.video1=a.personalityVideos[a.profileContent["profile.analysis.mapped.Primary.personalityType"].replace(/ /g,"").replace(/&/g,"").toLowerCase()],a.video2=a.personalityVideos[a.profileContent["profile.analysis.mapped.UnderPressure.personalityType"].replace(/ /g,"").replace(/&/g,"").toLowerCase()],i.profileContentCharts=b,i.profileAnalysis=b.Analysis,i.analysisLoaded=!0,setTimeout(function(){jQuery(window).width()>767?i.setBoxSizes(".charbox-wrapper",".chart-box-cols"):jQuery("body").find(".chart-box-cols").removeAttr("style")},500)):(a.analysisError=!0,a.analysisErrorContent=b.error,i.analysisLoaded=!1,i.profileContentCharts=null,i.profileAnalysis=null)}):(a.profile.analysis=b.Analysis,a.profileContent=b,a.video1=a.personalityVideos[a.profileContent["profile.analysis.mapped.Primary.personalityType"].replace(/ /g,"").replace(/&/g,"").toLowerCase()],a.video2=a.personalityVideos[a.profileContent["profile.analysis.mapped.UnderPressure.personalityType"].replace(/ /g,"").replace(/&/g,"").toLowerCase()],i.profileContentCharts=b,i.profileAnalysis=b.Analysis,i.analysisLoaded=!0,setTimeout(function(){jQuery(window).width()>767?i.setBoxSizes(".charbox-wrapper",".chart-box-cols"):jQuery("body").find(".chart-box-cols").removeAttr("style")},500))},a.getProfileAnalysisPublic=function(){h.getAjaxResponse({url:"/sp/profilePublic/"+o}).then(function(b){"true"===b.Success?(a.profile.analysis=b.Analysis,a.profileContent=b,a.userDetails=b.user,i.analysisLoaded=!0,setTimeout(function(){jQuery(window).width()>767?i.setBoxSizes(".charbox-wrapper",".chart-box-cols"):jQuery("body").find(".chart-box-cols").removeAttr("style")},500)):(i.analysisLoaded=!1,window.location.href="/?status=404")})},a.getSpCertificateAnalysis=function(){h.getAjaxResponse({url:"/sp/spCertificate/"+o}).then(function(b){"true"===b.Success?(a.userDetails=b.user,a.showSpProfile="undefined"!=typeof b.Analysis?!0:!1,a.showSpProfile&&(a.profile.analysis=b.Analysis,a.profileContent=b,i.analysisLoaded=!0,setTimeout(function(){jQuery(window).width()>767?i.setBoxSizes(".charbox-wrapper",".chart-box-cols"):jQuery("body").find(".chart-box-cols").removeAttr("style")},500))):(i.analysisLoaded=!1,window.location.href="/?status=404")})},jQuery(window).resize(function(){jQuery(window).width()>767?setTimeout(function(){i.setBoxSizes(".charbox-wrapper",".chart-box-cols")},50):jQuery("body").find(".chart-box-cols").removeAttr("style"),jQuery(window).width()<768&&8===a.selectedTab&&0===i.tabResizeFlag?b(function(){a.updateTab(0,"Personality Profile",0,!1,!0,!0)},100):i.tabResizeFlag=1}),i.updateBoxSizes=function(){jQuery(window).width()>767?setTimeout(function(){i.setBoxSizes(".charbox-wrapper",".chart-box-cols")},50):jQuery("body").find(".chart-box-cols").removeAttr("style")},i.updateBoxSizesTimer=function(){b(function(){i.updateBoxSizes()},1e3)},a.videoPopUp=function(b){a.videoUrl=b,l.open({template:"/sp/support/videoPopUp",scope:a})},a.videoCall=function(){a.videoSrc=a.videoUrl;var c;if(/youtube/g.test(a.videoSrc))c="youtube";else if(/vimeo/g.test(a.videoSrc)){c="vimeo";var d=a.videoSrc.split("?")[0].split("/");a.videoSrc="https://vimeo.com/"+d[parseInt(d.length-1)]}else c="html5";setTimeout(function(){videojs(document.getElementById("vid1"),{autoplay:!1,techOrder:[c],src:a.videoSrc},function(){a.videoReady=!0,this.on("ended",function(){var a=this;a.trigger("loadstart"),b(function(){a.posterImage.show()},500)}),this.on("timeupdate",function(){var a=this.currentTime(),b=this.remainingTime();a>0&&this.bigPlayButton.hide(),0===b&&this.bigPlayButton.show()})})},500)},a.showInfoBoxMobile=function(b,c){a.winScreenHeight=jQuery(window).height()+"px",a.infoBoxTab=b;var d,e=c;if(/youtube/g.test(e))d="youtube";else if(/vimeo/g.test(e)){d="vimeo";var f=e.split("?")[0].split("/");e="https://vimeo.com/"+f[parseInt(f.length-1)]}else d="html5";a.setupVideo=function(){setTimeout(function(){videojs(document.getElementById("vid1"),{autoplay:!1,techOrder:[d],src:e},function(){a.videoReady=!0})},500)},a.videoPlayBtn=function(){jQuery("#vid1")[0].player.play()},l.open({template:"/sp/resources/html/profile/mobile-info-box.html",scope:a})}}angular.module("spApp").controller("profileMainController",profileMainController),profileMainController.$inject=["$scope","$timeout","$element","$attrs","$http","ProfileDataService","userDataService","ajaxService","$rootScope","sharedProperties","$localStorage","ngDialog"];
function profilePersonalityController(a,b,c,d){a.inProfile={activeProfileContent:0,activeProfileSummary:0,primary:{label:"Primary personality"},secondry:{label:"Personality under pressure"}},a.toggleProfile=function(b){a.inProfile.activeProfileSummary=b,a.inProfile.activeProfileContent=b},a.showSection=function(b,c,d){d.preventDefault(),"p"===c?a.inProfile.primary.section=b:a.inProfile.secondry.section=b}}angular.module("spApp").controller("profilePersonalityController",profilePersonalityController),profilePersonalityController.$inject=["$scope","$http","$element","$attrs"];
function profileListController(a,b,c,d,e,f,g,h,i){function j(){b.getAjaxResponse({url:H.config.getProfileData,data:$.param({name:i.get("groupname")})}).then(function(a){if("true"===a.Success)H.profileList=a.groupInfo||[],H.responseRecieved=!0,H.profileList.memberSummaryList.length&&H.order(H.pageSetting.lastPredicate,H.pageSetting.lastReverse);else if(null!=a.error){H.responseRecieved=!0;var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function k(a,b){H.pageSetting.lastPredicate=a,H.pageSetting.lastReverse=b,H.profileList.memberSummaryList=c("orderBy")(H.profileList.memberSummaryList,H.pageSetting.lastPredicate,H.pageSetting.lastReverse)}function l(){H.pageSetting.oneTime&&(m(),H.pageSetting.oneTime=!1)}function m(){b.getAjaxResponse({url:H.config.getAllMembers}).then(function(a){if("true"===a.Success){var b=a.memberList;angular.forEach(b,function(a,c){(""===b[c].firstName&&""===b[c].lastName||"undefined"!=typeof H.profileList.groupLead&&null!==H.profileList.groupLead&&b[c].email===H.profileList.groupLead.email)&&delete b[c]}),b=$.grep(b,function(a){return a}),H.fullEmailList=angular.copy(b),angular.forEach(H.profileList.memberSummaryList,function(a,c){for(var d=0;d<b.length;d++)a.user.email===b[d].email&&b.splice(d,1)}),H.allEmails=angular.copy(b)}})}function n(a,b){H.pageSetting.lastPredicate=b.predicate,H.pageSetting.lastReverse=b.reverse,g.toggleFilterClick(a,H.pageSetting.lastPredicate),H.order(H.pageSetting.lastPredicate,H.pageSetting.lastReverse)}function o(){H.callGetAllMembers(),H.errorNotification.selectGroupLead=!1,e.open({template:H.config.groupLeadDialog,scope:a})}function p(a,c){return"undefined"==typeof c||""===c?(H.errorNotification.selectGroupLead=!0,!0):void b.getAjaxResponse({url:H.config.addMember,data:$.param({name:a,memberEmail:c,isGroupLead:!0})}).then(function(a){if("true"===a.Success){H.profileList.groupLead=a.member.user;for(var b=0;b<H.profileList.memberSummaryList.length;b++)if(H.profileList.memberSummaryList[b].user.email===a.member.user.email){H.profileList.memberSummaryList.splice(b,1);break}g.spilceIndexWithBreak(H.allEmails,"email",a.member.user.email),!H.alltoggle&&(H.negative=!1,H.pageSetting.userEmail.email=[]),H.negative&&H.checkAll(),e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.profile.updateMessage")})}else if(null!=a.error){var c="";for(var d in a.error)c=a.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function q(){e.open({template:H.config.removeGroupLeadDialog,scope:a})}function r(a,c){var d=c;b.getAjaxResponse({url:H.config.removeGroupLead,data:$.param({name:a,groupLeadEmail:d})}).then(function(a){"true"===a.Success?(H.pageSetting.oneTime=!0,H.getProfileData(),H.callGetAllMembers(),e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.profile.removeGroupL")})):null!=a.error&&$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.profile.removeGroupLError")})})}function s(a,b){i.set("memEmail",a),b===!0&&i.set("spProfileTab",!0),window.location.href="/sp/admin/account/member/details?email="+a}function t(a){var b=$(a.currentTarget).closest(".memprofile").find(".addMemberAnchor");$("html, body").animate({scrollTop:$(b).offset().top-50},"slow")}function u(){!H.alltoggle&&(H.negative=!1,H.pageSetting.userEmail.email=[]),H.negative&&H.checkAll(),h.$broadcast("handleBroadcast")}function v(a,c,d){var e=c.email,f=angular.element(a.currentTarget);d=d,b.getAjaxResponse({url:H.config.removeMember,data:$.param({name:H.profileList.name,memberEmail:e,isGroupLead:d})}).then(function(a){if("true"===a.Success){if(d)H.allEmails.push(H.profileList.groupLead),H.profileList.groupLead=null;else for(var b=0;b<H.profileList.memberSummaryList.length;b++)if(H.profileList.memberSummaryList[b].user.email===e){H.allEmails.push(H.profileList.memberSummaryList[b].user),H.profileList.memberSummaryList.splice(b,1);break}f.scope().moreadvance=!f.scope().moreadvance,$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.profile.deleteMessage")}),!H.alltoggle&&(H.negative=!1,H.pageSetting.userEmail.email=[]),H.negative&&H.checkAll()}else if(null!=a.error){var c="";for(var g in a.error)c=a.error[g];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:c})}})}function w(){H.callGetAllMembers(),e.open({template:H.config.certainDeleteDialog,scope:a})}function x(a){var c=[];$.each(a,function(b,d){c.push(a[b].email)});var d={url:H.config.removeMember,data:$.param({memberEmail:c.toString(),name:H.profileList.name})};b.getAjaxResponse(d).then(function(b){if("true"===b.Success){if(a.length){var d=angular.copy(H.profileList.memberSummaryList);angular.forEach(H.profileList.memberSummaryList,function(b,c){for(var e=0;e<a.length;e++)b.user.email===a[e].email&&(H.allEmails.push(H.profileList.memberSummaryList[c].user),delete d[c])}),H.profileList.memberSummaryList=$.grep(d,function(a){return a}),"undefined"!=typeof H.profileList.groupLead&&null!==H.profileList.groupLead&&-1!==c.indexOf(H.profileList.groupLead.email)&&(H.allEmails.push(H.profileList.groupLead),H.profileList.groupLead=null),e.close("ngdialog1"),H.pageSetting.userEmail.email=[],!H.alltoggle&&(H.negative=!1,H.pageSetting.userEmail.email=[]),H.negative&&H.checkAll(),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.profile.deleteMessage")})}}else if(null!=b.error){var f="";for(var g in b.error)f=b.error[g];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:f})}})}function y(){H.checkedAll=!H.checkedAll,H.negative?(H.pageSetting.userEmail.email=H.profileList.memberSummaryList.map(function(a){return{email:a.user.email,name:a.user.name,title:a.user.title}}),H.profileList.groupLead&&H.pageSetting.userEmail.email.push({email:H.profileList.groupLead.email,name:H.profileList.groupLead.name,title:H.profileList.groupLead.title})):H.pageSetting.userEmail.email=[]}function z(){return H.profileList.groupLead?1:0}function A(){H.errornewGroup=!1,H.errornewEmptyGroup=!1,e.open({template:H.config.renameGroupDialog,scope:a}),H.newGroupSelector=H.profileList.name}function B(a,c){return""===a?(H.errornewEmptyGroup=!0,!0):a===c?(e.close("ngdialog1"),!0):void b.getAjaxResponse({url:H.config.updateName,data:$.param({name:a,oldName:c})}).then(function(b){"true"===b.Success?(H.profileList.name=a,i.set("groupname",a),e.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:h.pullInterNationalization("admin.group.profile.updateGroupNameMessage")})):null!=b.error&&(H.errornewGroup=!0)})}function C(){e.open({template:H.config.deleteGroupDialog,scope:a})}function D(a){b.getAjaxResponse({url:H.config.deleteGroup,data:$.param({name:a})}).then(function(a){if("true"===a.Success)e.close("ngdialog1"),i.remove("groupname"),d.go("group");else if(null!=a.error){var b="";for(var c in a.error)b=a.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:b})}})}function E(){var a=H.profileList.memberSummaryList.map(function(a){return{email:a.user.email,name:a.user.name,title:a.user.title}});H.profileList.groupLead&&a.push({email:H.profileList.groupLead.email,name:H.profileList.groupLead.name,title:H.profileList.groupLead.title}),a.length&&h.notificationEmailPoP(a)}function F(){H.alltoggle=!1,H.checkedAll&&(H.negative=!H.negative,H.checkedAll=!H.checkedAll)}function G(a,b){H.pageSetting=angular.copy(H.originalpageSetting);var c=$(".profileHolder");c.find(".heading h4").removeClass("reverseon").removeClass("on"),c.find(".heading h4:eq(0)").addClass("on")}var H=this;H.profileList=[],H.fullEmailList=[],H.allEmails=[],H.checkedAll=!1,H.negative=!1,H.alltoggle=!1,H.responseRecieved=!1,H.config={getProfileData:"/sp/admin/group/groupDetails",getAllMembers:"/sp/admin/member",addMember:"/sp/admin/group/addMember",groupLeadDialog:"/sp/admin/group/assignGroupLead",removeGroupLeadDialog:"/sp/admin/group/removeGroupLead",removeGroupLead:"/sp/admin/group/removeGroupLead",removeMember:"/sp/admin/group/removeMember",certainDeleteDialog:"/sp/admin/member/deleteConfirmationGrp",renameGroupDialog:"/sp/admin/group/renameGroup",updateName:"/sp/admin/group/updateName",deleteGroupDialog:"/sp/admin/group/deleteGroup",deleteGroup:"/sp/admin/group/delete"},H.pageSetting={pageSize:10,intialPageSize:10,userEmail:{email:[]},lastPredicate:"user.name",lastReverse:!1,textSearching:"",disabledInfinite:!1,checkedAll:!1,oneTime:!0},H.originalpageSetting=angular.copy(H.pageSetting),H.errorNotification={errornewGroup:!1,errornewEmptyGroup:!1,selectGroupLead:!1},H.getProfileData=j,H.order=k,H.callGetAllMembers=l,H.active=n,H.assignGroupLead=o,H.assignNewGroup=p,H.removeGroupLead=q,H.removeGL=r,H.memberTakeAway=s,H.showFocus=t,H.confirmDelete=v,H.certainDelete=w,H.renamePopup=A,H.deletePopup=C,H.deleteUsers=x,H.actionToClear=u,H.checkAll=y,H.countLead=z,H.renameGroup=B,H.deleteFullGroup=D,H.allEmailPop=E,H.checkUncheck=F,H.resetCounter=G,function(){null!==i.get("spProfileTab")&&i.remove("spProfileTab")}()}angular.module("spApp").controller("profileListController",profileListController),profileListController.$inject=["$scope","ajaxService","$filter","$state","ngDialog","$timeout","sharedProperties","$rootScope","$localStorage"];
function pulseController(a,b,c,d,e,f,g){function h(a){b.getAjaxResponse({url:O.config.getPulseRequest}).then(function(a){if("true"===a.Success)if(O.getPulseRequestResponse=a.pulseResults,O.pulseNameIdMap=a.question,O.showDefault=O.getPulseRequestResponse.length?!0:!1,O.showDefault){for(var b=0;b<O.getPulseRequestResponse.length;b++)for(var c=0;c<O.pulseNameIdMap.length;c++)if(O.pulseNameIdMap[c].id===O.getPulseRequestResponse[b].pulseQuestionSetId){var d=O.executingPulseDropDown.indexOf(O.pulseNameIdMap[c].name);-1!==d?O.pulseRequestResponse[O.pulseNameIdMap[c].name].push(O.getPulseRequestResponse[b]):(O.executingPulseDropDown.push(O.pulseNameIdMap[c].name),O.pulseRequestResponse[O.pulseNameIdMap[c].name]=[],O.pulseRequestResponse[O.pulseNameIdMap[c].name].push(O.getPulseRequestResponse[b])),!O.startingPointFound&&O.getPulseRequestResponse[b].inProgress&&(O.startingPointFound=!0,O.objectIndex=O.pulseNameIdMap[c].name,O.inProgressObject.push(O.objectIndex),O.inProgressObject.push(O.getPulseRequestResponse[b].id))}if(!O.objectIndex)for(var e=0;e<O.pulseNameIdMap.length;e++)O.pulseNameIdMap[e].id===O.getPulseRequestResponse[0].pulseQuestionSetId&&(O.objectIndex=O.pulseNameIdMap[e].name);O.questionSetStackquestionSetStack=O.objectIndex,O.defaultQuestionSetSelected(O.objectIndex),i(),O.getGroupData(),k(O.objectIndex,"false")}else O.getQuestionsSet(n);else if(null!=a.error){for(var f in a.error)O.errorMessage=a.error[f];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}})}function i(){O.dateList=[],O.storeAllIndex=[];for(var a=0;a<O.pulseRequestResponse[O.objectIndex].length;a++)O.dateList.push(O.pulseRequestResponse[O.objectIndex][a]),O.storeAllIndex.push(O.pulseRequestResponse[O.objectIndex][a].id);g(function(){O.groupCollector=0,O.selectedDate=O.dateList[0].id},0)}function j(){return O.groupName.length?!0:void b.getAjaxResponse({url:O.config.getGroupData}).then(function(a){"true"===a.Success&&(O.groupName=a.groupInfoList.length?O.createGroupName(a.groupInfoList):["All Groups"])})}function k(a,b){var c="";0!==O.groupIndex&&(c=O.groupName[O.groupIndex]),"undefined"!=typeof b&&"false"===b?(O.subsetRecord=null===O.pulseRequestResponse[a][O.dateIndex].pulseScore?O.fetchResult(O.pulseRequestResponse[a][O.dateIndex].id,c,a):O.pulseRequestResponse[a][O.dateIndex].pulseScore,null!=O.subsetRecord&&A(O.subsetRecord,0)):"undefined"!=typeof b&&"true"===b&&(O.subsetRecord=O.fetchResult(O.pulseRequestResponse[a][O.dateIndex].id,c,a))}function l(a){b.getAjaxResponse({url:O.config.getQuestionsSet}).then(function(b){if("true"===b.Success)O.questionSetStack=b.pulseQuestion,null!==a&&"function"==typeof a&&a();else if(null!=b.error){for(var c in b.error)O.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}})}function m(a,c,d){b.getAjaxResponse({url:O.config.fetchResult,data:$.param({pulseResultId:a,groupName:"All Groups"===c?"":c})}).then(function(a){if("true"===a.Success){if(""!==c)for(var b=0;b<O.pulseRequestResponse[d].length;b++)O.dateIndex!==b&&(O.pulseRequestResponse[d][b].pulseScore=null);O.pulseRequestResponse[d][O.dateIndex].pulseScore=a.pulseResults.pulseScore,O.pulseRequestResponse[d][O.dateIndex].numberOfRespondents=a.pulseResults.numberOfRespondents,O.pulseRequestResponse[d][O.dateIndex].numberOfMembers=a.pulseResults.numberOfMembers,O.subsetRecord=O.pulseRequestResponse[d][O.dateIndex].pulseScore,A(O.subsetRecord,0)}else if(null!=a.error){for(var e in a.error)O.errorMessage=a.error[e];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}})}function n(){O.questionSetStackquestionSetStack=O.questionSetStack[0].name,O.defaultQuestionSetSelected(O.questionSetStackquestionSetStack)}function o(){O.dateIndex=0,O.groupIndex=0,O.objectIndex=O.inProgressObject[0],O.questionSetStackquestionSetStack=O.objectIndex,O.defaultQuestionSetSelected(O.objectIndex),i(),O.getGroupData(),k(O.objectIndex,"false")}function p(){O.questionSetStack.length?q():O.getQuestionsSet(q)}function q(){O.showDefault=!1,O.defaultQuestionSetSelected(O.questionSetStack[0].id),O.questionSetStackquestionSetStack=O.questionSetStack[0],O.defaultDropIndex=0,O.inviteError=!1}function r(){O.showDefault=!0,O.questionSetStackquestionSetStack=O.objectIndex,O.questionDropChanged()}function s(a){O.groupName=["All Groups"];for(var b=0;b<a.length;b++)O.groupName.push(a[b].name);return O.groupName}function t(a,b){if(O.getQuestions(a),"undefined"!=typeof b)for(var c=0;c<O.questionSetStack.length;c++)if(O.questionSetStack[c].id===a.id){O.defaultDropIndex=c;break}}function u(a){O.questionList=[];var c=O.showDefault===!0?O.pulseRequestResponse[O.objectIndex][O.dateIndex].pulseQuestionSetId:a.id;b.getAjaxResponse({url:O.config.getQuestions,data:$.param({pulseQuestionSetId:c})}).then(function(a){if("true"===a.Success)O.questionList=a.pulseQuestion,O.questionSet(),O.showDefault||(O.pulseDrop=O.questionList.categoryKeys,g(function(){O.defaultPulseName=0},0),v(O.pulseDrop,0));else if(null!=a.error){for(var b in a.error)O.errorMessage=a.error[b];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}})}function v(a,b){a.length&&(O.activePulse=a[b],O.mapQuestionObject=O.questionList.questions[a[b]])}function w(){return O.defaultPulseName++,!0}function x(){return O.defaultPulseName--,!0}function y(a){v(O.pulseDrop,O.defaultPulseName)}function z(){"questions"in O.questionList&&(O.mapQuestionObject=O.questionList.questions[O.activePulse])}function A(a,b){O.kyz=Object.keys(a),O.kyz.length&&O.mapResponse(O.kyz[b])}function B(a,b){a in O.subsetRecord&&(O.activePulse=a,O.mapResponseObject=O.subsetRecord[a]);var c=$(".overall-score-list").find("li:eq("+b+")");$(".overall-score-list").find("li").removeClass("active"),c.length?$(".overall-score-list").find("li:eq("+b+")").addClass("active"):$(".overall-score-list").find("li:eq(0)").addClass("active"),O.questionSet()}function C(a){O.dateIndex=O.storeAllIndex.indexOf(this.selectedDate),k(O.objectIndex,"false")}function D(a){O.groupIndex=this.groupCollector,k(O.objectIndex,"true")}function E(){O.objectIndex=O.questionSetStackquestionSetStack,O.questionDropChanged()}function F(){O.dateIndex=0,O.groupIndex=0,O.defaultQuestionSetSelected(O.objectIndex),i(),O.getGroupData(),k(O.objectIndex,"false")}function G(a){return a?Object.keys(a):[]}function H(){c.open({template:O.config.startNewPulsePopDialog,scope:a})}function I(a){a.$valid?b.getAjaxResponse({url:O.config.startPulseFormSubmit,data:$.param({pulseQuestionSetId:a.pulse_category_questionsSet.$viewValue.id,startDate:a.startDate.$viewValue,endDate:a.endDate.$viewValue})}).then(function(a){if("true"===a.Success)window.location.reload();else if(null!=a.error){for(var b in a.error)O.errorMessage=a.error[b];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}}):O.inviteError=!0}function J(a,d){b.getAjaxResponse({url:O.config.cancelPulse,data:$.param({pulseRequestId:a,saveResults:d})}).then(function(a){if("true"===a.Success)window.location.reload();else if(null!=a.error){c.close("ngdialog1");for(var b in a.error)O.errorMessage=a.error[b];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}})}function K(b){O.idToPass=b,c.open({template:O.config.pulseReminderDialog,scope:a})}function L(b){O.idToCancel=b,c.open({template:O.config.cancelSpDilaog,scope:a})}function M(a){b.getAjaxResponse({url:O.config.pulseSendReminder,data:$.param({pulseRequestId:a})}).then(function(a){if("true"===a.Success)c.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ban-circle",message:"Sent Successfully"});else if(null!=a.error){c.close("ngdialog1");for(var b in a.error)O.errorMessage=a.error[b];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:O.errorMessage})}})}function N(){for(var a=0;a<O.questionSetStack.length;a++)if(O.questionSetStack[a].id===O.questionSetStackquestionSetStack)return O.questionSetStack[a].name}var O=this;O.getPulseRequestResponse=[],O.dateList=[],O.kyz=[],O.mapQuestionObject=[],O.subsetRecord="",O.activePulse="",O.lastGroup="",O.dateIndex=0,O.groupIndex=0,O.objectIndex=0,O.groupName=[],O.inviteError=!1,O.hideStart=!1,O.questionSetStack=[],O.selectedDate="",O.groupCollector="";var P=new Date;O.fromDate=new Date,O.endDate=P.setDate(P.getDate()+1),O.maxDate=P.setDate(P.getDate()+14),O.executingPulseDropDown=[],O.startingPointFound=!1,O.pulseRequestResponse={},O.defaultDropIndex=0,O.inProgressObject=[],O.config={getPulseRequest:"/sp/pulse/getRequests",getGroupData:"/sp/admin/group/all",getQuestionsSet:"/sp/pulse/getQuestionSets",fetchResult:"/sp/pulse/getScore",getQuestions:"/sp/pulse/getQuestions",startNewPulsePopDialog:"/sp/pulse/startNewPulse",startPulseFormSubmit:"/sp/pulse/start",cancelPulse:"/sp/pulse/cancelPulse",pulseReminderDialog:"/sp/pulse/pulseReminder",cancelSpDilaog:"/sp/pulse/cancelSP",pulseSendReminder:"/sp/pulse/sendReminder"},O.getPulseRequest=h,O.getGroupData=j,O.getQuestionsSet=l,O.fetchResult=m,O.resetToInProgress=o,O.preChangeMode=p,O.resultMode=r,O.createGroupName=s,O.defaultQuestionSetSelected=t,O.getQuestions=u,O.increment=w,O.decrement=x,O.defaultPulse=y,O.questionSet=z,O.mapResponse=B,O.dateChanged=C,O.groupChanged=D,O.questionSetChanged=E,O.questionDropChanged=F,O.notSorted=G,O.startNewPulsePop=H,O.startPulseFormSubmit=I,O.cancelPulse=J,O.sendReminderPop=K,O.cancelPop=L,O.pulseSendReminder=M,O.seletedPulseName=N}function pulseQuestionController(a,b,c,d){function e(){b.getAjaxResponse({url:r.config.startQuestion,data:$.param({pulseRequestId:c.getParam("pulseRequestId")})}).then(function(a){"true"===a.Success?(r.getQuestion=a.pulseQuestion,r.categoryQuestion=Object.keys(r.getQuestion.questions),r.createQuestionSet()):null!=a.error&&(window.location.href="/sp/linkExpired")})}function f(){r.questionSet=r.getAllQuestionSet(r.getQuestion.questions),r.createSetsToDisplay(r.questionSet,r.getQuestion.questions)}function g(a){return Object.keys(a)}function h(a,b){r.createSubset=[];for(var c=0;c<a.length;c++)if(a[c]in b)if(b[a[c]].length>r.questionMaxSize)r.spliceArray(b[a[c]],r.questionMaxSize,a[c]);else{var d=r.createAnswerSheet(b[a[c]].length);r.createSubset.push({name:a[c],result:b[a[c]],answer:d,sectionNumber:r.categoryQuestion.indexOf(a[c])+1,lengthQuestion:""}),r.keyNameToPrint.push(a[c])}r.startRepeat=angular.copy(r.createSubset)}function i(a){for(var b=[],c=0;a>c;c++)b.push(null);return b}function j(a,b,c){if(r.startRepeat[a].answer[c]=b,"undefined"!=typeof r.errorScope&&r.errorScope.length)for(var d=$(".pulse-question-list"),e=0;e<r.errorScope.length;e++)null!=r.startRepeat[r.currentIndex].answer[r.errorScope[e]]&&d.find("li.realState:eq("+r.errorScope[e]+")").removeClass("showError")}function k(a,b,c){for(var d=0;d<a.length;d+=b){r.temparray=a.slice(d,d+b);var e=r.createAnswerSheet(r.temparray.length);r.createSubset.push({name:c,lengthQuestion:"",result:r.temparray,answer:e,sectionNumber:r.categoryQuestion.indexOf(c)+1,subSection:Math.floor(d/r.questionMaxSize)+1,total:Math.ceil(a.length/r.questionMaxSize)}),r.keyNameToPrint.push(c)}}function l(a,b,c){if(c){var d=r.startRepeat[a].answer;r.errorScope=[];for(var e=0;e<d.length;e++)null===d[e]&&r.errorScope.push(e);r.errorScope.length?r.showError(r.errorScope,a):r.currentIndex=b}else r.currentIndex=b}function m(a,b){var c=$(".pulse-question-list");c.find("li.realState").removeClass("showError");for(var d=0;d<a.length;d++)c.find("li.realState:eq("+a[d]+")").addClass("showError")}function n(a,b,c){var d=r.startRepeat[a].answer[c];return null!=d&&d===b?!0:!1}function o(a){var b=r.startRepeat[a].answer;r.errorScope=[];for(var c=0;c<b.length;c++)null===b[c]&&r.errorScope.push(c);r.errorScope.length?r.showError(r.errorScope,a):r.callSubmit()}function p(){r.clubResult=[];for(var a=0;a<r.startRepeat.length;a++)r.isItAlreadyInArray(r.clubResult,r.startRepeat[a])&&r.clubResult.push({categoryName:r.startRepeat[a].name,questionSelectionIndex:r.startRepeat[a].answer});b.getAjaxResponse({url:r.config.callSubmit,data:r.clubResult,headers:{"Content-Type":"application/json"}}).then(function(a){if("true"===a.Success)d.set("pulseDone","true"),window.location.href="/sp";else if(null!=a.error){for(var b in a.error)r.errorMessage=a.error[b];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:r.errorMessage})}})}function q(a,b){if(a.length){for(var c=0;c<a.length;c++)if(b.name===a[c].categoryName)return r.clubResult[c].questionSelectionIndex=r.clubResult[c].questionSelectionIndex.concat(b.answer),!1;return!0}return!0}var r=this;r.getQuestion=[],r.currentIndex=0,r.questionMaxSize=5,r.keyNameToPrint=[],r.clubResult=[],r.config={startQuestion:"/sp/pulse/getQuestions",callSubmit:"/sp/pulseUser/saveAssessment?pulseRequestId="+c.getParam("pulseRequestId")},r.startQuestion=e,r.createQuestionSet=f,r.getAllQuestionSet=g,r.createSetsToDisplay=h,r.createAnswerSheet=i,r.inputStyleCheck=j,r.spliceArray=k,r.setIndex=l,r.showError=m,r.isItChecked=n,r.submitRequest=o,r.callSubmit=p,r.isItAlreadyInArray=q}angular.module("spApp").controller("pulseController",pulseController),angular.module("spApp").controller("pulseQuestionController",pulseQuestionController),pulseController.$inject=["$scope","ajaxService","ngDialog","sharedProperties","$rootScope","$localStorage","$timeout"],pulseQuestionController.$inject=["$scope","ajaxService","sharedProperties","$localStorage"];
function relationshipManagerController(a,b,c,d,e,f,g,h,i){a.selectedCandidate={},a.memberMasterList={},a.validMemberList=[],a.candidateMasterList={},a.validCandidateList=[],a.selectedMemberDetails={},a.candidateProfileDetails={},a.memberProfileDetails={},a.candidateAdvise={},a.memberAdvise={},a.candidateAvoidFormatted=[],a.resultTabs={},a.personalityFlags=[],a.cachedAdvisorData=[],a.showMemberListingWidget={},a.selectedMember={},a.selectedMember.left={},a.selectedMember.right={},a.showMemberListingWidget.right=!1,a.showMemberListingWidget.left=!1,a.memberSelected={},a.memberSelected.right=!1,a.memberSelected.left=!1,a.showContent=!1,a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,a.serverException=!1,a.mobileControls={},a.mobileControls.display=!1,a.memberCountException=!1,a.sResizeFlag=0,a.lResizeFlag=0,a.viewMode={list:!0,chart:!1},a.cachedUSerEmails=null,a.matchPercent={},a.matchPercent.primary=!0,a.switchToUser1=!0,a.winWidth=jQuery(window).width(),jQuery(window).resize(function(){a.winWidth=jQuery(window).width()}),a.getAllMemberDetails=function(){f.getAjaxResponse({url:"/sp/relationship/getMembers"}).then(function(b){if("true"===b.Success)a.serverException=!1,a.memberMasterList=b.memberList,a.memberMasterList.length>1?(a.memberCountException=!1,jQuery.each(a.memberMasterList,function(b,c){var d=jQuery.extend({},a.memberMasterList[b],{selectedMember:!1,selectedSide:{left:!1,right:!1}});a.validMemberList.push(d)})):a.memberCountException=!0;else{a.compareToolReset(),a.serverException=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.showDropdownWidget=function(b){"right"===b?(a.showMemberListingWidget.right=!a.showMemberListingWidget.right,a.showMemberListingWidget.left=!1,e(function(){jQuery(window).width()<768&&jQuery("html, body").animate({scrollTop:325})},300)):(a.showMemberListingWidget.left=!a.showMemberListingWidget.left,a.showMemberListingWidget.right=!1,e(function(){jQuery(window).width()<768&&jQuery("html, body").animate({scrollTop:325})},300))},a.compareToolReset=function(){a.viewMode={list:!0,chart:!1},a.switchToUser1=!0,a.cachedUSerEmails=null,a.matchPercent.primary=!0,a.resultTabs={},a.personalityFlags=[],a.cachedAdvisorData=[],a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,a.showContent=!1,a.showMemberListingWidget.right=!1,a.memberSelected.right=!1,a.showMemberListingWidget.left=!1,a.memberSelected.left=!1,a.selectedMember.left.email=null,a.selectedMember.right.email=null,a.mobileControls.display=!1,jQuery.each(a.validMemberList,function(b){a.validMemberList[b].selectedMember=!1,a.validMemberList[b].selectedSide.right=!1,a.validMemberList[b].selectedSide.left=!1}),a.sResizeFlag=0,a.lResizeFlag=0,a.winWidth<768?g.setBoxSizes("#dd-wrap",".dd","full"):jQuery("body").find("#dd-wrap").find(".dd").removeAttr("style")},a.updateCompareMember=function(b,c){a.cachedUSerEmails=null,a.showMemberListingWidget[c]=!1,a.personalityFlags=[],a.cachedAdvisorData=[],a.resultTabs.leftSelected=0,a.resultTabs.rightSelected=0,jQuery.each(a.validMemberList,function(b){a.validMemberList[b].selectedSide[c]===!0&&(a.validMemberList[b].selectedMember=!1,a.validMemberList[b].selectedSide[c]=!1)}),jQuery.each(a.validMemberList,function(d){return a.validMemberList[d].email===b?(a.validMemberList[d].selectedMember=!0,a.validMemberList[d].selectedSide[c]=!0,a.memberSelected[c]=!0,a.selectedMemberDetails[c]=a.validMemberList[parseInt(d)],a.selectedMember[c].email=a.validMemberList[parseInt(d)].email,void(a.viewMode.list===!0?a.compareMembers(a.selectedMember.left.email,a.selectedMember.right.email,{user1PersonalityType:"Primary",user2PersonalityType:"Primary"}):a.getCompareCharts(a.selectedMember.left.email,a.selectedMember.right.email))):void 0}),a.winWidth<768&&e(function(){g.setBoxSizes("#dd-wrap",".dd","full")},300)},a.compareMembers=function(b,c,d){if(a.memberSelected.left&&a.memberSelected.right){var e=$.extend({},{user1:b,user2:c},d),h={url:"/sp/relationship/getReport",data:$.param(e).replace(/%40/g,"@")};f.getAjaxResponse(h).then(function(b){if("true"===b.Success)a.serverException=!1,a.cacheResults(e,b),a.winWidth>767?(a.showContent=!0,a.mobileControls.display=!1):(a.showContent=!1,a.mobileControls.display=!0,a.switchToUser1=!0,setTimeout(function(){g.setBoxSizes(".mobile-tabs",".mtabs")},200)),setTimeout(function(){g.setBoxSizes(".results-wrapper",".results-content")},500);else{a.compareToolReset(),a.serverException=!0;for(var c in b.error)a.errorMessage=b.error[c]}})}},a.chartsException=!1,a.getCompareCharts=function(b,c){a.memberSelected.left&&a.memberSelected.right&&(a.matchPercent.primary=!0,null===a.cachedUSerEmails&&(a.cachedUSerEmails=b+c,f.getAjaxResponse({url:"/sp/relationship/getCompare",data:$.param({user1:b,user2:c})}).then(function(b){if("true"===b.Success)a.chartsException=!1,a.compareProfileData=b,a.cacheCompareResponse=b,a.candidateProfileDetails=b.Analysis1,a.memberProfileDetails=b.Analysis2,a.matchPercentageData=b.matchPercent,a.winWidth>767?(a.showContent=!0,a.mobileControls.display=!1):(a.showContent=!1,a.mobileControls.display=!0,a.switchToUser1=!0,setTimeout(function(){g.setBoxSizes(".mobile-tabs",".mtabs")},200)),a.personalityFormatted={candidate:{primary:g.pullInterNationalization("profileKeys."+a.candidateProfileDetails.personality.Primary.personalityType.trim()),pressure:g.pullInterNationalization("profileKeys."+a.candidateProfileDetails.personality.UnderPressure.personalityType.trim())},member:{primary:g.pullInterNationalization("profileKeys."+a.memberProfileDetails.personality.Primary.personalityType.trim()),pressure:g.pullInterNationalization("profileKeys."+a.memberProfileDetails.personality.UnderPressure.personalityType.trim())}},e(function(){a.dataAvailablity=!0},300);else{a.chartsException=!0,a.compareToolReset();for(var c in b.error)a.chartsExceptionMsg=b.error[c]}})))},a.cacheResults=function(b,c){var d=b.user1PersonalityType.charAt(0)+b.user2PersonalityType.charAt(0),e=$.inArray(d,a.personalityFlags);-1===e&&(a.personalityFlags.push(d),a.cachedAdvisorData[d]=c,a.candidateAdvise=a.cachedAdvisorData[d].primary,a.memberAdvise=a.cachedAdvisorData[d].secondary)},a.formatList=function(a){if("undefined"!=typeof a){var b=a.split("</p>"),c="",d=0;if(jQuery.each(b,function(a){"undefined"!=typeof b[a].split("<p>")[1]&&(c+="<li>"+b[a].split("<p>")[1]+"</li>"),d++}),d===b.length)return c}},a.changeContentTabs=function(b,c){"left"===b?a.resultTabs.leftSelected=parseInt(c):a.resultTabs.rightSelected=parseInt(c);var d=0===a.resultTabs.leftSelected?"Primary":"UnderPressure",f=0===a.resultTabs.rightSelected?"Primary":"UnderPressure",g=d.charAt(0)+f.charAt(0),h=$.inArray(g,a.personalityFlags);-1===h?e(function(){a.compareMembers(a.selectedMember.left.email,a.selectedMember.right.email,{user1PersonalityType:d,user2PersonalityType:f})},100):(a.candidateAdvise=a.cachedAdvisorData[g].primary,a.memberAdvise=a.cachedAdvisorData[g].secondary)},a.changeViewMode=function(b){a.showMemberListingWidget.right=!1,a.showMemberListingWidget.left=!1,"list"===b?(a.viewMode.list=!0,a.viewMode.chart=!1,a.compareMembers(a.selectedMember.left.email,a.selectedMember.right.email,{user1PersonalityType:"Primary",user2PersonalityType:"Primary"})):(a.viewMode.list=!1,a.viewMode.chart=!0,a.getCompareCharts(a.selectedMember.left.email,a.selectedMember.right.email))},a.initCandiateCompare=function(){a.getAllMemberDetails()},a.getMobileReport=function(b){a.winScreenHeight=jQuery(window).height()+"px",b===!0?i.open({template:"/sp/resources/html/tools/relationship-manager/mobile-report.html",scope:a}):i.open({template:"/sp/resources/html/tools/relationship-manager/mobile-charts.html",scope:a})},jQuery(window).resize(function(){a.winWidth<768?(a.memberSelected.left&&a.memberSelected.right&&0===a.sResizeFlag&&a.mobileControls.display===!1&&(a.showContent=!1,e(function(){a.mobileControls.display=!0},500),a.sResizeFlag=1,a.lResizeFlag=0),g.setBoxSizes("#dd-wrap",".dd","full")):(a.memberSelected.left&&a.memberSelected.right&&0===a.lResizeFlag&&(e(function(){a.viewMode.list=!0,a.viewMode.chart=!1,a.cachedUSerEmails=null,a.mobileControls.display=!1,a.showContent=!0},500),a.sResizeFlag=0,a.lResizeFlag=1),i.close("ngdialog1"),jQuery("body").find("#dd-wrap").find(".dd").removeAttr("style"))}),a.printPage=function(a){a===!0&&setTimeout(function(){window.print()},500)},a.initCandiateCompare()}angular.module("spApp").controller("relationshipManagerController",relationshipManagerController),relationshipManagerController.$inject=["$scope","$element","$attrs","$http","$timeout","ajaxService","$rootScope","$localStorage","ngDialog"];
function renewBusinessController(a,b,c,d,e,f,g,h){a.priceFormatter=function(a){if("undefined"!=typeof a&&""!==a&&null!==a){var b="$"+a.toFixed(2);return b}},a.product={},a.promoApplied=!1,a.finalAmount=0,a.promo={},a.updatedPromoDetails={},a.updateCC={},a.activeMembers=0,a.renewBusiness={},a.account={},a.promoFormSubmitted=!1,a.promoError={},a.promoError.error=!1,a.dialogStatus={},a.timeout=0,a.submitDisabled=!1,a.pricing={},a.bBox={},a.getMemberCount=function(){g.getAjaxResponse({url:"/sp/admin/account/getActiveMemberCount"}).then(function(b){if("true"===b.Success)a.activeMembers=b.activeMembers,a.account.numAccounts=b.activeMembers;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getAcccountInfo=function(){g.getAjaxResponse({url:"/sp/admin/account/businessAccountDetails"}).then(function(b){if("true"===b.Success)a.accountDetails=b,a.renewalDate=b.account.productInfo.renewalDate;else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getPlanInfo=function(){g.getAjaxResponse({url:"/sp/signup/getProducts",data:$.param({productType:"BUSINESS"})}).then(function(b){if("true"===b.Success)a.products=b.products,$.each(a.products,function(b){"YEARLY"===a.products[b].validityType&&(a.annualProduct=a.products[b],a.pricing.yearlyUnitPrice=a.products[b].unitPrice),"MONTHLY"===a.products[b].validityType&&(a.monthlyProduct=a.products[b],a.pricing.monthlyUnitPrice=a.products[b].unitPrice)}),a.getProductInfo();else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})},a.getProductInfo=function(){g.getAjaxResponse({url:"/sp/admin/account/getCurrentBusinessProductInfo"}).then(function(b){if("true"===b.Success){a.productInfoError=!1,a.submitDisabled=!1,a.product=b.product;var c="YEARLY"===a.product.validityType?12:1;a.bBox.yearly="YEARLY"===a.product.validityType?!0:!1,"undefined"!=typeof b.promotion&&"undefined"!=typeof b.promotion.unitPrice?(a.product.updatedUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.promoApplied=!0,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.activeMembers*c).toFixed(2)):(a.product.updatedUnitPrice=parseFloat("YEARLY"===a.product.validityType?a.pricing.yearlyUnitPrice:a.pricing.monthlyUnitPrice).toFixed(2),a.promoApplied=!1,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.activeMembers*c).toFixed(2))}else a.productInfoError=!0,a.submitDisabled=!0,jQuery("html, body").animate({scrollTop:0})})},a.paymentCalculator=function(b,c,d,e){var g=parseInt(b),h=0,i="YEARLY"===d?12:1;"undefined"==typeof e?g>=20&&"add"===c?(h=parseInt(g+1),a.account.numAccounts=h,a.finalAmount=parseFloat(a.product.updatedUnitPrice*h*i).toFixed(2)):g>20&&"remove"===c?(h=parseInt(g-1),a.account.numAccounts=h,a.finalAmount=parseFloat(a.product.updatedUnitPrice*h*i).toFixed(2)):(a.account.numAccounts=parseInt(a.account.minEmployee),a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.account.numAccounts*i).toFixed(2)):/^[0-9\b]+$/g.test(b)&&b>=20?(a.account.numAccounts=b,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.account.numAccounts*i).toFixed(2),f.cancel(a.timeout)):(f.cancel(a.timeout),a.timeout=f(function(){a.account.numAccounts=20,a.finalAmount=parseFloat(20*a.product.updatedUnitPrice*i).toFixed(2)},1500))},a.activatePromo=function(b){if(a.promoFormSubmitted=!1,a.promoError.error=!1,"undefined"!=typeof b){var c={code:b,productId:a.product.id};g.getAjaxResponse({url:"/sp/signup/promotion",data:$.param(c)}).then(function(b){"true"===b.Success?(a.updatedPromoDetails=b.promotion,a.pricing.promoUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.product.updatedUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.promoApplied=!0,a.bBox.yearly===!0?a.finalAmount=parseFloat(a.pricing.promoUnitPrice*a.account.numAccounts*12).toFixed(2):a.finalAmount=parseFloat(a.pricing.promoUnitPrice*a.account.numAccounts*1).toFixed(2)):(a.promoError.error=!0,a.promoError.msg=b.error)})}else a.promoFormSubmitted=!0},a.renewIndividualSubscription=function(b){var c,d={},f=0;for(var h in b)("default"===b[h]||"default1"===b[h])&&f++;d=a.promoApplied===!1?{productId:a.product.id}:{productId:a.product.id,promotionId:a.updatedPromoDetails.id},a.updateCC.$valid&&0===f?(c=$.extend({},d,b),g.getAjaxResponse({url:"/sp/admin/account/renewAccount",data:$.param(c)}).then(function(b){if("true"===b.Success)a.dialogStatus.title="Subscription Renewal",a.dialogStatus.content="Subscription renewed successfully.",e.open({template:"/sp/resources/html/admin/account/success-dialog.html",scope:a});else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})):a.updateCC.submitted=!0},a.deactivatePromo=function(){a.pricing.promoUnitPrice=0,a.bBox.yearly===!0?a.finalAmount=parseFloat(a.pricing.yearlyUnitPrice*a.account.numAccounts*12).toFixed(2):a.finalAmount=parseFloat(a.pricing.monthlyUnitPrice*a.account.numAccounts*1).toFixed(2),a.promoApplied=!1,a.promo.code=null},a.cancelRedirect=function(){window.location="/sp/admin/account/business"},a.renewBusinessSubscription=function(b){var c,d={};d=a.promoApplied===!1?{numAccounts:a.account.numAccounts,productId:a.product.id}:{numAccounts:a.account.numAccounts,productId:a.product.id,promotionId:a.updatedPromoDetails.id},a.submitDisabled===!1&&(a.renewBusiness.$valid?(c=$.extend({},d,b),g.getAjaxResponse({url:"/sp/admin/account/renewAccount",data:$.param(c)}).then(function(b){if("true"===b.Success)a.dialogStatus.title="Subscription Renewal",a.dialogStatus.content="Subscription renewed successfully.",e.open({template:"/sp/resources/html/admin/account/success-dialog.html",scope:a});else{a.submitException=!0;for(var c in b.error)a.submitExceptionMsg=b.error[c];jQuery("html, body").animate({scrollTop:0})}})):a.renewBusiness.submitted=!0)},a.changePlan=function(b){"YEARLY"===b?(a.product.updatedUnitPrice=a.promoApplied===!0?a.pricing.promoUnitPrice:a.pricing.yearlyUnitPrice,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.account.numAccounts*12).toFixed(2),a.bBox.yearly=!0):(a.product.updatedUnitPrice=a.promoApplied===!0?a.pricing.promoUnitPrice:a.pricing.monthlyUnitPrice,a.finalAmount=parseFloat(a.product.updatedUnitPrice*a.account.numAccounts*1).toFixed(2),a.bBox.yearly=!1)},a.initRenewBusiness=function(){a.getMemberCount(),a.getPlanInfo(),a.getAcccountInfo()},a.initRenewBusiness()}angular.module("spApp").controller("Additional Member Accounts",renewBusinessController),renewBusinessController.$inject=["$scope","$element","$attrs","$http","ngDialog","$timeout","ajaxService","$rootScope"];
function renewIndividualController(a,b,c,d,e,f,g){a.product={},a.promoApplied=!1,a.finalAmount=0,a.promo={},a.updatedPromoDetails={},a.updateCC={},a.dialogStatus={},a.promoError={},a.serverError=!1,a.getIndividualAccountInfo=function(){g.getAjaxResponse({url:"/sp/admin/account/individualAccountDetails"}).then(function(b){"true"===b.Success&&(a.accountInfo=b)})},a.getProductInfo=function(){g.getAjaxResponse({url:"/sp/admin/account/getCurrentIndividualProductInfo"}).then(function(b){"true"===b.Success&&(a.product=b.product,"undefined"!=typeof b.promotion&&"undefined"!=typeof b.promotion.unitPrice?(a.product.updatedUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.promoApplied=!0,a.finalAmount=parseFloat(12*a.product.updatedUnitPrice).toFixed(2)):(a.product.updatedUnitPrice=parseFloat(b.product.unitPrice).toFixed(2),a.promoApplied=!1,a.finalAmount=parseFloat(12*a.product.updatedUnitPrice).toFixed(2)))})},a.activatePromo=function(b){if(a.promoDetails.$valid){var c={code:b,productId:a.product.id};g.getAjaxResponse({url:"/sp/signup/promotion",data:$.param(c)}).then(function(b){"true"===b.Success?(a.updatedPromoDetails=b.promotion,a.product.updatedUnitPrice=parseFloat(b.promotion.unitPrice).toFixed(2),a.promoApplied=!0,a.finalAmount=parseFloat(12*a.product.updatedUnitPrice).toFixed(2)):(a.promoError.error=!0,a.promoError.msg=b.error,a.promo.code=null,f(function(){a.promoError.error=!1},1500))})}else a.promoFormSubmitted=!0,a.promo.code=null},a.renewIndividualSubscription=function(b){var c,d={},f=0;for(var h in b)("default"===b[h]||"default1"===b[h])&&f++;d=a.promoApplied===!1?{numAccounts:1,productId:a.product.id}:{numAccounts:1,productId:a.product.id,promotionId:a.updatedPromoDetails.id},a.updateCC.$valid&&0===f?(c=$.extend({},d,b),g.getAjaxResponse({url:"/sp/admin/account/renewAccount",data:$.param(c)}).then(function(b){if("true"===b.Success)a.dialogStatus.title="Subscription Renewal",a.dialogStatus.content="Subscription renewed successfully.",e.open({template:"/sp/resources/html/admin/account/success-dialog.html",scope:a});else{a.serverError=!0;for(var c in b.error)a.errorMessage=b.error[c]}})):a.updateCC.submitted=!0},a.deactivatePromo=function(){a.product.updatedUnitPrice=parseFloat(a.product.unitPrice).toFixed(2),a.finalAmount=parseFloat(12*a.product.updatedUnitPrice).toFixed(2),a.promoApplied=!1,a.promo.code=null},a.cancelRedirect=function(){window.location="/sp/admin/account/individual"},a.initRenewIndividual=function(){a.getIndividualAccountInfo(),a.getProductInfo()},a.initRenewIndividual()}angular.module("spApp").controller("Additional Member Accounts",renewIndividualController),renewIndividualController.$inject=["$scope","$element","$attrs","$http","ngDialog","$timeout","ajaxService"];
function resumeController(a,b,c,d,e,f,g,h,i){a.createFormError=!1,a.itemPositioned=[],a.linkedIn=[],a.profileContentDisplay=!0,a.contactInfo=!1,a.coverLetter=!1,a.displayCover=!1,a.profile={},a.manageResumeLength=0;var j=new Date;a.fullmonth=j.getMonth(),a.fullyear=j.getFullYear(),a.getAllResume=function(){b.getAjaxResponse({url:"/sp/resume/getAllResumes",method:"get"}).then(function(b){if("true"===b.Success)a.resultStat=b.resume,a.firstView=a.resultStat.length?"true":"false",a.order("formattedDate",!0);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.openDialogCreateResume=function(){c.open({template:"/sp/createResume",scope:a})},a.order=function(b,c){a.resultStat=d("orderBy")(a.resultStat,b,c)},a.active=function(b){e.toggleFilterClick(b,a.currentPredicate)},a.createResumeDetail=function(b){if(a.createFormError=!1,b.$valid){i.remove("firstViewEnable"),i.set("createResumeContent",{resumeLength:a.resultStat.length,createResumeRoleName:b.createResumeRole.$viewValue,createResumeProviderName:b.createResumeName.$viewValue});i.get("profileDone");window.location.href="/sp/resume/resumeDetailsView"}else a.createFormError=!0},a.openMessage=function(b){a.displayName=b,c.open({template:"/sp/messageAll",scope:a})},a.openPreview=function(a){var b=window.open("/sp/resume/getResume/"+a,"_blank","width=700,height=700,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no");"Microsoft Internet Explorer"===navigator.appName?window.print():b.print(),b.window.focus()},a.openPreviewNew=function(a){window.open("/sp/resume/getResume/"+a,"_blank")},a.displayResume=function(){a.openDialogCreateResume()},a.createLayout=function(){var b=$("ul.ordering-tool-list"),c=b.find("li").outerHeight();b.find("li").outerWidth();return"undefined"!=typeof a.pckry&&b.packery("destroy"),this.initialize=function(d){a.pckry=b.packery({itemSelector:".handleMe",rowHeight:c,transitionDuration:0});var e=a.pckry.packery("getItemElements");a.initialItem=e;for(var f=0,g=e.length;g>f;f++){var h=new Draggabilly(e[f],{axis:"y",containment:b,grid:[0,35]});a.pckry.packery("bindDraggabillyEvents",h)}a.pckry.packery("on","dragItemPositioned",this.orderItems)},this.orderItems=function(){for(var b=a.pckry.packery("getItemElements"),c=0;c<b.length;c++){var d=$(b[c]).attr("tabindex");a.itemPositioned[c]=d,a.profileContent[d].id=c,$(b[c]).attr("data-module-index",c)}a.$apply()},this.resetOrder=function(){for(var b=a.pckry.packery("getItemElements"),d=0,e=0;e<b.length;e++){var f=$(b[e]);a.itemPositioned[e]=f.attr("tabindex"),f.attr("data-module-index",e),f.css("top",d),d+=c,a.profileContent[e].id=e}},this.destroy=function(b){a.pckry.packery("reloadItems"),this.resetOrder()},this},a.callReorder=function(){a.initAside.destroy(),a.destroyProfileContent()},a.destroyProfileContent=function(){for(var b=0;b<a.profileContent.length;b++)a.profileContent[b].status=!0},a.displatyContent=function(){a.initAside=new a.createLayout,a.initAside.initialize(!0)},a.previewPDF=function(c){var d=$("."+c).html(),e=$(".htmlFront").html(),f="",g=$(".graphs").html(),i=$(".coverLetterPDF").find(".messageContent").html();if(this.displayCover&&""!==i){var j=h.nl2br(i);$(".htmlCover").find(".messageContent").html(j),f=$(".htmlCover").html()}var k={content:encodeURIComponent('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="/sp/resources/css/css-min/bootstrap.min.css"><link type="text/css" rel="stylesheet" href="/sp/resources/css/css-min/spResume.css"><script src="//use.typekit.net/ofk8xcu.js"></script><script> try {Typekit.load();} catch (e) {}</script></head><body class="sp-resume sp-resume-print-preview"><div class="container"><article class="resume-content">'+e+f+"<div>"+d+"</div>"+g+"</article></div></body></html>"),role:a.roleName,providerName:a.providerName};b.getAjaxResponse({url:"/sp/resume/previewResume",data:$.param(k)}).then(function(b){if("true"===b.Success)window.open(b.url,"_blank");else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.createResumeCall=function(c){var d=$("."+c).html(),e=$(".htmlFront").html(),f="",g=$(".graphs").html(),i=$(".coverLetterPDF").find(".messageContent").html();if(this.displayCover&&""!==i){var j=h.nl2br(i);$(".htmlCover").find(".messageContent").html(j),f=$(".htmlCover").html()}var k={content:encodeURIComponent('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="/sp/resources/css/css-min/bootstrap.min.css"><link type="text/css" rel="stylesheet" href="/sp/resources/css/css-min/spResume.css"><script src="//use.typekit.net/ofk8xcu.js"></script><script> try {Typekit.load();} catch (e) {}</script></head><body class="sp-resume sp-resume-print-preview"><div class="container"><article class="resume-content">'+e+f+"<div>"+d+"</div>"+g+"</article></div></body></html>"),role:a.roleName,providerName:a.providerName};b.getAjaxResponse({url:"/sp/resume/createResume",data:$.param(k)}).then(function(b){if("true"===b.Success)window.location.href="/sp/spResume",$.growl({icon:"glyphicon glyphicon-ok",message:"PDF Created"});else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.goBack=function(){window.location.href="/sp/connect/linkedin"},a.getProfileDetails=function(c){var d="";"undefined"!=typeof c?d={url:"/sp/linkedin/getProfileFull?updateProfile="+!0,method:"get"}:(a.getUserDetail(),d={url:"/sp/linkedin/getProfileFull",method:"get"}),b.getAjaxResponse(d).then(function(b){if("true"===b.Success)a.linkedIn=b.linkedProfile,i.set("profileDone",!0),a.mapToResponse(),"undefined"!=typeof b.otherProfileData&&(a.linkedIn.otherProfileData=b.otherProfileData),a.createNewMappingObject(a.linkedIn);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.mapToResponse=function(){a.searchContent=["summary","projects","positions","testScores","educations","certifications","courses","interests","skills","languages","volunteer","Organizations","Supported Organizations","honorsAwards","patents","publications"]},a.createNewMappingObject=function(b){a.profileContent=[],a.asideContent=[];for(var c=0,d=0;d<a.searchContent.length;d++)for(var e in b)if("otherProfileData"===e||"linkedProfile"===e)for(var g in b[e])a.searchContent[d]===g&&null!==b[e][g]&&(a.asideContent.push(a.searchContent[d]),a.profileContent.push({id:c,content:b[e][g],status:"true",type:angular.lowercase(g)}),c++);f(function(){a.displatyContent()},500)},a.changeStatusType=function(b,c){var d=angular.element(b.currentTarget),e=$(d).closest("li").attr("data-type");a.profileContent[c].status=!a.profileContent[c].status,$(d).closest("li").attr("data-type",e=!e)},a.getUserDetail=function(){b.getAjaxResponse({url:"/sp/admin/user"}).then(function(b){if("true"===b.Success){a.userProfileDetail=b.profileForm,a.userProfileAddress=b.address,a.userSummary=b.userSummary;var c=i.get("createResumeContent");null!==c&&(a.roleName=c.createResumeRoleName,a.providerName=c.createResumeProviderName,a.manageResumeLength=c.resumeLength)}else if(null!=b.error){for(var d in b.error)a.errorMessage=b.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.coverletterfn=function(){this.displayCover?(this.contactInfo=!1,this.profileContentDisplay=!1,this.coverLetter=!0):(this.contactInfo=!1,this.profileContentDisplay=!0,this.coverLetter=!1)},a.deleteResumePop=function(b){a.deleteResumeId=b,c.open({template:"/sp/resume/deleteConfirmation",scope:a})},a.deleteResume=function(){b.getAjaxResponse({url:"/sp/resume/delete/"+a.deleteResumeId,method:"get"}).then(function(b){if("true"===b.Success)e.spliceIndex(a.resultStat,"id",a.deleteResumeId),c.close("ngdialog1"),a.firstView=a.resultStat.length?"true":"false",$.growl({icon:"glyphicon glyphicon-ok",message:"Delete Successfully"});else if(null!=b.error){c.close("ngdialog1");for(var d in b.error)a.errorMessage=b.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})},a.messageItem=function(d){if(a.errpat=!1,d.$valid){var e=$(".shareResume").serialize();b.getAjaxResponse({url:"/sp/resume/share",data:e}).then(function(b){if("true"===b.Success)c.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",message:"Resume Shared"});else if(null!=b.error){for(var d in b.error)a.errorMessage=b.error[d];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})}else a.errpat=!0},a.callGraphs=function(){b.getAjaxResponse({url:"/sp/signedIn/getAnalysisFull"}).then(function(b){if("true"===b.Success)a.profile.analysis=b.Analysis,a.profileContentGraphs=b,g.save(b);else if(null!=b.error){for(var c in b.error)a.errorMessage=b.error[c];$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong>",message:a.errorMessage})}})}}angular.module("spApp").controller("resumeController",resumeController),resumeController.$inject=["$scope","ajaxService","ngDialog","$filter","sharedProperties","$timeout","ProfileDataService","$rootScope","$localStorage"];
function spectrumController(a,b,c,d,e,f){function g(a){b.getAjaxResponse({url:u.config.getProfileBalance,data:$.param({groupName:"undefined"==typeof a?"":a})}).then(function(b){"true"===b.Success?(u.profileChartNoData=null!=b.profileBalance?b.profileBalance.personalityBalanceAllZero:!0,u.total=u.completedProfile(u.allGroups,"undefined"==typeof a?"":a),u.profileChartNoData||(u.groupDetail=b.profileBalance.personalityBalances,u.genderBalance=b.profileBalance.genderBalance,u.genderData=Object.keys(u.genderBalance),u.ageBalances=b.profileBalance.ageBalances,u.chartDataReady=!0,u.userScreen&&d(function(){u.userDetail=u.groupDetail[0].usersId,u.profileBalanceSelect=u.groupDetail[0].personalityType},0))):null!=b.error&&(u.groupDetail=[],u.profileChartNoData=!0,u.total=u.completedProfile(u.allGroups,"undefined"==typeof a?"":a))})}function h(a,b){var c={};if(""===b||null===b)c={total:"undefined"!=typeof u.allMembers?u.allMembers.totalMember:0,valid:"undefined"!=typeof u.allMembers?u.allMembers.validMembers:0};else for(var d in a)if(d===b){c={total:a[d].totalMember,valid:a[d].validMembers};break}return c}function i(a,b){var c={};if(""===b||null===b)c={total:"undefined"!=typeof u.candidateAllRoles?u.candidateAllRoles.totalMembers:0,valid:"undefined"!=typeof u.candidateAllRoles?u.candidateAllRoles.validMembers:0};else for(var d in a)if(d===b){c={total:a[d].totalMembers,valid:a[d].validMembers};break}return c}function j(a){b.getAjaxResponse({url:u.config.allGroups}).then(function(b){"true"===b.Success?(u.allGroups=b.members,u.allMembers=b["All Groups"],u.groupRender=!0,null!==a&&"function"==typeof a&&a()):null!=b.error&&(u.allGroups=[],u.groupRender=!0,u.allMembers={totalMember:0,validMembers:0})})}function k(a,b){for(var c in u.groupDetail)if(u.groupDetail[c].personalityType===a){u.userDetail=u.groupDetail[c].usersId,u.profileName=e.pullInterNationalization("spectrum."+u.groupDetail[c].personalityType),u.profileNumber=u.groupDetail[c].number,u.dimensionType=u.groupDetail[c].dimensionType,u.personalityDescription=u.groupDetail[c].personalityDescription,u.videoUrl=u.groupDetail[c].videoUrl;break}}function l(a,c){b.getAjaxResponse({url:u.config.learnerChart,data:$.param({groupName:"undefined"==typeof a?"":a})}).then(function(b){"true"===b.Success?(u.learnerChartData=b.learnerStatus.learnerStatusTrackerMap,u.fullObjectKeys=Object.keys(u.learnerChartData),u.modeSelected=Object.keys(u.learnerChartData)[1],u.detectData(u.modeSelected),u.learnerChartAvailable=!0,u.totalLearn=u.completedProfile(u.allGroups,"undefined"==typeof a?"":a),null!==c&&"function"==typeof c&&c()):null!=b.error&&(u.totalLearn=u.completedProfile(u.allGroups,"undefined"==typeof a?"":a))})}function m(a,c){b.getAjaxResponse({url:u.config.hiringInsights,data:$.param({role:"undefined"==typeof a?"":a})}).then(function(b){"true"===b.Success?(u.RadialChartData=b.hringFiterInsights.hiringInsightsMap,u.RadialfullObjectKeys=Object.keys(u.RadialChartData),u.RadialmodeSelected=Object.keys(u.RadialChartData)[1],u.RadialChartAvailable=!0,u.roleChanges=a,u.totalHiring=u.candidateProfileList(u.candidateRoles,"undefined"==typeof a?"":a),null!==c&&"function"==typeof c&&c()):null!=b.error&&(u.totalHiring=u.candidateProfileList(u.candidateRoles,"undefined"==typeof a?"":a))})}function n(a){b.getAjaxResponse({url:u.config.hiringRoles}).then(function(b){"true"===b.Success?(u.hiringRolesName=b.filterInsightsRoles,u.candidateRoles=b.hrProfileBalanceRoles,u.candidateAllRoles=b.hrProfileBalanceRolesAllRoles,u.candidateRender=!0,null!==a&&"function"==typeof a&&a()):null!=b.error&&(u.candidateRender=!0,u.hiringRolesName=[],u.candidateRoles=[],u.candidateAllRoles={totalMembers:0,validMembers:0})})}function o(a,c){b.getAjaxResponse({url:u.config.candidateProfileBalance,data:$.param({role:"undefined"==typeof a?"":a})}).then(function(b){"true"===b.Success?(u.candidateChartNoData=null!=b.hringFiterProfileBalance?b.hringFiterProfileBalance.personalityBalanceAllZero:!0,u.candidateDataReady=!0,u.candidateChartNoData||(u.groupCandidateDetail=b.hringFiterProfileBalance.personalityBalances,u.candidateScreen&&u.groupCandidateDetail.length&&d(function(){u.candidateDetail=u.groupCandidateDetail[0].usersId,u.candidateBalanceSelect=u.groupCandidateDetail[0].personalityType},0)),u.totalCan=u.candidateProfileList(u.candidateRoles,"undefined"==typeof a?"":a)):null!=b.error&&(u.groupCandidateDetail=[],u.candidateChartNoData=!0,u.candidateDataReady=!0,u.totalCan=u.candidateProfileList(u.candidateRoles,"undefined"==typeof a?"":a))})}function p(a,b){for(var c in this.groupCandidateDetail)if(this.groupCandidateDetail[c].personalityType===a){this.candidateDetail=this.groupCandidateDetail[c].usersId,this.candidateNumber=this.groupCandidateDetail[c].number,this.candidateName=e.pullInterNationalization("spectrum."+this.groupCandidateDetail[c].personalityType),this.candidatedimensionType=this.groupCandidateDetail[c].dimensionType,this.candidatepersonalityDescription=this.groupCandidateDetail[c].personalityDescription,this.candidatevideoUrl=this.groupCandidateDetail[c].videoUrl;break}}function q(b){a.$apply(function(){u.candidateScreen=!0,u.candidateDetail=b.userDetail,u.candidateName=b.name,u.candidateBalanceSelect=b.className,u.candidateNumber=b.number,u.candidatedimensionType=b.dimensionType,u.candidatepersonalityDescription=b.personalityDescription,u.candidatevideoUrl=b.videoUrl})}function r(b){a.$apply(function(){u.userScreen=!0,u.userDetail=b.userDetail,u.profileName=b.name,u.profileBalanceSelect=b.className,u.profileNumber=b.number,u.dimensionType=b.dimensionType,u.personalityDescription=b.personalityDescription,u.videoUrl=b.videoUrl})}function s(a){this.noLearnerData="undefined"==typeof a?!1:!!u.learnerChartData[a].graphs}function t(b){a.videoUrl=b,f.open({template:u.config.videoPopUpDialog,scope:a})}var u=this;u.groupDetail=[],u.chartDataReady=!1,u.groupRender=!1,u.userScreen=!1,u.userDetail=[],u.profileBalanceSelect="",u.learnerChartData=[],u.candidateScreen=!1,u.config={getProfileBalance:"/sp/spectrum/getProfileBalance",allGroups:"/sp/spectrum/groups/memberCount",learnerChart:"/sp/spectrum/getLearnerStatus",hiringInsights:"/sp/spectrum/getHiringInsights",hiringRoles:"/sp/spectrum/getHiringRoles",candidateProfileBalance:"/sp/spectrum/getHiringProfileBalance",videoPopUpDialog:"/sp/support/videoPopUp"},u.groupsCall=g,u.completedProfile=h,u.candidateProfileList=i,u.allGroups=j,u.profileBalanceChange=k,u.learnerChart=l,u.hiringRoles=m,u.hiringInsights=n,u.candidateProfileBalance=o,u.candidateBalanceChange=p,u.candidateUpdateFn=q,u.profileUpdateFn=r,u.detectData=s,u.videoPopUp=t,a.videoCall=function(){a.videoSrc=a.videoUrl;var b;if(/youtube/g.test(a.videoSrc))b="youtube";else if(/vimeo/g.test(a.videoSrc)){b="vimeo";var c=a.videoSrc.split("?")[0].split("/");a.videoSrc="https://vimeo.com/"+c[parseInt(c.length-1)]}else b="html5";setTimeout(function(){videojs(document.getElementById("vid1"),{autoplay:!1,techOrder:[b],src:a.videoSrc},function(){a.videoReady=!0,this.on("ended",function(){var a=this;a.trigger("loadstart"),d(function(){a.posterImage.show()},500)}),this.on("timeupdate",function(){var a=this.currentTime(),b=this.remainingTime();a>0&&this.bigPlayButton.hide(),0===b&&this.bigPlayButton.show()})})},500)}}angular.module("spApp").controller("spectrumController",spectrumController),spectrumController.$inject=["$scope","ajaxService","$localStorage","$timeout","$rootScope","ngDialog"],angular.module("spApp").directive("barChart",["$rootScope","$window",function(a,b){function c(a){for(var b=0,c=0;c<a.length;c++)b<a[c].number&&(b=a[c].number);return b}function d(a){d3.select(this).attr("class","bar barBright-"+a.className)}function e(a){d3.select(this).attr("class","bar bar-"+a.className)}function f(b){function c(b,e){null===b?e.forEach(function(a){c(a.personalityType,a)}):d.push({name:a.pullInterNationalization("spectrum."+b),className:b.toLowerCase(),number:e.number,userDetail:e.usersId,percent:e.percent,index:e.percent+b+e.number,dimensionType:e.dimensionType,personalityDescription:e.personalityDescription,videoUrl:e.videoUrl})}var d=[];return c(null,b),{children:d}}var g={restrict:"E",replace:!1,scope:{data:"=chartData",clickOperation:"=clickEvent",updateFn:"&"},link:function(a,b,g){var h=800,i=$("."+g.classBind),j=150,k={top:20,right:150,bottom:30,left:150},l=i.width()-k.left-k.right,m=i.height()-k.top-k.bottom,n=(d3.format(",d"),l+k.left+k.right),o=m+k.top+k.bottom,p="cubic-in-out",q=d3.select(b[0]).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+n+" "+o).attr("preserveAspectRatio","xMinYMin").attr("class","barChart").append("g").attr("transform","translate("+k.left+","+k.top+")"),r=$(".barChart"),s=(r.width()/r.height(),r.parent(),function(a,b,f){var g=d3.scale.linear().domain([0,d3.max(b,function(a){return 10*Math.ceil(a.number/10)})]).range([0,l-j]),i=d3.scale.ordinal().domain(d3.range(b.length)).rangeBands([0,m],.1),k=c(b);k=10*Math.ceil(k/10);for(var n=k/10,o=[],q=n;k>=q;q+=n)o.push(q);a.selectAll("g.axis").remove(),a.selectAll(".bar").remove();var r=d3.svg.axis().scale(g).orient("bottom").tickSize(1).tickPadding(3).tickValues(o).innerTickSize(6),s=d3.svg.axis().scale(i).orient("left").tickSize(1).tickPadding(6).tickFormat(function(a){return b[a].name});a.append("g").attr("class","x axis").transition().duration(h).ease(p).attr("transform","translate(0,"+m+")").call(r).selectAll("text").style("text-anchor","end").attr("dx","0em").attr("dy","1em").attr("x","3"),a.append("g").attr("class","y axis").call(s).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em"),a.select(".y").selectAll(".tick").data(b).attr("class",function(a,b){return a.number?"tick click":void 0}).on("click",function(a,b){a.number&&f.updateFn({callback:a})}),a.select(".y").selectAll(".tick line").attr("x2","-4"),a.select(".y").selectAll(".tick text").attr("y","-1"),a.select(".x").selectAll(".tick").each(function(a){0===a&&this.remove()});var t=a.selectAll(".bar").data(b);t.enter().append("g").attr("class",function(a){return"bar bar-"+a.className}).on("mouseout",e).on("mouseover",d).on("click",function(a){return f.clickOperation?void f.updateFn({callback:a}):!0}).attr("transform",function(a,b){return"translate(0,"+i(b)+")"}),t.append("rect").transition().duration(h).ease(p).attr("width",function(a){return a.number&&g(a.number)>15?g(a.number)-10:g(a.number)}).attr("height",20).attr("x",10),t.append("text").attr("x",function(a){return g(a.number)+(6+7*a.number.toString().length)}).attr("y",10).attr("dy",".35em").attr("text-anchor","end").text(function(a){return a.number?a.number:void 0}),t.exit().transition().style({opacity:0}).remove()});a.$watch("data",function(b,c){if("undefined"!=typeof a.data&&a.data.length){var d=f(a.data);s(q,d.children,a)}})}};return g}]),angular.module("spApp").directive("bubbleChart",["$parse","$rootScope","$window",function(a,b,c){function d(a){function c(a,e){null===a?e.forEach(function(a){c(a.personalityType,a)}):d.push({name:b.pullInterNationalization("spectrum."+a),className:a.toLowerCase(),number:e.number,userDetail:e.usersId,percent:e.percent,index:e.percent+a+e.number})}var d=[];return c(null,a),{children:d}}function e(a){d3.select(this).attr("class","node bubbleBright-"+a.className)}function f(a){d3.select(this).attr("class","node bubble-"+a.className)}c=$(window);var g={restrict:"E",replace:!1,scope:{data:"=chartData",clickOperation:"=clickEvent",updateFn:"&"},link:function(a,b,c){var g=800,h=200,i=240,j=$("."+c.classBind),k=j.width(),l=j.height(),m=(d3.format(",d"),d3.scale.ordinal().domain(["Sqoop","Pig","Apache","a","b","c","d","e","f","g"]).range(["steelblue","pink","lightgreen","violet","orangered","green","orange","skyblue","gray","aqua"]),d3.layout.pack().sort(null).size([k,l]).value(function(a){return a.percent}).padding(i)),n=d3.select(b[0]).append("svg").attr("width",k).attr("height",l).attr("viewBox","0 0 1148 470").attr("perserveAspectRatio","xMinYMid").attr("class","bubble"),o=$(".bubble"),p=(o.width()/o.height(),o.parent(),function(a,b){var c=b.data.length>4?40:1,i=a.selectAll(".node").data(m.nodes(d(b.data)).filter(function(a){return!a.children}),function(a){return a.index}),j=i.enter().append("g").on("mouseout",f).on("mouseover",e).on("click",function(a){return b.clickOperation?void b.updateFn({callback:a}):!0}).attr("class",function(a){return"node bubble-"+a.className}).attr("transform",function(a){a.x-Math.ceil(Math.random()),a.y;return"translate("+a.x+","+a.y+")"}).style("opacity",1);j.append("circle").attr("r",function(a){return 0}).transition().ease("elastic").attr("r",function(a){return parseInt(a.r+c,10)}),j.append("text").attr("dy","0.3em").attr("stroke","#fff").attr("class","bubblePercentage").style("text-anchor","middle").style("font-size",function(a){return a.r>100?"18px":"12px"}).text(function(a){var b="";return a.number&&(b=" ("+a.number+")"),a.name+b}),j.append("text").attr("dy","-0.8em").attr("dx","0.1em").attr("stroke","#fff").attr("class","bubbleName").style("font-size",function(a){return a.r>100?"20px":"14px"}).style("text-anchor","middle").text(function(a){return a.percent+"%"}),j.append("svg:image").attr("x",function(a){return a.r>100?-11:-9}).attr("y","1em").attr("width",function(a){return a.r>100?20:14}).attr("height",function(a){return a.r>100?20:14}).attr("xlink:href","resources/css/images/graphsPlus.png"),i.select("circle").transition().ease("elastic").duration(g).attr("r",function(a){return parseInt(a.r+c,10)}),i.exit().transition().duration(g+h).style("opacity",0).remove()});a.$watch("data",function(b,c){a.data.length&&p(n,a)})}};return g}]),angular.module("spApp").directive("pieChartsp",["$parse","$rootScope","$window",function(a,b,c){var d={restrict:"E",replace:!1,scope:{data:"=chartData",clickOperation:"=clickEvent"},link:function(a,c,d){var e=function(){for(var c={},d=[],e=[],f=["#f59f13","#eb6b10","#cc3300","#660000"],g=0,h=a.data.length;h>g;g++){var i=a.data[g];d.push(b.pullInterNationalization("spectrum.piechart."+i.ageCategory)),c[b.pullInterNationalization("spectrum.piechart."+i.ageCategory)]=i.percent,e.push(f[g])}c3.generate({bindto:"#ageRatioChart",data:{json:[c],keys:{value:d},type:"pie"},color:{pattern:e},legend:{item:{onclick:function(a){}}}})};a.$watch("data",function(b,c){"undefined"!=typeof a.data&&e()})}};return d}]),angular.module("spApp").directive("learnerChart",["$parse","$rootScope","$window","$filter",function(a,b,c,d){function e(a,b){switch(b){case"WEEK":return d("date")(new Date(a),"MMM")+" "+new Date(a).getDate();case"YEAR":return d("date")(new Date(a),"MMM")+" "+new Date(a).getFullYear();case"DAY":return(parseInt(a,10)+11)%12+1+(a>11?"PM":"AM");case"MONTH":return d("date")(new Date(a),"MMM")+" "+new Date(a).getDate()}}var f={restrict:"E",replace:!1,scope:{data:"=chartData",mode:"=selected"},link:function(a,b,c){var d={grouped:!1,position:function(a,b,c,d){var e=document.querySelector("#learnerChart").getBoundingClientRect().left,f=document.querySelector("#learnerChart g.c3-axis-y").getBoundingClientRect().right,g=document.getElementById("tooltip").parentNode.clientWidth,h=parseInt(d.getAttribute("cx"))+f-e-Math.floor(g/2),i=d.getAttribute("cy");return i=i-c-14,{top:i+5,left:h+5}},contents:function(a,b,c,d){var e,f,g,h,i=this,j=i.config,k=j.tooltip_format_title||b,l=(j.tooltip_format_name||function(a){return a},j.tooltip_format_value||c);for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=k?k(a[f].x):a[f].x,e="<div id='tooltip' class='d3-tip'>"),h=l(a[f].value,a[f].ratio,a[f].id,a[f].index),e+="<div class='c3-box-styling'>",e+="<div class='value'>"+h+"</div>",e+="<div class='title'>"+g+"</div>",e+="</div></div>");return e}},f={grouped:!0,contents:function(a,b,c,d){var e,f,g,h,i=this,j=i.config,k=j.tooltip_format_title||b,l=(j.tooltip_format_name||function(a){return a},j.tooltip_format_value||c);for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=k?k(a[f].x):a[f].x,e="<div id='tooltip' class='d3-tip'>"),h=l(a[f].value,a[f].ratio,a[f].id,a[f].index),e+="<div class='c3-box-styling'>",e+="<div class='value'>"+h+"</div>",e+="<div class='title'>"+g+"</div>",e+="</div></div>");return e}},g=$("html").hasClass("ie")?f:d,h=function(){var b=a.data,c=a.mode,d="undefined"!=typeof c?b[c].graphs:null,f=[],h=[];for(var i in d)f.push({date:e(i.replace(".","-").replace(".","-"),c),articlesRead:d[i]}),h.push(d[i]);c3.generate({bindto:"#learnerChart",data:{json:f,keys:{value:["articlesRead"]},type:"area"},size:{height:300},axis:{x:{tick:{format:function(a){return f[a].date},culling:{max:10}},padding:{left:.75,right:.75}},y:{show:!1}},point:{r:3,focus:{expand:{r:4}}},tooltip:g})};a.$watch("[mode,data]",function(a,b){h()},!0)}};return f}]),angular.module("spApp").directive("radialGraph",["$rootScope","$window",function(a,b){var c={restrict:"E",replace:!1,scope:{data:"=actual",expected:"=expected",labelshown:"=labeldisplay",rolechanges:"=rolechanges",selected:"=selected"},link:function(a,b,c){var d=100,e=12,f={left:0,right:0,top:0,bottom:0},g=d3.select(b[0]).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 "+(f.left+d+f.right)+" "+(f.top+d+f.bottom)).attr("preserveAspectRatio","xMidYMid meet").attr("class","radialGraph"),h=function(a,b){function c(a,c){a.attrTween("d",function(a){var d=d3.interpolate(a.endAngle,c);return function(c){return a.endAngle=d(c),j.text(b.data*b.expected),h(a)}})}a.selectAll("g text").remove(),a.selectAll("g .foreground").remove();var g=a.append("g").attr("transform","translate("+(f.left+d/2)+","+(f.top+d/2)+")"),h=d3.svg.arc().outerRadius(d/2).innerRadius(d/2-e).startAngle(0),i=2*Math.PI,j=g.append("text").text("0").attr("text-anchor","middle").attr("dx",0).attr("dy",10).attr("class","radial-actual"),k=(g.append("text").text(b.labelshown[0]).attr("text-anchor","middle").attr("dx","0").attr("dy","60").attr("class","progress-text"),g.append("path").datum({endAngle:i}).style("fill","#acacac").attr("d",h).attr("class","background"),g.append("path").datum({endAngle:0}).style("fill","#f06739").attr("d",h).attr("class","foreground")),l=i*b.data;k.transition().delay(200).duration(1500).call(c,l)};a.$watch("[data,rolechanges,selected]",function(b,c){h(g,a)},!0)}};return c}]);
function supportController(a,b,c,d){a.videoReady=!1,jQuery(function(a){if(a(".support-body").length){var c=a(".section-faq-header"),e=a(".nav-support-link-list"),f=a(".main-support-content"),g=a(".section-faq.defaultOpen"),h=(g.find(".section-faq-content").outerHeight(),g.find(".x-section-faq-content")),i=a(".mobileNavigationSupport"),j=window.location.href,k=d.getParam("submit");g.addClass("show"),a(".js_hostName").val(j+"?submit=support"),null!=k&&a.growl({icon:"glyphicon glyphicon-ok",message:"Message sent successfully"}),setTimeout(function(){c.css({WebkitTransition:"all 400ms ease-in-out",MozTransition:"all 400ms ease-in-out",MsTransition:"all 400ms ease-in-out",OTransition:"all 400ms ease-in-out",transition:"all 400ms ease-in-out"})},500),h.height("100%"),c.on("click",function(){var b=a(this),c=b.closest(".section-faq"),d=c.find(".x-section-faq-content"),e=d.outerHeight(),f=c.find(".section-faq-content").outerHeight();return b.hasClass("noAction")?!1:(e>1?d.height(0):d.height(f),void c.toggleClass("show"))}),a(".js_helpFormSubmit").on("click",function(b){var c=a(".js_message_type").val(),d=a(".js_textarea").val().length,e=a(".js_select_error"),f=a(".js_narrow_message");"-1"===c?e.addClass("support_show"):e.addClass("support_hide"),20>d?(a(".js_textarea").addClass("extra-spacing"),f.addClass("support_show")):(f.addClass("support_hide"),a(".js_textarea").removeClass("extra-spacing")),"-1"!==c&&d>19?a(".js_help_form").submit():b.preventDefault()}),e.find("li a").on("click",function(){var b=a(this),c=b.attr("data-list"),d=b.text();l(c,b),a(".mobileNavigationText").find(".selectedTabText").html(d)}),i.length&&i.find("li a").on("click",function(){var b=a(this),c=b.attr("data-list"),d=b.text();l(c,b),i.hasClass("menuShow")?i.removeClass("menuShow").addClass("menuHide"):i.removeClass("menuHide").addClass("menuShow"),e.find("li a").removeClass("active"),e.find("li a[data-list='"+c+"']").addClass("active"),a(".mobileNavigationText").find(".selectedTabText").html(d)});var l=function(a,b){e.find("li a").removeClass("active"),b.addClass("active"),f.find(".support-customer").removeClass("local-show"),f.find(".support-customer[data-tab='"+a+"']").addClass("local-show")},m=function(){var a=b.get("loggegdInProfile").member.roles,c=-1!==a.indexOf("Hiring")?!0:!1,d=-1!==a.indexOf("Administrator")?!0:!1,e=-1!==a.indexOf("AccountAdministrator")?!0:!1,g=-1!==a.indexOf("IndividualAccountAdministrator")?!0:!1;g?(f.find(".support-customer[data-tab='2'] .childAccount:eq(1)").addClass("local-show"),f.find(".support-customer[data-tab='2'] .childAccount:eq(0)").addClass("local-hide")):(f.find(".support-customer[data-tab='2'] .childAccount:eq(0)").addClass("local-show"),f.find(".support-customer[data-tab='2'] .childAccount:eq(1)").addClass("local-hide")),d&&f.find(".support-customer[data-tab='2'] .childAccount:eq(0) .adminFlag").addClass("local-show"),e&&f.find(".support-customer[data-tab='2'] .childAccount:eq(0) .accountAdminFlag").addClass("local-show"),c&&f.find(".support-customer[data-tab='1'] .hiring-section").addClass("local-show")};!function(){m(),a("textarea").focus(function(){this.placeholder===this.value&&(this.value="")}).blur(function(){""===this.value&&(this.value=this.placeholder)})}()}}),a.videoPopUp=function(b){a.videoUrl=b,c.open({template:"/sp/support/videoPopUp",scope:a})},a.videoCall=function(){a.videoSrc=a.videoUrl;var b;if(/youtube/g.test(a.videoSrc))b="youtube";else if(/vimeo/g.test(a.videoSrc)){b="vimeo";var c=a.videoSrc.split("?")[0].split("/");a.videoSrc="https://vimeo.com/"+c[parseInt(c.length-1)]}else b="html5";setTimeout(function(){videojs(document.getElementById("vid1"),{autoplay:!1,techOrder:[b],src:a.videoSrc},function(){a.videoReady=!0})},500)}}angular.module("spApp").controller("supportController",supportController),supportController.$inject=["$scope","$localStorage","ngDialog","sharedProperties"];
function validateImportedListController(a,b,c,d,e,f,g,h,i,j,k,l,m){a.memberList=[],a.masterMemberList=[],a.showfilter=!1,a.pageSize=200,a.intialPageSize=20,a.searchTag=[],a.hiringRoles=[],a.alldisplay=!1,a.filter={},a.tags=[],a.userEmail={email:[]},a.checkBox=[],a.submitDisabled=!1,a.allMembersEmailId=[],a.statusInclude=[],a.setEditMode=!1,a.userStatus=[],a.groupModule=[],a.masterGroupModule=[],a.textSearching="",a.mainGroupInfoList=[],a.checkedAll=!1,a.deleteUser=!1,a.deleteUserError=!1,a.updateGroup=!1,a.updateGroupError=!1,a.updateError="",a.EditGroupEmail="",a.archiveDialog={},a.archiveDialog.addHiring=!1,a.showArchive=!1,a.newDate={},a.totalRecords=0,a.totalConflicts=0,a.conflictException=!1,a.noEmailsError=!1,a.cancelRedirect=function(){window.location="/sp/tools/hiring/"},a.newDate.currentDay=new Date,a.newDate={year:a.newDate.currentDay.getFullYear(),month:a.newDate.currentDay.getMonth()+1,day:a.newDate.currentDay.getDate()},a.formatDate=function(a){if(null!==a&&"undefined"!==a){var b=a.split("-"),c={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},d=b[1],e=c[d.toString()]+" "+parseInt(b[2])+", "+parseInt(b[0]);return e}},a.today=a.formatDate(a.newDate.year+"-"+(a.newDate.month<9?"0"+a.newDate.month:a.newDate.month)+"-"+a.newDate.day),a.formatName=function(a){if(null!==a||"undefined"!==a){var b=a.split(", "),c=b[1]+" "+b[0];return c}},a.getMembersData=function(){var b={url:"/sp/hiring/multiInviteValidate",data:$.param({filesToProcess:m.get("files")}).replace(/%2C/g,",").replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(b){"true"===b.Success&&(a.masterMemberList=b.hiring.length?b.hiring:[],a.returnMemberList(a.pageSize),angular.forEach(b.hiring,function(b,c){a.allMembersEmailId.push(b.email)}),a.totalRecords=b.hiring.length,$.each(a.masterMemberList,function(b){("ALREADY_EXISTS"===a.masterMemberList[b].userStatus||"ALREADY_EXISTS_ARCHIVED"===a.masterMemberList[b].userStatus)&&a.totalConflicts++}),a.totalRecords>a.availableSubscriptions&&(a.candidateCountException=!0,a.removeCandidates=Math.abs(a.totalRecords-a.availableSubscriptions)),a.totalConflicts>0||a.totalRecords>a.availableSubscriptions?a.submitDisabled=!0:a.submitDisabled=!1)})},a.getCandidateAvailability=function(){f.getAjaxResponse({url:"/sp/hiring/getAvailableSubscriptions"}).then(function(b){"true"===b.Success&&(a.availableSubscriptions=b.availableHiringSubscripitons,setTimeout(function(){a.getMembersData()},200))})},a.enableAdvanceSection=function(a){$(a.currentTarget).closest(".complete-profile").find(".editable-section").show()},a.autoCompleteType=function(a){for(var b=[],c=0;c<a.length;c++)b.push({text:a[c]});return b},a.order=function(b,c){a.memberList=i("orderBy")(a.memberList,b,c)},a.loadTags=function(c){var d=b.defer();return d.resolve(a.getLoadSuggestion(c)),d.promise},a.getLoadSuggestion=function(b){for(var c=[],d=0;d<a.tagListArray.length;d++)angular.lowercase(a.tagListArray[d].text).indexOf(angular.lowercase(b))>-1&&c.push(a.tagListArray[d]);return c.slice(0,5)},a.tagAdded=function(b){a.searchTag.push(b.text),a.refineSearch(a.searchTag)},a.tagRemoved=function(b){a.searchTag.splice(a.searchTag.indexOf(b.text),1),a.refineSearch(a.searchTag)},a.refineSearch=function(b){a.newArr=[],angular.forEach(a.masterMemberList,function(c,d){if(null!=c.tagList)for(var e=0;e<b.length;e++){var f=c.tagList.indexOf(b[e]);f>=0&&a.newArr.push(c)}}),a.checkboxFilter()},a.includeCheck=function(b){var c=$.inArray(b,a.statusInclude);c>-1?a.statusInclude.splice(c,1):a.statusInclude.push(b),a.checkboxFilter()},a.checkboxFilter=function(b){a.statusInclude.length>0&&(a.checkBox=[],angular.forEach(a.masterMemberList,function(b,c){for(var d=0;d<a.statusInclude.length;d++)for(var e=0;e<b.roles[d].length;e++)b.roles[e]===a.statusInclude[d]&&a.checkBox.push(b)})),a.returnMemberList(a.pageSize)},a.searchTextFilter=function(b){a.textSearching=b,a.returnMemberList(a.pageSize)},a.enableCancel=function(a){return"undefined"!=typeof a&&a.length>1?!0:!1},a.clearSearch=function(){a.textSearching.length&&(a.textSearching="",a.searchText="",a.returnMemberList(a.pageSize))},a.active=function(a){var b=$(a.currentTarget);b.find("h4").hasClass("on")?b.find("h4").hasClass("reverseon")?b.find("h4").removeClass("reverseon"):b.find("h4").addClass("reverseon"):(b.parent().find(".tog h4").removeClass("on"),b.find("h4").addClass("on"))},a.returnMemberList=function(b){if(a.searchTag.length&&!a.statusInclude.length&&(a.memberList=angular.copy(a.newArr)),a.searchTag.length&&a.statusInclude.length){a.combineArray=[];for(var c=0;c<a.newArr.length;c++)for(var d=0;d<a.checkBox.length;d++)a.newArr[c].email===a.checkBox[d].email&&a.combineArray.push(a.newArr[c]);a.memberList=angular.copy(a.combineArray)}if(!a.searchTag.length&&a.statusInclude.length&&(a.memberList=angular.copy(a.checkBox)),a.searchTag.length||a.statusInclude.length||(a.memberList=angular.copy(a.masterMemberList)),a.textSearching.length>2){for(var e=[],f=0;f<a.memberList.length;f++)angular.lowercase(a.memberList[f].name).indexOf(angular.lowercase(a.textSearching))>-1&&e.push(a.memberList[f]);a.memberList=angular.copy(e)}b>=a.memberList.length?a.alldisplay=!0:a.alldisplay=!1,a.pageSize=b,a.memberList=a.memberList.slice(0,b)},a.checkAll=function(){a.checkedAll=!a.checkedAll,a.negative?a.userEmail.email=a.masterMemberList.map(function(a){return{email:a.email,name:a.name}}):a.userEmail.email=[]},a.deleteContact=function(b){var c,d=0;$.each(a.masterMemberList,function(e){a.masterMemberList[e].email===b&&(c=e,("ALREADY_EXISTS"===a.masterMemberList[e].userStatus||"ALREADY_EXISTS_ARCHIVED"===a.masterMemberList[e].userStatus)&&a.totalConflicts--),d++}),d===a.masterMemberList.length&&(a.masterMemberList.splice(c,1),a.memberList=angular.copy(a.masterMemberList),a.totalRecords=a.memberList.length,0===a.totalConflicts&&a.totalRecords<=a.availableSubscriptions&&(a.candidateCountException=!1,a.submitDisabled=!1))},a.resetfilter=function(b){a.pageSize=a.intialPageSize,a.newArr=[],a.searchTag=[],a.tags=[],a.filter={},a.userEmail.email=[],a.statusInclude=[],a.adminc=!1,a.leadC=!1,a.textSearching="",a.searchText="","undefined"!=typeof a.selectedSearch&&(a.selectedSearch.userStatus=""),a.memberList=angular.copy(a.masterMemberList),"undefined"!=typeof b&&(a.pageSize=a.masterMemberList.length),a.returnMemberList(a.pageSize),a.order("name",a.reverse);var c=$(".memberHolder").find(".heading .m-name");c.find("h4").hasClass("on")?c.find("h4").hasClass("reverseon")?c.find("h4").removeClass("reverseon"):c.find("h4").addClass("reverseon"):(c.parent().find(".tog h4").removeClass("on"),c.find("h4").addClass("on"))},a.deleteButton=function(){},a.confirmDelete=function(b){var c=$(b.target).closest(".complete-profile").find(".email").html(),d=angular.element(b.currentTarget),e={url:"/sp/hiring/deleteCandidate",data:$.param({candidateEmail:c})};f.getAjaxResponse(e).then(function(b){"true"===b.Success?(angular.forEach(a.masterMemberList,function(b,d){b.email===c&&a.masterMemberList.splice(d,1)}),angular.forEach(a.memberList,function(b,d){b.email===c&&a.memberList.splice(d,1)}),angular.forEach(a.checkBox,function(b,d){b.email===c&&a.checkBox.splice(d,1)}),a.searchTag.length&&angular.forEach(a.newArr,function(b,d){b.email===c&&a.newArr.splice(d,1)}),a.returnMemberList(a.pageSize),d.scope().moreadvance=!d.scope().moreadvance,a.deleteUser=!0,l(function(){a.deleteUser=!1},5e3)):(a.errorMessaage=b.error.InvalidRequestException,a.deleteUserError=!0,l(function(){a.deleteUserError=!1},5e3))})},a.deleteUsers=function(b){var c=[];jQuery.each(b,function(a,d){c.push(b[a].email)});var d={url:"/sp/hiring/deleteCandidate",data:$.param({candidateEmail:c.toString()})};f.getAjaxResponse(d).then(function(b){"true"===b.Success&&a.getMembersData()})},a.addClassActive=function(){a.dropUp=!a.dropUp},a.notificationEmail=function(b){b.length&&(k.setEmail(b),k.setObject(a.memberList),j.open({template:"return-visitor.html"}))},a.profileRoute=function(a){var b=$(a.currentTarget).data("routeparam");m.set("groupname",b),window.location.href="/sp/admin/group/#profile"},a.showFullList=function(){a.resetfilter("full")},a.editGroupSection=function(b){a.EditGroupEmail=this.memberList.email;var c=this.memberList.email;b="";for(var d=0;d<a.memberList.length;d++)c===a.memberList[d].email&&(b=d);a.setEditMode=!0,a.indexToChange=b,a.groupEditSection=angular.copy(a.memberList[b]),a.groupSelectOption=[];for(var e=0;e<a.groupEditSection.groupAssociationList.length;e++)a.groupSelectOption.push(a.groupEditSection.groupAssociationList[e].name);j.open({template:"/sp/admin/member/editGroup",scope:a})},a.enableLeadDialog=function(b,c,d){for(var e=0;e<a.mainGroupInfoList.length;e++)if(d===a.mainGroupInfoList[e].name){if(null!==a.mainGroupInfoList[e].groupLead&&a.mainGroupInfoList[e].groupLead.email!==a.EditGroupEmail)return!1;a.groupEditSection.groupAssociationList[c].groupLead=!b}},a.setStyle=function(b){return a.viewMode(),b===!0?!0:!1},a.isItEnabled=function(b,c){a.classActivate=[];for(var d=0;d<a.mainGroupInfoList.length;d++)b===a.mainGroupInfoList[d].name&&null!==a.mainGroupInfoList[d].groupLead&&a.mainGroupInfoList[d].groupLead.email!==a.EditGroupEmail&&(a.classActivate.push("#mode_"+c),a.classActivate.push("#modeprop_"+c))},a.viewMode=function(){if(a.classActivate.length)for(var b=0;b<a.classActivate.length;b++)$(a.classActivate[b]).addClass("disabled")},a.addGroupToModule=function(b,c){return a.selectedGroup=b,"default"===b?!1:(""===a.groupEditSection.groupAssociationList[0].name&&a.groupEditSection.groupAssociationList.splice(0,1),a.groupEditSection.groupAssociationList.push({name:b,groupLead:!1}),void a.groupSelectOption.push(b))},a.addGroupMember=function(a){return""===a?!1:!0},a.removeGroupDialog=function(b,c){for(var d=b.target,e=($(d).closest(".blockGroup").remove(),""),f=0;f<a.groupEditSection.groupAssociationList.length;f++)a.groupEditSection.groupAssociationList[f].name===c.name&&(a.groupEditSection.groupAssociationList.splice(f,1),e=f);a.groupSelectOption.splice(e,1)},a.saveGroupToModule=function(b){for(var c="",d=0;d<a.groupEditSection.groupAssociationList.length;d++)c=c.length?c+","+a.groupEditSection.groupAssociationList[d].name+":"+a.groupEditSection.groupAssociationList[d].groupLead:a.groupEditSection.groupAssociationList[d].name+":"+a.groupEditSection.groupAssociationList[d].groupLead;var e={url:"/sp/admin/group/memberGroupUpdate",data:$.param({groupAssociationList:c,memberEmail:a.groupEditSection.email})};f.getAjaxResponse(e).then(function(b){if("true"===b.Success){a.groupEditSection.groupAssociationList.length?a.memberList[a.indexToChange]=a.groupEditSection:(a.groupEditSection.groupAssociationList.push({name:"",groupLead:!1}),a.memberList[a.indexToChange]=a.groupEditSection);for(var c=0;c<a.masterMemberList.length;c++)a.masterMemberList[c].email===a.memberList[a.indexToChange].email&&(a.masterMemberList[c]=a.groupEditSection);j.close("ngdialog1"),j.open({template:"/sp/admin/member/confirmation"})}else j.close("ngdialog1"),j.open({template:"/sp/admin/member/errorGroup"})})},a.memberTakeAway=function(a,b){m.set("candidateEmail",a).set("candidateID",b),window.location.href="/sp/tools/hiring/profile"},a.updatedEmaiList=function(b){var c=b,d={membersToInvite:[],membersToAdd:[]},e=0;return $.each(c,function(b){$.each(a.memberList,function(e){a.memberList[e].email===c[b]&&null===a.memberList[e].spUserId?d.membersToInvite.push(c[b]):a.memberList[e].email===c[b]&&null!==a.memberList[e].spUserId&&null===a.memberList[e].existingCandidate&&d.membersToAdd.push(c[b])}),e++}),e===c.length?(parseInt(d.membersToInvite.length+d.membersToAdd.length)>a.availableSubscriptions?(a.submitDisabled=!0,a.candidateCountException=!0):(a.submitDisabled=!1,a.candidateCountException=!1),d):void 0},a.processImportList=function(b){console.log(b),a.noSelectionError=!1,a.importCandidateForm.submitted=!1;var c,d={};if(a.importCandidateForm.$valid)if("all"===b.options)c=a.updatedEmaiList(a.allMembersEmailId),console.log("emailist : ",c),d={membersToInvite:c.membersToInvite.toString(),membersToAdd:c.membersToAdd.toString(),day:"undefined"!=typeof b.dueDate?b.dueDate.getDate():0,month:"undefined"!=typeof b.dueDate?b.dueDate.getMonth()+1:0,year:"undefined"!=typeof b.dueDate?b.dueDate.getFullYear():0},c.membersToInvite.length>0||c.membersToAdd.length>0?(a.noEmailsError=!1,a.submitDisabled=!1,a.addInviteMultipleCandidates(d)):(a.noEmailsError=!0,a.importCandidateForm.submitted=!0);else{var e=[],f=0;$.each(a.userEmail.email,function(b){e.push(a.userEmail.email[b].email),f++}),f===a.userEmail.email.length&&(c=a.updatedEmaiList(e),d={membersToInvite:c.membersToInvite.toString(),membersToAdd:c.membersToAdd.toString(),day:"undefined"!=typeof b.dueDate?b.dueDate.getDate():0,month:"undefined"!=typeof b.dueDate?b.dueDate.getMonth()+1:0,year:"undefined"!=typeof b.dueDate?b.dueDate.getFullYear():0},c.membersToInvite.length>0||c.membersToAdd.length>0?(a.noEmailsError=!1,a.addInviteMultipleCandidates(d)):(a.noEmailsError=!0,a.importCandidateForm.submitted=!0))}else a.importCandidateForm.submitted=!0},a.addInviteMultipleCandidates=function(a){var b={url:"/sp/hiring/multiInvite",data:$.param(a)};f.getAjaxResponse(b).then(function(a){"true"===a.Success&&0===a.error.length&&(m.set("gNotify","import"),console.log("response : ",a),setTimeout(function(){window.location="/sp/tools/hiring/"},100))})},a.candidateCompare=function(a,b){m.set("candidateEmail",a).set("candidateID",b),window.location.href="/sp/tools/hiring/compare"},a.candidateAdvisor=function(a,b){m.set("candidateEmail",a).set("candidateID",b),window.location.href="/sp/tools/hiring/advisor"},a.calltoAction=function(a){return""===a?!1:void(window.location.href=a)},a.archiveDialog=function(b,c,d){a.archiveCandidate={name:c,email:b,roles:d},j.open({template:"/sp/resources/html/tools/hiring/archive-candidate.html",scope:a})},a.archiveAllCandidate=function(b,c,d){var e=[];d!==!0?jQuery.each(b,function(a,c){e.push(b[a].email)}):e=b;var g={url:"/sp/hiring/archiveCandidate",data:$.param({candidateEmail:e.toString(),isHired:c})};f.getAjaxResponse(g).then(function(b){"true"===b.Success&&(j.close("ngdialog1"),$.growl({icon:"glyphicon glyphicon-ok",title:"<strong> Candidate</strong>",message:" archived successfully"}),a.getMembersData(),a.negative=!a.negative)})},a.archiveAllDialog=function(b){b.length>0&&(a.archiveCandidateAll={emails:b},j.open({template:"/sp/resources/html/tools/hiring/archive-candidate-list.html",scope:a}))},a.sendViewProfileRequest=function(b,c){a.profileRequest={email:b,name:c,heading:"Request Access"},j.open({template:"/sp/resources/html/tools/hiring/send-profile-invite.html",scope:a}),a.sendRequest=function(a){var b={url:"/sp/notifications/sendNotification",data:$.param({memberEmail:a,type:""}).replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(a){"true"!==a.Success&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:"Not able to send invite"})})}},a.getArchiveCandidateList=function(){var b={url:"/sp/hiring/getAllArchivedCandidates"};f.getAjaxResponse(b).then(function(b){"true"===b.Success&&(b["hiring-archived"].length>0?a.showArchive=!0:a.showArchive=!1)})},a.sendReminder=function(b,c){a.profileRequest={email:b,name:c,heading:"Reminder"},j.open({template:"/sp/resources/html/tools/hiring/send-profile-invite.html",scope:a}),a.sendRequest=function(a){var b={url:"/sp/notifications/sendNotification",data:$.param({memberEmail:a,type:""}).replace(/%40/g,"@")};f.getAjaxResponse(b).then(function(a){"true"!==a.Success&&$.growl({icon:"glyphicon glyphicon-ban-circle",title:"<strong> Alert </strong> ",message:"Not able to send invite"})})}}}function notification(a,b){a.name=[];var c=b.getObject(),d=b.getEmail();a.emailId=d,angular.forEach(c,function(b,c){for(var e=0;e<d.length;e++)d[e]===b.email&&a.name.push(b.name)})}angular.module("spApp").controller("validateImportedListController",validateImportedListController),angular.module("spApp").controller("notification",notification),validateImportedListController.$inject=["$scope","$q","$element","$attrs","$http","ajaxService","$location","$state","$filter","ngDialog","sharedProperties","$timeout","$localStorage"],notification.$inject=["$scope","sharedProperties"];
function verifyEmailController(a,b,c,d,e,f,g){a.verifyEmailForm={},a.verifyEmailError=!1,a.verifyEmail=function(b){a.verifyEmailError=!1,a.verifyEmailForm.submitted=!1,a.verifyEmailForm.$valid?(a.verifyEmailForm.submitted=!1,d.getAjaxResponse({url:"/sp/profileCopy/copyAssessment",data:$.param({copyFromEmail:b.email}).replace(/%40/g,"@")}).then(function(c){"true"===c.Success?(a.verifyEmailError=!1,g.set("verifiedEmail",b.email),window.location.href="/sp/profileCopy/verifyEmailInvite"):a.verifyEmailError=!0})):a.verifyEmailForm.submitted=!0},a.getVerifyedEmail=function(){a.vEmail=g.get("verifiedEmail")},a.authorizeCopyProfile=function(){d.getAjaxResponse({url:"/sp/profileCopy/authorizeCopyProfile"}).then(function(a){"true"===a.Success?window.location.href="/sp/profileCopy/verifySuccess":window.location.href="/sp/profileCopy/verifyFailed"})}}angular.module("spApp").controller("verifyEmailController",verifyEmailController),verifyEmailController.$inject=["$scope","$element","$attrs","ajaxService","$rootScope","sharedProperties","$localStorage"];